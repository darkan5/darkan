;var pipwerks={};pipwerks.UTILS={};pipwerks.debug={isActive:true};pipwerks.SCORM={version:null,handleCompletionStatus:true,handleExitMode:true,API:{handle:null,isFound:false},connection:{isActive:false},data:{completionStatus:null,exitStatus:null},debug:{}};pipwerks.SCORM.isAvailable=function(){return true;};pipwerks.SCORM.API.find=function(win){var API=null,findAttempts=0,findAttemptLimit=500,traceMsgPrefix="SCORM.API.find",trace=pipwerks.UTILS.trace,scorm=pipwerks.SCORM;while((!win.API&&!win.API_1484_11)&&(win.parent)&&(win.parent!=win)&&(findAttempts<=findAttemptLimit)){findAttempts++;win=win.parent;}
if(scorm.version){switch(scorm.version){case"2004":if(win.API_1484_11){API=win.API_1484_11;}else{trace(traceMsgPrefix+": SCORM version 2004 was specified by user, but API_1484_11 cannot be found.");}
break;case"1.2":if(win.API){API=win.API;}else{trace(traceMsgPrefix+": SCORM version 1.2 was specified by user, but API cannot be found.");}
break;}}else{if(win.API_1484_11){scorm.version="2004";API=win.API_1484_11;}else if(win.API){scorm.version="1.2";API=win.API;}}
if(API){trace(traceMsgPrefix+": API found. Version: "+scorm.version);trace("API: "+API);}else{trace(traceMsgPrefix+": Error finding API. \nFind attempts: "+findAttempts+". \nFind attempt limit: "+findAttemptLimit);}
return API;};pipwerks.SCORM.API.get=function(){var API=null,win=window,find=pipwerks.SCORM.API.find,trace=pipwerks.UTILS.trace;if(win.parent&&win.parent!=win){API=find(win.parent);}
if(!API&&win.top.opener){API=find(win.top.opener);}
if(API){pipwerks.SCORM.API.isFound=true;}else{trace("API.get failed: Can't find the API!");}
return API;};pipwerks.SCORM.API.getHandle=function(){var API=pipwerks.SCORM.API;if(!API.handle&&!API.isFound){API.handle=API.get();}
return API.handle;};pipwerks.SCORM.connection.initialize=function(){var success=false,scorm=pipwerks.SCORM,completionStatus=pipwerks.SCORM.data.completionStatus,trace=pipwerks.UTILS.trace,makeBoolean=pipwerks.UTILS.StringToBoolean,debug=pipwerks.SCORM.debug,traceMsgPrefix="SCORM.connection.initialize ";trace("connection.initialize called.");if(!scorm.connection.isActive){var API=scorm.API.getHandle(),errorCode=0;if(API){switch(scorm.version){case"1.2":success=makeBoolean(API.LMSInitialize(""));break;case"2004":success=makeBoolean(API.Initialize(""));break;}
if(success){errorCode=debug.getCode();if(errorCode!==null&&errorCode===0){scorm.connection.isActive=true;if(scorm.handleCompletionStatus){completionStatus=pipwerks.SCORM.status("get");if(completionStatus){switch(completionStatus){case"not attempted":pipwerks.SCORM.status("set","incomplete");break;case"unknown":pipwerks.SCORM.status("set","incomplete");break;}}}}else{success=false;trace(traceMsgPrefix+"failed. \nError code: "+errorCode+" \nError info: "+debug.getInfo(errorCode));}}else{errorCode=debug.getCode();if(errorCode!==null&&errorCode!==0){trace(traceMsgPrefix+"failed. \nError code: "+errorCode+" \nError info: "+debug.getInfo(errorCode));}else{trace(traceMsgPrefix+"failed: No response from server.");}}}else{trace(traceMsgPrefix+"failed: API is null.");}}else{trace(traceMsgPrefix+"aborted: Connection already active.");}
return success;};pipwerks.SCORM.connection.terminate=function(){var success=false,scorm=pipwerks.SCORM,exitStatus=pipwerks.SCORM.data.exitStatus,completionStatus=pipwerks.SCORM.data.completionStatus,trace=pipwerks.UTILS.trace,makeBoolean=pipwerks.UTILS.StringToBoolean,debug=pipwerks.SCORM.debug,traceMsgPrefix="SCORM.connection.terminate ";if(scorm.connection.isActive){var API=scorm.API.getHandle(),errorCode=0;if(API){if(scorm.handleExitMode&&!exitStatus){if(completionStatus!=="completed"&&completionStatus!=="passed"){switch(scorm.version){case"1.2":success=scorm.set("cmi.core.exit","suspend");break;case"2004":success=scorm.set("cmi.exit","suspend");break;}}else{switch(scorm.version){case"1.2":success=scorm.set("cmi.core.exit","logout");break;case"2004":success=scorm.set("cmi.exit","normal");break;}}}
switch(scorm.version){case"1.2":success=makeBoolean(API.LMSFinish(""));break;case"2004":success=makeBoolean(API.Terminate(""));break;}
if(success){scorm.connection.isActive=false;}else{errorCode=debug.getCode();trace(traceMsgPrefix+"failed. \nError code: "+errorCode+" \nError info: "+debug.getInfo(errorCode));}}else{trace(traceMsgPrefix+"failed: API is null.");}}else{trace(traceMsgPrefix+"aborted: Connection already terminated.");}
return success;};pipwerks.SCORM.data.get=function(parameter){var value=null,scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,debug=pipwerks.SCORM.debug,traceMsgPrefix="SCORM.data.get("+parameter+") ";if(scorm.connection.isActive){var API=scorm.API.getHandle(),errorCode=0;if(API){switch(scorm.version){case"1.2":value=API.LMSGetValue(parameter);break;case"2004":value=API.GetValue(parameter);break;}
errorCode=debug.getCode();if(value!==""&&errorCode===0){switch(parameter){case"cmi.core.lesson_status":case"cmi.completion_status":scorm.data.completionStatus=value;break;case"cmi.core.exit":case"cmi.exit":scorm.data.exitStatus=value;break;}}else{trace(traceMsgPrefix+"failed. \nError code: "+errorCode+"\nError info: "+debug.getInfo(errorCode));}}else{trace(traceMsgPrefix+"failed: API is null.");}}else{trace(traceMsgPrefix+"failed: API connection is inactive.");}
trace(traceMsgPrefix+" value: "+value);return String(value);};pipwerks.SCORM.data.set=function(parameter,value){var success=false,scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,makeBoolean=pipwerks.UTILS.StringToBoolean,debug=pipwerks.SCORM.debug,traceMsgPrefix="SCORM.data.set("+parameter+") ";if(scorm.connection.isActive){var API=scorm.API.getHandle(),errorCode=0;if(API){switch(scorm.version){case"1.2":success=makeBoolean(API.LMSSetValue(parameter,value));break;case"2004":success=makeBoolean(API.SetValue(parameter,value));break;}
if(success){if(parameter==="cmi.core.lesson_status"||parameter==="cmi.completion_status"){scorm.data.completionStatus=value;}}else{trace(traceMsgPrefix+"failed. \nError code: "+errorCode+". \nError info: "+debug.getInfo(errorCode));}}else{trace(traceMsgPrefix+"failed: API is null.");}}else{trace(traceMsgPrefix+"failed: API connection is inactive.");}
return success;};pipwerks.SCORM.data.save=function(){var success=false,scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,makeBoolean=pipwerks.UTILS.StringToBoolean,traceMsgPrefix="SCORM.data.save failed";if(scorm.connection.isActive){var API=scorm.API.getHandle();if(API){switch(scorm.version){case"1.2":success=makeBoolean(API.LMSCommit(""));break;case"2004":success=makeBoolean(API.Commit(""));break;}}else{trace(traceMsgPrefix+": API is null.");}}else{trace(traceMsgPrefix+": API connection is inactive.");}
return success;};pipwerks.SCORM.status=function(action,status){var success=false,scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,traceMsgPrefix="SCORM.getStatus failed",cmi="";if(action!==null){switch(scorm.version){case"1.2":cmi="cmi.core.lesson_status";break;case"2004":cmi="cmi.completion_status";break;}
switch(action){case"get":success=pipwerks.SCORM.data.get(cmi);break;case"set":if(status!==null){success=pipwerks.SCORM.data.set(cmi,status);}else{success=false;trace(traceMsgPrefix+": status was not specified.");}
break;default:success=false;trace(traceMsgPrefix+": no valid action was specified.");}}else{trace(traceMsgPrefix+": action was not specified.");}
return success;};pipwerks.SCORM.debug.getCode=function(){var API=pipwerks.SCORM.API.getHandle(),scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,code=0;if(API){switch(scorm.version){case"1.2":code=parseInt(API.LMSGetLastError(),10);break;case"2004":code=parseInt(API.GetLastError(),10);break;}}else{trace("SCORM.debug.getCode failed: API is null.");}
return code;};pipwerks.SCORM.debug.getInfo=function(errorCode){var API=pipwerks.SCORM.API.getHandle(),scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,result="";if(API){switch(scorm.version){case"1.2":result=API.LMSGetErrorString(errorCode.toString());break;case"2004":result=API.GetErrorString(errorCode.toString());break;}}else{trace("SCORM.debug.getInfo failed: API is null.");}
return String(result);};pipwerks.SCORM.debug.getDiagnosticInfo=function(errorCode){var API=pipwerks.SCORM.API.getHandle(),scorm=pipwerks.SCORM,trace=pipwerks.UTILS.trace,result="";if(API){switch(scorm.version){case"1.2":result=API.LMSGetDiagnostic(errorCode);break;case"2004":result=API.GetDiagnostic(errorCode);break;}}else{trace("SCORM.debug.getDiagnosticInfo failed: API is null.");}
return String(result);};pipwerks.SCORM.init=pipwerks.SCORM.connection.initialize;pipwerks.SCORM.get=pipwerks.SCORM.data.get;pipwerks.SCORM.set=pipwerks.SCORM.data.set;pipwerks.SCORM.save=pipwerks.SCORM.data.save;pipwerks.SCORM.quit=pipwerks.SCORM.connection.terminate;pipwerks.UTILS.StringToBoolean=function(string){switch(string.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(string);}};pipwerks.UTILS.trace=function(msg){if(pipwerks.debug.isActive){if(window.console&&window.console.firebug){console.log(msg);}else{}}};;;var lang={};lang['en']={};lang['en']['PUB_PAGE']='page';lang['en']['PUB_LINK']='Hyperlink';lang['en']['PUB_SOUND']='Sound';lang['en']['PUB_GALLERY']='Gallery';lang['en']['PUB_SELECTION']='Important area';lang['en']['PUB_POPUP']='Additional info';lang['en']['PUB_PICTURE']='Graphic';lang['en']['PUB_MASK']='Mask';lang['en']['PUB_SWF']='Flash animation';lang['en']['PUB_TEXT']='Text';lang['en']['PUB_DEFAULT']='Element to pass';lang['en']['TOC_TITLE']='Table of contents';lang['en']['PUB_QUIZ_MULTISELECT']='Exercise';lang['en']['PUB_QUIZ_RESULTS']='Quiz result';lang['en']['PUB_LASTPAGE']='Do you want to start where you left off? (page ';lang['en']['PUB_LASTPAGE_CONTINUE']='Continue?';lang['en']['POINTS_FEEDBACK_GOOD']='Good answer!';lang['en']['POINTS_FEEDBACK_BAD']='Bad answer.';lang['en']['POINTS_FEEDBACK_1']='Earned';lang['en']['POINTS_FEEDBACK_2']='points. Total:';lang['en']['POINTS_FEEDBACK_3']='points.';lang['en']['ATTEMPTS_FEEDBACK']='Attempts left:';lang['en']['QRESULTS_FEEDBACK_BAD']='Sorry. Quiz is not passed.';lang['en']['QRESULTS_FEEDBACK_GOOD']='Congratulations! You passed the quiz.';lang['en']['PUB_CANCEL']='Cancel';lang['en']['ANSWER_QUESTIONS_FIRST']='Answer is not selected'
lang['en']['ANSWER_ALL_QUESTIONS_FIRST']='Fill all answers please';lang['en']['ANSWER_QUESTIONS_DND_FIRST']='Answer question first please';lang['en']['ANSWER_ALL_QUESTIONS_FIRST_QCL']='No answer has been connected';lang['en']['MOBILE_STARTBTN']='Start';lang['en']['MEMORY_ERROR_NOELEMENTS']='Memory question error. No elements added.';lang['en']['MEMORY_ERROR_NOOVERLAY']='Memory question error. Overlay element is not selected.';lang['en']['CROSSWORD_PLAY_AUDIO']='Play sound';lang['en']['WARNING']='Warning!';lang['en']['CROSSWORD']='crossword';lang['en']['CROSSWORD_ERROR']='Warning! Not detected any answer. Check question arrows again. Crossword may not work properly.';lang['en']['WORDSEARCH_ERROR']='Warning! Not detected any answer. Check table with answers in question properties . Wordsearch may not work properly.';lang['en']['QUIZ_ATTEMPTS']='Attempts left: ';lang['pl']={};lang['pl']['PUB_PAGE']='strona';lang['pl']['PUB_LINK']='Hiperłącze';lang['pl']['PUB_SOUND']='Dźwięk';lang['pl']['PUB_GALLERY']='Galeria';lang['pl']['PUB_SELECTION']='Ważny obszar';lang['pl']['PUB_POPUP']='Dodatkowe informacje';lang['pl']['PUB_PICTURE']='Grafika';lang['pl']['PUB_MASK']='Zakrycie obszaru';lang['pl']['PUB_SWF']='Animacja flash';lang['pl']['PUB_TEXT']='Tekst';lang['pl']['PUB_DEFAULT']='Punkt do zaliczenia';lang['pl']['TOC_TITLE']='Spis treści';lang['pl']['PUB_QUIZ_MULTISELECT']='Ćwiczenie';lang['pl']['PUB_QUIZ_RESULTS']='Wyniki szkolenia';lang['pl']['PUB_LASTPAGE']='Czy chcesz zacząć od ostatnio odwiedzanej strony? (strona ';lang['pl']['PUB_LASTPAGE_CONTINUE']='Kontynuować?';lang['pl']['POINTS_FEEDBACK_GOOD']='To jest prawidłowa odpowiedź.';lang['pl']['POINTS_FEEDBACK_BAD']='To nie jest prawidłowa odpowiedź.';lang['pl']['POINTS_FEEDBACK_1']='Zdobyłeś';lang['pl']['POINTS_FEEDBACK_2']='pkt. Razem:';lang['pl']['POINTS_FEEDBACK_3']='pkt.';lang['pl']['ATTEMPTS_FEEDBACK']='Pozostała liczba prób:';lang['pl']['QRESULTS_FEEDBACK_BAD']='Nie osiągnąłeś wystarczającej liczby punktów.';lang['pl']['QRESULTS_FEEDBACK_GOOD']='Gratulacje! Zdałeś quiz.';lang['pl']['PUB_CANCEL']='Anuluj';lang['pl']['ANSWER_QUESTIONS_FIRST']='Nie zaznaczono żadnej odpowiedzi';lang['pl']['ANSWER_ALL_QUESTIONS_FIRST']='Proszę uzupełnić wszystkie odpowiedzi';lang['pl']['ANSWER_QUESTIONS_DND_FIRST']='Nie udzielono żadnej odpowiedzi';lang['pl']['MOBILE_STARTBTN']='Rozpocznij szkolenie';lang['pl']['ANSWER_ALL_QUESTIONS_FIRST_QCL']='Nie połączono żadnych odpowiedzi';lang['pl']['MEMORY_ERROR_NOELEMENTS']='Błąd memory! Brak elementów.';lang['pl']['MEMORY_ERROR_NOOVERLAY']='Błąd memory! Nie wybrano żadnego elementu jako okładka.';lang['pl']['CROSSWORD_PLAY_AUDIO']='Odtwórz dźwięk';lang['pl']['WARNING']='Uwaga!';lang['pl']['CROSSWORD']='krzyżówka';lang['pl']['CROSSWORD_ERROR']='Uwaga! Nie wykryto żadnej poprawnej odpowiedzi. Sprawdź strzałki przypisane do pytań. Krzyżówka może działać nieprawidłowo.';lang['pl']['WORDSEARCH_ERROR']='Uwaga! Nie wykryto żadnej poprawnej odpowiedzi. Sprawdź tabelę z odpowiedziami we właściwościach pytania. Ćwiczenie może działać nieprawidłowo.';lang['pl']['QUIZ_ATTEMPTS']='Pozostała ilość podejść: ';;;;(function(window,document){var version='3.6.2';var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando='_html5shiv';var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement('a');a.innerHTML='<xyz></xyz>';supportsHtml5Styles=('hidden'in a);supportsUnknownElements=a.childNodes.length==1||(function(){(document.createElement)('a');var frag=document.createDocumentFragment();return(typeof frag.cloneNode=='undefined'||typeof frag.createDocumentFragment=='undefined'||typeof frag.createElement=='undefined');}());}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true;}}());function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement('p'),parent=ownerDocument.getElementsByTagName('head')[0]||ownerDocument.documentElement;p.innerHTML='x<style>'+cssText+'</style>';return parent.insertBefore(p.lastChild,parent.firstChild);}
function getElements(){var elements=html5.elements;return typeof elements=='string'?elements.split(' '):elements;}
function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data;}
return data;}
function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document;}
if(supportsUnknownElements){return ownerDocument.createElement(nodeName);}
if(!data){data=getExpandoData(ownerDocument);}
var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode();}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode();}else{node=data.createElem(nodeName);}
return node.canHaveChildren&&!reSkip.test(nodeName)?data.frag.appendChild(node):node;}
function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document;}
if(supportsUnknownElements){return ownerDocument.createDocumentFragment();}
data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i]);}
return clone;}
function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag();}
ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName);}
return createElement(nodeName,ownerDocument,data);};ownerDocument.createDocumentFragment=Function('h,f','return function(){'+'var n=f.cloneNode(),c=n.createElement;'+'h.shivMethods&&('+
getElements().join().replace(/\w+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")';})+');return n}')(html5,data.frag);}
function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document;}
var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}'+'mark{background:#FF0;color:#000}'+'template{display:none}');}
if(!supportsUnknownElements){shivMethods(ownerDocument,data);}
return ownerDocument;}
var html5={'elements':options.elements||'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video','version':version,'shivCSS':(options.shivCSS!==false),'supportsUnknownElements':supportsUnknownElements,'shivMethods':(options.shivMethods!==false),'type':'default','shivDocument':shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment};window.html5=html5;shivDocument(document);}(this,document));;;!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});;;(function(e,t){function i(t,i){var s,a,o,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,a=s.name,t.href&&a&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+a+"]")[0],!!o&&n(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,s,a=e(this[0]);a.length&&a[0]!==document;){if(n=a.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(a.css("zIndex"),10),!isNaN(s)&&0!==s))return s;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function s(t,i,n,s){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?r["inner"+n].call(this):this.each(function(){e(this).css(o,s(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?r["outer"+n].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,a=e.ui[t].prototype;for(s in n)a.plugins[s]=a.plugins[s]||[],a.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;s.length>n;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0?!0:(t[n]=1,s=t[n]>0,t[n]=0,s)}})})(jQuery);(function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(o){}n(e)},t.widget=function(i,s,n){var o,a,r,h,l={},c=i.split(".")[0];i=i.split(".")[1],o=c+"-"+i,n||(n=s,s=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},a=t[c][i],r=t[c][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(n,function(i,n){return t.isFunction(n)?(l[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,o=this._superApply;return this._super=t,this._superApply=e,i=n.apply(this,arguments),this._super=s,this._superApply=o,i}}(),e):(l[i]=n,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},l,{constructor:r,namespace:c,widgetName:i,widgetFullName:o}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var n,o,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(n in a[r])o=a[r][n],a[r].hasOwnProperty(n)&&o!==e&&(i[n]=t.isPlainObject(o)?t.isPlainObject(i[n])?t.widget.extend({},i[n],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,n){var o=n.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),l=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,n=t.data(this,o);return n?t.isFunction(n[a])&&"_"!==a.charAt(0)?(s=n[a].apply(n,h),s!==n&&s!==e?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new n(a,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;n.length-1>a;a++)o[n[a]]=o[n[a]]||{},o=o[n[a]];if(i=n.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,n){var o,a=this;"boolean"!=typeof i&&(n=s,s=i,i=!1),n?(s=o=t(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,o=this.widget()),t.each(n,function(n,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.delegate(u,c,h):s.bind(c,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,o,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(n in o)n in i||(i[n]=o[n]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),a=!t.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&t.effects&&t.effects.effect[r]?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(i){t(this)[e](),o&&o.call(s[0]),i()})}})})(jQuery);(function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a="string"==typeof this.options.cancel&&i.target.nodeName?t(i.target).closest(this.options.cancel).length:!1;return n&&!a&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,l=Math.round,h=/left|center|right/,c=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),s=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,g,m,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),k=t.position.getScrollInfo(y),w=(e.collision||"flip").split(" "),D={};return _=n(b),b[0].preventDefault&&(e.at="left top"),p=_.width,g=_.height,m=_.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=h.test(s[0])?s.concat(["center"]):c.test(s[0])?["center"].concat(s):["center","center"]),s[0]=h.test(s[0])?s[0]:"center",s[1]=c.test(s[1])?s[1]:"center",t=u.exec(s[0]),i=u.exec(s[1]),D[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),a=i(D.at,p,g),v.left+=a[0],v.top+=a[1],this.each(function(){var n,h,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),x=u+f+s(this,"marginRight")+k.width,C=d+_+s(this,"marginBottom")+k.height,M=t.extend({},v),T=i(D.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?M.left-=u:"center"===e.my[0]&&(M.left-=u/2),"bottom"===e.my[1]?M.top-=d:"center"===e.my[1]&&(M.top-=d/2),M.left+=T[0],M.top+=T[1],t.support.offsetFractions||(M.left=l(M.left),M.top=l(M.top)),n={marginLeft:f,marginTop:_},t.each(["left","top"],function(i,s){t.ui.position[w[i]]&&t.ui.position[w[i]][s](M,{targetWidth:p,targetHeight:g,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:x,collisionHeight:C,offset:[a[0]+T[0],a[1]+T[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&&(h=function(t){var i=m.left-M.left,s=i+p-u,n=m.top-M.top,a=n+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:M.left,top:M.top,width:u,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>a?"top":n>0?"bottom":"middle"};u>p&&p>r(i+s)&&(l.horizontal="center"),d>g&&g>r(n+a)&&(l.vertical="middle"),l.important=o(r(i),r(s))>o(r(n),r(a))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(M,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-a-n;e.collisionWidth>a?l>0&&0>=h?(i=t.left+l+e.collisionWidth-a-n,t.left+=l-i):t.left=h>0&&0>=l?n:l>h?n+a-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-a-n;e.collisionHeight>a?l>0&&0>=h?(i=t.top+l+e.collisionHeight-a-n,t.top+=l-i):t.top=h>0&&0>=l?n:l>h?n+a-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-o-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0>i||r(c)>i)&&(t.left+=d+p+f)):u>0&&(s=t.left-e.collisionPosition.marginLeft+d+p+f-l,(s>0||u>r(s))&&(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-o-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(s=t.top+p+f+g+e.collisionHeight-o-a,t.top+p+f+g>c&&(0>s||r(c)>s)&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>u&&(i>0||u>r(i))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&11>n,e.innerHTML="",i.removeChild(e)}()})(jQuery);(function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;return n.containment?"window"===n.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===n.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):n.containment.constructor===Array?(this.containment=n.containment,undefined):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=t(n.containment),s=i[0],s&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(e){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,h=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("ui-draggable"),n=s.options,a=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))})},stop:function(e,i){var s=t(this).data("ui-draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("ui-draggable"),n=this;t.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){var s,n,a,o,r,l,h,c,u,d,p=t(this).data("ui-draggable"),g=p.options,f=g.snapTolerance,m=i.offset.left,_=m+p.helperProportions.width,v=i.offset.top,b=v+p.helperProportions.height;for(u=p.snapElements.length-1;u>=0;u--)r=p.snapElements[u].left,l=r+p.snapElements[u].width,h=p.snapElements[u].top,c=h+p.snapElements[u].height,r-f>_||m>l+f||h-f>b||v>c+f||!t.contains(p.snapElements[u].item.ownerDocument,p.snapElements[u].item)?(p.snapElements[u].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=!1):("inner"!==g.snapMode&&(s=f>=Math.abs(h-b),n=f>=Math.abs(c-v),a=f>=Math.abs(r-_),o=f>=Math.abs(l-m),s&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=s||n||a||o,"outer"!==g.snapMode&&(s=f>=Math.abs(h-v),n=f>=Math.abs(c-b),a=f>=Math.abs(r-m),o=f>=Math.abs(l-_),s&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[u].snapping&&(s||n||a||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[u].item})),p.snapElements[u].snapping=s||n||a||o||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,s=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(e=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("ui-draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})})(jQuery);(function(t){function e(t,e,i){return t>e&&e+i>t}t.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(s)?s:function(t){return t.is(s)},this.proportions=function(){return arguments.length?(e=arguments[0],undefined):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},t.ui.ddmanager.droppables[i.scope]=t.ui.ddmanager.droppables[i.scope]||[],t.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=0,i=t.ui.ddmanager.droppables[this.options.scope];i.length>e;e++)i[e]===this&&i.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){"accept"===e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"ui-droppable");return e.options.greedy&&!e.options.disabled&&e.options.scope===s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(n=!0,!1):undefined}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(t,i,s){if(!i.offset)return!1;var n,a,o=(t.positionAbs||t.position.absolute).left,r=(t.positionAbs||t.position.absolute).top,l=o+t.helperProportions.width,h=r+t.helperProportions.height,c=i.offset.left,u=i.offset.top,d=c+i.proportions().width,p=u+i.proportions().height;switch(s){case"fit":return o>=c&&d>=l&&r>=u&&p>=h;case"intersect":return o+t.helperProportions.width/2>c&&d>l-t.helperProportions.width/2&&r+t.helperProportions.height/2>u&&p>h-t.helperProportions.height/2;case"pointer":return n=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,a=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,e(a,u,i.proportions().height)&&e(n,c,i.proportions().width);case"touch":return(r>=u&&p>=r||h>=u&&p>=h||u>r&&h>p)&&(o>=c&&d>=o||l>=c&&d>=l||c>o&&l>d);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s,n,a=t.ui.ddmanager.droppables[e.options.scope]||[],o=i?i.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||e&&!a[s].accept.call(a[s].element[0],e.currentItem||e.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue t}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(e,i){var s=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=t.ui.intersect(e,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return t.data(this,"ui-droppable").options.scope===n}),a.length&&(s=t.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}})(jQuery);(function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;e.length>i;i++)s=t.trim(e[i]),a="ui-resizable-"+s,n=t("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(e){var i,s,n,a;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(n,a),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,n=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=e(this.helper.css("left")),n=e(this.helper.css("top")),o.containment&&(s+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===a?this.axis+"-resize":a),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(e){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,h=this.position.left,l=this.size.width,c=this.size.height,u=e.pageX-a.left||0,d=e.pageY-a.top||0,p=this._change[o];return p?(i=p.apply(this,[e,u,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==h&&(n.left=this.position.left+"px"),this.size.width!==l&&(n.width=this.size.width+"px"),this.size.height!==c&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&t.ui.hasScroll(i[0],"left")?0:c.sizeDiff.height,a=s?0:c.sizeDiff.width,o={width:c.helper.width()-a,height:c.helper.height()-n},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,h=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(t.extend(o,{top:h,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:1/0,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),o.maxWidth>s&&(o.maxWidth=s),o.maxHeight>a&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,s=this.axis,n=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,a=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=i(t.width)&&e.minWidth&&e.minWidth>t.width,r=i(t.height)&&e.minHeight&&e.minHeight>t.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,c=/sw|nw|w/.test(s),u=/nw|ne|n/.test(s);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),a&&(t.height=e.maxHeight),o&&c&&(t.left=h-e.minWidth),n&&c&&(t.left=h-e.maxWidth),r&&u&&(t.top=l-e.minHeight),a&&u&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,n,a=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(n=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],e=0;i.length>e;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(h,c&&l?{top:c,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,h,l=t(this).data("ui-resizable"),c=l.options,u=l.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?u.parent().get(0):d;p&&(l.containerElement=t(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(i=t(p),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){s[t]=e(i.css("padding"+n))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=l.containerOffset,a=l.containerSize.height,o=l.containerSize.width,r=t.ui.hasScroll(p,"left")?p.scrollWidth:o,h=t.ui.hasScroll(p)?p.scrollHeight:a,l.parentData={element:p,left:n.left,top:n.top,width:r,height:h}))},resize:function(e){var i,s,n,a,o=t(this).data("ui-resizable"),r=o.options,h=o.containerOffset,l=o.position,c=o._aspectRatio||e.shiftKey,u={top:0,left:0},d=o.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(u=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-u.left),c&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),c&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?h.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-u.left:o.offset.left-u.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-u.top:o.offset.top-h.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=Math.abs(o.parentData.left)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,c&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,c&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.containerOffset,n=e.containerPosition,a=e.containerElement,o=t(e.helper),r=o.offset(),h=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l}),e._helper&&!i.animate&&/static/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(a[e]=i||null)}),e.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):t.each(n.alsoResize,function(t,e){h(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),i=e.options,s=e.size,n=e.originalSize,a=e.originalPosition,o=e.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=r[0]||1,l=r[1]||1,c=Math.round((s.width-n.width)/h)*h,u=Math.round((s.height-n.height)/l)*l,d=n.width+c,p=n.height+u,f=i.maxWidth&&d>i.maxWidth,g=i.maxHeight&&p>i.maxHeight,m=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=r,m&&(d+=h),v&&(p+=l),f&&(d-=h),g&&(p-=l),/^(se|s|e)$/.test(o)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(o)?(e.size.width=d,e.size.height=p,e.position.top=a.top-u):/^(sw)$/.test(o)?(e.size.width=d,e.size.height=p,e.position.left=a.left-c):(p-l>0?(e.size.height=p,e.position.top=a.top-u):(e.size.height=l,e.position.top=a.top+n.height-l),d-h>0?(e.size.width=d,e.position.left=a.left-c):(e.size.width=h,e.position.left=a.left+n.width-h))}})})(jQuery);(function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e=t(i.options.filter,i.element[0]),e.addClass("ui-selectee"),e.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this,s=this.options;this.opos=[e.pageX,e.pageY],this.options.disabled||(this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().addBack().each(function(){var s,n=t.data(this,"selectable-item");return n?(s=!e.metaKey&&!e.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",e,{selecting:n.element}):i._trigger("unselecting",e,{unselecting:n.element}),!1):undefined}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=e.pageX,l=e.pageY;return a>r&&(i=r,r=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:l-o}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),h=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?h=!(i.left>r||a>i.right||i.top>l||o>i.bottom):"fit"===n.tolerance&&(h=i.left>a&&r>i.right&&i.top>o&&l>i.bottom),h?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})})(jQuery);(function(t){function e(t,e,i){return t>e&&e+i>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=null,n=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(s=t(this),!1):undefined}),t.data(e.target,o.widgetName+"-item")===o&&(s=t(e.target)),s?!this.options.handle||i||(t(this.options.handle,s).find("*").addBack().each(function(){this===e.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(e,i,s){var n,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,s,n,o,a=this.options,r=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-t(document).scrollTop()<a.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-a.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<a.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+a.scrollSpeed)),e.pageX-t(document).scrollLeft()<a.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-a.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<a.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+a.scrollSpeed))),r!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],o=this._intersectsWithPointer(s),o&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==n&&!t.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],n):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,o=t.left,a=o+t.width,r=t.top,h=r+t.height,l=this.offset.click.top,c=this.offset.click.left,u="x"===this.options.axis||s+l>r&&h>s+l,d="y"===this.options.axis||e+c>o&&a>e+c,p=u&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:e+this.helperProportions.width/2>o&&a>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||e(this.positionAbs.left+this.offset.click.left,t.left,t.width),n=i&&s,o=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return n?this.floating?a&&"right"===a||"down"===o?2:1:o&&("down"===o?2:1):!1},_intersectsWithSides:function(t){var i=e(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),s=e(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&s||"left"===o&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function i(){r.push(this)}var s,n,o,a,r=[],h=[],l=this._connectWith();if(l&&e)for(s=l.length-1;s>=0;s--)for(o=t(l[s]),n=o.length-1;n>=0;n--)a=t.data(o[n],this.widgetFullName),a&&a!==this&&!a.options.disabled&&h.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(h.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return t(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;e.length>i;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,s,n,o,a,r,h,l,c=this.items,u=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(n=t(d[i]),s=n.length-1;s>=0;s--)o=t.data(n[s],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(u.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(i=u.length-1;i>=0;i--)for(a=u[i][1],r=u[i][0],s=0,l=r.length;l>s;s++)h=t(r[s]),h.data(this.widgetName+"-item",a),c.push({item:h,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,o;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item,e||(s.width=n.outerWidth(),s.height=n.outerHeight()),o=n.offset(),s.left=o.left,s.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)o=this.containers[i].element.offset(),this.containers[i].containerCache.left=o.left,this.containers[i].containerCache.top=o.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var i,s=e.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=e.currentItem[0].nodeName.toLowerCase(),n=t("<"+s+">",e.document[0]).addClass(i||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",e.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(t,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(s.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),s.placeholder.update(e,e.placeholder)},_contactContainers:function(s){var n,o,a,r,h,l,c,u,d,p,f=null,g=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&t.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],g=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,p=f.floating||i(this.currentItem),h=p?"left":"top",l=p?"width":"height",c=this.positionAbs[h]+this.offset.click[h],o=this.items.length-1;o>=0;o--)t.contains(this.containers[g].element[0],this.items[o].item[0])&&this.items[o].item[0]!==this.currentItem[0]&&(!p||e(this.positionAbs.top+this.offset.click.top,this.items[o].top,this.items[o].height))&&(u=this.items[o].item.offset()[h],d=!1,Math.abs(u-c)>Math.abs(u+this.items[o][l]-c)&&(d=!0,u+=this.items[o][l]),a>Math.abs(u-c)&&(a=Math.abs(u-c),r=this.items[o],this.direction=d?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[g].element,!0),this._trigger("change",s,this._uiHash()),this.containers[g]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",s,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=t(n.containment)[0],i=t(n.containment).offset(),s="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:n.scrollLeft())*s}},_generatePosition:function(e){var i,s,n=this.options,o=e.pageX,a=e.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/n.grid[1])*n.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((o-this.originalPageX)/n.grid[0])*n.grid[0],o=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(t,e){function i(t,e,i){return function(s){i._trigger(t,s,e._uiHash(e))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)e||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(s=0;n.length>s;s++)n[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})})(jQuery);(function(e){var t=0,i={},a={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",a.height=a.paddingTop=a.paddingBottom=a.borderTopWidth=a.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,a=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(s+1)%a];break;case i.LEFT:case i.UP:n=this.headers[(s-1+a)%a];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:n=this.headers[0];break;case i.END:n=this.headers[a-1]}n&&(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,a=this.options,s=a.heightStyle,n=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),a=i.attr("id"),s=i.next(),n=s.attr("id");a||(a=r+"-header-"+t,i.attr("id",a)),n||(n=r+"-panel-"+t,s.attr("id",n)),i.attr("aria-controls",n),s.attr("aria-labelledby",a)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(a.event),"fill"===s?(i=n.height(),this.element.siblings(":visible").each(function(){var t=e(this),a=t.css("position");"absolute"!==a&&"fixed"!==a&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,a=this.active,s=e(t.currentTarget),n=s[0]===a[0],r=n&&i.collapsible,o=r?e():s.next(),h=a.next(),d={oldHeader:a,oldPanel:h,newHeader:r?e():s,newPanel:o};t.preventDefault(),n&&!i.collapsible||this._trigger("beforeActivate",t,d)===!1||(i.active=r?!1:this.headers.index(s),this.active=n?e():s,this._toggle(d),a.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),n||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,a=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=a,this.options.animate?this._animate(i,a,t):(a.hide(),i.show(),this._toggleComplete(t)),a.attr({"aria-hidden":"true"}),a.prev().attr("aria-selected","false"),i.length&&a.length?a.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,s){var n,r,o,h=this,d=0,c=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=c&&l.down||l,v=function(){h._toggleComplete(s)};return"number"==typeof u&&(o=u),"string"==typeof u&&(r=u),r=r||u.easing||l.easing,o=o||u.duration||l.duration,t.length?e.length?(n=e.show().outerHeight(),t.animate(i,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(a,{duration:o,easing:r,complete:v,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?d+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(n-t.outerHeight()-d),d=0)}}),undefined):t.animate(i,o,r,v):e.animate(a,o,r,v)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,undefined;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),undefined;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);(function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",s=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},a=function(t){var i=t.name,n=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,s),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,o=this.options,r="checkbox"===this.type||"radio"===this.type,h=r?"":"ui-state-active";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(h)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return o.disabled?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];a(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return o.disabled?!1:(e(this).addClass("ui-state-active"),t=this,n.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return o.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return o.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),t&&this.buttonElement.removeClass("ui-state-focus"),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?a(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,a=s.primary&&s.secondary,o=[];s.primary||s.secondary?(this.options.text&&o.push("ui-button-text-icon"+(a?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(o.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(n.inline?t.parent()[0]:n.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var a in i)null==i[a]&&(t[a]=i[a]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var n,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var a,s,n;a=t.nodeName.toLowerCase(),s="div"===a||"span"===a,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),s),n.settings=e.extend({},i||{}),"input"===a?this._connectDatepicker(t,n):s&&this._inlineDatepicker(t,n)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var a=e(t);i.append=e([]),i.trigger=e([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var a,s,n,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),a=this._get(i,"showOn"),("focus"===a||"both"===a)&&t.focus(this._showDatepicker),("button"===a||"both"===a)&&(s=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:s,title:s}):s)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,a,s,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,a=0,s=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,a=s);return a},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var a=e(t);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,a,n,o){var u,c,h,l,d,p=this._dialogInst;return p||(this.uuid+=1,u="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+u+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],r,p)),s(p.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+l,h/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,a=e(t),s=e.data(t,r);a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(s.append.remove(),s.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(a=s.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(a=s.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,a,n){var r,o,u,c,h=this._getInst(i);return 2===arguments.length&&"string"==typeof a?"defaults"===a?e.extend({},e.datepicker._defaults):h?"all"===a?e.extend({},h.settings):this._get(h,a):null:(r=a||{},"string"==typeof a&&(r={},r[a]=n),h&&(this._curInst===h&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),u=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),s(h.settings,r),null!==u&&r.dateFormat!==t&&r.minDate===t&&(h.settings.minDate=this._formatDate(h,u)),null!==c&&r.dateFormat!==t&&r.maxDate===t&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),h),this._autoSize(h),this._setDate(h,o),this._updateAlternate(h),this._updateDatepicker(h)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,a,s,n=e.datepicker._getInst(t.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),s[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,s[0]),i=e.datepicker._get(n,"onSelect"),i?(a=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[a,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var a,s,n=e.datepicker._getInst(i.target);return e.datepicker._get(n,"constrainInput")?(a=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">s||!a||a.indexOf(s)>-1):t},_doKeyUp:function(t){var i,a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a)),i&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,a,n,r,o,u,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(i,"beforeShow"),n=a?a.apply(t,[t,i]):{},n!==!1&&(s(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),o=e.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(u=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?i.dpDiv.show(u,e.datepicker._get(i,"showOptions"),c):i.dpDiv[u||"show"](u?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,n=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(t),s=a[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,a){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,u=document.documentElement.clientWidth+(a?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(a?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=a&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=a&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>u&&u>s?Math.abs(i.left+s-u):0),i.top-=Math.min(i.top,i.top+n>c&&c>n?Math.abs(n+o):0),i},_findPos:function(t){for(var i,a=this._getInst(t),s=this._get(a,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,a,s,n,o=this._curInst;!o||t&&o!==e.data(t,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),a,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1,n=this._get(o,"onClose"),n&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),a=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==a)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,a){var s=e(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,i+("M"===a?this._get(n,"showCurrentAtPos"):0),a),this._updateDatepicker(n))},_gotoToday:function(t){var i,a=e(t),s=this._getInst(a[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(a)},_selectMonthYear:function(t,i,a){var s=e(t),n=this._getInst(s[0]);n["selected"+("M"===a?"Month":"Year")]=n["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,i,a,s){var n,r=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(n=this._getInst(r[0]),n.selectedDay=n.currentDay=e("a",s).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=a,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var a,s=e(t),n=this._getInst(s[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),a=this._get(n,"onSelect"),a?a.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,a,s,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),a=this._getDate(t),s=this.formatDate(i,a,this._getFormatConfig(t)),e(n).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,a,s){if(null==i||null==a)throw"Invalid arguments";if(a="object"==typeof a?""+a:a+"",""===a)return null;var n,r,o,u,c=0,h=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,p=(s?s.dayNames:null)||this._defaults.dayNames,g=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,m=(s?s.monthNames:null)||this._defaults.monthNames,f=-1,_=-1,v=-1,k=-1,y=!1,b=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t},D=function(e){var t=b(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=RegExp("^\\d{1,"+i+"}"),n=a.substring(c).match(s);if(!n)throw"Missing number at position "+c;return c+=n[0].length,parseInt(n[0],10)},w=function(i,s,n){var r=-1,o=e.map(b(i)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,i){var s=i[1];return a.substr(c,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],c+=s.length,!1):t}),-1!==r)return r+1;throw"Unknown name at position "+c},M=function(){if(a.charAt(c)!==i.charAt(n))throw"Unexpected literal at position "+c;c++};for(n=0;i.length>n;n++)if(y)"'"!==i.charAt(n)||b("'")?M():y=!1;else switch(i.charAt(n)){case"d":v=D("d");break;case"D":w("D",d,p);break;case"o":k=D("o");break;case"m":_=D("m");break;case"M":_=w("M",g,m);break;case"y":f=D("y");break;case"@":u=new Date(D("@")),f=u.getFullYear(),_=u.getMonth()+1,v=u.getDate();break;case"!":u=new Date((D("!")-this._ticksTo1970)/1e4),f=u.getFullYear(),_=u.getMonth()+1,v=u.getDate();break;case"'":b("'")?M():y=!0;break;default:M()}if(a.length>c&&(o=a.substr(c),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===f?f=(new Date).getFullYear():100>f&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=f?0:-100)),k>-1)for(_=1,v=k;;){if(r=this._getDaysInMonth(f,_-1),r>=v)break;_++,v-=r}if(u=this._daylightSavingAdjust(new Date(f,_-1,v)),u.getFullYear()!==f||u.getMonth()+1!==_||u.getDate()!==v)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var a,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,u=function(t){var i=e.length>a+1&&e.charAt(a+1)===t;return i&&a++,i},c=function(e,t,i){var a=""+t;if(u(e))for(;i>a.length;)a="0"+a;return a},h=function(e,t,i,a){return u(e)?a[t]:i[t]},l="",d=!1;if(t)for(a=0;e.length>a;a++)if(d)"'"!==e.charAt(a)||u("'")?l+=e.charAt(a):d=!1;else switch(e.charAt(a)){case"d":l+=c("d",t.getDate(),2);break;case"D":l+=h("D",t.getDay(),s,n);break;case"o":l+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=c("m",t.getMonth()+1,2);break;case"M":l+=h("M",t.getMonth(),r,o);break;case"y":l+=u("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=1e4*t.getTime()+this._ticksTo1970;break;case"'":u("'")?l+="'":d=!0;break;default:l+=e.charAt(a)}return l},_possibleChars:function(e){var t,i="",a=!1,s=function(i){var a=e.length>t+1&&e.charAt(t+1)===i;return a&&t++,a};for(t=0;e.length>t;t++)if(a)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):a=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":a=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),n=s,r=this._getFormatConfig(e);try{n=this.parseDate(i,a,r)||s}catch(o){a=t?"":a}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=a?n.getDate():0,e.currentMonth=a?n.getMonth():0,e.currentYear=a?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,a){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(a){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),r=s.getMonth(),o=s.getDate(),u=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=u.exec(i);c;){switch(c[2]||"d"){case"d":case"D":o+=parseInt(c[1],10);break;case"w":case"W":o+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(c[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r))}c=u.exec(i)}return new Date(n,r,o)},r=null==i||""===i?a:"string"==typeof i?n(i):"number"==typeof i?isNaN(i)?a:s(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?a:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,s=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),a="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(a,-i,"M")},next:function(){e.datepicker._adjustDate(a,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(a)},selectDay:function(){return e.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(a,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,a,s,n,r,o,u,c,h,l,d,p,g,m,f,_,v,k,y,b,D,w,M,C,x,I,N,T,A,E,S,Y,F,P,O,j,K,R,H=new Date,W=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),L=this._get(e,"isRTL"),U=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),z=this._get(e,"navigationAsDateFormat"),q=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),Q=1!==q[0]||1!==q[1],V=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),$=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-G,et=e.drawYear;if(0>Z&&(Z+=12,et--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-q[0]*q[1]+1,X.getDate())),t=$&&$>t?$:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=z?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=z?this.formatDate(s,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):s,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+s+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(L?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?V:W,r=z?this.formatDate(r,o,this._getFormatConfig(e)):r,u=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=U?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(L?u:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(L?"":u)+"</div>":"",h=parseInt(this._get(e,"firstDay"),10),h=isNaN(h)?0:h,l=this._get(e,"showWeek"),d=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),g=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),f=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),v=this._get(e,"selectOtherMonths"),k=this._getDefaultDate(e),y="",D=0;q[0]>D;D++){for(w="",this.maxRows=4,M=0;q[1]>M;M++){if(C=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),x=" ui-corner-all",I="",Q){if(I+="<div class='ui-datepicker-group",q[1]>1)switch(M){case 0:I+=" ui-datepicker-group-first",x=" ui-corner-"+(L?"right":"left");break;case q[1]-1:I+=" ui-datepicker-group-last",x=" ui-corner-"+(L?"left":"right");break;default:I+=" ui-datepicker-group-middle",x=""}I+="'>"}for(I+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+x+"'>"+(/all|left/.test(x)&&0===D?L?n:a:"")+(/all|right/.test(x)&&0===D?L?a:n:"")+this._generateMonthYearHeader(e,Z,et,$,X,D>0||M>0,g,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",N=l?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",b=0;7>b;b++)T=(b+h)%7,N+="<th"+((b+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+d[T]+"'>"+p[T]+"</span></th>";for(I+=N+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),E=(this._getFirstDayOfMonth(et,Z)-h+7)%7,S=Math.ceil((E+A)/7),Y=Q?this.maxRows>S?this.maxRows:S:S,this.maxRows=Y,F=this._daylightSavingAdjust(new Date(et,Z,1-E)),P=0;Y>P;P++){for(I+="<tr>",O=l?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(F)+"</td>":"",b=0;7>b;b++)j=f?f.apply(e.input?e.input[0]:null,[F]):[!0,""],K=F.getMonth()!==Z,R=K&&!v||!j[0]||$&&$>F||X&&F>X,O+="<td class='"+((b+h+6)%7>=5?" ui-datepicker-week-end":"")+(K?" ui-datepicker-other-month":"")+(F.getTime()===C.getTime()&&Z===e.selectedMonth&&e._keyEvent||k.getTime()===F.getTime()&&k.getTime()===C.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(K&&!_?"":" "+j[1]+(F.getTime()===V.getTime()?" "+this._currentClass:"")+(F.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(K&&!_||!j[2]?"":" title='"+j[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+F.getMonth()+"' data-year='"+F.getFullYear()+"'")+">"+(K&&!_?"&#xa0;":R?"<span class='ui-state-default'>"+F.getDate()+"</span>":"<a class='ui-state-default"+(F.getTime()===W.getTime()?" ui-state-highlight":"")+(F.getTime()===V.getTime()?" ui-state-active":"")+(K?" ui-priority-secondary":"")+"' href='#'>"+F.getDate()+"</a>")+"</td>",F.setDate(F.getDate()+1),F=this._daylightSavingAdjust(F);I+=O+"</tr>"}Z++,Z>11&&(Z=0,et++),I+="</tbody></table>"+(Q?"</div>"+(q[0]>0&&M===q[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),w+=I}y+=w}return y+=c,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,i,a,s,n,r,o){var u,c,h,l,d,p,g,m,f=this._get(e,"changeMonth"),_=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),k="<div class='ui-datepicker-title'>",y="";if(n||!f)y+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(u=a&&a.getFullYear()===i,c=s&&s.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!u||h>=a.getMonth())&&(!c||s.getMonth()>=h)&&(y+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"</option>");y+="</select>"}if(v||(k+=y+(!n&&f&&_?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!_)k+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(l=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t},g=p(l[0]),m=Math.max(g,p(l[1]||"")),g=a?Math.max(g,a.getFullYear()):g,m=s?Math.min(m,s.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=g;g++)e.yearshtml+="<option value='"+g+"'"+(g===i?" selected='selected'":"")+">"+g+"</option>";e.yearshtml+="</select>",k+=e.yearshtml,e.yearshtml=null}return k+=this._get(e,"yearSuffix"),v&&(k+=(!n&&f&&_?"":"&#xa0;")+y),k+="</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(a,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,s,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return a&&s>a?a:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var s=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,a+(0>t?t:s[0]*s[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,a,s=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,u=this._get(e,"yearRange");return u&&(i=u.split(":"),a=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=a),i[1].match(/[+\-].*/)&&(o+=a)),(!s||t.getTime()>=s.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"})(jQuery);(function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,a=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(s){}this._hide(this.uiDialog,this.options.hide,function(){a._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),a=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==a[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(a.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(e.each(i,function(i,a){var s,n;a=e.isFunction(a)?{click:a,text:i}:a,a=e.extend({type:"button"},a),s=a.click,a.click=function(){s.apply(t.element[0],arguments)},n={icons:a.icons,text:a.showText},delete a.icons,delete a.showText,e("<button></button>",a).button(n).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(a,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",a,t(s))},drag:function(e,a){i._trigger("drag",e,t(a))},stop:function(s,n){a.position=[n.position.left-i.document.scrollLeft(),n.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(n))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,a=this.options,s=a.resizable,n=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:r,start:function(a,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",a,t(s))},resize:function(e,a){i._trigger("resize",e,t(a))},stop:function(s,n){a.height=e(this).height(),a.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(n))}}).css("position",n)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(a){var s=this,n=!1,r={};e.each(a,function(e,a){s._setOption(e,a),e in t&&(n=!0),e in i&&(r[e]=a)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,a,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(a=s.is(":data(ui-resizable)"),a&&!t&&s.resizable("destroy"),a&&"string"==typeof t&&s.resizable("option","handles",t),a||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),a.minWidth>a.width&&(a.width=a.minWidth),e=this.uiDialog.css({height:"auto",width:a.width}).outerHeight(),t=Math.max(0,a.minHeight-e),i="number"==typeof a.maxHeight?Math.max(0,a.maxHeight-e):"none","auto"===a.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,a.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(a){t._allowInteraction(a)||(a.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,a=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(a=i.split?i.split(" "):[i[0],i[1]],1===a.length&&(a[1]=a[0]),e.each(["left","top"],function(e,t){+a[e]===a[e]&&(s[e]=a[e],a[e]=t)}),i={my:a[0]+(0>s[0]?s[0]:"+"+s[0])+" "+a[1]+(0>s[1]?s[1]:"+"+s[1]),at:a.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})})(jQuery);(function(t){t.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,n=this.previousFilter||"",a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(e.keyCode),r=RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),0>i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})})(jQuery);(function(t,e){t.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this.options.value:(this.options.value=this._constrainedValue(t),this._refreshValue(),e)},_constrainedValue:function(t){return t===e&&(t=this.options.value),this.indeterminate=t===!1,"number"!=typeof t&&(t=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,t))},_setOptions:function(t){var e=t.value;delete t.value,this._super(t),this.options.value=this._constrainedValue(e),this._refreshValue()},_setOption:function(t,e){"max"===t&&(e=Math.max(this.min,e)),this._super(t,e)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var e=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=t("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":e}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),e===this.options.max&&this._trigger("complete")}})})(jQuery);(function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i>e;e++)o.push(a);this.handles=n.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,l,h,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n>i||n===i&&(e===u._lastChangedValue||u.values(e)===c.min))&&(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),l=a.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-a.width()/2,top:e.pageY-l.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&s>i)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&&this.values(e,i))):i!==this.value()&&(a=this._trigger("slide",t,{handle:this.handles[e],value:i}),a!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,l=this,h=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](u,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&&this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})(jQuery);(function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);void 0!==n&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t),void 0)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){var t=this.element[0]===this.document[0].activeElement;t||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(e)!==!1&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){return t(e.currentTarget).hasClass("ui-state-active")?this._start(e)===!1?!1:(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(t){return this.spinning||this._trigger("start",t)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&this._trigger("spin",e,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=""+t,i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&s.min>t?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,this.element.val(this._format(i)),void 0}("max"===t||"min"===t||"step"===t)&&"string"==typeof e&&(e=this._parse(e)),"icons"===t&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(e.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(e.down)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&(i=this._parse(t),null!==i&&(e||(i=this._adjustValue(i)),t=this._format(i))),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._start()&&(this._spin((t||1)*this.options.step),this._stop())},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._start()&&(this._spin((t||1)*-this.options.step),this._stop())},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){return arguments.length?(e(this._value).call(this,t),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})})(jQuery);(function(t,e){function i(){return++n}function s(t){return t=t.cloneNode(!1),t.hash.length>1&&decodeURIComponent(t.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;t.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var e=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):t(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(s,a){return t(a).attr("aria-controls")===n?(i=s,!1):e}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(i){var s=t(this.document[0].activeElement).closest("li"),n=this.tabs.index(s),a=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:n++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:a=!1,n--;break;case t.ui.keyCode.END:n=this.anchors.length-1;break;case t.ui.keyCode.HOME:n=0;break;case t.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(n),e;case t.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(n===this.options.active?!1:n),e;default:return}i.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,a),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):e},_findNextTab:function(e,i){function s(){return e>n&&(e=0),0>e&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,i){return"active"===t?(this._activate(i),e):"disabled"===t?(this._setupDisabled(i),e):(this._super(t,i),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===t&&this._setupEvents(i),"heightStyle"===t&&this._setupHeightStyle(i),e)},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),e.active!==!1&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var a,o,r,h=t(n).uniqueId().attr("id"),l=t(n).closest("li"),c=l.attr("aria-controls");s(n)?(a=n.hash,o=e.element.find(e._sanitizeSelector(a))):(r=e._tabId(l),a="#"+r,o=e.element.find(a),o.length||(o=e._createPanel(r),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),c&&l.data("ui-tabs-aria-controls",c),l.attr({"aria-controls":a.substring(1),"aria-labelledby":h}),o.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)e===!0||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s=this.element.parent();"fill"===e?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,h=r?t():this._getPanelForTab(a),l=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:l,newTab:r?t():a,newPanel:h};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||this._trigger("beforeActivate",e,c)===!1||(i.active=r?!1:this.tabs.index(a),this.active=o?t():a,this.xhr&&this.xhr.abort(),l.length||h.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(a),e),this._toggle(e,c))},_toggle:function(e,i){function s(){a.running=!1,a._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return e===!1?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),h={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,h)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);(function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var e=t(this).attr("title")||"";return t("<a>").text(e).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;return"disabled"===e?(this[i?"_disable":"_enable"](),this.options[e]=i,void 0):(this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)}),void 0)},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,o=e?e.type:null;return"string"==typeof s?this._open(e,t,s):(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=o),this._open(e,t,i)})}),i&&this._open(e,t,i),void 0)},_open:function(i,s,n){function o(t){l.of=t,a.is(":hidden")||a.position(l)}var a,r,h,l=t.extend({},this.options.position);if(n){if(a=this._find(s),a.length)return a.find(".ui-tooltip-content").html(n),void 0;s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),a=this._tooltip(s),e(s,a.attr("id")),a.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:o}),o(i)):a.position(t.extend({of:s},this.options.position)),a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){a.is(":visible")&&(o(l.of),clearInterval(h))},t.fx.interval)),this._trigger("open",i,{tooltip:a}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(a)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),o=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),o.stop(!0),this._hide(o,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:o}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})})(jQuery);(function(t,e){var i="ui-effects-";t.effects={effect:{}},function(t,e){function i(t,e,i){var s=u[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:t>s.max?s.max:t)}function s(i){var s=h(),n=s._rgba=[];return i=i.toLowerCase(),f(l,function(t,a){var o,r=a.re.exec(i),l=r&&a.parse(r),h=a.space||"rgba";return l?(o=s[h](l),s[c[h].cache]=o[c[h].cache],n=s._rgba=o._rgba,!1):e}),n.length?("0,0,0,0"===n.join()&&t.extend(n,a.transparent),s):a[i]}function n(t,e,i){return i=(i+1)%1,1>6*i?t+6*(e-t)*i:1>2*i?e:2>3*i?t+6*(e-t)*(2/3-i):t}var a,o="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=t.Color=function(e,i,s,n){return new t.Color.fn.parse(e,i,s,n)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},d=h.support={},p=t("<p>")[0],f=t.each;p.style.cssText="background-color:rgba(1,1,1,.5)",d.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(c,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=t.extend(h.prototype,{parse:function(n,o,r,l){if(n===e)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=t(n).css(o),o=e);var u=this,d=t.type(n),p=this._rgba=[];return o!==e&&(n=[n,o,r,l],d="array"),"string"===d?this.parse(s(n)||a._default):"array"===d?(f(c.rgba.props,function(t,e){p[e.idx]=i(n[e.idx],e)}),this):"object"===d?(n instanceof h?f(c,function(t,e){n[e.cache]&&(u[e.cache]=n[e.cache].slice())}):f(c,function(e,s){var a=s.cache;f(s.props,function(t,e){if(!u[a]&&s.to){if("alpha"===t||null==n[t])return;u[a]=s.to(u._rgba)}u[a][e.idx]=i(n[t],e,!0)}),u[a]&&0>t.inArray(null,u[a].slice(0,3))&&(u[a][3]=1,s.from&&(u._rgba=s.from(u[a])))}),this):e},is:function(t){var i=h(t),s=!0,n=this;return f(c,function(t,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(t,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:e})),s}),s},_space:function(){var t=[],e=this;return f(c,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var s=h(t),n=s._space(),a=c[n],o=0===this.alpha()?h("transparent"):this,r=o[a.cache]||a.to(o._rgba),l=r.slice();return s=s[a.cache],f(a.props,function(t,n){var a=n.idx,o=r[a],h=s[a],c=u[n.type]||{};null!==h&&(null===o?l[a]=h:(c.mod&&(h-o>c.mod/2?o+=c.mod:o-h>c.mod/2&&(o-=c.mod)),l[a]=i((h-o)*e+o,n)))}),this[n](l)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=h(e)._rgba;return h(t.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&3>e&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),s=i.pop();return e&&i.push(~~(255*s)),"#"+t.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,c.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),l=Math.min(s,n,a),h=r-l,c=r+l,u=.5*c;return e=l===r?0:s===r?60*(n-a)/h+360:n===r?60*(a-s)/h+120:60*(s-n)/h+240,i=0===h?0:.5>=u?h/c:h/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},c.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],a=t[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,e+1/3)),Math.round(255*n(r,o,e)),Math.round(255*n(r,o,e-1/3)),a]},f(c,function(s,n){var a=n.props,o=n.cache,l=n.to,c=n.from;h.fn[s]=function(s){if(l&&!this[o]&&(this[o]=l(this._rgba)),s===e)return this[o].slice();var n,r=t.type(s),u="array"===r||"object"===r?s:arguments,d=this[o].slice();return f(a,function(t,e){var s=u["object"===r?t:e.idx];null==s&&(s=d[e.idx]),d[e.idx]=i(s,e)}),c?(n=h(c(d)),n[o]=d,n):h(d)},f(a,function(e,i){h.fn[e]||(h.fn[e]=function(n){var a,o=t.type(n),l="alpha"===e?this._hsla?"hsla":"rgba":s,h=this[l](),c=h[i.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=t.type(n)),null==n&&i.empty?this:("string"===o&&(a=r.exec(n),a&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1))),h[i.idx]=n,this[l](h)))})})}),h.hook=function(e){var i=e.split(" ");f(i,function(e,i){t.cssHooks[i]={set:function(e,n){var a,o,r="";if("transparent"!==n&&("string"!==t.type(n)||(a=s(n)))){if(n=h(a||n),!d.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===r||"transparent"===r)&&o&&o.style;)try{r=t.css(o,"backgroundColor"),o=o.parentNode}catch(l){}n=n.blend(r&&"transparent"!==r?r:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(l){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=h(e.elem,i),e.end=h(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},h.hook(o),t.cssHooks.borderColor={expand:function(t){var e={};return f(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(e){var i,s,n=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],"string"==typeof n[i]&&(a[t.camelCase(i)]=n[i]);else for(i in n)"string"==typeof n[i]&&(a[i]=n[i]);return a}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||(t.fx.step[s]||!isNaN(parseFloat(n)))&&(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(e,a,o,r){var l=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",h=l.children?o.find("*").addBack():o;h=h.map(function(){var e=t(this);return{el:e,start:i(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),h=h.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),s=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,h.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,s,n,a){return s?t.effects.animateClass.call(this,{add:i},s,n,a):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,s,n,a){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},s,n,a):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(i){return function(s,n,a,o,r){return"boolean"==typeof n||n===e?a?t.effects.animateClass.call(this,n?{add:s}:{remove:s},a,o,r):i.apply(this,arguments):t.effects.animateClass.call(this,{toggle:s},n,a,o)}}(t.fn.toggleClass),switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function s(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function n(e){return!e||"number"==typeof e||t.fx.speeds[e]?!0:"string"!=typeof e||t.effects.effect[e]?t.isFunction(e)?!0:"object"!=typeof e||e.effect?!1:!0:!0}t.extend(t.effects,{version:"1.10.4",save:function(t,e){for(var s=0;e.length>s;s++)null!==e[s]&&t.data(i+e[s],t[0].style[e[s]])},restore:function(t,s){var n,a;for(a=0;s.length>a;a++)null!==s[a]&&(n=t.data(i+s[a]),n===e&&(n=""),t.css(s[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function s(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=i.complete,r=i.mode;(n.is(":hidden")?"hide"===r:"show"===r)?(n[r](),s()):o.call(n[0],i,s)}var i=s.apply(this,arguments),n=i.mode,a=i.queue,o=t.effects.effect[i.effect];return t.fx.off||!o?n?this[n](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):a===!1?this.each(e):this.queue(a||"fx",e)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var i=s.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;((e=Math.pow(2,--i))-1)/11>t;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return.5>t?i(2*t)/2:1-i(-2*t+2)/2}})}()})(jQuery);(function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var a,o,r,l=t(this),h=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(l,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),h):t.effects.save(l,h),l.show(),a=t.effects.createWrapper(l).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,m[p]=v?o:0,g||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:o+r),v&&(a.css(p,0),g||a.css(f,r+o)),a.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),t.effects.restore(l,h),t.effects.removeWrapper(l),n()}})}})(jQuery);(function(t){t.effects.effect.bounce=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"effect"),h="hide"===l,c="show"===l,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||h?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=o.queue(),y=b.length;for((c||h)&&r.push("opacity"),t.effects.save(o,r),o.show(),t.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,_?2*-d:2*d).animate(a,g,m)),h&&(d/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(_?"-=":"+=")+d,o.animate(n,g,m).animate(a,g,m),d=h?2*d:d/2;h&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,o.animate(n,g,m)),o.queue(function(){h&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),o.dequeue()}})(jQuery);(function(t){t.effects.effect.clip=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"hide"),h="show"===l,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(o,r),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[d](),h&&(n.css(d,0),n.css(p,a/2)),f[d]=h?a:0,f[p]=h?0:a/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){h||o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}})}})(jQuery);(function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","opacity","height","width"],o=t.effects.setMode(n,e.mode||"hide"),r="show"===o,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,a),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(h,"pos"===c?-s:s),u[h]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);(function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var a,o,r,l,h,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(a=0;u>a;a++)for(l=m.top+a*_,c=a-(u-1)/2,o=0;d>o;o++)r=m.left+o*v,h=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?h*v:0),top:l+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:h*v),top:l+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}})(jQuery);(function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}})(jQuery);(function(t){t.effects.effect.fold=function(e,i){var s,n,a=t(this),o=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(a,e.mode||"hide"),l="show"===r,h="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(a,o),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[h?0:1]),l&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=l?n[0]:c,v[f[1]]=l?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){h&&a.hide(),t.effects.restore(a,o),t.effects.removeWrapper(a),i()})}})(jQuery);(function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],a=t.effects.setMode(s,e.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&s.hide(),t.effects.restore(s,n),i()}})}})(jQuery);(function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),a=t.effects.setMode(n,e.mode||"show"),o="show"===a,r="hide"===a,l=o||"hide"===a,h=2*(e.times||5)+(l?1:0),c=e.duration/h,u=0,d=n.queue(),p=d.length;for((o||!n.is(":visible"))&&(n.css("opacity",0).show(),u=1),s=1;h>s;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,h+1))),n.dequeue()}})(jQuery);(function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),a="hide"===n,o=parseInt(e.percent,10)||150,r=o/100,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),a=t.effects.setMode(s,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===a?0:100),r=e.direction||"both",l=e.origin,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=l||["middle","center"],n.restore=!0),n.from=e.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:h),n.to={height:h.height*c.y,width:h.width*c.x,outerHeight:h.outerHeight*c.y,outerWidth:h.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],h=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=o.css("position"),_=f?r:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||s):(o.from=e.from||("show"===p?b:s),o.to=e.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},("box"===g||"both"===g)&&(a.from.y!==a.to.y&&(_=_.concat(u),o.from=t.effects.setTransition(o,u,a.from.y,o.from),o.to=t.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(_=_.concat(d),o.from=t.effects.setTransition(o,d,a.from.x,o.from),o.to=t.effects.setTransition(o,d,a.to.x,o.to))),("content"===g||"both"===g)&&a.from.y!==a.to.y&&(_=_.concat(c).concat(h),o.from=t.effects.setTransition(o,c,a.from.y,o.from),o.to=t.effects.setTransition(o,c,a.to.y,o.to)),t.effects.save(o,_),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(n=t.effects.getBaseline(m,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),("content"===g||"both"===g)&&(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),h=r.concat(u).concat(d),o.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,h),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=t.effects.setTransition(i,u,a.from.y,i.from),i.to=t.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=t.effects.setTransition(i,d,a.from.x,i.from),i.to=t.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,h)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,_),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var s=parseInt(i,10),n=t?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(o),i()}})}})(jQuery);(function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","height","width"],o=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",l=e.distance||20,h=e.times||3,c=2*h+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,a),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+l,g[d]=(p?"+=":"-=")+2*l,m[d]=(p?"-=":"+=")+2*l,n.animate(f,u,e.easing),s=1;h>s;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}})(jQuery);(function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(h,c?isNaN(s)?"-"+s:-s:s),u[h]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}})(jQuery);(function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),a="fixed"===n.css("position"),o=t("body"),r=a?o.scrollTop():0,l=a?o.scrollLeft():0,h=n.offset(),c={top:h.top-r,left:h.left-l,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-l,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}})(jQuery);;;(function(f,h,i){function k(a,c){var b=(a[0]||0)-(c[0]||0);return b>0||!b&&a.length>0&&k(a.slice(1),c.slice(1))}function l(a){if(typeof a!=g)return a;var c=[],b="";for(var d in a){b=typeof a[d]==g?l(a[d]):[d,m?encodeURI(a[d]):a[d]].join("=");c.push(b)}return c.join("&")}function n(a){var c=[];for(var b in a)a[b]&&c.push([b,'="',a[b],'"'].join(""));return c.join(" ")}function o(a){var c=[];for(var b in a)c.push(['<param name="',b,'" value="',l(a[b]),'" />'].join(""));return c.join("")}var g="object",m=true;try{var j=i.description||function(){return(new i("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}()}catch(p){j="Unavailable"}var e=j.match(/\d+/g)||[0];f[h]={available:e[0]>0,activeX:i&&!i.name,version:{original:j,array:e,string:e.join("."),major:parseInt(e[0],10)||0,minor:parseInt(e[1],10)||0,release:parseInt(e[2],10)||0},hasVersion:function(a){a=/string|number/.test(typeof a)?a.toString().split("."):/object/.test(typeof a)?[a.major,a.minor]:a||[0,0];return k(e,a)},encodeParams:true,expressInstall:"expressInstall.swf",expressInstallIsActive:false,create:function(a){if(!a.swf||this.expressInstallIsActive||!this.available&&!a.hasVersionFail)return false;if(!this.hasVersion(a.hasVersion||1)){this.expressInstallIsActive=true;if(typeof a.hasVersionFail=="function")if(!a.hasVersionFail.apply(a))return false;a={swf:a.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:a.swf,type:"application/x-shockwave-flash",id:a.id||"flash_"+Math.floor(Math.random()*999999999),width:a.width||320,height:a.height||180,style:a.style||""};m=typeof a.useEncode!=="undefined"?a.useEncode:this.encodeParams;a.movie=a.swf;a.wmode=a.wmode||"opaque";delete a.fallback;delete a.hasVersion;delete a.hasVersionFail;delete a.height;delete a.id;delete a.swf;delete a.useEncode;delete a.width;var c=document.createElement("div");c.innerHTML=["<object ",n(attrs),">",o(a),"</object>"].join("");return c.firstChild}};f.fn[h]=function(a){var c=this.find(g).andSelf().filter(g);/string|object/.test(typeof a)&&this.each(function(){var b=f(this),d;a=typeof a==g?a:{swf:a};a.fallback=this;if(d=f[h].create(a)){b.children().remove();b.html(d)}});typeof a=="function"&&c.each(function(){var b=this;b.jsInteractionTimeoutMs=b.jsInteractionTimeoutMs||0;if(b.jsInteractionTimeoutMs<660)b.clientWidth||b.clientHeight?a.call(b):setTimeout(function(){f(b)[h](a)},b.jsInteractionTimeoutMs+66)});return c}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||window.ActiveXObject);;;(function($){$.support.touch='ontouchend'in document;if(!$.support.touch){return;}
var mouseProto=$.ui.mouse.prototype,_mouseInit=mouseProto._mouseInit,touchHandled;function simulateMouseEvent(event,simulatedType){if(event.originalEvent.touches.length>1){return;}
event.preventDefault();var touch=event.originalEvent.changedTouches[0],simulatedEvent=document.createEvent('MouseEvents');simulatedEvent.initMouseEvent(simulatedType,true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);event.target.dispatchEvent(simulatedEvent);}
mouseProto._touchStart=function(event){var self=this;if(touchHandled||!self._mouseCapture(event.originalEvent.changedTouches[0])){return;}
touchHandled=true;self._touchMoved=false;simulateMouseEvent(event,'mouseover');simulateMouseEvent(event,'mousemove');simulateMouseEvent(event,'mousedown');};mouseProto._touchMove=function(event){if(!touchHandled){return;}
this._touchMoved=true;simulateMouseEvent(event,'mousemove');};mouseProto._touchEnd=function(event){if(!touchHandled){return;}
simulateMouseEvent(event,'mouseup');simulateMouseEvent(event,'mouseout');if(!this._touchMoved){simulateMouseEvent(event,'click');}
touchHandled=false;};mouseProto._mouseInit=function(){var self=this;self.element.bind('touchstart',$.proxy(self,'_touchStart')).bind('touchmove',$.proxy(self,'_touchMove')).bind('touchend',$.proxy(self,'_touchEnd'));_mouseInit.call(self);};})(jQuery);;;!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery?a.jQuery:a.Zepto)}(this,function(a,b){a.fn.jPlayer=function(c){var d="jPlayer",e="string"==typeof c,f=Array.prototype.slice.call(arguments,1),g=this;return c=!e&&f.length?a.extend.apply(null,[!0,c].concat(f)):c,e&&"_"===c.charAt(0)?g:(this.each(e?function(){var e=a(this).data(d),h=e&&a.isFunction(e[c])?e[c].apply(e,f):e;return h!==e&&h!==b?(g=h,!1):void 0}:function(){var b=a(this).data(d);b?b.option(c||{}):a(this).data(d,new a.jPlayer(c,this))}),g)},a.jPlayer=function(b,c){if(arguments.length){this.element=a(c),this.options=a.extend(!0,{},this.options,b);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()}),this._init()}},"function"!=typeof a.fn.stop&&(a.fn.stop=function(){}),a.jPlayer.emulateMethods="load play pause",a.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",a.jPlayer.emulateOptions="muted volume",a.jPlayer.reservedEvent="ready flashreset resize repeat error warning",a.jPlayer.event={},a.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){a.jPlayer.event[this]="jPlayer_"+this}),a.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],a.jPlayer.pause=function(){a.jPlayer.prototype.destroyRemoved(),a.each(a.jPlayer.prototype.instances,function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})},a.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var c=function(){this.init()};c.prototype={init:function(){this.options={timeFormat:a.jPlayer.timeFormat}},time:function(a){a=a&&"number"==typeof a?a:0;var b=new Date(1e3*a),c=b.getUTCHours(),d=this.options.timeFormat.showHour?b.getUTCMinutes():b.getUTCMinutes()+60*c,e=this.options.timeFormat.showMin?b.getUTCSeconds():b.getUTCSeconds()+60*d,f=this.options.timeFormat.padHour&&10>c?"0"+c:c,g=this.options.timeFormat.padMin&&10>d?"0"+d:d,h=this.options.timeFormat.padSec&&10>e?"0"+e:e,i="";return i+=this.options.timeFormat.showHour?f+this.options.timeFormat.sepHour:"",i+=this.options.timeFormat.showMin?g+this.options.timeFormat.sepMin:"",i+=this.options.timeFormat.showSec?h+this.options.timeFormat.sepSec:""}};var d=new c;a.jPlayer.convertTime=function(a){return d.time(a)},a.jPlayer.uaBrowser=function(a){var b=a.toLowerCase(),c=/(webkit)[ \/]([\w.]+)/,d=/(opera)(?:.*version)?[ \/]([\w.]+)/,e=/(msie) ([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/,g=c.exec(b)||d.exec(b)||e.exec(b)||b.indexOf("compatible")<0&&f.exec(b)||[];return{browser:g[1]||"",version:g[2]||"0"}},a.jPlayer.uaPlatform=function(a){var b=a.toLowerCase(),c=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,d=/(ipad|playbook)/,e=/(android)/,f=/(mobile)/,g=c.exec(b)||[],h=d.exec(b)||!f.exec(b)&&e.exec(b)||[];return g[1]&&(g[1]=g[1].replace(/\s/g,"_")),{platform:g[1]||"",tablet:h[1]||""}},a.jPlayer.browser={},a.jPlayer.platform={};var e=a.jPlayer.uaBrowser(navigator.userAgent);e.browser&&(a.jPlayer.browser[e.browser]=!0,a.jPlayer.browser.version=e.version);var f=a.jPlayer.uaPlatform(navigator.userAgent);f.platform&&(a.jPlayer.platform[f.platform]=!0,a.jPlayer.platform.mobile=!f.tablet,a.jPlayer.platform.tablet=!!f.tablet),a.jPlayer.getDocMode=function(){var b;return a.jPlayer.browser.msie&&(document.documentMode?b=document.documentMode:(b=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(b=7))),b},a.jPlayer.browser.documentMode=a.jPlayer.getDocMode(),a.jPlayer.nativeFeatures={init:function(){var a,b,c,d=document,e=d.createElement("video"),f={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},g=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=a={support:{w3c:!!d[f.w3c[0]],moz:!!d[f.moz[0]],webkit:"function"==typeof d[f.webkit[3]],webkitVideo:"function"==typeof e[f.webkitVideo[2]],ms:"function"==typeof e[f.ms[2]]},used:{}},b=0,c=g.length;c>b;b++){var h=g[b];if(a.support[h]){a.spec=h,a.used[h]=!0;break}}if(a.spec){var i=f[a.spec];a.api={fullscreenEnabled:!0,fullscreenElement:function(a){return a=a?a:d,a[i[1]]},requestFullscreen:function(a){return a[i[2]]()},exitFullscreen:function(a){return a=a?a:d,a[i[3]]()}},a.event={fullscreenchange:i[4],fullscreenerror:i[5]}}else a.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},a.event={}}},a.jPlayer.nativeFeatures.init(),a.jPlayer.focus=null,a.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var g=function(b){var c,d=a.jPlayer.focus;d&&(a.each(a.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(a,d){return b.target.nodeName.toUpperCase()===d.toUpperCase()?(c=!0,!1):void 0}),c||a.each(d.options.keyBindings,function(c,e){return e&&a.isFunction(e.fn)&&("number"==typeof e.key&&b.which===e.key||"string"==typeof e.key&&b.key===e.key)?(b.preventDefault(),e.fn(d),!1):void 0}))};a.jPlayer.keys=function(b){var c="keydown.jPlayer";a(document.documentElement).unbind(c),b&&a(document.documentElement).bind(c,g)},a.jPlayer.keys(!0),a.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(b){b.jPlayer.options.loop?a(this).unbind(".jPlayerRepeat").bind(a.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){a(this).jPlayer("play")}):a(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var c=this;if(this.element.empty(),this.status=a.extend({},this.status),this.internal=a.extend({},this.internal),this.options.timeFormat=a.extend({},a.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=a.jPlayer.platform.ipad||a.jPlayer.platform.iphone||a.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!a.jPlayer.focus&&(a.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:0/0},a.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),a.each(this.options.supplied.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var f=!1;a.each(c.formats,function(a,b){return e===b?(f=!0,!1):void 0}),f||c.formats.push(e)}}),a.each(this.options.solution.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.solution[e]){var f=!1;a.each(c.solutions,function(a,b){return e===b?(f=!0,!1):void 0}),f||c.solutions.push(e)}}),a.each(this.options.auroraFormats.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var f=!1;a.each(c.aurora.formats,function(a,b){return e===b?(f=!0,!1):void 0}),f||c.aurora.formats.push(e)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=a.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=a.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:b}),this.internal.video=a.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:b}),this.internal.flash=a.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:b,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=a.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:b}),a.each(a.jPlayer.event,function(a,d){c.options[a]!==b&&(c.element.bind(d+".jPlayer",c.options[a]),c.options[a]=b)}),this.require.audio=!1,this.require.video=!1,a.each(this.formats,function(a,b){c.require[c.format[b].media]=!0}),this.options=this.require.video?a.extend(!0,{},this.optionsVideo,this.options):a.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),a.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!c.status.video||c.status.waitForPlay)&&c.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=a("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){c._trigger(a.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},a.each(this.formats,function(b,d){c.html.canPlay[d]=c.html[c.format[d].media].available&&""!==c.htmlElement[c.format[d].media].canPlayType(c.format[d].codec),c.aurora.canPlay[d]=a.inArray(d,c.aurora.formats)>-1,c.flash.canPlay[d]=c.format[d].flashCanPlay&&c.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,a.each(this.solutions,function(b,d){if(0===b)c[d].desired=!0;else{var e=!1,f=!1;a.each(c.formats,function(a,b){c[c.solutions[0]].canPlay[b]&&("video"===c.format[b].media?f=!0:e=!0)}),c[d].desired=c.require.audio&&!e||c.require.video&&!f}}),this.html.support={},this.aurora.support={},this.flash.support={},a.each(this.formats,function(a,b){c.html.support[b]=c.html.canPlay[b]&&c.html.desired,c.aurora.support[b]=c.aurora.canPlay[b]&&c.aurora.desired,c.flash.support[b]=c.flash.canPlay[b]&&c.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,a.each(this.solutions,function(b,d){a.each(c.formats,function(a,b){return c[d].support[b]?(c[d].used=!0,!1):void 0})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:a.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SOLUTION,hint:a.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var d,e="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(a.jPlayer.browser.msie&&(Number(a.jPlayer.browser.version)<9||a.jPlayer.browser.documentMode<9)){var f='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',g=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+e+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];d=document.createElement(f);for(var h=0;h<g.length;h++)d.appendChild(document.createElement(g[h]))}else{var i=function(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)};d=document.createElement("object"),d.setAttribute("id",this.internal.flash.id),d.setAttribute("name",this.internal.flash.id),d.setAttribute("data",this.internal.flash.swf),d.setAttribute("type","application/x-shockwave-flash"),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("tabindex","-1"),i(d,"flashvars",e),i(d,"allowscriptaccess","always"),i(d,"bgcolor",this.options.backgroundColor),i(d,"wmode",this.options.wmode)}this.element.append(d),this.internal.flash.jq=a(d)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=a("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=a("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){c._trigger(a.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){c.internal.ready=!0,c.version.flash="n/a",c._trigger(a.jPlayer.event.repeat),c._trigger(a.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),a.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),a.each(this.css.jq,function(a,b){b.length&&b.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===a.jPlayer.focus&&(a.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var b=this;a.each(this.instances,function(a,c){b.element!==c&&(c.data("jPlayer")||(c.jPlayer("destroy"),delete b.instances[a]))})},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(b){return!1}},_testPlaybackRate:function(a){var b,c=.5;a="string"==typeof a?a:"audio",b=document.createElement(a);try{return"playbackRate"in b?(b.playbackRate=c,b.playbackRate===c):!1}catch(d){return!1}},_uaBlocklist:function(b){var c=navigator.userAgent.toLowerCase(),d=!1;return a.each(b,function(a,b){return b&&b.test(c)?(d=!0,!1):void 0}),d},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(b,c){var d=this;b.preload=this.options.preload,b.muted=this.options.muted,b.volume=this.options.volume,this.status.playbackRateEnabled&&(b.defaultPlaybackRate=this.options.defaultPlaybackRate,b.playbackRate=this.options.playbackRate),b.addEventListener("progress",function(){c.gate&&(d.internal.cmdsIgnored&&this.readyState>0&&(d.internal.cmdsIgnored=!1),d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.progress))},!1),b.addEventListener("loadeddata",function(){c.gate&&(d.androidFix.setMedia=!1,d.androidFix.play&&(d.androidFix.play=!1,d.play(d.androidFix.time)),d.androidFix.pause&&(d.androidFix.pause=!1,d.pause(d.androidFix.time)),d._trigger(a.jPlayer.event.loadeddata))},!1),b.addEventListener("timeupdate",function(){c.gate&&(d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.timeupdate))},!1),b.addEventListener("durationchange",function(){c.gate&&(d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.durationchange))},!1),b.addEventListener("play",function(){c.gate&&(d._updateButtons(!0),d._html_checkWaitForPlay(),d._trigger(a.jPlayer.event.play))},!1),b.addEventListener("playing",function(){c.gate&&(d._updateButtons(!0),d._seeked(),d._trigger(a.jPlayer.event.playing))},!1),b.addEventListener("pause",function(){c.gate&&(d._updateButtons(!1),d._trigger(a.jPlayer.event.pause))},!1),b.addEventListener("waiting",function(){c.gate&&(d._seeking(),d._trigger(a.jPlayer.event.waiting))},!1),b.addEventListener("seeking",function(){c.gate&&(d._seeking(),d._trigger(a.jPlayer.event.seeking))},!1),b.addEventListener("seeked",function(){c.gate&&(d._seeked(),d._trigger(a.jPlayer.event.seeked))},!1),b.addEventListener("volumechange",function(){c.gate&&(d.options.volume=b.volume,d.options.muted=b.muted,d._updateMute(),d._updateVolume(),d._trigger(a.jPlayer.event.volumechange))},!1),b.addEventListener("ratechange",function(){c.gate&&(d.options.defaultPlaybackRate=b.defaultPlaybackRate,d.options.playbackRate=b.playbackRate,d._updatePlaybackRate(),d._trigger(a.jPlayer.event.ratechange))},!1),b.addEventListener("suspend",function(){c.gate&&(d._seeked(),d._trigger(a.jPlayer.event.suspend))},!1),b.addEventListener("ended",function(){c.gate&&(a.jPlayer.browser.webkit||(d.htmlElement.media.currentTime=0),d.htmlElement.media.pause(),d._updateButtons(!1),d._getHtmlStatus(b,!0),d._updateInterface(),d._trigger(a.jPlayer.event.ended))},!1),b.addEventListener("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(clearTimeout(d.internal.htmlDlyCmdId),d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:a.jPlayer.error.URL,context:d.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})))},!1),a.each(a.jPlayer.htmlEvent,function(e,f){b.addEventListener(this,function(){c.gate&&d._trigger(a.jPlayer.event[f])},!1)})},_addAuroraEventListeners:function(b,c){var d=this;b.volume=100*this.options.volume,b.on("progress",function(){c.gate&&(d.internal.cmdsIgnored&&this.readyState>0&&(d.internal.cmdsIgnored=!1),d._getAuroraStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.progress),b.duration>0&&d._trigger(a.jPlayer.event.timeupdate))},!1),b.on("ready",function(){c.gate&&d._trigger(a.jPlayer.event.loadeddata)},!1),b.on("duration",function(){c.gate&&(d._getAuroraStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.durationchange))},!1),b.on("end",function(){c.gate&&(d._updateButtons(!1),d._getAuroraStatus(b,!0),d._updateInterface(),d._trigger(a.jPlayer.event.ended))},!1),b.on("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:a.jPlayer.error.URL,context:d.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,b){var c=0,d=0,e=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration),c=a.currentTime,d=this.status.duration>0?100*c/this.status.duration:0,"object"==typeof a.seekable&&a.seekable.length>0?(e=this.status.duration>0?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100,f=this.status.duration>0?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(e=100,f=d),b&&(c=0,f=0,d=0),this.status.seekPercent=e,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=d,this.status.currentTime=c,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=a.readyState,this.status.networkState=a.networkState,this.status.playbackRate=a.playbackRate,this.status.ended=a.ended},_getAuroraStatus:function(a,b){var c=0,d=0,e=0,f=0;this.status.duration=a.duration/1e3,c=a.currentTime/1e3,d=this.status.duration>0?100*c/this.status.duration:0,a.buffered>0?(e=this.status.duration>0?a.buffered*this.status.duration/this.status.duration:100,f=this.status.duration>0?c/(a.buffered*this.status.duration):0):(e=100,f=d),b&&(c=0,f=0,d=0),this.status.seekPercent=e,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=d,this.status.currentTime=c,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=a.extend({},this.status,a.jPlayer.prototype.status)},_trigger:function(b,c,d){var e=a.Event(b);e.jPlayer={},e.jPlayer.version=a.extend({},this.version),e.jPlayer.options=a.extend(!0,{},this.options),e.jPlayer.status=a.extend(!0,{},this.status),e.jPlayer.html=a.extend(!0,{},this.html),e.jPlayer.aurora=a.extend(!0,{},this.aurora),e.jPlayer.flash=a.extend(!0,{},this.flash),c&&(e.jPlayer.error=a.extend({},c)),d&&(e.jPlayer.warning=a.extend({},d)),this.element.trigger(e)},jPlayerFlashEvent:function(b,c){if(b===a.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var d=this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),d>0&&(e?this.pause(d):this.play(d))}this._trigger(a.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:a.jPlayer.error.VERSION,context:this.version.flash,message:a.jPlayer.errorMsg.VERSION+this.version.flash,hint:a.jPlayer.errorHint.VERSION}),this._trigger(a.jPlayer.event.repeat),this._trigger(b);if(this.flash.gate)switch(b){case a.jPlayer.event.progress:this._getFlashStatus(c),this._updateInterface(),this._trigger(b);break;case a.jPlayer.event.timeupdate:this._getFlashStatus(c),this._updateInterface(),this._trigger(b);break;case a.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(b);break;case a.jPlayer.event.pause:this._updateButtons(!1),this._trigger(b);break;case a.jPlayer.event.ended:this._updateButtons(!1),this._trigger(b);break;case a.jPlayer.event.click:this._trigger(b);break;case a.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:a.jPlayer.error.URL,context:c.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL});break;case a.jPlayer.event.seeking:this._seeking(),this._trigger(b);break;case a.jPlayer.event.seeked:this._seeked(),this._trigger(b);break;case a.jPlayer.event.ready:break;default:this._trigger(b)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent,this.status.currentPercentRelative=a.currentPercentRelative,this.status.currentPercentAbsolute=a.currentPercentAbsolute,this.status.currentTime=a.currentTime,this.status.duration=a.duration,this.status.remaining=a.duration-a.currentTime,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(a){a===b?a=!this.status.paused:this.status.paused=!a,a?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var a="";this.css.jq.currentTime.length&&(a=this._convertTime(this.status.currentTime),a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var b="",c=this.status.duration,d=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?b=this.status.media.duration:("number"==typeof this.status.media.duration&&(c=this.status.media.duration,d=c-this.status.currentTime),b=this.options.remainingDuration?(d>0?"-":"")+this._convertTime(d):this._convertTime(c)),b!==this.css.jq.duration.text()&&this.css.jq.duration.text(b))},_convertTime:c.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var b=document.createElement("div");return b.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>',b.firstChild.href},_absoluteMediaUrls:function(b){var c=this;return a.each(b,function(a,d){d&&c.format[a]&&"data:"!==d.substr(0,5)&&(b[a]=c._qualifyURL(d))}),b},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(b){var c=this,d=!1,e=this.status.media.poster!==b.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,b=this._absoluteMediaUrls(b),a.each(this.formats,function(e,f){var g="video"===c.format[f].media;return a.each(c.solutions,function(e,h){if(c[h].support[f]&&c._validString(b[f])){var i="html"===h,j="aurora"===h;return g?(i?(c.html.video.gate=!0,c._html_setVideo(b),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(b),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(i?(c.html.audio.gate=!0,c._html_setAudio(b),c.html.active=!0,a.jPlayer.platform.android&&(c.androidFix.setMedia=!0)):j?(c.aurora.gate=!0,c._aurora_setAudio(b),c.aurora.active=!0):(c.flash.gate=!0,c._flash_setAudio(b),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1),d=!0,!1}}),d?!1:void 0}),d?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(b.poster)&&(e?this.htmlElement.poster.src=b.poster:this.internal.poster.jq.show()),"string"==typeof b.title&&(this.css.jq.title.length&&this.css.jq.title.html(b.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",b.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",b.title)),this.status.srcSet=!0,this.status.media=a.extend({},b),this._updateButtons(!1),this._updateInterface(),this._trigger(a.jPlayer.event.setmedia)):this._error({type:a.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SUPPORT,hint:a.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(a.jPlayer.focus=this)},play:function(a){var b="object"==typeof a;b&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"==typeof a?a:0/0,this.status.srcSet?(this.focus(),this.html.active?this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"==typeof a?a:0/0,this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(b,c){var d=this,e="function"==typeof c,f=Array.prototype.slice.call(arguments);"string"==typeof b&&(e&&f.splice(1,1),a.jPlayer.prototype.destroyRemoved(),a.each(this.instances,function(){d.element!==this&&(!e||c.call(this.data("jPlayer"),d))&&this.jPlayer.apply(this,f)}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100),this.status.srcSet?this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(b){this.options.muted=b,this.html.used&&this._html_setProperty("muted",b),this.aurora.used&&this._aurora_mute(b),this.flash.used&&this._flash_mute(b),this.html.video.gate||this.html.audio.gate||(this._updateMute(b),this._updateVolume(this.options.volume),this._trigger(a.jPlayer.event.volumechange))},mute:function(a){var c="object"==typeof a;c&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===b?!0:!!a,this._muted(a))},unmute:function(a){a=a===b?!0:!!a,this._muted(!a)},_updateMute:function(a){a===b&&(a=this.options.muted),a?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(b){b=this._limitValue(b,0,1),this.options.volume=b,this.html.used&&this._html_setProperty("volume",b),this.aurora.used&&this._aurora_volume(b),this.flash.used&&this._flash_volume(b),this.html.video.gate||this.html.audio.gate||(this._updateVolume(b),this._trigger(a.jPlayer.event.volumechange))},volumeBar:function(b){if(this.css.jq.volumeBar.length){var c=a(b.currentTarget),d=c.offset(),e=b.pageX-d.left,f=c.width(),g=c.height()-b.pageY+d.top,h=c.height();this.volume(this.options.verticalVolume?g/h:e/f)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===b&&(a=this.options.volume),a=this.options.muted?0:a,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(b){var c=this;this.options.cssSelectorAncestor=b,this._removeUiClass(),this.ancestorJq=b?a(b):[],b&&1!==this.ancestorJq.length&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),a.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(b,c){var d=this;if("string"==typeof c)if(a.jPlayer.prototype.options.cssSelector[b]){if(this.css.jq[b]&&this.css.jq[b].length&&this.css.jq[b].unbind(".jPlayer"),this.options.cssSelector[b]=c,this.css.cs[b]=this.options.cssSelectorAncestor+" "+c,this.css.jq[b]=c?a(this.css.cs[b]):[],this.css.jq[b].length&&this[b]){var e=function(c){c.preventDefault(),d[b](c),d.options.autoBlur?a(this).blur():a(this).focus()};this.css.jq[b].bind("click.jPlayer",e)}c&&1!==this.css.jq[b].length&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[b],message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[b].length+" found for "+b+" method.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_METHOD,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:a.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:a.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:a.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(b){if(this.css.jq.seekBar.length){var c=a(b.currentTarget),d=c.offset(),e=b.pageX-d.left,f=c.width(),g=100*e/f;this.playHead(g)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(b){if(this.css.jq.playbackRateBar.length){var c,d,e=a(b.currentTarget),f=e.offset(),g=b.pageX-f.left,h=e.width(),i=e.height()-b.pageY+f.top,j=e.height();c=this.options.verticalPlaybackRate?i/j:g/h,d=c*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(d)}},_updatePlaybackRate:function(){var a=this.options.playbackRate,b=(a-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*b+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){var b="object"==typeof a;this._loop(b&&this.options.useStateClassSkin&&this.options.loop?!1:!0)},repeatOff:function(){this._loop(!1)},_loop:function(b){this.options.loop!==b&&(this.options.loop=b,this._updateButtons(),this._trigger(a.jPlayer.event.repeat))},option:function(c,d){var e=c;if(0===arguments.length)return a.extend(!0,{},this.options);if("string"==typeof c){var f=c.split(".");if(d===b){for(var g=a.extend(!0,{},this.options),h=0;h<f.length;h++){if(g[f[h]]===b)return this._warning({type:a.jPlayer.warning.OPTION_KEY,context:c,message:a.jPlayer.warningMsg.OPTION_KEY,hint:a.jPlayer.warningHint.OPTION_KEY}),b;g=g[f[h]]}return g}e={};for(var i=e,j=0;j<f.length;j++)j<f.length-1?(i[f[j]]={},i=i[f[j]]):i[f[j]]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(b,c){var d=this;switch(b){case"volume":this.volume(c);break;case"muted":this._muted(c);break;case"globalVolume":this.options[b]=c;break;case"cssSelectorAncestor":this._cssSelectorAncestor(c);break;case"cssSelector":a.each(c,function(a,b){d._cssSelector(a,b)});break;case"playbackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",c),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",c),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[b]=c=this._limitValue(c,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[b]!==c){var e=a.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!e||e&&!this.status.waitForPlay)&&(e||(this.options[b]=c),c?this._requestFullscreen():this._exitFullscreen(),e||this._setOption("fullWindow",c))}break;case"fullWindow":this.options[b]!==c&&(this._removeUiClass(),this.options[b]=c,this._refreshSize());break;case"size":this.options.fullWindow||this.options[b].cssClass===c.cssClass||this._removeUiClass(),this.options[b]=a.extend({},this.options[b],c),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[b].cssClass!==c.cssClass&&this._removeUiClass(),this.options[b]=a.extend({},this.options[b],c),this._refreshSize();break;case"autohide":this.options[b]=a.extend({},this.options[b],c),this._updateAutohide();break;case"loop":this._loop(c);break;case"remainingDuration":this.options[b]=c,this._updateInterface();break;case"toggleDuration":this.options[b]=c;break;case"nativeVideoControls":this.options[b]=a.extend({},this.options[b],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[b]=a.extend({},this.options[b],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[b]=a.extend({},this.options[b],c),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[b]!==c&&(this.options[b]=c,c?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[b]=a.extend({},this.options[b],c);break;case"keyEnabled":this.options[b]=c,c||this!==a.jPlayer.focus||(a.jPlayer.focus=null);break;case"keyBindings":this.options[b]=a.extend(!0,{},this.options[b],c);break;case"audioFullScreen":this.options[b]=c;break;case"autoBlur":this.options[b]=c}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(a.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,b="mousemove.jPlayer",c=".jPlayerAutohide",d=b+c,e=function(b){var c,d,e=!1;"undefined"!=typeof a.internal.mouse?(c=a.internal.mouse.x-b.pageX,d=a.internal.mouse.y-b.pageY,e=Math.floor(c)>0||Math.floor(d)>0):e=!0,a.internal.mouse={x:b.pageX,y:b.pageY},e&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId),a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(c),this.css.jq.gui.unbind(c),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(d,e),this.css.jq.gui.bind(d,e),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){var b="object"==typeof a;b&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var b=this,c=a.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){b._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var b=a.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(b.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!a.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var b=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=a.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(b=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.requestFullscreen(b)},_exitFullscreen:function(){var b,c=a.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(b=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.exitFullscreen(b)},_html_initMedia:function(b){var c=a(this.htmlElement.media).empty();a.each(b.track||[],function(a,b){var d=document.createElement("track");d.setAttribute("kind",b.kind?b.kind:""),d.setAttribute("src",b.src?b.src:""),d.setAttribute("srclang",b.srclang?b.srclang:""),d.setAttribute("label",b.label?b.label:""),b.def&&d.setAttribute("default",b.def),c.append(d)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(a.jPlayer.event.timeupdate)},_html_setFormat:function(b){var c=this;a.each(this.formats,function(a,d){return c.html.support[d]&&b[d]?(c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1):void 0})},_html_setAudio:function(a){this._html_setFormat(a),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?a.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,c=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))c.play();else{this.internal.cmdsIgnored&&c.play();try{if(c.seekable&&!("object"==typeof c.seekable&&c.seekable.length>0))throw 1;c.currentTime=a,c.play()}catch(d){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250))}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,c=this.htmlElement.media;if(this.androidFix.play=!1,a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),c.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(c.seekable&&!("object"==typeof c.seekable&&c.seekable.length>0))throw 1;c.currentTime=a}catch(d){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250))}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this,c=this.htmlElement.media;this._html_load();try{if("object"==typeof c.seekable&&c.seekable.length>0)c.currentTime=a*c.seekable.end(c.seekable.length-1)/100;else{if(!(c.duration>0)||isNaN(c.duration))throw"e";c.currentTime=a*c.duration/100}}catch(d){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b),this.html.video.available&&(this.htmlElement.video[a]=b)},_aurora_setAudio:function(b){var c=this;a.each(this.formats,function(a,d){return c.aurora.support[d]&&b[d]?(c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1):void 0}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(b){this.status.waitForLoad||isNaN(b)||this.aurora.player.seek(b),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(a.jPlayer.event.play)},_aurora_pause:function(b){isNaN(b)||this.aurora.player.seek(1e3*b),this.aurora.player.pause(),b>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(a.jPlayer.event.pause)},_aurora_playHead:function(a){this.aurora.player.duration>0&&this.aurora.player.seek(a*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=a},_flash_setAudio:function(b){var c=this;try{a.each(this.formats,function(a,d){if(c.flash.support[d]&&b[d]){switch(d){case"m4a":case"fla":c._getMovie().fl_setAudio_m4a(b[d]);break;case"mp3":c._getMovie().fl_setAudio_mp3(b[d]);break;case"rtmpa":c._getMovie().fl_setAudio_rtmp(b[d])}return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_setVideo:function(b){var c=this;try{a.each(this.formats,function(a,d){if(c.flash.support[d]&&b[d]){switch(d){case"m4v":case"flv":c._getMovie().fl_setVideo_m4v(b[d]);break;case"rtmpv":c._getMovie().fl_setVideo_rtmp(b[d])}return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(0/0)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}a>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a,b=0;if(window.ActiveXObject)try{if(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var c=a.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),b=parseInt(c[0],10)+"."+parseInt(c[1],10))}}catch(d){}else navigator.plugins&&navigator.mimeTypes.length>0&&(a=navigator.plugins["Shockwave Flash"],a&&(b=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*b},_checkForFlash:function(a){var b=!1;return this._getFlashPluginVersion()>=a&&(b=!0),b},_validString:function(a){return a&&"string"==typeof a},_limitValue:function(a,b,c){return b>a?b:a>c?c:a},_urlNotSetError:function(b){this._error({type:a.jPlayer.error.URL_NOT_SET,context:b,message:a.jPlayer.errorMsg.URL_NOT_SET,hint:a.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(b){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:a.jPlayer.error[c],context:this.internal.flash.swf,message:a.jPlayer.errorMsg[c]+b.message,hint:a.jPlayer.errorHint[c]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(b){this._trigger(a.jPlayer.event.error,b),this.options.errorAlerts&&this._alert("Error!"+(b.message?"\n"+b.message:"")+(b.hint?"\n"+b.hint:"")+"\nContext: "+b.context)},_warning:function(c){this._trigger(a.jPlayer.event.warning,b,c),this.options.warningAlerts&&this._alert("Warning!"+(c.message?"\n"+c.message:"")+(c.hint?"\n"+c.hint:"")+"\nContext: "+c.context)},_alert:function(a){var b="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(b):alert(b)},_emulateHtmlBridge:function(){var b=this;a.each(a.jPlayer.emulateMethods.split(/\s+/g),function(a,c){b.internal.domNode[c]=function(a){b[c](a)}}),a.each(a.jPlayer.event,function(c,d){var e=!0;a.each(a.jPlayer.reservedEvent.split(/\s+/g),function(a,b){return b===c?(e=!1,!1):void 0}),e&&b.element.bind(d+".jPlayer.jPlayerHtml",function(){b._emulateHtmlUpdate();var a=document.createEvent("Event");a.initEvent(c,!1,!0),b.internal.domNode.dispatchEvent(a)})})},_emulateHtmlUpdate:function(){var b=this;a.each(a.jPlayer.emulateStatus.split(/\s+/g),function(a,c){b.internal.domNode[c]=b.status[c]}),a.each(a.jPlayer.emulateOptions.split(/\s+/g),function(a,c){b.internal.domNode[c]=b.options[c]})},_destroyHtmlBridge:function(){var b=this;this.element.unbind(".jPlayerHtml");var c=a.jPlayer.emulateMethods+" "+a.jPlayer.emulateStatus+" "+a.jPlayer.emulateOptions;a.each(c.split(/\s+/g),function(a,c){delete b.internal.domNode[c]})}},a.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},a.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+a.jPlayer.prototype.version.script+" needs Jplayer.swf version "+a.jPlayer.prototype.version.needFlash+" but found "},a.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},a.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},a.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},a.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});;;(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var
push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else{root._=_;}
_.VERSION='1.7.0';var createCallback=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value);};case 2:return function(value,other){return func.call(context,value,other);};case 3:return function(value,index,collection){return func.call(context,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection);};}
return function(){return func.apply(context,arguments);};};_.iteratee=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return createCallback(value,context,argCount);if(_.isObject(value))return _.matches(value);return _.property(value);};_.each=_.forEach=function(obj,iteratee,context){if(obj==null)return obj;iteratee=createCallback(iteratee,context);var i,length=obj.length;if(length===+length){for(i=0;i<length;i++){iteratee(obj[i],i,obj);}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj);}}
return obj;};_.map=_.collect=function(obj,iteratee,context){if(obj==null)return[];iteratee=_.iteratee(iteratee,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,results=Array(length),currentKey;for(var index=0;index<length;index++){currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj);}
return results;};var reduceError='Reduce of empty array with no initial value';_.reduce=_.foldl=_.inject=function(obj,iteratee,memo,context){if(obj==null)obj=[];iteratee=createCallback(iteratee,context,4);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index=0,currentKey;if(arguments.length<3){if(!length)throw new TypeError(reduceError);memo=obj[keys?keys[index++]:index++];}
for(;index<length;index++){currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj);}
return memo;};_.reduceRight=_.foldr=function(obj,iteratee,memo,context){if(obj==null)obj=[];iteratee=createCallback(iteratee,context,4);var keys=obj.length!==+obj.length&&_.keys(obj),index=(keys||obj).length,currentKey;if(arguments.length<3){if(!index)throw new TypeError(reduceError);memo=obj[keys?keys[--index]:--index];}
while(index--){currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj);}
return memo;};_.find=_.detect=function(obj,predicate,context){var result;predicate=_.iteratee(predicate,context);_.some(obj,function(value,index,list){if(predicate(value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,predicate,context){var results=[];if(obj==null)return results;predicate=_.iteratee(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value);});return results;};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(_.iteratee(predicate)),context);};_.every=_.all=function(obj,predicate,context){if(obj==null)return true;predicate=_.iteratee(predicate,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index,currentKey;for(index=0;index<length;index++){currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false;}
return true;};_.some=_.any=function(obj,predicate,context){if(obj==null)return false;predicate=_.iteratee(predicate,context);var keys=obj.length!==+obj.length&&_.keys(obj),length=(keys||obj).length,index,currentKey;for(index=0;index<length;index++){currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true;}
return false;};_.contains=_.include=function(obj,target){if(obj==null)return false;if(obj.length!==+obj.length)obj=_.values(obj);return _.indexOf(obj,target)>=0;};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,_.property(key));};_.where=function(obj,attrs){return _.filter(obj,_.matches(attrs));};_.findWhere=function(obj,attrs){return _.find(obj,_.matches(attrs));};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value;}}}else{iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed;}});}
return result;};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=obj.length===+obj.length?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value;}}}else{iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed;}});}
return result;};_.shuffle=function(obj){var set=obj&&obj.length===+obj.length?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index];}
return shuffled;};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)];}
return _.shuffle(obj).slice(0,Math.max(0,n));};_.sortBy=function(obj,iteratee,context){iteratee=_.iteratee(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)};}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1;}
return left.index-right.index;}),'value');};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=_.iteratee(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key);});return result;};};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value];});_.indexBy=group(function(result,value,key){result[key]=value;});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1;});_.sortedIndex=function(array,obj,iteratee,context){iteratee=_.iteratee(iteratee,context,1);var value=iteratee(obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;if(iteratee(array[mid])<value)low=mid+1;else high=mid;}
return low;};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj);};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length;};_.partition=function(obj,predicate,context){predicate=_.iteratee(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value);});return[pass,fail];};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];if(n<0)return[];return slice.call(array,0,n);};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)));};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return slice.call(array,Math.max(array.length-n,0));};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n);};_.compact=function(array){return _.filter(array,_.identity);};var flatten=function(input,shallow,strict,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input);}
for(var i=0,length=input.length;i<length;i++){var value=input[i];if(!_.isArray(value)&&!_.isArguments(value)){if(!strict)output.push(value);}else if(shallow){push.apply(output,value);}else{flatten(value,shallow,strict,output);}}
return output;};_.flatten=function(array,shallow){return flatten(array,shallow,false,[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(array==null)return[];if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false;}
if(iteratee!=null)iteratee=_.iteratee(iteratee,context);var result=[];var seen=[];for(var i=0,length=array.length;i<length;i++){var value=array[i];if(isSorted){if(!i||seen!==value)result.push(value);seen=value;}else if(iteratee){var computed=iteratee(value,i,array);if(_.indexOf(seen,computed)<0){seen.push(computed);result.push(value);}}else if(_.indexOf(result,value)<0){result.push(value);}}
return result;};_.union=function(){return _.uniq(flatten(arguments,true,true,[]));};_.intersection=function(array){if(array==null)return[];var result=[];var argsLength=arguments.length;for(var i=0,length=array.length;i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break;}
if(j===argsLength)result.push(item);}
return result;};_.difference=function(array){var rest=flatten(slice.call(arguments,1),true,true,[]);return _.filter(array,function(value){return!_.contains(rest,value);});};_.zip=function(array){if(array==null)return[];var length=_.max(arguments,'length').length;var results=Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,i);}
return results;};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++){if(values){result[list[i]]=values[i];}else{result[list[i][0]]=list[i][1];}}
return result;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted){if(typeof isSorted=='number'){i=isSorted<0?Math.max(0,length+isSorted):isSorted;}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1;}}
for(;i<length;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var idx=array.length;if(typeof from=='number'){idx=from<0?idx+from+1:Math.min(idx,from+1);}
while(--idx>=0)if(array[idx]===item)return idx;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=step||1;var length=Math.max(Math.ceil((stop-start)/ step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start;}
return range;};var Ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError('Bind must be called on a function');args=slice.call(arguments,2);bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));Ctor.prototype=func.prototype;var self=new Ctor;Ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(_.isObject(result))return result;return self;};return bound;};_.partial=function(func){var boundArgs=slice.call(arguments,1);return function(){var position=0;var args=boundArgs.slice();for(var i=0,length=args.length;i<length;i++){if(args[i]===_)args[i]=arguments[position++];}
while(position<arguments.length)args.push(arguments[position++]);return func.apply(this,args);};};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error('bindAll must be passed function names');for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj);}
return obj;};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=hasher?hasher.apply(this,arguments):key;if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address];};memoize.cache={};return memoize;};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null;};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args);if(!timeout)context=args=null;}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining);}
return result;};};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>0){timeout=setTimeout(later,wait-last);}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null;}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null;}
return result;};};_.wrap=function(func,wrapper){return _.partial(wrapper,func);};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments);};};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result;};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments);}else{func=null;}
return memo;};};_.once=_.partial(_.before,2);_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys;};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]];}
return values;};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]];}
return pairs;};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i];}
return result;};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){if(!_.isObject(obj))return obj;var source,prop;for(var i=1,length=arguments.length;i<length;i++){source=arguments[i];for(prop in source){if(hasOwnProperty.call(source,prop)){obj[prop]=source[prop];}}}
return obj;};_.pick=function(obj,iteratee,context){var result={},key;if(obj==null)return result;if(_.isFunction(iteratee)){iteratee=createCallback(iteratee,context);for(key in obj){var value=obj[key];if(iteratee(value,key,obj))result[key]=value;}}else{var keys=concat.apply([],slice.call(arguments,1));obj=new Object(obj);for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(key in obj)result[key]=obj[key];}}
return result;};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee);}else{var keys=_.map(concat.apply([],slice.call(arguments,1)),String);iteratee=function(value,key){return!_.contains(keys,key);};}
return _.pick(obj,iteratee,context);};_.defaults=function(obj){if(!_.isObject(obj))return obj;for(var i=1,length=arguments.length;i<length;i++){var source=arguments[i];for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop];}}
return obj;};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1 / a===1 / b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case'[object RegExp]':case'[object String]':return''+a===''+b;case'[object Number]':if(+a!==+a)return+b!==+b;return+a===0?1 /+a===1 / b:+a===+b;case'[object Date]':case'[object Boolean]':return+a===+b;}
if(typeof a!='object'||typeof b!='object')return false;var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b;}
var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&'constructor'in a&&'constructor'in b&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false;}
aStack.push(a);bStack.push(b);var size,result;if(className==='[object Array]'){size=a.length;result=size===b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break;}}}else{var keys=_.keys(a),key;size=keys.length;result=_.keys(b).length===size;if(result){while(size--){key=keys[size];if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break;}}}
aStack.pop();bStack.pop();return result;};_.isEqual=function(a,b){return eq(a,b,[],[]);};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType===1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isObject=function(obj){var type=typeof obj;return type==='function'||type==='object'&&!!obj;};_.each(['Arguments','Function','String','Number','Date','RegExp'],function(name){_['is'+name]=function(obj){return toString.call(obj)==='[object '+name+']';};});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,'callee');};}
if(typeof /./!=='function'){_.isFunction=function(obj){return typeof obj=='function'||false;};}
_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj));};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==='[object Boolean]';};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key);};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.constant=function(value){return function(){return value;};};_.noop=function(){};_.property=function(key){return function(obj){return obj[key];};};_.matches=function(attrs){var pairs=_.pairs(attrs),length=pairs.length;return function(obj){if(obj==null)return!length;obj=new Object(obj);for(var i=0;i<length;i++){var pair=pairs[i],key=pair[0];if(pair[1]!==obj[key]||!(key in obj))return false;}
return true;};};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=createCallback(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum;};_.random=function(min,max){if(max==null){max=min;min=0;}
return min+Math.floor(Math.random()*(max-min+1));};_.now=Date.now||function(){return new Date().getTime();};var escapeMap={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match];};var source='(?:'+_.keys(map).join('|')+')';var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,'g');return function(string){string=string==null?'':''+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string;};};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?object[property]():value;};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+'';return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return'\\'+escapes[match];};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join('|')+'|$','g');var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";}else if(evaluate){source+="';\n"+evaluate+"\n__p+='";}
return match;});source+="';\n";if(!settings.variable)source='with(obj||{}){\n'+source+'}\n';source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+
source+'return __p;\n';try{var render=new Function(settings.variable||'obj','_',source);}catch(e){e.source=source;throw e;}
var template=function(data){return render.call(this,data,_);};var argument=settings.variable||'obj';template.source='function('+argument+'){\n'+source+'}';return template;};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance;};var result=function(obj){return this._chain?_(obj).chain():obj;};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args));};});};_.mixin(_);_.each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==='shift'||name==='splice')&&obj.length===0)delete obj[0];return result.call(this,obj);};});_.each(['concat','join','slice'],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments));};});_.prototype.value=function(){return this._wrapped;};if(typeof define==='function'&&define.amd){define('underscore',[],function(){return _;});}}.call(this));;;(function(root,factory){if(typeof define==='function'&&define.amd){define(['underscore','jquery','exports'],function(_,$,exports){root.Backbone=factory(root,exports,_,$);});}else if(typeof exports!=='undefined'){var _=require('underscore');factory(root,exports,_);}else{root.Backbone=factory(root,{},root._,(root.jQuery||root.Zepto||root.ender||root.$));}}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone;var array=[];var push=array.push;var slice=array.slice;var splice=array.splice;Backbone.VERSION='1.1.2';Backbone.$=$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this;};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,'on',name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);events.push({callback:callback,context:context,ctx:context||this});return this;},once:function(name,callback,context){if(!eventsApi(this,'once',name,[callback,context])||!callback)return this;var self=this;var once=_.once(function(){self.off(name,once);callback.apply(this,arguments);});once._callback=callback;return this.on(name,once,context);},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,'off',name,[callback,context]))return this;if(!name&&!callback&&!context){this._events=void 0;return this;}
names=name?[name]:_.keys(this._events);for(i=0,l=names.length;i<l;i++){name=names[i];if(events=this._events[name]){this._events[name]=retain=[];if(callback||context){for(j=0,k=events.length;j<k;j++){ev=events[j];if((callback&&callback!==ev.callback&&callback!==ev.callback._callback)||(context&&context!==ev.context)){retain.push(ev);}}}
if(!retain.length)delete this._events[name];}}
return this;},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,'trigger',name,args))return this;var events=this._events[name];var allEvents=this._events.all;if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,arguments);return this;},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;if(!callback&&typeof name==='object')callback=this;if(obj)(listeningTo={})[obj._listenId]=obj;for(var id in listeningTo){obj=listeningTo[id];obj.off(name,callback,this);if(remove||_.isEmpty(obj._events))delete this._listeningTo[id];}
return this;}};var eventSplitter=/\s+/;var eventsApi=function(obj,action,name,rest){if(!name)return true;if(typeof name==='object'){for(var key in name){obj[action].apply(obj,[key,name[key]].concat(rest));}
return false;}
if(eventSplitter.test(name)){var names=name.split(eventSplitter);for(var i=0,l=names.length;i<l;i++){obj[action].apply(obj,[names[i]].concat(rest));}
return false;}
return true;};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args);return;}};var listenMethods={listenTo:'on',listenToOnce:'once'};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={});var id=obj._listenId||(obj._listenId=_.uniqueId('l'));listeningTo[id]=obj;if(!callback&&typeof name==='object')callback=this;obj[implementation](name,callback,this);return this;};});Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.cid=_.uniqueId('c');this.attributes={};if(options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};attrs=_.defaults({},attrs,_.result(this,'defaults'));this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments);};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:'id',initialize:function(){},toJSON:function(options){return _.clone(this.attributes);},sync:function(){return Backbone.sync.apply(this,arguments);},get:function(attr){return this.attributes[attr];},escape:function(attr){return _.escape(this.get(attr));},has:function(attr){return this.get(attr)!=null;},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(key==null)return this;if(typeof key==='object'){attrs=key;options=val;}else{(attrs={})[key]=val;}
options||(options={});if(!this._validate(attrs,options))return false;unset=options.unset;silent=options.silent;changes=[];changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={};}
current=this.attributes,prev=this._previousAttributes;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];for(attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){this.changed[attr]=val;}else{delete this.changed[attr];}
unset?delete current[attr]:current[attr]=val;}
if(!silent){if(changes.length)this._pending=options;for(var i=0,l=changes.length;i<l;i++){this.trigger('change:'+changes[i],this,current[changes[i]],options);}}
if(changing)return this;if(!silent){while(this._pending){options=this._pending;this._pending=false;this.trigger('change',this,options);}}
this._pending=false;this._changing=false;return this;},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}));},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}));},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr);},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var val,changed=false;var old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff){if(_.isEqual(old[attr],(val=diff[attr])))continue;(changed||(changed={}))[attr]=val;}
return changed;},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr];},previousAttributes:function(){return _.clone(this._previousAttributes);},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var model=this;var success=options.success;options.success=function(resp){if(!model.set(model.parse(resp,options),options))return false;if(success)success(model,resp,options);model.trigger('sync',model,resp,options);};wrapError(this,options);return this.sync('read',this,options);},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(key==null||typeof key==='object'){attrs=key;options=val;}else{(attrs={})[key]=val;}
options=_.extend({validate:true},options);if(attrs&&!options.wait){if(!this.set(attrs,options))return false;}else{if(!this._validate(attrs,options))return false;}
if(attrs&&options.wait){this.attributes=_.extend({},attributes,attrs);}
if(options.parse===void 0)options.parse=true;var model=this;var success=options.success;options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait)serverAttrs=_.extend(attrs||{},serverAttrs);if(_.isObject(serverAttrs)&&!model.set(serverAttrs,options)){return false;}
if(success)success(model,resp,options);model.trigger('sync',model,resp,options);};wrapError(this,options);method=this.isNew()?'create':(options.patch?'patch':'update');if(method==='patch')options.attrs=attrs;xhr=this.sync(method,this,options);if(attrs&&options.wait)this.attributes=attributes;return xhr;},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var destroy=function(){model.trigger('destroy',model,model.collection,options);};options.success=function(resp){if(options.wait||model.isNew())destroy();if(success)success(model,resp,options);if(!model.isNew())model.trigger('sync',model,resp,options);};if(this.isNew()){options.success();return false;}
wrapError(this,options);var xhr=this.sync('delete',this,options);if(!options.wait)destroy();return xhr;},url:function(){var base=_.result(this,'urlRoot')||_.result(this.collection,'url')||urlError();if(this.isNew())return base;return base.replace(/([^\/])$/,'$1/')+encodeURIComponent(this.id);},parse:function(resp,options){return resp;},clone:function(){return new this.constructor(this.attributes);},isNew:function(){return!this.has(this.idAttribute);},isValid:function(options){return this._validate({},_.extend(options||{},{validate:true}));},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger('invalid',this,error,_.extend(options,{validationError:error}));return false;}});var modelMethods=['keys','values','pairs','invert','pick','omit'];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.attributes);return _[method].apply(_,args);};});var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options));};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,remove:false};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options);});},sync:function(){return Backbone.sync.apply(this,arguments);},add:function(models,options){return this.set(models,_.extend({merge:false},options,addOptions));},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models);options||(options={});var i,l,index,model;for(i=0,l=models.length;i<l;i++){model=models[i]=this.get(models[i]);if(!model)continue;delete this._byId[model.id];delete this._byId[model.cid];index=this.indexOf(model);this.models.splice(index,1);this.length--;if(!options.silent){options.index=index;model.trigger('remove',model,this,options);}
this._removeReference(model,options);}
return singular?models[0]:models;},set:function(models,options){options=_.defaults({},options,setOptions);if(options.parse)models=this.parse(models,options);var singular=!_.isArray(models);models=singular?(models?[models]:[]):_.clone(models);var i,l,id,model,attrs,existing,sort;var at=options.at;var targetModel=this.model;var sortable=this.comparator&&(at==null)&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var toAdd=[],toRemove=[],modelMap={};var add=options.add,merge=options.merge,remove=options.remove;var order=!sortable&&add&&remove?[]:false;for(i=0,l=models.length;i<l;i++){attrs=models[i]||{};if(attrs instanceof Model){id=model=attrs;}else{id=attrs[targetModel.prototype.idAttribute||'id'];}
if(existing=this.get(id)){if(remove)modelMap[existing.cid]=true;if(merge){attrs=attrs===model?model.attributes:attrs;if(options.parse)attrs=existing.parse(attrs,options);existing.set(attrs,options);if(sortable&&!sort&&existing.hasChanged(sortAttr))sort=true;}
models[i]=existing;}else if(add){model=models[i]=this._prepareModel(attrs,options);if(!model)continue;toAdd.push(model);this._addReference(model,options);}
model=existing||model;if(order&&(model.isNew()||!modelMap[model.id]))order.push(model);modelMap[model.id]=true;}
if(remove){for(i=0,l=this.length;i<l;++i){if(!modelMap[(model=this.models[i]).cid])toRemove.push(model);}
if(toRemove.length)this.remove(toRemove,options);}
if(toAdd.length||(order&&order.length)){if(sortable)sort=true;this.length+=toAdd.length;if(at!=null){for(i=0,l=toAdd.length;i<l;i++){this.models.splice(at+i,0,toAdd[i]);}}else{if(order)this.models.length=0;var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;i<l;i++){this.models.push(orderedModels[i]);}}}
if(sort)this.sort({silent:true});if(!options.silent){for(i=0,l=toAdd.length;i<l;i++){(model=toAdd[i]).trigger('add',model,this,options);}
if(sort||(order&&order.length))this.trigger('sort',this,options);}
return singular?models[0]:models;},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;i<l;i++){this._removeReference(this.models[i],options);}
options.previousModels=this.models;this._reset();models=this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger('reset',this,options);return models;},push:function(model,options){return this.add(model,_.extend({at:this.length},options));},pop:function(options){var model=this.at(this.length-1);this.remove(model,options);return model;},unshift:function(model,options){return this.add(model,_.extend({at:0},options));},shift:function(options){var model=this.at(0);this.remove(model,options);return model;},slice:function(){return slice.apply(this.models,arguments);},get:function(obj){if(obj==null)return void 0;return this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid];},at:function(index){return this.models[index];},where:function(attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return this[first?'find':'filter'](function(model){for(var key in attrs){if(attrs[key]!==model.get(key))return false;}
return true;});},findWhere:function(attrs){return this.where(attrs,true);},sort:function(options){if(!this.comparator)throw new Error('Cannot sort a set without a comparator');options||(options={});if(_.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this);}else{this.models.sort(_.bind(this.comparator,this));}
if(!options.silent)this.trigger('sort',this,options);return this;},pluck:function(attr){return _.invoke(this.models,'get',attr);},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?'reset':'set';collection[method](resp,options);if(success)success(collection,resp,options);collection.trigger('sync',collection,resp,options);};wrapError(this,options);return this.sync('read',this,options);},create:function(model,options){options=options?_.clone(options):{};if(!(model=this._prepareModel(model,options)))return false;if(!options.wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(model,resp){if(options.wait)collection.add(model,options);if(success)success(model,resp,options);};model.save(null,options);return model;},parse:function(resp,options){return resp;},clone:function(){return new this.constructor(this.models);},_reset:function(){this.length=0;this.models=[];this._byId={};},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;options=options?_.clone(options):{};options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;this.trigger('invalid',this,model.validationError,options);return false;},_addReference:function(model,options){this._byId[model.cid]=model;if(model.id!=null)this._byId[model.id]=model;if(!model.collection)model.collection=this;model.on('all',this._onModelEvent,this);},_removeReference:function(model,options){if(this===model.collection)delete model.collection;model.off('all',this._onModelEvent,this);},_onModelEvent:function(event,model,collection,options){if((event==='add'||event==='remove')&&collection!==this)return;if(event==='destroy')this.remove(model,options);if(model&&event==='change:'+model.idAttribute){delete this._byId[model.previous(model.idAttribute)];if(model.id!=null)this._byId[model.id]=model;}
this.trigger.apply(this,arguments);}});var methods=['forEach','each','map','collect','reduce','foldl','inject','reduceRight','foldr','find','detect','filter','select','reject','every','all','some','any','include','contains','invoke','max','min','toArray','size','first','head','take','initial','rest','tail','drop','last','without','difference','indexOf','shuffle','lastIndexOf','isEmpty','chain','sample'];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.models);return _[method].apply(_,args);};});var attributeMethods=['groupBy','countBy','sortBy','indexBy'];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value);};return _[method](this.models,iterator,context);};});var View=Backbone.View=function(options){this.cid=_.uniqueId('view');options||(options={});_.extend(this,_.pick(options,viewOptions));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents();};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=['model','collection','el','id','attributes','className','tagName','events'];_.extend(View.prototype,Events,{tagName:'div',$:function(selector){return this.$el.find(selector);},initialize:function(){},render:function(){return this;},remove:function(){this.$el.remove();this.stopListening();return this;},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();this.$el=element instanceof Backbone.$?element:Backbone.$(element);this.el=this.$el[0];if(delegate!==false)this.delegateEvents();return this;},delegateEvents:function(events){if(!(events||(events=_.result(this,'events'))))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter);var eventName=match[1],selector=match[2];method=_.bind(method,this);eventName+='.delegateEvents'+this.cid;if(selector===''){this.$el.on(eventName,method);}else{this.$el.on(eventName,selector,method);}}
return this;},undelegateEvents:function(){this.$el.off('.delegateEvents'+this.cid);return this;},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,'attributes'));if(this.id)attrs.id=_.result(this,'id');if(this.className)attrs['class']=_.result(this,'className');var $el=Backbone.$('<'+_.result(this,'tagName')+'>').attr(attrs);this.setElement($el,false);}else{this.setElement(_.result(this,'el'),false);}}});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:'json'};if(!options.url){params.url=_.result(model,'url')||urlError();}
if(options.data==null&&model&&(method==='create'||method==='update'||method==='patch')){params.contentType='application/json';params.data=JSON.stringify(options.attrs||model.toJSON(options));}
if(options.emulateJSON){params.contentType='application/x-www-form-urlencoded';params.data=params.data?{model:params.data}:{};}
if(options.emulateHTTP&&(type==='PUT'||type==='DELETE'||type==='PATCH')){params.type='POST';if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader('X-HTTP-Method-Override',type);if(beforeSend)return beforeSend.apply(this,arguments);};}
if(params.type!=='GET'&&!options.emulateJSON){params.processData=false;}
if(params.type==='PATCH'&&noXhrPatch){params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP");};}
var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger('request',model,xhr,options);return xhr;};var noXhrPatch=typeof window!=='undefined'&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var methodMap={'create':'POST','update':'PUT','patch':'PATCH','delete':'DELETE','read':'GET'};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments);};var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments);};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name='';}
if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args);router.trigger.apply(router,['route:'+name].concat(args));router.trigger('route',name,args);Backbone.history.trigger('route',router,name,args);});return this;},execute:function(callback,args){if(callback)callback.apply(this,args);},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this;},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,'routes');var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route]);}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,'\\$&').replace(optionalParam,'(?:$1)?').replace(namedParam,function(match,optional){return optional?match:'([^/?]+)';}).replace(splatParam,'([^?]*?)');return new RegExp('^'+route+'(?:\\?([\\s\\S]*))?$');},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null;});}});var History=Backbone.History=function(){this.handlers=[];_.bindAll(this,'checkUrl');if(typeof window!=='undefined'){this.location=window.location;this.history=window.history;}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var isExplorer=/msie [\w.]+/;var trailingSlash=/\/$/;var pathStripper=/#.*$/;History.started=false;_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,'$&/')===this.root;},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:'';},getFragment:function(fragment,forcePushState){if(fragment==null){if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,'');if(!fragment.indexOf(root))fragment=fragment.slice(root.length);}else{fragment=this.getHash();}}
return fragment.replace(routeStripper,'');},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({root:'/'},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment();var docMode=document.documentMode;var oldIE=(isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7));this.root=('/'+this.root+'/').replace(rootStripper,'/');if(oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo('body')[0].contentWindow;this.navigate(fragment);}
if(this._hasPushState){Backbone.$(window).on('popstate',this.checkUrl);}else if(this._wantsHashChange&&('onhashchange'in window)&&!oldIE){Backbone.$(window).on('hashchange',this.checkUrl);}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval);}
this.fragment=fragment;var loc=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+'#'+this.fragment);return true;}else if(this._hasPushState&&this.atRoot()&&loc.hash){this.fragment=this.getHash().replace(routeStripper,'');this.history.replaceState({},document.title,this.root+this.fragment);}}
if(!this.options.silent)return this.loadUrl();},stop:function(){Backbone.$(window).off('popstate',this.checkUrl).off('hashchange',this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=false;},route:function(route,callback){this.handlers.unshift({route:route,callback:callback});},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getFragment(this.getHash(this.iframe));}
if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl();},loadUrl:function(fragment){fragment=this.fragment=this.getFragment(fragment);return _.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true;}});},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:!!options};var url=this.root+(fragment=this.getFragment(fragment||''));fragment=fragment.replace(pathStripper,'');if(this.fragment===fragment)return;this.fragment=fragment;if(fragment===''&&url!=='/')url=url.slice(0,-1);if(this._hasPushState){this.history[options.replace?'replaceState':'pushState']({},document.title,url);}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&(fragment!==this.getFragment(this.getHash(this.iframe)))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,fragment,options.replace);}}else{return this.location.assign(url);}
if(options.trigger)return this.loadUrl(fragment);},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,'');location.replace(href+'#'+fragment);}else{location.hash='#'+fragment;}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,'constructor')){child=protoProps.constructor;}else{child=function(){return parent.apply(this,arguments);};}
_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child;};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child;};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified');};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error(model,resp,options);model.trigger('error',model,resp,options);};};return Backbone;}));;;(function(factory){if(typeof define==='function'&&define.amd){define(['underscore','backbone','exports'],factory);}
else if(typeof exports==='object'){factory(require('underscore'),require('backbone'),exports);}
else{factory(_,Backbone,{});}}(function(_,Backbone,Stickit){Stickit._handlers=[];Stickit.addHandler=function(handlers){handlers=_.map(_.flatten([handlers]),function(handler){return _.extend({updateModel:true,updateView:true,updateMethod:'text'},handler);});this._handlers=this._handlers.concat(handlers);};Stickit.ViewMixin={_modelBindings:null,unstickit:function(model,bindingSelector){if(_.isObject(bindingSelector)){_.each(_.keys(bindingSelector),function(selector){this.unstickit(model,selector);},this);return;}
var models=[],destroyFns=[];_.each(this._modelBindings,function(binding,i){if(model&&binding.model!==model){return;}
if(bindingSelector&&binding.config.selector!=bindingSelector)return;destroyFns.push(binding.config._destroy);binding.model.off(binding.event,binding.fn);models.push(binding.model);delete this._modelBindings[i];},this);_.invoke(_.uniq(models),'trigger','stickit:unstuck',this.cid);_.each(_.uniq(destroyFns),function(fn){fn.call(this);},this);this._modelBindings=_.compact(this._modelBindings);this.$el.off('.stickit'+(model?'.'+model.cid:''),bindingSelector);},stickit:function(optionalModel,optionalBindingsConfig){var model=optionalModel||this.model,bindings=optionalBindingsConfig||_.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]);this.addBinding(model,bindings);var remove=this.remove;if(!remove.stickitWrapped)
this.remove=function(){var ret=this;this.unstickit();if(remove)ret=remove.apply(this,arguments);return ret;};this.remove.stickitWrapped=true;},addBinding:function(optionalModel,second,_binding){var $el,options,modelAttr,config,selector,model=optionalModel||this.model,namespace='.stickit.'+model.cid,binding=_binding||{},bindId=_.uniqueId();if(_.isString(second)){selector=second;}else{var bindings=second;_.each(bindings,function(v,selector){this.addBinding(model,selector,bindings[selector]);},this);return;}
$el=selector===':el'?this.$el:this.$(selector);this.unstickit(model,selector);if(!$el.length)return;if(_.isString(binding))binding={observe:binding};if(_.isFunction(binding.observe))binding.observe=binding.observe.call(this);config=getConfiguration($el,binding);config.selector=selector;modelAttr=config.observe;config.bindId=bindId;config.view=this;options=_.extend({stickitChange:config},config.setOptions);config._destroy=function(){applyViewFn(this,config.destroy,$el,model,config);};initializeAttributes(this,$el,config,model,modelAttr);initializeVisible(this,$el,config,model,modelAttr);if(modelAttr){_.each(config.events,function(type){var event=type+namespace;var method=function(event){var val=config.getVal.call(this,$el,event,config,_.rest(arguments));if(evaluateBoolean(this,config.updateModel,val,event,config))
setAttr(model,modelAttr,val,options,this,config);};method=_.bind(method,this);if(selector===':el')this.$el.on(event,method);else this.$el.on(event,selector,method);},this);_.each(_.flatten([modelAttr]),function(attr){observeModelEvent(model,this,'change:'+attr,config,function(model,val,options){var changeId=options&&options.stickitChange&&options.stickitChange.bindId||null;if(changeId!==bindId)
updateViewBindEl(this,$el,config,getAttr(model,modelAttr,config,this),model);});},this);updateViewBindEl(this,$el,config,getAttr(model,modelAttr,config,this),model,true);}
applyViewFn(this,config.initialize,$el,model,config);}};_.extend(Backbone.View.prototype,Stickit.ViewMixin);var evaluatePath=function(obj,path){var parts=(path||'').split('.');var result=_.reduce(parts,function(memo,i){return memo[i];},obj);return result==null?obj:result;};var applyViewFn=function(view,fn){if(fn)return(_.isString(fn)?evaluatePath(view,fn):fn).apply(view,_.rest(arguments,2));};var getSelectedOption=function($select){return $select.find('option').not(function(){return!this.selected;});};var evaluateBoolean=function(view,reference){if(_.isBoolean(reference))return reference;else if(_.isFunction(reference)||_.isString(reference))
return applyViewFn.apply(this,arguments);return false;};var observeModelEvent=function(model,view,event,config,fn){model.on(event,fn,view);view._modelBindings.push({model:model,event:event,fn:fn,config:config});};var setAttr=function(model,attr,val,options,context,config){var value={};if(config.onSet)
val=applyViewFn(context,config.onSet,val,config);if(config.set)
applyViewFn(context,config.set,attr,val,options,config);else{value[attr]=val;if(_.isArray(attr)&&_.isArray(val)){value=_.reduce(attr,function(memo,attribute,index){memo[attribute]=_.has(val,index)?val[index]:null;return memo;},{});}
model.set(value,options);}};var getAttr=function(model,attr,config,context){var val,retrieveVal=function(field){return model[config.escape?'escape':'get'](field);},sanitizeVal=function(val){return val==null?'':val;};val=_.isArray(attr)?_.map(attr,retrieveVal):retrieveVal(attr);if(config.onGet)val=applyViewFn(context,config.onGet,val,config);return _.isArray(val)?_.map(val,sanitizeVal):sanitizeVal(val);};var getConfiguration=Stickit.getConfiguration=function($el,binding){var handlers=[{updateModel:false,updateMethod:'text',update:function($el,val,m,opts){if($el[opts.updateMethod])$el[opts.updateMethod](val);},getVal:function($el,e,opts){return $el[opts.updateMethod]();}}];handlers=handlers.concat(_.filter(Stickit._handlers,function(handler){return $el.is(handler.selector);}));handlers.push(binding);var config=_.extend.apply(_,handlers);if(config.visible&&!_.has(config,'updateView'))config.updateView=false;else if(!_.has(config,'updateView'))config.updateView=true;return config;};var initializeAttributes=function(view,$el,config,model,modelAttr){var props=['autofocus','autoplay','async','checked','controls','defer','disabled','hidden','indeterminate','loop','multiple','open','readonly','required','scoped','selected'];_.each(config.attributes||[],function(attrConfig){var lastClass='',observed,updateAttr;attrConfig=_.clone(attrConfig);observed=attrConfig.observe||(attrConfig.observe=modelAttr),updateAttr=function(){var updateType=_.indexOf(props,attrConfig.name,true)>-1?'prop':'attr',val=getAttr(model,observed,attrConfig,view);if(attrConfig.name==='class'){$el.removeClass(lastClass).addClass(val);lastClass=val;}
else $el[updateType](attrConfig.name,val);};_.each(_.flatten([observed]),function(attr){observeModelEvent(model,view,'change:'+attr,config,updateAttr);});updateAttr();});};var initializeVisible=function(view,$el,config,model,modelAttr){if(config.visible==null)return;var visibleCb=function(){var visible=config.visible,visibleFn=config.visibleFn,val=getAttr(model,modelAttr,config,view),isVisible=!!val;if(_.isFunction(visible)||_.isString(visible))isVisible=!!applyViewFn(view,visible,val,config);if(visibleFn)applyViewFn(view,visibleFn,$el,isVisible,config);else{$el.toggle(isVisible);}};_.each(_.flatten([modelAttr]),function(attr){observeModelEvent(model,view,'change:'+attr,config,visibleCb);});visibleCb();};var updateViewBindEl=function(view,$el,config,val,model,isInitializing){if(!evaluateBoolean(view,config.updateView,val,config))return;applyViewFn(view,config.update,$el,val,model,config);if(!isInitializing)applyViewFn(view,config.afterUpdate,$el,val,config);};Stickit.addHandler([{selector:'[contenteditable="true"]',updateMethod:'html',events:['input','change']},{selector:'input',events:['propertychange','input','change'],update:function($el,val){$el.val(val);},getVal:function($el){return $el.val();}},{selector:'textarea',events:['propertychange','input','change'],update:function($el,val){$el.val(val);},getVal:function($el){return $el.val();}},{selector:'input[type="radio"]',events:['change'],update:function($el,val){$el.filter('[value="'+val+'"]').prop('checked',true);},getVal:function($el){return $el.filter(':checked').val();}},{selector:'input[type="checkbox"]',events:['change'],update:function($el,val,model,options){if($el.length>1){val||(val=[]);$el.each(function(i,el){var checkbox=Backbone.$(el);var checked=_.indexOf(val,checkbox.val())>-1;checkbox.prop('checked',checked);});}else{var checked=_.isBoolean(val)?val:val===$el.val();$el.prop('checked',checked);}},getVal:function($el){var val;if($el.length>1){val=_.reduce($el,function(memo,el){var checkbox=Backbone.$(el);if(checkbox.prop('checked'))memo.push(checkbox.val());return memo;},[]);}else{val=$el.prop('checked');var boxval=$el.val();if(boxval!=='on'&&boxval!=null){val=val?$el.val():null;}}
return val;}},{selector:'select',events:['change'],update:function($el,val,model,options){var optList,selectConfig=options.selectOptions,list=selectConfig&&selectConfig.collection||undefined,isMultiple=$el.prop('multiple');if(!selectConfig){selectConfig={};var getList=function($el){return $el.map(function(){return{value:this.value,label:this.text};}).get();};if($el.find('optgroup').length){list={opt_labels:[]};if($el.find('> option').length){list.opt_labels.push(undefined);_.each($el.find('> option'),function(el){list[undefined]=getList(Backbone.$(el));});}
_.each($el.find('optgroup'),function(el){var label=Backbone.$(el).attr('label');list.opt_labels.push(label);list[label]=getList(Backbone.$(el).find('option'));});}else{list=getList($el.find('option'));}}
selectConfig.valuePath=selectConfig.valuePath||'value';selectConfig.labelPath=selectConfig.labelPath||'label';var addSelectOptions=function(optList,$el,fieldVal){_.each(optList,function(obj){var option=Backbone.$('<option/>'),optionVal=obj;var fillOption=function(text,val){option.text(text);optionVal=val;option.data('stickit_bind_val',optionVal);if(!_.isArray(optionVal)&&!_.isObject(optionVal))option.val(optionVal);};if(obj==='__default__')
fillOption(selectConfig.defaultOption.label,selectConfig.defaultOption.value);else
fillOption(evaluatePath(obj,selectConfig.labelPath),evaluatePath(obj,selectConfig.valuePath));if(!isMultiple&&optionVal!=null&&fieldVal!=null&&optionVal===fieldVal||(_.isObject(fieldVal)&&_.isEqual(optionVal,fieldVal)))
option.prop('selected',true);else if(isMultiple&&_.isArray(fieldVal)){_.each(fieldVal,function(val){if(_.isObject(val))val=evaluatePath(val,selectConfig.valuePath);if(val===optionVal||(_.isObject(val)&&_.isEqual(optionVal,val)))
option.prop('selected',true);});}
$el.append(option);});};$el.find('*').remove();var evaluate=function(view,list){var context=window;if(list.indexOf('this.')===0)context=view;list=list.replace(/^[a-z]*\.(.+)$/,'$1');return evaluatePath(context,list);};if(_.isString(list))optList=evaluate(this,list);else if(_.isFunction(list))optList=applyViewFn(this,list,$el,options);else optList=list;if(optList instanceof Backbone.Collection)optList=optList.toJSON();if(selectConfig.defaultOption){addSelectOptions(["__default__"],$el);}
if(_.isArray(optList)){addSelectOptions(optList,$el,val);}else if(optList.opt_labels){_.each(optList.opt_labels,function(label){var $group=Backbone.$('<optgroup/>').attr('label',label);addSelectOptions(optList[label],$group,val);$el.append($group);});}else{var opts=[],opt;for(var i in optList){opt={};opt[selectConfig.valuePath]=i;opt[selectConfig.labelPath]=optList[i];opts.push(opt);}
addSelectOptions(_.sortBy(opts,selectConfig.comparator||selectConfig.labelPath),$el,val);}},getVal:function($el){var val;if($el.prop('multiple')){val=Backbone.$(getSelectedOption($el).map(function(){return Backbone.$(this).data('stickit_bind_val');})).get();}else{val=getSelectedOption($el).data('stickit_bind_val');}
return val;}}]);Backbone.Stickit=Stickit;return Backbone.Stickit;}));;;(function(root,factory){if(typeof define==='function'&&define.amd){define(['underscore','backbone','exports'],function(_,Backbone,exports){root.Backbone.Controller=factory(root,exports,_,Backbone);return root.Backbone.Controller;});}else if(typeof exports!=='undefined'){var _=require('underscore'),Backbone=require('backbone');module.exports=factory(root,exports,_,Backbone);}else{root.Backbone.Controller=factory(root,{},root._,root.Backbone);}}(this,function(root,exports,_,Backbone){var bindRoutes=function(Router){for(var url in this.routes){Router.route(url,url,_.bind(onRoute,this,url));}},onRoute=function(){var self=this,args=_.toArray(arguments),url=args[0],methodName=this.routes[url],params=args.slice(1),triggerRouteAndAfterRoute=function(){self[methodName].apply(self,params);if(_.isFunction(self.onAfterRoute)){self.onAfterRoute.apply(self,args);}},beforeRouteResult,isPromiseObj;if(cachedController&&cachedController!==this&&typeof cachedController.remove==='function'){cachedController.remove.apply(cachedController);}
cachedController=this;if(_.isFunction(this.onBeforeRoute)){beforeRouteResult=this.onBeforeRoute.apply(this,args);}
if(beforeRouteResult===false||beforeRouteResult===null)return this;isPromiseObj=beforeRouteResult&&beforeRouteResult.done&&_.isFunction(beforeRouteResult.done);if(isPromiseObj){beforeRouteResult.done(triggerRouteAndAfterRoute);}else{triggerRouteAndAfterRoute();}},cachedRouter,cachedController;Backbone.Controller=function(options){this.options=options||{};if(_.isFunction(this.initialize)){this.initialize(this.options);}
if(this.options.router===true){cachedRouter=cachedRouter||new Backbone.Router();this.options.router=cachedRouter;}
if(this.options.router){cachedRouter=this.options.router;bindRoutes.call(this,this.options.router);}};Backbone.Controller.prototype.navigate=function(){var params=_.toArray(arguments).slice(0);cachedRouter.navigate.apply(this,params);};Backbone.Controller.extend=Backbone.Router.extend;_.extend(Backbone.Controller.prototype,Backbone.Events,{remove:function(){this.stopListening();}});return Backbone.Controller;}));;;!function t(e,n,r){function o(l,s){if(!n[l]){if(!e[l]){var a="function"==typeof require&&require;if(!s&&a)return a(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[l]={exports:{}};e[l][0].call(u.exports,function(t){var n=e[l][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(t,e){"use strict";function n(t){t.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||"undefined"==typeof e){var n=e;o.get(this)||r.initialize(this,n)}else{var i=e;"update"===i?r.update(this):"destroy"===i&&r.destroy(this)}return t(this)})}}var r=t("../main"),o=t("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],n);else{var i=window.jQuery?window.jQuery:window.$;"undefined"!=typeof i&&n(i)}e.exports=n},{"../main":7,"../plugin/instances":18}],2:[function(t,e,n){"use strict";function r(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function o(t,e){var n=t.className.split(" "),r=n.indexOf(e);r>=0&&n.splice(r,1),t.className=n.join(" ")}n.add=function(t,e){t.classList?t.classList.add(e):r(t,e)},n.remove=function(t,e){t.classList?t.classList.remove(e):o(t,e)},n.list=function(t){return t.classList?t.classList:t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";function r(t,e){return window.getComputedStyle(t)[e]}function o(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function i(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r=r.toString()+"px"),t.style[n]=r}return t}n.e=function(t,e){var n=document.createElement(t);return n.className=e,n},n.appendTo=function(t,e){return e.appendChild(t),t},n.css=function(t,e,n){return"object"==typeof e?i(t,e):"undefined"==typeof n?r(t,e):o(t,e,n)},n.matches=function(t,e){return"undefined"!=typeof t.matches?t.matches(e):"undefined"!=typeof t.matchesSelector?t.matchesSelector(e):"undefined"!=typeof t.webkitMatchesSelector?t.webkitMatchesSelector(e):"undefined"!=typeof t.mozMatchesSelector?t.mozMatchesSelector(e):"undefined"!=typeof t.msMatchesSelector?t.msMatchesSelector(e):void 0},n.remove=function(t){"undefined"!=typeof t.remove?t.remove():t.parentNode.removeChild(t)}},{}],4:[function(t,e){"use strict";var n=function(t){this.element=t,this.events={}};n.prototype.bind=function(t,e){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},n.prototype.unbind=function(t,e){var n="undefined"!=typeof e;this.events[t]=this.events[t].filter(function(r){return n&&r!==e?!0:(this.element.removeEventListener(t,r,!1),!1)},this)},n.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var r=function(){this.eventElements=[]};r.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return"undefined"==typeof e&&(e=new n(t),this.eventElements.push(e)),e},r.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},r.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},r.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},r.prototype.once=function(t,e,n){var r=this.eventElement(t),o=function(t){r.unbind(e,o),n(t)};r.bind(e,o)},e.exports=r},{}],5:[function(t,e){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var r=t("./class"),o=t("./dom");n.toInt=function(t){return"string"==typeof t?parseInt(t,10):~~t},n.clone=function(t){if(null===t)return null;if("object"==typeof t){var e={};for(var n in t)e[n]=this.clone(t[n]);return e}return t},n.extend=function(t,e){var n=this.clone(t);for(var r in e)n[r]=this.clone(e[r]);return n},n.isEditable=function(t){return o.matches(t,"input,[contenteditable]")||o.matches(t,"select,[contenteditable]")||o.matches(t,"textarea,[contenteditable]")||o.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=r.list(t),n=0;n<e.length;n++){var o=e[n];0===o.indexOf("ps-")&&r.remove(t,o)}},n.outerWidth=function(t){return this.toInt(o.css(t,"width"))+this.toInt(o.css(t,"paddingLeft"))+this.toInt(o.css(t,"paddingRight"))+this.toInt(o.css(t,"borderLeftWidth"))+this.toInt(o.css(t,"borderRightWidth"))},n.startScrolling=function(t,e){r.add(t,"ps-in-scrolling"),"undefined"!=typeof e?r.add(t,"ps-"+e):(r.add(t,"ps-x"),r.add(t,"ps-y"))},n.stopScrolling=function(t,e){r.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?r.remove(t,"ps-"+e):(r.remove(t,"ps-x"),r.remove(t,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e){"use strict";var n=t("./plugin/destroy"),r=t("./plugin/initialize"),o=t("./plugin/update");e.exports={initialize:r,update:o,destroy:n}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":20}],8:[function(t,e){"use strict";e.exports={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0}},{}],9:[function(t,e){"use strict";var n=t("../lib/dom"),r=t("../lib/helper"),o=t("./instances");e.exports=function(t){var e=o.get(t);e.event.unbindAll(),n.remove(e.scrollbarX),n.remove(e.scrollbarY),n.remove(e.scrollbarXRail),n.remove(e.scrollbarYRail),r.removePsClasses(t),o.remove(t)}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e){"use strict";function n(t,e){function n(t){return t.getBoundingClientRect()}var o=window.Event.prototype.stopPropagation.bind;e.event.bind(e.scrollbarY,"click",o),e.event.bind(e.scrollbarYRail,"click",function(o){var l=r.toInt(e.scrollbarYHeight/2),s=o.pageY-n(e.scrollbarYRail).top-l,a=e.containerHeight-e.scrollbarYHeight,c=s/a;0>c?c=0:c>1&&(c=1),t.scrollTop=(e.contentHeight-e.containerHeight)*c,i(t)}),e.event.bind(e.scrollbarX,"click",o),e.event.bind(e.scrollbarXRail,"click",function(o){var l=r.toInt(e.scrollbarXWidth/2),s=o.pageX-n(e.scrollbarXRail).left-l;console.log(o.pageX,e.scrollbarXRail.offsetLeft);var a=e.containerWidth-e.scrollbarXWidth,c=s/a;0>c?c=0:c>1&&(c=1),t.scrollLeft=(e.contentWidth-e.containerWidth)*c,i(t)})}var r=t("../../lib/helper"),o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);n(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],11:[function(t,e){"use strict";function n(t,e){function n(n){var o=r+n,l=e.containerWidth-e.scrollbarXWidth;e.scrollbarXLeft=0>o?0:o>l?l:o;var s=i.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.scrollbarXWidth));t.scrollLeft=s}var r=null,l=null,a=function(e){n(e.pageX-l),s(t),e.stopPropagation(),e.preventDefault()},c=function(){i.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",a)};e.event.bind(e.scrollbarX,"mousedown",function(n){l=n.pageX,r=i.toInt(o.css(e.scrollbarX,"left")),i.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",a),e.event.once(e.ownerDocument,"mouseup",c),n.stopPropagation(),n.preventDefault()})}function r(t,e){function n(n){var o=r+n,l=e.containerHeight-e.scrollbarYHeight;e.scrollbarYTop=0>o?0:o>l?l:o;var s=i.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.scrollbarYHeight));t.scrollTop=s}var r=null,l=null,a=function(e){n(e.pageY-l),s(t),e.stopPropagation(),e.preventDefault()},c=function(){i.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",a)};e.event.bind(e.scrollbarY,"mousedown",function(n){l=n.pageY,r=i.toInt(o.css(e.scrollbarY,"top")),i.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",a),e.event.once(e.ownerDocument,"mouseup",c),n.stopPropagation(),n.preventDefault()})}var o=t("../../lib/dom"),i=t("../../lib/helper"),l=t("../instances"),s=t("../update-geometry");e.exports=function(t){var e=l.get(t);n(t,e),r(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19}],12:[function(t,e){"use strict";function n(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var o=!1;e.event.bind(t,"mouseenter",function(){o=!0}),e.event.bind(t,"mouseleave",function(){o=!1});var l=!1;e.event.bind(e.ownerDocument,"keydown",function(s){if((!s.isDefaultPrevented||!s.isDefaultPrevented())&&o){var a=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(a){for(;a.shadowRoot;)a=a.shadowRoot.activeElement;if(r.isEditable(a))return}var c=0,u=0;switch(s.which){case 37:c=-30;break;case 38:u=30;break;case 39:c=30;break;case 40:u=-30;break;case 33:u=90;break;case 32:case 34:u=-90;break;case 35:u=s.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:u=s.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}t.scrollTop=t.scrollTop-u,t.scrollLeft=t.scrollLeft+c,i(t),l=n(c,u),l&&s.preventDefault()}})}var r=t("../../lib/helper"),o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);n(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],13:[function(t,e){"use strict";function n(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&0>r)return!e.settings.wheelPropagation}var i=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===i&&0>n||i>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function o(t){var e=t.deltaX,n=-1*t.deltaY;return("undefined"==typeof e||"undefined"==typeof n)&&(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),[e,n]}function l(l){if(r.env.isWebKit||!t.querySelector("select:focus")){var a=o(l),c=a[0],u=a[1];s=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(t.scrollTop=u?t.scrollTop-u*e.settings.wheelSpeed:t.scrollTop+c*e.settings.wheelSpeed,s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(t.scrollLeft=c?t.scrollLeft+c*e.settings.wheelSpeed:t.scrollLeft-u*e.settings.wheelSpeed,s=!0):(t.scrollTop=t.scrollTop-u*e.settings.wheelSpeed,t.scrollLeft=t.scrollLeft+c*e.settings.wheelSpeed),i(t),s=s||n(c,u),s&&(l.stopPropagation(),l.preventDefault())}}var s=!1;"undefined"!=typeof window.onwheel?e.event.bind(t,"wheel",l):"undefined"!=typeof window.onmousewheel&&e.event.bind(t,"mousewheel",l)}var r=t("../../lib/helper"),o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);n(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],14:[function(t,e){"use strict";function n(t,e){e.event.bind(t,"scroll",function(){o(t)})}var r=t("../instances"),o=t("../update-geometry");e.exports=function(t){var e=r.get(t);n(t,e)}},{"../instances":18,"../update-geometry":19}],15:[function(t,e){"use strict";function n(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function l(){a||(a=setInterval(function(){return o.get(t)?(t.scrollTop=t.scrollTop+c.top,t.scrollLeft=t.scrollLeft+c.left,void i(t)):void clearInterval(a)},50))}function s(){a&&(clearInterval(a),a=null),r.stopScrolling(t)}var a=null,c={top:0,left:0},u=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?u=!0:(u=!1,s())}),e.event.bind(window,"mouseup",function(){u&&(u=!1,s())}),e.event.bind(window,"mousemove",function(e){if(u){var n={x:e.pageX,y:e.pageY},o={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<o.left+3?(c.left=-5,r.startScrolling(t,"x")):n.x>o.right-3?(c.left=5,r.startScrolling(t,"x")):c.left=0,n.y<o.top+3?(c.top=o.top+3-n.y<5?-5:-20,r.startScrolling(t,"y")):n.y>o.bottom-3?(c.top=n.y-o.bottom+3<5?5:20,r.startScrolling(t,"y")):c.top=0,0===c.top&&0===c.left?s():l()}})}var r=t("../../lib/helper"),o=t("../instances"),i=t("../update-geometry");e.exports=function(t){var e=o.get(t);n(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19}],16:[function(t,e){"use strict";function n(t,e,n,i){function l(n,r){var o=t.scrollTop,i=t.scrollLeft,l=Math.abs(n),s=Math.abs(r);if(s>l){if(0>r&&o===e.contentHeight-e.containerHeight||r>0&&0===o)return!e.settings.swipePropagation}else if(l>s&&(0>n&&i===e.contentWidth-e.containerWidth||n>0&&0===i))return!e.settings.swipePropagation;return!0}function s(e,n){t.scrollTop=t.scrollTop-n,t.scrollLeft=t.scrollLeft-e,o(t)}function a(){y=!0}function c(){y=!1}function u(t){return t.targetTouches?t.targetTouches[0]:t}function d(t){return t.targetTouches&&1===t.targetTouches.length?!0:t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE?!0:!1}function p(t){if(d(t)){w=!0;var e=u(t);b.pageX=e.pageX,b.pageY=e.pageY,g=(new Date).getTime(),null!==m&&clearInterval(m),t.stopPropagation()}}function f(t){if(!y&&w&&d(t)){var e=u(t),n={pageX:e.pageX,pageY:e.pageY},r=n.pageX-b.pageX,o=n.pageY-b.pageY;s(r,o),b=n;var i=(new Date).getTime(),a=i-g;a>0&&(v.x=r/a,v.y=o/a,g=i),l(r,o)&&(t.stopPropagation(),t.preventDefault())}}function h(){!y&&w&&(w=!1,clearInterval(m),m=setInterval(function(){return r.get(t)?Math.abs(v.x)<.01&&Math.abs(v.y)<.01?void clearInterval(m):(s(30*v.x,30*v.y),v.x*=.8,void(v.y*=.8)):void clearInterval(m)},10))}var b={},g=0,v={},m=null,y=!1,w=!1;n&&(e.event.bind(window,"touchstart",a),e.event.bind(window,"touchend",c),e.event.bind(t,"touchstart",p),e.event.bind(t,"touchmove",f),e.event.bind(t,"touchend",h)),i&&(window.PointerEvent?(e.event.bind(window,"pointerdown",a),e.event.bind(window,"pointerup",c),e.event.bind(t,"pointerdown",p),e.event.bind(t,"pointermove",f),e.event.bind(t,"pointerup",h)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",a),e.event.bind(window,"MSPointerUp",c),e.event.bind(t,"MSPointerDown",p),e.event.bind(t,"MSPointerMove",f),e.event.bind(t,"MSPointerUp",h)))}var r=t("../instances"),o=t("../update-geometry");e.exports=function(t,e,o){var i=r.get(t);n(t,i,e,o)}},{"../instances":18,"../update-geometry":19}],17:[function(t,e){"use strict";var n=t("../lib/class"),r=t("../lib/helper"),o=t("./instances"),i=t("./update-geometry"),l=t("./handler/click-rail"),s=t("./handler/drag-scrollbar"),a=t("./handler/keyboard"),c=t("./handler/mouse-wheel"),u=t("./handler/native-scroll"),d=t("./handler/selection"),p=t("./handler/touch");e.exports=function(t,e){e="object"==typeof e?e:{},n.add(t,"ps-container");var f=o.add(t);f.settings=r.extend(f.settings,e),l(t),s(t),c(t),u(t),d(t),(r.env.supportsTouch||r.env.supportsIePointer)&&p(t,r.env.supportsTouch,r.env.supportsIePointer),f.settings.useKeyboard&&a(t),i(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";function r(t){var e=this;e.settings=d.clone(a),e.containerWidth=null,e.containerHeight=null,e.contentWidth=null,e.contentHeight=null,e.isRtl="rtl"===s.css(t,"direction"),e.event=new c,e.ownerDocument=t.ownerDocument||document,e.scrollbarXRail=s.appendTo(s.e("div","ps-scrollbar-x-rail"),t),e.scrollbarX=s.appendTo(s.e("div","ps-scrollbar-x"),e.scrollbarXRail),e.scrollbarXActive=null,e.scrollbarXWidth=null,e.scrollbarXLeft=null,e.scrollbarXBottom=d.toInt(s.css(e.scrollbarXRail,"bottom")),e.isScrollbarXUsingBottom=e.scrollbarXBottom===e.scrollbarXBottom,e.scrollbarXTop=e.isScrollbarXUsingBottom?null:d.toInt(s.css(e.scrollbarXRail,"top")),e.railBorderXWidth=d.toInt(s.css(e.scrollbarXRail,"borderLeftWidth"))+d.toInt(s.css(e.scrollbarXRail,"borderRightWidth")),e.railXMarginWidth=d.toInt(s.css(e.scrollbarXRail,"marginLeft"))+d.toInt(s.css(e.scrollbarXRail,"marginRight")),e.railXWidth=null,e.scrollbarYRail=s.appendTo(s.e("div","ps-scrollbar-y-rail"),t),e.scrollbarY=s.appendTo(s.e("div","ps-scrollbar-y"),e.scrollbarYRail),e.scrollbarYActive=null,e.scrollbarYHeight=null,e.scrollbarYTop=null,e.scrollbarYRight=d.toInt(s.css(e.scrollbarYRail,"right")),e.isScrollbarYUsingRight=e.scrollbarYRight===e.scrollbarYRight,e.scrollbarYLeft=e.isScrollbarYUsingRight?null:d.toInt(s.css(e.scrollbarYRail,"left")),e.scrollbarYOuterWidth=e.isRtl?d.outerWidth(e.scrollbarY):null,e.railBorderYWidth=d.toInt(s.css(e.scrollbarYRail,"borderTopWidth"))+d.toInt(s.css(e.scrollbarYRail,"borderBottomWidth")),e.railYMarginHeight=d.toInt(s.css(e.scrollbarYRail,"marginTop"))+d.toInt(s.css(e.scrollbarYRail,"marginBottom")),e.railYHeight=null}function o(t){return"undefined"==typeof t.dataset?t.getAttribute("data-ps-id"):t.dataset.psId}function i(t,e){"undefined"==typeof t.dataset?t.setAttribute("data-ps-id",e):t.dataset.psId=e}function l(t){"undefined"==typeof t.dataset?t.removeAttribute("data-ps-id"):delete t.dataset.psId}var s=t("../lib/dom"),a=t("./default-setting"),c=t("../lib/event-manager"),u=t("../lib/guid"),d=t("../lib/helper"),p={};n.add=function(t){var e=u();return i(t,e),p[e]=new r(t),p[e]},n.remove=function(t){delete p[o(t)],l(t)},n.get=function(t){return p[o(t)]}},{"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e){"use strict";function n(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function r(t,e){var n={width:e.railXWidth};n.left=e.isRtl?t.scrollLeft+e.containerWidth-e.contentWidth:t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,i.css(e.scrollbarXRail,n);var r={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?r.right=e.isRtl?e.contentWidth-t.scrollLeft-e.scrollbarYRight-e.scrollbarYOuterWidth:e.scrollbarYRight-t.scrollLeft:r.left=e.isRtl?t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:e.scrollbarYLeft+t.scrollLeft,i.css(e.scrollbarYRail,r),i.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),i.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var o=t("../lib/class"),i=t("../lib/dom"),l=t("../lib/helper"),s=t("./instances");e.exports=function(t){var e=s.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.scrollbarXWidth=n(e,l.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=l.toInt(t.scrollLeft*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):(e.scrollbarXActive=!1,e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.scrollbarYHeight=n(e,l.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=l.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):(e.scrollbarYActive=!1,e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0),e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),r(t,e),o[e.scrollbarXActive?"add":"remove"](t,"ps-active-x"),o[e.scrollbarYActive?"add":"remove"](t,"ps-active-y")}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18}],20:[function(t,e){"use strict";var n=t("../lib/dom"),r=t("./destroy"),o=t("./initialize"),i=t("./instances"),l=t("./update-geometry");e.exports=function(t){var e=i.get(t);e.scrollbarXRail&&t.contains(e.scrollbarXRail)&&e.scrollbarYRail&&t.contains(e.scrollbarYRail)?(n.css(e.scrollbarXRail,"display","none"),n.css(e.scrollbarYRail,"display","none"),l(t),n.css(e.scrollbarXRail,"display","block"),n.css(e.scrollbarYRail,"display","block")):(r(t),o(t))}},{"../lib/dom":3,"./destroy":9,"./initialize":17,"./instances":18,"./update-geometry":19}]},{},[1]);;;(function(){var b=void 0,f=!0,h=null,l=!1;function m(){return function(){}}function p(a){return function(){return this[a]}}function s(a){return function(){return a}}var t;document.createElement("video");document.createElement("audio");document.createElement("track");function u(a,c,d){if("string"===typeof a){0===a.indexOf("#")&&(a=a.slice(1));if(u.xa[a])return u.xa[a];a=u.w(a)}if(!a||!a.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return a.player||new u.s(a,c,d)}var v=u;window.Td=window.Ud=u;u.Tb="4.3";u.Fc="https:"==document.location.protocol?"https://":"http://";u.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'};"GENERATED_CDN_VSN"!==u.Tb&&(v.options.flash.swf=u.Fc+"vjs.zencdn.net/"+u.Tb+"/video-js.swf");u.xa={};u.la=u.CoreObject=m();u.la.extend=function(a){var c,d;a=a||{};c=a.init||a.i||this.prototype.init||this.prototype.i||m();d=function(){c.apply(this,arguments)};d.prototype=u.k.create(this.prototype);d.prototype.constructor=d;d.extend=u.la.extend;d.create=u.la.create;for(var e in a)a.hasOwnProperty(e)&&(d.prototype[e]=a[e]);return d};u.la.create=function(){var a=u.k.create(this.prototype);this.apply(a,arguments);return a};u.d=function(a,c,d){var e=u.getData(a);e.z||(e.z={});e.z[c]||(e.z[c]=[]);d.t||(d.t=u.t++);e.z[c].push(d);e.W||(e.disabled=l,e.W=function(c){if(!e.disabled){c=u.kc(c);var d=e.z[c.type];if(d)for(var d=d.slice(0),k=0,q=d.length;k<q&&!c.pc();k++)d[k].call(a,c)}});1==e.z[c].length&&(document.addEventListener?a.addEventListener(c,e.W,l):document.attachEvent&&a.attachEvent("on"+c,e.W))};u.o=function(a,c,d){if(u.oc(a)){var e=u.getData(a);if(e.z)if(c){var g=e.z[c];if(g){if(d){if(d.t)for(e=0;e<g.length;e++)g[e].t===d.t&&g.splice(e--,1)}else e.z[c]=[];u.gc(a,c)}}else for(g in e.z)c=g,e.z[c]=[],u.gc(a,c)}};u.gc=function(a,c){var d=u.getData(a);0===d.z[c].length&&(delete d.z[c],document.removeEventListener?a.removeEventListener(c,d.W,l):document.detachEvent&&a.detachEvent("on"+c,d.W));u.Bb(d.z)&&(delete d.z,delete d.W,delete d.disabled);u.Bb(d)&&u.vc(a)};u.kc=function(a){function c(){return f}function d(){return l}if(!a||!a.Cb){var e=a||window.event;a={};for(var g in e)"layerX"!==g&&"layerY"!==g&&(a[g]=e[g]);a.target||(a.target=a.srcElement||document);a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;a.preventDefault=function(){e.preventDefault&&e.preventDefault();a.returnValue=l;a.Ab=c};a.Ab=d;a.stopPropagation=function(){e.stopPropagation&&e.stopPropagation();a.cancelBubble=f;a.Cb=c};a.Cb=d;a.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation();a.pc=c;a.stopPropagation()};a.pc=d;if(a.clientX!=h){g=document.documentElement;var j=document.body;a.pageX=a.clientX+(g&&g.scrollLeft||j&&j.scrollLeft||0)-(g&&g.clientLeft||j&&j.clientLeft||0);a.pageY=a.clientY+(g&&g.scrollTop||j&&j.scrollTop||0)-(g&&g.clientTop||j&&j.clientTop||0)}a.which=a.charCode||a.keyCode;a.button!=h&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a};u.j=function(a,c){var d=u.oc(a)?u.getData(a):{},e=a.parentNode||a.ownerDocument;"string"===typeof c&&(c={type:c,target:a});c=u.kc(c);d.W&&d.W.call(a,c);if(e&&!c.Cb()&&c.bubbles!==l)u.j(e,c);else if(!e&&!c.Ab()&&(d=u.getData(c.target),c.target[c.type])){d.disabled=f;if("function"===typeof c.target[c.type])c.target[c.type]();d.disabled=l}return!c.Ab()};u.U=function(a,c,d){function e(){u.o(a,c,e);d.apply(this,arguments)}e.t=d.t=d.t||u.t++;u.d(a,c,e)};var w=Object.prototype.hasOwnProperty;u.e=function(a,c){var d,e;d=document.createElement(a||"div");for(e in c)w.call(c,e)&&(-1!==e.indexOf("aria-")||"role"==e?d.setAttribute(e,c[e]):d[e]=c[e]);return d};u.$=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};u.k={};u.k.create=Object.create||function(a){function c(){}c.prototype=a;return new c};u.k.ua=function(a,c,d){for(var e in a)w.call(a,e)&&c.call(d||this,e,a[e])};u.k.B=function(a,c){if(!c)return a;for(var d in c)w.call(c,d)&&(a[d]=c[d]);return a};u.k.ic=function(a,c){var d,e,g;a=u.k.copy(a);for(d in c)w.call(c,d)&&(e=a[d],g=c[d],a[d]=u.k.qc(e)&&u.k.qc(g)?u.k.ic(e,g):c[d]);return a};u.k.copy=function(a){return u.k.B({},a)};u.k.qc=function(a){return!!a&&"object"===typeof a&&"[object Object]"===a.toString()&&a.constructor===Object};u.bind=function(a,c,d){function e(){return c.apply(a,arguments)}c.t||(c.t=u.t++);e.t=d?d+"_"+c.t:c.t;return e};u.ra={};u.t=1;u.expando="vdata"+(new Date).getTime();u.getData=function(a){var c=a[u.expando];c||(c=a[u.expando]=u.t++,u.ra[c]={});return u.ra[c]};u.oc=function(a){a=a[u.expando];return!(!a||u.Bb(u.ra[a]))};u.vc=function(a){var c=a[u.expando];if(c){delete u.ra[c];try{delete a[u.expando]}catch(d){a.removeAttribute?a.removeAttribute(u.expando):a[u.expando]=h}}};u.Bb=function(a){for(var c in a)if(a[c]!==h)return l;return f};u.n=function(a,c){-1==(" "+a.className+" ").indexOf(" "+c+" ")&&(a.className=""===a.className?c:a.className+" "+c)};u.u=function(a,c){var d,e;if(-1!=a.className.indexOf(c)){d=a.className.split(" ");for(e=d.length-1;0<=e;e--)d[e]===c&&d.splice(e,1);a.className=d.join(" ")}};u.na=u.e("video");u.F=navigator.userAgent;u.Mc=/iPhone/i.test(u.F);u.Lc=/iPad/i.test(u.F);u.Nc=/iPod/i.test(u.F);u.Kc=u.Mc||u.Lc||u.Nc;var aa=u,x;var y=u.F.match(/OS (\d+)_/i);x=y&&y[1]?y[1]:b;aa.Fd=x;u.Ic=/Android/i.test(u.F);var ba=u,z;var A=u.F.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),B,C;A?(B=A[1]&&parseFloat(A[1]),C=A[2]&&parseFloat(A[2]),z=B&&C?parseFloat(A[1]+"."+A[2]):B?B:h):z=h;ba.Gc=z;u.Oc=u.Ic&&/webkit/i.test(u.F)&&2.3>u.Gc;u.Jc=/Firefox/i.test(u.F);u.Gd=/Chrome/i.test(u.F);u.ac=!!("ontouchstart"in window||window.Hc&&document instanceof window.Hc);u.xb=function(a){var c,d,e,g;c={};if(a&&a.attributes&&0<a.attributes.length){d=a.attributes;for(var j=d.length-1;0<=j;j--){e=d[j].name;g=d[j].value;if("boolean"===typeof a[e]||-1!==",autoplay,controls,loop,muted,default,".indexOf(","+e+","))g=g!==h?f:l;c[e]=g}}return c};u.Kd=function(a,c){var d="";document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,"").getPropertyValue(c):a.currentStyle&&(d=a["client"+c.substr(0,1).toUpperCase()+c.substr(1)]+"px");return d};u.zb=function(a,c){c.firstChild?c.insertBefore(a,c.firstChild):c.appendChild(a)};u.Pb={};u.w=function(a){0===a.indexOf("#")&&(a=a.slice(1));return document.getElementById(a)};u.La=function(a,c){c=c||a;var d=Math.floor(a%60),e=Math.floor(a/60%60),g=Math.floor(a/3600),j=Math.floor(c/60%60),k=Math.floor(c/3600);if(isNaN(a)||Infinity===a)g=e=d="-";g=0<g||0<k?g+":":"";return g+(((g||10<=j)&&10>e?"0"+e:e)+":")+(10>d?"0"+d:d)};u.Tc=function(){document.body.focus();document.onselectstart=s(l)};u.Bd=function(){document.onselectstart=s(f)};u.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")};u.round=function(a,c){c||(c=0);return Math.round(a*Math.pow(10,c))/Math.pow(10,c)};u.tb=function(a,c){return{length:1,start:function(){return a},end:function(){return c}}};u.get=function(a,c,d){var e,g;"undefined"===typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.");});g=new XMLHttpRequest;try{g.open("GET",a)}catch(j){d(j)}e=0===a.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===a.indexOf("http");g.onreadystatechange=function(){4===g.readyState&&(200===g.status||e&&0===g.status?c(g.responseText):d&&d())};try{g.send()}catch(k){d&&d(k)}};u.td=function(a){try{var c=window.localStorage||l;c&&(c.volume=a)}catch(d){22==d.code||1014==d.code?u.log("LocalStorage Full (VideoJS)",d):18==d.code?u.log("LocalStorage not allowed (VideoJS)",d):u.log("LocalStorage Error (VideoJS)",d)}};u.mc=function(a){a.match(/^https?:\/\//)||(a=u.e("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href);return a};u.log=function(){u.log.history=u.log.history||[];u.log.history.push(arguments);window.console&&window.console.log(Array.prototype.slice.call(arguments))};u.ad=function(a){var c,d;a.getBoundingClientRect&&a.parentNode&&(c=a.getBoundingClientRect());if(!c)return{left:0,top:0};a=document.documentElement;d=document.body;return{left:c.left+(window.pageXOffset||d.scrollLeft)-(a.clientLeft||d.clientLeft||0),top:c.top+(window.pageYOffset||d.scrollTop)-(a.clientTop||d.clientTop||0)}};u.c=u.la.extend({i:function(a,c,d){this.b=a;this.g=u.k.copy(this.g);c=this.options(c);this.Q=c.id||(c.el&&c.el.id?c.el.id:a.id()+"_component_"+u.t++);this.gd=c.name||h;this.a=c.el||this.e();this.G=[];this.qb={};this.V={};if((a=this.g)&&a.children){var e=this;u.k.ua(a.children,function(a,c){c!==l&&!c.loadEvent&&(e[a]=e.Z(a,c))})}this.L(d)}});t=u.c.prototype;t.D=function(){this.j("dispose");if(this.G)for(var a=this.G.length-1;0<=a;a--)this.G[a].D&&this.G[a].D();this.V=this.qb=this.G=h;this.o();this.a.parentNode&&this.a.parentNode.removeChild(this.a);u.vc(this.a);this.a=h};t.b=f;t.K=p("b");t.options=function(a){return a===b?this.g:this.g=u.k.ic(this.g,a)};t.e=function(a,c){return u.e(a,c)};t.w=p("a");t.id=p("Q");t.name=p("gd");t.children=p("G");t.Z=function(a,c){var d,e;"string"===typeof a?(e=a,c=c||{},d=c.componentClass||u.$(e),c.name=e,d=new window.videojs[d](this.b||this,c)):d=a;this.G.push(d);"function"===typeof d.id&&(this.qb[d.id()]=d);(e=e||d.name&&d.name())&&(this.V[e]=d);"function"===typeof d.el&&d.el()&&(this.sa||this.a).appendChild(d.el());return d};t.removeChild=function(a){"string"===typeof a&&(a=this.V[a]);if(a&&this.G){for(var c=l,d=this.G.length-1;0<=d;d--)if(this.G[d]===a){c=f;this.G.splice(d,1);break}c&&(this.qb[a.id]=h,this.V[a.name]=h,(c=a.w())&&c.parentNode===(this.sa||this.a)&&(this.sa||this.a).removeChild(a.w()))}};t.T=s("");t.d=function(a,c){u.d(this.a,a,u.bind(this,c));return this};t.o=function(a,c){u.o(this.a,a,c);return this};t.U=function(a,c){u.U(this.a,a,u.bind(this,c));return this};t.j=function(a,c){u.j(this.a,a,c);return this};t.L=function(a){a&&(this.aa?a.call(this):(this.Sa===b&&(this.Sa=[]),this.Sa.push(a)));return this};t.Ua=function(){this.aa=f;var a=this.Sa;if(a&&0<a.length){for(var c=0,d=a.length;c<d;c++)a[c].call(this);this.Sa=[];this.j("ready")}};t.n=function(a){u.n(this.a,a);return this};t.u=function(a){u.u(this.a,a);return this};t.show=function(){this.a.style.display="block";return this};t.C=function(){this.a.style.display="none";return this};function D(a){a.u("vjs-lock-showing")}
t.disable=function(){this.C();this.show=m()};t.width=function(a,c){return E(this,"width",a,c)};t.height=function(a,c){return E(this,"height",a,c)};t.Xc=function(a,c){return this.width(a,f).height(c)};function E(a,c,d,e){if(d!==b)return a.a.style[c]=-1!==(""+d).indexOf("%")||-1!==(""+d).indexOf("px")?d:"auto"===d?"":d+"px",e||a.j("resize"),a;if(!a.a)return 0;d=a.a.style[c];e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(a.a["offset"+u.$(c)],10)}
u.q=u.c.extend({i:function(a,c){u.c.call(this,a,c);var d=l;this.d("touchstart",function(a){a.preventDefault();d=f});this.d("touchmove",function(){d=l});var e=this;this.d("touchend",function(a){d&&e.p(a);a.preventDefault()});this.d("click",this.p);this.d("focus",this.Oa);this.d("blur",this.Na)}});t=u.q.prototype;t.e=function(a,c){c=u.k.B({className:this.T(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.qa||"Need Text")+"</span></div>",qd:"button","aria-live":"polite",tabIndex:0},c);return u.c.prototype.e.call(this,a,c)};t.T=function(){return"vjs-control "+u.c.prototype.T.call(this)};t.p=m();t.Oa=function(){u.d(document,"keyup",u.bind(this,this.ba))};t.ba=function(a){if(32==a.which||13==a.which)a.preventDefault(),this.p()};t.Na=function(){u.o(document,"keyup",u.bind(this,this.ba))};u.O=u.c.extend({i:function(a,c){u.c.call(this,a,c);this.Sc=this.V[this.g.barName];this.handle=this.V[this.g.handleName];a.d(this.tc,u.bind(this,this.update));this.d("mousedown",this.Pa);this.d("touchstart",this.Pa);this.d("focus",this.Oa);this.d("blur",this.Na);this.d("click",this.p);this.b.d("controlsvisible",u.bind(this,this.update));a.L(u.bind(this,this.update));this.P={}}});t=u.O.prototype;t.e=function(a,c){c=c||{};c.className+=" vjs-slider";c=u.k.B({qd:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},c);return u.c.prototype.e.call(this,a,c)};t.Pa=function(a){a.preventDefault();u.Tc();this.P.move=u.bind(this,this.Hb);this.P.end=u.bind(this,this.Ib);u.d(document,"mousemove",this.P.move);u.d(document,"mouseup",this.P.end);u.d(document,"touchmove",this.P.move);u.d(document,"touchend",this.P.end);this.Hb(a)};t.Ib=function(){u.Bd();u.o(document,"mousemove",this.P.move,l);u.o(document,"mouseup",this.P.end,l);u.o(document,"touchmove",this.P.move,l);u.o(document,"touchend",this.P.end,l);this.update()};t.update=function(){if(this.a){var a,c=this.yb(),d=this.handle,e=this.Sc;isNaN(c)&&(c=0);a=c;if(d){a=this.a.offsetWidth;var g=d.w().offsetWidth;a=g?g/a:0;c*=1-a;a=c+a/2;d.w().style.left=u.round(100*c,2)+"%"}e.w().style.width=u.round(100*a,2)+"%"}};function F(a,c){var d,e,g,j;d=a.a;e=u.ad(d);j=g=d.offsetWidth;d=a.handle;if(a.g.Cd)return j=e.top,e=c.changedTouches?c.changedTouches[0].pageY:c.pageY,d&&(d=d.w().offsetHeight,j+=d/2,g-=d),Math.max(0,Math.min(1,(j-e+g)/g));g=e.left;e=c.changedTouches?c.changedTouches[0].pageX:c.pageX;d&&(d=d.w().offsetWidth,g+=d/2,j-=d);return Math.max(0,Math.min(1,(e-g)/j))}t.Oa=function(){u.d(document,"keyup",u.bind(this,this.ba))};t.ba=function(a){37==a.which?(a.preventDefault(),this.yc()):39==a.which&&(a.preventDefault(),this.zc())};t.Na=function(){u.o(document,"keyup",u.bind(this,this.ba))};t.p=function(a){a.stopImmediatePropagation();a.preventDefault()};u.ea=u.c.extend();u.ea.prototype.defaultValue=0;u.ea.prototype.e=function(a,c){c=c||{};c.className+=" vjs-slider-handle";c=u.k.B({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},c);return u.c.prototype.e.call(this,"div",c)};u.ma=u.c.extend();function ca(a,c){a.Z(c);c.d("click",u.bind(a,function(){D(this)}))}u.ma.prototype.e=function(){var a=this.options().Vc||"ul";this.sa=u.e(a,{className:"vjs-menu-content"});a=u.c.prototype.e.call(this,"div",{append:this.sa,className:"vjs-menu"});a.appendChild(this.sa);u.d(a,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});return a};u.N=u.q.extend({i:function(a,c){u.q.call(this,a,c);this.selected(c.selected)}});u.N.prototype.e=function(a,c){return u.q.prototype.e.call(this,"li",u.k.B({className:"vjs-menu-item",innerHTML:this.g.label},c))};u.N.prototype.p=function(){this.selected(f)};u.N.prototype.selected=function(a){a?(this.n("vjs-selected"),this.a.setAttribute("aria-selected",f)):(this.u("vjs-selected"),this.a.setAttribute("aria-selected",l))};u.R=u.q.extend({i:function(a,c){u.q.call(this,a,c);this.wa=this.Ka();this.Z(this.wa);this.I&&0===this.I.length&&this.C();this.d("keyup",this.ba);this.a.setAttribute("aria-haspopup",f);this.a.setAttribute("role","button")}});t=u.R.prototype;t.pa=l;t.Ka=function(){var a=new u.ma(this.b);this.options().title&&a.w().appendChild(u.e("li",{className:"vjs-menu-title",innerHTML:u.$(this.A),zd:-1}));if(this.I=this.createItems())for(var c=0;c<this.I.length;c++)ca(a,this.I[c]);return a};t.ta=m();t.T=function(){return this.className+" vjs-menu-button "+u.q.prototype.T.call(this)};t.Oa=m();t.Na=m();t.p=function(){this.U("mouseout",u.bind(this,function(){D(this.wa);this.a.blur()}));this.pa?G(this):H(this)};t.ba=function(a){a.preventDefault();32==a.which||13==a.which?this.pa?G(this):H(this):27==a.which&&this.pa&&G(this)};function H(a){a.pa=f;a.wa.n("vjs-lock-showing");a.a.setAttribute("aria-pressed",f);a.I&&0<a.I.length&&a.I[0].w().focus()}
function G(a){a.pa=l;D(a.wa);a.a.setAttribute("aria-pressed",l)}
u.s=u.c.extend({i:function(a,c,d){this.M=a;c=u.k.B(da(a),c);this.v={};this.uc=c.poster;this.sb=c.controls;a.controls=l;u.c.call(this,this,c,d);this.controls()?this.n("vjs-controls-enabled"):this.n("vjs-controls-disabled");this.U("play",function(a){u.j(this.a,{type:"firstplay",target:this.a})||(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())});this.d("ended",this.hd);this.d("play",this.Kb);this.d("firstplay",this.jd);this.d("pause",this.Jb);this.d("progress",this.ld);this.d("durationchange",this.sc);this.d("error",this.Gb);this.d("fullscreenchange",this.kd);u.xa[this.Q]=this;c.plugins&&u.k.ua(c.plugins,function(a,c){this[a](c)},this);var e,g,j,k;e=this.Mb;a=function(){e();clearInterval(g);g=setInterval(u.bind(this,e),250)};c=function(){e();clearInterval(g)};this.d("mousedown",a);this.d("mousemove",e);this.d("mouseup",c);this.d("keydown",e);this.d("keyup",e);this.d("touchstart",a);this.d("touchmove",e);this.d("touchend",c);this.d("touchcancel",c);j=setInterval(u.bind(this,function(){this.ka&&(this.ka=l,this.ja(f),clearTimeout(k),k=setTimeout(u.bind(this,function(){this.ka||this.ja(l)}),2E3))}),250);this.d("dispose",function(){clearInterval(j);clearTimeout(k)})}});t=u.s.prototype;t.g=u.options;t.D=function(){this.j("dispose");this.o("dispose");u.xa[this.Q]=h;this.M&&this.M.player&&(this.M.player=h);this.a&&this.a.player&&(this.a.player=h);clearInterval(this.Ra);this.za();this.h&&this.h.D();u.c.prototype.D.call(this)};function da(a){var c={sources:[],tracks:[]};u.k.B(c,u.xb(a));if(a.hasChildNodes()){var d,e,g,j;a=a.childNodes;g=0;for(j=a.length;g<j;g++)d=a[g],e=d.nodeName.toLowerCase(),"source"===e?c.sources.push(u.xb(d)):"track"===e&&c.tracks.push(u.xb(d))}return c}
t.e=function(){var a=this.a=u.c.prototype.e.call(this,"div"),c=this.M;c.removeAttribute("width");c.removeAttribute("height");if(c.hasChildNodes()){var d,e,g,j,k;d=c.childNodes;e=d.length;for(k=[];e--;)g=d[e],j=g.nodeName.toLowerCase(),"track"===j&&k.push(g);for(d=0;d<k.length;d++)c.removeChild(k[d])}c.id=c.id||"vjs_video_"+u.t++;a.id=c.id;a.className=c.className;c.id+="_html5_api";c.className="vjs-tech";c.player=a.player=this;this.n("vjs-paused");this.width(this.g.width,f);this.height(this.g.height,f);c.parentNode&&c.parentNode.insertBefore(a,c);u.zb(c,a);return a};function I(a,c,d){a.h?(a.aa=l,a.h.D(),a.Eb&&(a.Eb=l,clearInterval(a.Ra)),a.Fb&&J(a),a.h=l):"Html5"!==c&&a.M&&(u.l.jc(a.M),a.M=h);a.ia=c;a.aa=l;var e=u.k.B({source:d,parentEl:a.a},a.g[c.toLowerCase()]);d&&(d.src==a.v.src&&0<a.v.currentTime&&(e.startTime=a.v.currentTime),a.v.src=d.src);a.h=new window.videojs[c](a,e);a.h.L(function(){this.b.Ua();if(!this.m.progressEvents){var a=this.b;a.Eb=f;a.Ra=setInterval(u.bind(a,function(){this.v.lb<this.buffered().end(0)?this.j("progress"):1==this.Ja()&&(clearInterval(this.Ra),this.j("progress"))}),500);a.h.U("progress",function(){this.m.progressEvents=f;var a=this.b;a.Eb=l;clearInterval(a.Ra)})}this.m.timeupdateEvents||(a=this.b,a.Fb=f,a.d("play",a.Cc),a.d("pause",a.za),a.h.U("timeupdate",function(){this.m.timeupdateEvents=f;J(this.b)}))})}function J(a){a.Fb=l;a.za();a.o("play",a.Cc);a.o("pause",a.za)}t.Cc=function(){this.hc&&this.za();this.hc=setInterval(u.bind(this,function(){this.j("timeupdate")}),250)};t.za=function(){clearInterval(this.hc)};t.Kb=function(){u.u(this.a,"vjs-paused");u.n(this.a,"vjs-playing")};t.jd=function(){this.g.starttime&&this.currentTime(this.g.starttime);this.n("vjs-has-started")};t.Jb=function(){u.u(this.a,"vjs-playing");u.n(this.a,"vjs-paused")};t.ld=function(){1==this.Ja()&&this.j("loadedalldata")};t.hd=function(){this.g.loop&&(this.currentTime(0),this.play())};t.sc=function(){this.duration(K(this,"duration"))};t.kd=function(){this.H?this.n("vjs-fullscreen"):this.u("vjs-fullscreen")};t.Gb=function(a){u.log("Video Error",a)};function L(a,c,d){if(a.h&&!a.h.aa)a.h.L(function(){this[c](d)});else try{a.h[c](d)}catch(e){throw u.log(e),e;}}function K(a,c){if(a.h&&a.h.aa)try{return a.h[c]()}catch(d){throw a.h[c]===b?u.log("Video.js: "+c+" method not defined for "+a.ia+" playback technology.",d):"TypeError"==d.name?(u.log("Video.js: "+c+" unavailable on "+a.ia+" playback technology element.",d),a.h.aa=l):u.log(d),d;}}t.play=function(){L(this,"play");return this};t.pause=function(){L(this,"pause");return this};t.paused=function(){return K(this,"paused")===l?l:f};t.currentTime=function(a){return a!==b?(this.v.rc=a,L(this,"setCurrentTime",a),this.Fb&&this.j("timeupdate"),this):this.v.currentTime=K(this,"currentTime")||0};t.duration=function(a){if(a!==b)return this.v.duration=parseFloat(a),this;this.v.duration===b&&this.sc();return this.v.duration};t.buffered=function(){var a=K(this,"buffered"),c=a.length-1,d=this.v.lb=this.v.lb||0;a&&(0<=c&&a.end(c)!==d)&&(d=a.end(c),this.v.lb=d);return u.tb(0,d)};t.Ja=function(){return this.duration()?this.buffered().end(0)/this.duration():0};t.volume=function(a){if(a!==b)return a=Math.max(0,Math.min(1,parseFloat(a))),this.v.volume=a,L(this,"setVolume",a),u.td(a),this;a=parseFloat(K(this,"volume"));return isNaN(a)?1:a};t.muted=function(a){return a!==b?(L(this,"setMuted",a),this):K(this,"muted")||l};t.Ta=function(){return K(this,"supportsFullScreen")||l};t.ya=function(){var a=u.Pb.ya;this.H=f;a?(u.d(document,a.vb,u.bind(this,function(c){this.H=document[a.H];this.H===l&&u.o(document,a.vb,arguments.callee);this.j("fullscreenchange")})),this.a[a.wc]()):this.h.Ta()?L(this,"enterFullScreen"):(this.cd=f,this.Yc=document.documentElement.style.overflow,u.d(document,"keydown",u.bind(this,this.lc)),document.documentElement.style.overflow="hidden",u.n(document.body,"vjs-full-window"),this.j("enterFullWindow"),this.j("fullscreenchange"));return this};t.ob=function(){var a=u.Pb.ya;this.H=l;if(a)document[a.nb]();else this.h.Ta()?L(this,"exitFullScreen"):(M(this),this.j("fullscreenchange"));return this};t.lc=function(a){27===a.keyCode&&(this.H===f?this.ob():M(this))};function M(a){a.cd=l;u.o(document,"keydown",a.lc);document.documentElement.style.overflow=a.Yc;u.u(document.body,"vjs-full-window");a.j("exitFullWindow")}
t.src=function(a){if(a instanceof Array){var c;a:{c=a;for(var d=0,e=this.g.techOrder;d<e.length;d++){var g=u.$(e[d]),j=window.videojs[g];if(j.isSupported())for(var k=0,q=c;k<q.length;k++){var n=q[k];if(j.canPlaySource(n)){c={source:n,h:g};break a}}}c=l}c?(a=c.source,c=c.h,c==this.ia?this.src(a):I(this,c,a)):this.a.appendChild(u.e("p",{innerHTML:this.options().notSupportedMessage}))}else a instanceof Object?window.videojs[this.ia].canPlaySource(a)?this.src(a.src):this.src([a]):(this.v.src=a,this.aa?(L(this,"src",a),"auto"==this.g.preload&&this.load(),this.g.autoplay&&this.play()):this.L(function(){this.src(a)}));return this};t.load=function(){L(this,"load");return this};t.currentSrc=function(){return K(this,"currentSrc")||this.v.src||""};t.Qa=function(a){return a!==b?(L(this,"setPreload",a),this.g.preload=a,this):K(this,"preload")};t.autoplay=function(a){return a!==b?(L(this,"setAutoplay",a),this.g.autoplay=a,this):K(this,"autoplay")};t.loop=function(a){return a!==b?(L(this,"setLoop",a),this.g.loop=a,this):K(this,"loop")};t.poster=function(a){return a!==b?(this.uc=a,this):this.uc};t.controls=function(a){return a!==b?(a=!!a,this.sb!==a&&((this.sb=a)?(this.u("vjs-controls-disabled"),this.n("vjs-controls-enabled"),this.j("controlsenabled")):(this.u("vjs-controls-enabled"),this.n("vjs-controls-disabled"),this.j("controlsdisabled"))),this):this.sb};u.s.prototype.Sb;t=u.s.prototype;t.Rb=function(a){return a!==b?(a=!!a,this.Sb!==a&&((this.Sb=a)?(this.n("vjs-using-native-controls"),this.j("usingnativecontrols")):(this.u("vjs-using-native-controls"),this.j("usingcustomcontrols"))),this):this.Sb};t.error=function(){return K(this,"error")};t.seeking=function(){return K(this,"seeking")};t.ka=f;t.Mb=function(){this.ka=f};t.Qb=f;t.ja=function(a){return a!==b?(a=!!a,a!==this.Qb&&((this.Qb=a)?(this.ka=f,this.u("vjs-user-inactive"),this.n("vjs-user-active"),this.j("useractive")):(this.ka=l,this.h.U("mousemove",function(a){a.stopPropagation();a.preventDefault()}),this.u("vjs-user-active"),this.n("vjs-user-inactive"),this.j("userinactive"))),this):this.Qb};var N,O,P;P=document.createElement("div");O={};P.Hd!==b?(O.wc="requestFullscreen",O.nb="exitFullscreen",O.vb="fullscreenchange",O.H="fullScreen"):(document.mozCancelFullScreen?(N="moz",O.H=N+"FullScreen"):(N="webkit",O.H=N+"IsFullScreen"),P[N+"RequestFullScreen"]&&(O.wc=N+"RequestFullScreen",O.nb=N+"CancelFullScreen"),O.vb=N+"fullscreenchange");document[O.nb]&&(u.Pb.ya=O);u.Fa=u.c.extend();u.Fa.prototype.g={Md:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}};u.Fa.prototype.e=function(){return u.e("div",{className:"vjs-control-bar"})};u.Yb=u.q.extend({i:function(a,c){u.q.call(this,a,c);a.d("play",u.bind(this,this.Kb));a.d("pause",u.bind(this,this.Jb))}});t=u.Yb.prototype;t.qa="Play";t.T=function(){return"vjs-play-control "+u.q.prototype.T.call(this)};t.p=function(){this.b.paused()?this.b.play():this.b.pause()};t.Kb=function(){u.u(this.a,"vjs-paused");u.n(this.a,"vjs-playing");this.a.children[0].children[0].innerHTML="Pause"};t.Jb=function(){u.u(this.a,"vjs-playing");u.n(this.a,"vjs-paused");this.a.children[0].children[0].innerHTML="Play"};u.Ya=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ca))}});u.Ya.prototype.e=function(){var a=u.c.prototype.e.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.content=u.e("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"});a.appendChild(u.e("div").appendChild(this.content));return a};u.Ya.prototype.Ca=function(){var a=this.b.Nb?this.b.v.currentTime:this.b.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+u.La(a,this.b.duration())};u.Za=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ca))}});u.Za.prototype.e=function(){var a=u.c.prototype.e.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});this.content=u.e("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"});a.appendChild(u.e("div").appendChild(this.content));return a};u.Za.prototype.Ca=function(){var a=this.b.duration();a&&(this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+u.La(a))};u.cc=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.cc.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};u.fb=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ca))}});u.fb.prototype.e=function(){var a=u.c.prototype.e.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.content=u.e("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"});a.appendChild(u.e("div").appendChild(this.content));return a};u.fb.prototype.Ca=function(){this.b.duration()&&(this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+u.La(this.b.duration()-this.b.currentTime()))};u.Ga=u.q.extend({i:function(a,c){u.q.call(this,a,c)}});u.Ga.prototype.qa="Fullscreen";u.Ga.prototype.T=function(){return"vjs-fullscreen-control "+u.q.prototype.T.call(this)};u.Ga.prototype.p=function(){this.b.H?(this.b.ob(),this.a.children[0].children[0].innerHTML="Fullscreen"):(this.b.ya(),this.a.children[0].children[0].innerHTML="Non-Fullscreen")};u.eb=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.eb.prototype.g={children:{seekBar:{}}};u.eb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-progress-control vjs-control"})};u.Zb=u.O.extend({i:function(a,c){u.O.call(this,a,c);a.d("timeupdate",u.bind(this,this.Ba));a.L(u.bind(this,this.Ba))}});t=u.Zb.prototype;t.g={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"};t.tc="timeupdate";t.e=function(){return u.O.prototype.e.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})};t.Ba=function(){var a=this.b.Nb?this.b.v.currentTime:this.b.currentTime();this.a.setAttribute("aria-valuenow",u.round(100*this.yb(),2));this.a.setAttribute("aria-valuetext",u.La(a,this.b.duration()))};t.yb=function(){var a;"Flash"===this.b.ia&&this.b.seeking()?(a=this.b.v,a=a.rc?a.rc:this.b.currentTime()):a=this.b.currentTime();return a/this.b.duration()};t.Pa=function(a){u.O.prototype.Pa.call(this,a);this.b.Nb=f;this.Dd=!this.b.paused();this.b.pause()};t.Hb=function(a){a=F(this,a)*this.b.duration();a==this.b.duration()&&(a-=0.1);this.b.currentTime(a)};t.Ib=function(a){u.O.prototype.Ib.call(this,a);this.b.Nb=l;this.Dd&&this.b.play()};t.zc=function(){this.b.currentTime(this.b.currentTime()+5)};t.yc=function(){this.b.currentTime(this.b.currentTime()-5)};u.ab=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("progress",u.bind(this,this.update))}});u.ab.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})};u.ab.prototype.update=function(){this.a.style&&(this.a.style.width=u.round(100*this.b.Ja(),2)+"%")};u.Xb=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.Xb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})};u.gb=u.ea.extend();u.gb.prototype.defaultValue="00:00";u.gb.prototype.e=function(){return u.ea.prototype.e.call(this,"div",{className:"vjs-seek-handle"})};u.ib=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.h&&(a.h.m&&a.h.m.volumeControl===l)&&this.n("vjs-hidden");a.d("loadstart",u.bind(this,function(){a.h.m&&a.h.m.volumeControl===l?this.n("vjs-hidden"):this.u("vjs-hidden")}))}});u.ib.prototype.g={children:{volumeBar:{}}};u.ib.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-volume-control vjs-control"})};u.hb=u.O.extend({i:function(a,c){u.O.call(this,a,c);a.d("volumechange",u.bind(this,this.Ba));a.L(u.bind(this,this.Ba));setTimeout(u.bind(this,this.update),0)}});t=u.hb.prototype;t.Ba=function(){this.a.setAttribute("aria-valuenow",u.round(100*this.b.volume(),2));this.a.setAttribute("aria-valuetext",u.round(100*this.b.volume(),2)+"%")};t.g={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"};t.tc="volumechange";t.e=function(){return u.O.prototype.e.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})};t.Hb=function(a){this.b.muted()&&this.b.muted(l);this.b.volume(F(this,a))};t.yb=function(){return this.b.muted()?0:this.b.volume()};t.zc=function(){this.b.volume(this.b.volume()+0.1)};t.yc=function(){this.b.volume(this.b.volume()-0.1)};u.dc=u.c.extend({i:function(a,c){u.c.call(this,a,c)}});u.dc.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};u.jb=u.ea.extend();u.jb.prototype.defaultValue="00:00";u.jb.prototype.e=function(){return u.ea.prototype.e.call(this,"div",{className:"vjs-volume-handle"})};u.da=u.q.extend({i:function(a,c){u.q.call(this,a,c);a.d("volumechange",u.bind(this,this.update));a.h&&(a.h.m&&a.h.m.volumeControl===l)&&this.n("vjs-hidden");a.d("loadstart",u.bind(this,function(){a.h.m&&a.h.m.volumeControl===l?this.n("vjs-hidden"):this.u("vjs-hidden")}))}});u.da.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};u.da.prototype.p=function(){this.b.muted(this.b.muted()?l:f)};u.da.prototype.update=function(){var a=this.b.volume(),c=3;0===a||this.b.muted()?c=0:0.33>a?c=1:0.67>a&&(c=2);this.b.muted()?"Unmute"!=this.a.children[0].children[0].innerHTML&&(this.a.children[0].children[0].innerHTML="Unmute"):"Mute"!=this.a.children[0].children[0].innerHTML&&(this.a.children[0].children[0].innerHTML="Mute");for(a=0;4>a;a++)u.u(this.a,"vjs-vol-"+a);u.n(this.a,"vjs-vol-"+c)};u.oa=u.R.extend({i:function(a,c){u.R.call(this,a,c);a.d("volumechange",u.bind(this,this.update));a.h&&(a.h.m&&a.h.m.Dc===l)&&this.n("vjs-hidden");a.d("loadstart",u.bind(this,function(){a.h.m&&a.h.m.Dc===l?this.n("vjs-hidden"):this.u("vjs-hidden")}));this.n("vjs-menu-button")}});u.oa.prototype.Ka=function(){var a=new u.ma(this.b,{Vc:"div"}),c=new u.hb(this.b,u.k.B({Cd:f},this.g.Vd));a.Z(c);return a};u.oa.prototype.p=function(){u.da.prototype.p.call(this);u.R.prototype.p.call(this)};u.oa.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})};u.oa.prototype.update=u.da.prototype.update;u.cb=u.q.extend({i:function(a,c){u.q.call(this,a,c);(!a.poster()||!a.controls())&&this.C();a.d("play",u.bind(this,this.C))}});u.cb.prototype.e=function(){var a=u.e("div",{className:"vjs-poster",tabIndex:-1}),c=this.b.poster();c&&("backgroundSize"in a.style?a.style.backgroundImage='url("'+c+'")':a.appendChild(u.e("img",{src:c})));return a};u.cb.prototype.p=function(){this.K().controls()&&this.b.play()};u.Wb=u.c.extend({i:function(a,c){u.c.call(this,a,c);a.d("canplay",u.bind(this,this.C));a.d("canplaythrough",u.bind(this,this.C));a.d("playing",u.bind(this,this.C));a.d("seeked",u.bind(this,this.C));a.d("seeking",u.bind(this,this.show));a.d("seeked",u.bind(this,this.C));a.d("error",u.bind(this,this.show));a.d("waiting",u.bind(this,this.show))}});u.Wb.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-loading-spinner"})};u.Wa=u.q.extend();u.Wa.prototype.e=function(){return u.q.prototype.e.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})};u.Wa.prototype.p=function(){this.b.play()};u.r=u.c.extend({i:function(a,c,d){u.c.call(this,a,c,d);var e,g;g=this;e=this.K();a=function(){if(e.controls()&&!e.Rb()){var a,c;g.d("mousedown",g.p);g.d("touchstart",function(a){a.preventDefault();a.stopPropagation();c=this.b.ja()});a=function(a){a.stopPropagation();c&&this.b.Mb()};g.d("touchmove",a);g.d("touchleave",a);g.d("touchcancel",a);g.d("touchend",a);var d,n,r;d=0;g.d("touchstart",function(){d=(new Date).getTime();r=f});a=function(){r=l};g.d("touchmove",a);g.d("touchleave",a);g.d("touchcancel",a);g.d("touchend",function(){r===f&&(n=(new Date).getTime()-d,250>n&&this.j("tap"))});g.d("tap",g.md)}};c=u.bind(g,g.pd);this.L(a);e.d("controlsenabled",a);e.d("controlsdisabled",c)}});u.r.prototype.pd=function(){this.o("tap");this.o("touchstart");this.o("touchmove");this.o("touchleave");this.o("touchcancel");this.o("touchend");this.o("click");this.o("mousedown")};u.r.prototype.p=function(a){0===a.button&&this.K().controls()&&(this.K().paused()?this.K().play():this.K().pause())};u.r.prototype.md=function(){this.K().ja(!this.K().ja())};u.r.prototype.m={volumeControl:f,fullscreenResize:l,progressEvents:l,timeupdateEvents:l};u.media={};u.media.Va="play pause paused currentTime setCurrentTime duration buffered volume setVolume muted setMuted width height supportsFullScreen enterFullScreen src load currentSrc preload setPreload autoplay setAutoplay loop setLoop error networkState readyState seeking initialTime startOffsetTime played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks defaultPlaybackRate playbackRate mediaGroup controller controls defaultMuted".split(" ");function ea(){var a=u.media.Va[i];return function(){throw Error('The "'+a+"\" method is not available on the playback technology's API");}}for(var i=u.media.Va.length-1;0<=i;i--)u.r.prototype[u.media.Va[i]]=ea();u.l=u.r.extend({i:function(a,c,d){this.m.volumeControl=u.l.Uc();this.m.movingMediaElementInDOM=!u.Kc;this.m.fullscreenResize=f;u.r.call(this,a,c,d);(c=c.source)&&this.a.currentSrc===c.src&&0<this.a.networkState?a.j("loadstart"):c&&(this.a.src=c.src);if(u.ac&&a.options().nativeControlsForTouch!==l){var e,g,j,k;e=this;g=this.K();c=g.controls();e.a.controls=!!c;j=function(){e.a.controls=f};k=function(){e.a.controls=l};g.d("controlsenabled",j);g.d("controlsdisabled",k);c=function(){g.o("controlsenabled",j);g.o("controlsdisabled",k)};e.d("dispose",c);g.d("usingcustomcontrols",c);g.Rb(f)}a.L(function(){this.M&&(this.g.autoplay&&this.paused())&&(delete this.M.poster,this.play())});for(a=u.l.$a.length-1;0<=a;a--)u.d(this.a,u.l.$a[a],u.bind(this.b,this.$c));this.Ua()}});t=u.l.prototype;t.D=function(){u.r.prototype.D.call(this)};t.e=function(){var a=this.b,c=a.M,d;if(!c||this.m.movingMediaElementInDOM===l)c?(d=c.cloneNode(l),u.l.jc(c),c=d,a.M=h):c=u.e("video",{id:a.id()+"_html5_api",className:"vjs-tech"}),c.player=a,u.zb(c,a.w());d=["autoplay","preload","loop","muted"];for(var e=d.length-1;0<=e;e--){var g=d[e];a.g[g]!==h&&(c[g]=a.g[g])}return c};t.$c=function(a){this.j(a);a.stopPropagation()};t.play=function(){this.a.play()};t.pause=function(){this.a.pause()};t.paused=function(){return this.a.paused};t.currentTime=function(){return this.a.currentTime};t.sd=function(a){try{this.a.currentTime=a}catch(c){u.log(c,"Video is not ready. (Video.js)")}};t.duration=function(){return this.a.duration||0};t.buffered=function(){return this.a.buffered};t.volume=function(){return this.a.volume};t.xd=function(a){this.a.volume=a};t.muted=function(){return this.a.muted};t.vd=function(a){this.a.muted=a};t.width=function(){return this.a.offsetWidth};t.height=function(){return this.a.offsetHeight};t.Ta=function(){return"function"==typeof this.a.webkitEnterFullScreen&&(/Android/.test(u.F)||!/Chrome|Mac OS X 10.5/.test(u.F))?f:l};t.src=function(a){this.a.src=a};t.load=function(){this.a.load()};t.currentSrc=function(){return this.a.currentSrc};t.Qa=function(){return this.a.Qa};t.wd=function(a){this.a.Qa=a};t.autoplay=function(){return this.a.autoplay};t.rd=function(a){this.a.autoplay=a};t.controls=function(){return this.a.controls};t.loop=function(){return this.a.loop};t.ud=function(a){this.a.loop=a};t.error=function(){return this.a.error};t.seeking=function(){return this.a.seeking};u.l.isSupported=function(){return!!u.na.canPlayType};u.l.mb=function(a){try{return!!u.na.canPlayType(a.type)}catch(c){return""}};u.l.Uc=function(){var a=u.na.volume;u.na.volume=a/2+0.1;return a!==u.na.volume};u.l.$a="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");u.l.jc=function(a){if(a){a.player=h;for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");"function"===typeof a.load&&a.load()}};u.Oc&&(document.createElement("video").constructor.prototype.canPlayType=function(a){return a&&-1!=a.toLowerCase().indexOf("video/mp4")?"maybe":""});u.f=u.r.extend({i:function(a,c,d){u.r.call(this,a,c,d);var e=c.source;d=c.parentEl;var g=this.a=u.e("div",{id:a.id()+"_temp_flash"}),j=a.id()+"_flash_api";a=a.g;var k=u.k.B({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:a.autoplay,preload:a.Qa,loop:a.loop,muted:a.muted},c.flashVars),q=u.k.B({wmode:"opaque",bgcolor:"#000000"},c.params),n=u.k.B({id:j,name:j,"class":"vjs-tech"},c.attributes);e&&(e.type&&u.f.ed(e.type)?(a=u.f.Ac(e.src),k.rtmpConnection=encodeURIComponent(a.rb),k.rtmpStream=encodeURIComponent(a.Ob)):k.src=encodeURIComponent(u.mc(e.src)));u.zb(g,d);c.startTime&&this.L(function(){this.load();this.play();this.currentTime(c.startTime)});if(c.iFrameMode===f&&!u.Jc){var r=u.e("iframe",{id:j+"_iframe",name:j+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});k.readyFunction="ready";k.eventProxyFunction="events";k.errorEventProxyFunction="errors";u.d(r,"load",u.bind(this,function(){var a,d=r.contentWindow;a=r.contentDocument?r.contentDocument:r.contentWindow.document;a.write(u.f.nc(c.swf,k,q,n));d.player=this.b;d.ready=u.bind(this.b,function(c){var d=this.h;d.a=a.getElementById(c);u.f.pb(d)});d.events=u.bind(this.b,function(a,c){this&&"flash"===this.ia&&this.j(c)});d.errors=u.bind(this.b,function(a,c){u.log("Flash Error",c)})}));g.parentNode.replaceChild(r,g)}else u.f.Zc(c.swf,g,k,q,n)}});t=u.f.prototype;t.D=function(){u.r.prototype.D.call(this)};t.play=function(){this.a.vjs_play()};t.pause=function(){this.a.vjs_pause()};t.src=function(a){u.f.dd(a)?(a=u.f.Ac(a),this.Qd(a.rb),this.Rd(a.Ob)):(a=u.mc(a),this.a.vjs_src(a));if(this.b.autoplay()){var c=this;setTimeout(function(){c.play()},0)}};t.currentSrc=function(){var a=this.a.vjs_getProperty("currentSrc");if(a==h){var c=this.Od(),d=this.Pd();c&&d&&(a=u.f.yd(c,d))}return a};t.load=function(){this.a.vjs_load()};t.poster=function(){this.a.vjs_getProperty("poster")};t.buffered=function(){return u.tb(0,this.a.vjs_getProperty("buffered"))};t.Ta=s(l);var Q=u.f.prototype,R="rtmpConnection rtmpStream preload currentTime defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "),S="error currentSrc networkState readyState seeking initialTime duration startOffsetTime paused played seekable ended videoTracks audioTracks videoWidth videoHeight textTracks".split(" ");function fa(){var a=R[T],c=a.charAt(0).toUpperCase()+a.slice(1);Q["set"+c]=function(c){return this.a.vjs_setProperty(a,c)}}function U(a){Q[a]=function(){return this.a.vjs_getProperty(a)}}var T;for(T=0;T<R.length;T++)U(R[T]),fa();for(T=0;T<S.length;T++)U(S[T]);u.f.isSupported=function(){return 10<=u.f.version()[0]};u.f.mb=function(a){if(!a.type)return"";a=a.type.replace(/;.*/,"").toLowerCase();if(a in u.f.bd||a in u.f.Bc)return"maybe"};u.f.bd={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};u.f.Bc={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};u.f.onReady=function(a){a=u.w(a);var c=a.player||a.parentNode.player,d=c.h;a.player=c;d.a=a;u.f.pb(d)};u.f.pb=function(a){a.w().vjs_getProperty?a.Ua():setTimeout(function(){u.f.pb(a)},50)};u.f.onEvent=function(a,c){u.w(a).player.j(c)};u.f.onError=function(a,c){u.w(a).player.j("error");u.log("Flash Error",c,a)};u.f.version=function(){var a="0,0,0";try{a=(new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(d){}}return a.split(",")};u.f.Zc=function(a,c,d,e,g){a=u.f.nc(a,d,e,g);a=u.e("div",{innerHTML:a}).childNodes[0];d=c.parentNode;c.parentNode.replaceChild(a,c);var j=d.childNodes[0];setTimeout(function(){j.style.display="block"},1E3)};u.f.nc=function(a,c,d,e){var g="",j="",k="";c&&u.k.ua(c,function(a,c){g+=a+"="+c+"&amp;"});d=u.k.B({movie:a,flashvars:g,allowScriptAccess:"always",allowNetworking:"all"},d);u.k.ua(d,function(a,c){j+='<param name="'+a+'" value="'+c+'" />'});e=u.k.B({data:a,width:"100%",height:"100%"},e);u.k.ua(e,function(a,c){k+=a+'="'+c+'" '});return'<object type="application/x-shockwave-flash"'+k+">"+j+"</object>"};u.f.yd=function(a,c){return a+"&"+c};u.f.Ac=function(a){var c={rb:"",Ob:""};if(!a)return c;var d=a.indexOf("&"),e;-1!==d?e=d+1:(d=e=a.lastIndexOf("/")+1,0===d&&(d=e=a.length));c.rb=a.substring(0,d);c.Ob=a.substring(e,a.length);return c};u.f.ed=function(a){return a in u.f.Bc};u.f.Qc=/^rtmp[set]?:\/\//i;u.f.dd=function(a){return u.f.Qc.test(a)};u.Pc=u.c.extend({i:function(a,c,d){u.c.call(this,a,c,d);if(!a.g.sources||0===a.g.sources.length){c=0;for(d=a.g.techOrder;c<d.length;c++){var e=u.$(d[c]),g=window.videojs[e];if(g&&g.isSupported()){I(a,e);break}}}else a.src(a.g.sources)}});function V(a){a.Aa=a.Aa||[];return a.Aa}function W(a,c,d){for(var e=a.Aa,g=0,j=e.length,k,q;g<j;g++)k=e[g],k.id()===c?(k.show(),q=k):d&&(k.J()==d&&0<k.mode())&&k.disable();(c=q?q.J():d?d:l)&&a.j(c+"trackchange")}
u.X=u.c.extend({i:function(a,c){u.c.call(this,a,c);this.Q=c.id||"vjs_"+c.kind+"_"+c.language+"_"+u.t++;this.xc=c.src;this.Wc=c["default"]||c.dflt;this.Ad=c.title;this.Ld=c.srclang;this.fd=c.label;this.fa=[];this.ec=[];this.ga=this.ha=0;this.b.d("fullscreenchange",u.bind(this,this.Rc))}});t=u.X.prototype;t.J=p("A");t.src=p("xc");t.ub=p("Wc");t.title=p("Ad");t.label=p("fd");t.readyState=p("ha");t.mode=p("ga");t.Rc=function(){this.a.style.fontSize=this.b.H?140*(screen.width/this.b.width())+"%":""};t.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-"+this.A+" vjs-text-track"})};t.show=function(){X(this);this.ga=2;u.c.prototype.show.call(this)};t.C=function(){X(this);this.ga=1;u.c.prototype.C.call(this)};t.disable=function(){2==this.ga&&this.C();this.b.o("timeupdate",u.bind(this,this.update,this.Q));this.b.o("ended",u.bind(this,this.reset,this.Q));this.reset();this.b.V.textTrackDisplay.removeChild(this);this.ga=0};function X(a){0===a.ha&&a.load();0===a.ga&&(a.b.d("timeupdate",u.bind(a,a.update,a.Q)),a.b.d("ended",u.bind(a,a.reset,a.Q)),("captions"===a.A||"subtitles"===a.A)&&a.b.V.textTrackDisplay.Z(a))}t.load=function(){0===this.ha&&(this.ha=1,u.get(this.xc,u.bind(this,this.nd),u.bind(this,this.Gb)))};t.Gb=function(a){this.error=a;this.ha=3;this.j("error")};t.nd=function(a){var c,d;a=a.split("\n");for(var e="",g=1,j=a.length;g<j;g++)if(e=u.trim(a[g])){-1==e.indexOf("--\x3e")?(c=e,e=u.trim(a[++g])):c=this.fa.length;c={id:c,index:this.fa.length};d=e.split(" --\x3e ");c.startTime=Y(d[0]);c.va=Y(d[1]);for(d=[];a[++g]&&(e=u.trim(a[g]));)d.push(e);c.text=d.join("<br/>");this.fa.push(c)}this.ha=2;this.j("loaded")};function Y(a){var c=a.split(":");a=0;var d,e,g;3==c.length?(d=c[0],e=c[1],c=c[2]):(d=0,e=c[0],c=c[1]);c=c.split(/\s+/);c=c.splice(0,1)[0];c=c.split(/\.|,/);g=parseFloat(c[1]);c=c[0];a+=3600*parseFloat(d);a+=60*parseFloat(e);a+=parseFloat(c);g&&(a+=g/1E3);return a}
t.update=function(){if(0<this.fa.length){var a=this.b.currentTime();if(this.Lb===b||a<this.Lb||this.Ma<=a){var c=this.fa,d=this.b.duration(),e=0,g=l,j=[],k,q,n,r;a>=this.Ma||this.Ma===b?r=this.wb!==b?this.wb:0:(g=f,r=this.Db!==b?this.Db:c.length-1);for(;;){n=c[r];if(n.va<=a)e=Math.max(e,n.va),n.Ia&&(n.Ia=l);else if(a<n.startTime){if(d=Math.min(d,n.startTime),n.Ia&&(n.Ia=l),!g)break}else g?(j.splice(0,0,n),q===b&&(q=r),k=r):(j.push(n),k===b&&(k=r),q=r),d=Math.min(d,n.va),e=Math.max(e,n.startTime),n.Ia=f;if(g)if(0===r)break;else r--;else if(r===c.length-1)break;else r++}this.ec=j;this.Ma=d;this.Lb=e;this.wb=k;this.Db=q;a=this.ec;c="";d=0;for(e=a.length;d<e;d++)c+='<span class="vjs-tt-cue">'+a[d].text+"</span>";this.a.innerHTML=c;this.j("cuechange")}}};t.reset=function(){this.Ma=0;this.Lb=this.b.duration();this.Db=this.wb=0};u.Ub=u.X.extend();u.Ub.prototype.A="captions";u.$b=u.X.extend();u.$b.prototype.A="subtitles";u.Vb=u.X.extend();u.Vb.prototype.A="chapters";u.bc=u.c.extend({i:function(a,c,d){u.c.call(this,a,c,d);if(a.g.tracks&&0<a.g.tracks.length){c=this.b;a=a.g.tracks;var e;for(d=0;d<a.length;d++){e=a[d];var g=c,j=e.kind,k=e.label,q=e.language,n=e;e=g.Aa=g.Aa||[];n=n||{};n.kind=j;n.label=k;n.language=q;j=u.$(j||"subtitles");g=new window.videojs[j+"Track"](g,n);e.push(g)}}}});u.bc.prototype.e=function(){return u.c.prototype.e.call(this,"div",{className:"vjs-text-track-display"})};u.Y=u.N.extend({i:function(a,c){var d=this.ca=c.track;c.label=d.label();c.selected=d.ub();u.N.call(this,a,c);this.b.d(d.J()+"trackchange",u.bind(this,this.update))}});u.Y.prototype.p=function(){u.N.prototype.p.call(this);W(this.b,this.ca.Q,this.ca.J())};u.Y.prototype.update=function(){this.selected(2==this.ca.mode())};u.bb=u.Y.extend({i:function(a,c){c.track={J:function(){return c.kind},K:a,label:function(){return c.kind+" off"},ub:s(l),mode:s(l)};u.Y.call(this,a,c);this.selected(f)}});u.bb.prototype.p=function(){u.Y.prototype.p.call(this);W(this.b,this.ca.Q,this.ca.J())};u.bb.prototype.update=function(){for(var a=V(this.b),c=0,d=a.length,e,g=f;c<d;c++)e=a[c],e.J()==this.ca.J()&&2==e.mode()&&(g=l);this.selected(g)};u.S=u.R.extend({i:function(a,c){u.R.call(this,a,c);1>=this.I.length&&this.C()}});u.S.prototype.ta=function(){var a=[],c;a.push(new u.bb(this.b,{kind:this.A}));for(var d=0;d<V(this.b).length;d++)c=V(this.b)[d],c.J()===this.A&&a.push(new u.Y(this.b,{track:c}));return a};u.Da=u.S.extend({i:function(a,c,d){u.S.call(this,a,c,d);this.a.setAttribute("aria-label","Captions Menu")}});u.Da.prototype.A="captions";u.Da.prototype.qa="Captions";u.Da.prototype.className="vjs-captions-button";u.Ha=u.S.extend({i:function(a,c,d){u.S.call(this,a,c,d);this.a.setAttribute("aria-label","Subtitles Menu")}});u.Ha.prototype.A="subtitles";u.Ha.prototype.qa="Subtitles";u.Ha.prototype.className="vjs-subtitles-button";u.Ea=u.S.extend({i:function(a,c,d){u.S.call(this,a,c,d);this.a.setAttribute("aria-label","Chapters Menu")}});t=u.Ea.prototype;t.A="chapters";t.qa="Chapters";t.className="vjs-chapters-button";t.ta=function(){for(var a=[],c,d=0;d<V(this.b).length;d++)c=V(this.b)[d],c.J()===this.A&&a.push(new u.Y(this.b,{track:c}));return a};t.Ka=function(){for(var a=V(this.b),c=0,d=a.length,e,g,j=this.I=[];c<d;c++)if(e=a[c],e.J()==this.A&&e.ub()){if(2>e.readyState()){this.Id=e;e.d("loaded",u.bind(this,this.Ka));return}g=e;break}a=this.wa=new u.ma(this.b);a.a.appendChild(u.e("li",{className:"vjs-menu-title",innerHTML:u.$(this.A),zd:-1}));if(g){e=g.fa;for(var k,c=0,d=e.length;c<d;c++)k=e[c],k=new u.Xa(this.b,{track:g,cue:k}),j.push(k),a.Z(k)}0<this.I.length&&this.show();return a};u.Xa=u.N.extend({i:function(a,c){var d=this.ca=c.track,e=this.cue=c.cue,g=a.currentTime();c.label=e.text;c.selected=e.startTime<=g&&g<e.va;u.N.call(this,a,c);d.d("cuechange",u.bind(this,this.update))}});u.Xa.prototype.p=function(){u.N.prototype.p.call(this);this.b.currentTime(this.cue.startTime);this.update(this.cue.startTime)};u.Xa.prototype.update=function(){var a=this.cue,c=this.b.currentTime();this.selected(a.startTime<=c&&c<a.va)};u.k.B(u.Fa.prototype.g.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}});if("undefined"!==typeof window.JSON&&"function"===window.JSON.parse)u.JSON=window.JSON;else{u.JSON={};var Z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;u.JSON.parse=function(a,c){function d(a,e){var k,q,n=a[e];if(n&&"object"===typeof n)for(k in n)Object.prototype.hasOwnProperty.call(n,k)&&(q=d(n,k),q!==b?n[k]=q:delete n[k]);return c.call(a,e,n)}var e;a=String(a);Z.lastIndex=0;Z.test(a)&&(a=a.replace(Z,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data");}}
u.fc=function(){var a,c,d=document.getElementsByTagName("video");if(d&&0<d.length)for(var e=0,g=d.length;e<g;e++)if((c=d[e])&&c.getAttribute)c.player===b&&(a=c.getAttribute("data-setup"),a!==h&&(a=u.JSON.parse(a||"{}"),v(c,a)));else{u.kb();break}else u.Ec||u.kb()};u.kb=function(){setTimeout(u.fc,1)};"complete"===document.readyState?u.Ec=f:u.U(window,"load",function(){u.Ec=f});u.kb();u.od=function(a,c){u.s.prototype[a]=c};var ga=this;ga.Ed=f;function $(a,c){var d=a.split("."),e=ga;!(d[0]in e)&&e.execScript&&e.execScript("var "+d[0]);for(var g;d.length&&(g=d.shift());)!d.length&&c!==b?e[g]=c:e=e[g]?e[g]:e[g]={}};$("videojs",u);$("_V_",u);$("videojs.options",u.options);$("videojs.players",u.xa);$("videojs.TOUCH_ENABLED",u.ac);$("videojs.cache",u.ra);$("videojs.Component",u.c);u.c.prototype.player=u.c.prototype.K;u.c.prototype.dispose=u.c.prototype.D;u.c.prototype.createEl=u.c.prototype.e;u.c.prototype.el=u.c.prototype.w;u.c.prototype.addChild=u.c.prototype.Z;u.c.prototype.children=u.c.prototype.children;u.c.prototype.on=u.c.prototype.d;u.c.prototype.off=u.c.prototype.o;u.c.prototype.one=u.c.prototype.U;u.c.prototype.trigger=u.c.prototype.j;u.c.prototype.triggerReady=u.c.prototype.Ua;u.c.prototype.show=u.c.prototype.show;u.c.prototype.hide=u.c.prototype.C;u.c.prototype.width=u.c.prototype.width;u.c.prototype.height=u.c.prototype.height;u.c.prototype.dimensions=u.c.prototype.Xc;u.c.prototype.ready=u.c.prototype.L;u.c.prototype.addClass=u.c.prototype.n;u.c.prototype.removeClass=u.c.prototype.u;$("videojs.Player",u.s);u.s.prototype.dispose=u.s.prototype.D;u.s.prototype.requestFullScreen=u.s.prototype.ya;u.s.prototype.cancelFullScreen=u.s.prototype.ob;u.s.prototype.bufferedPercent=u.s.prototype.Ja;u.s.prototype.usingNativeControls=u.s.prototype.Rb;u.s.prototype.reportUserActivity=u.s.prototype.Mb;u.s.prototype.userActive=u.s.prototype.ja;$("videojs.MediaLoader",u.Pc);$("videojs.TextTrackDisplay",u.bc);$("videojs.ControlBar",u.Fa);$("videojs.Button",u.q);$("videojs.PlayToggle",u.Yb);$("videojs.FullscreenToggle",u.Ga);$("videojs.BigPlayButton",u.Wa);$("videojs.LoadingSpinner",u.Wb);$("videojs.CurrentTimeDisplay",u.Ya);$("videojs.DurationDisplay",u.Za);$("videojs.TimeDivider",u.cc);$("videojs.RemainingTimeDisplay",u.fb);$("videojs.Slider",u.O);$("videojs.ProgressControl",u.eb);$("videojs.SeekBar",u.Zb);$("videojs.LoadProgressBar",u.ab);$("videojs.PlayProgressBar",u.Xb);$("videojs.SeekHandle",u.gb);$("videojs.VolumeControl",u.ib);$("videojs.VolumeBar",u.hb);$("videojs.VolumeLevel",u.dc);$("videojs.VolumeMenuButton",u.oa);$("videojs.VolumeHandle",u.jb);$("videojs.MuteToggle",u.da);$("videojs.PosterImage",u.cb);$("videojs.Menu",u.ma);$("videojs.MenuItem",u.N);$("videojs.MenuButton",u.R);u.R.prototype.createItems=u.R.prototype.ta;u.S.prototype.createItems=u.S.prototype.ta;u.Ea.prototype.createItems=u.Ea.prototype.ta;$("videojs.SubtitlesButton",u.Ha);$("videojs.CaptionsButton",u.Da);$("videojs.ChaptersButton",u.Ea);$("videojs.MediaTechController",u.r);u.r.prototype.features=u.r.prototype.m;u.r.prototype.m.volumeControl=u.r.prototype.m.Dc;u.r.prototype.m.fullscreenResize=u.r.prototype.m.Jd;u.r.prototype.m.progressEvents=u.r.prototype.m.Nd;u.r.prototype.m.timeupdateEvents=u.r.prototype.m.Sd;$("videojs.Html5",u.l);u.l.Events=u.l.$a;u.l.isSupported=u.l.isSupported;u.l.canPlaySource=u.l.mb;u.l.prototype.setCurrentTime=u.l.prototype.sd;u.l.prototype.setVolume=u.l.prototype.xd;u.l.prototype.setMuted=u.l.prototype.vd;u.l.prototype.setPreload=u.l.prototype.wd;u.l.prototype.setAutoplay=u.l.prototype.rd;u.l.prototype.setLoop=u.l.prototype.ud;$("videojs.Flash",u.f);u.f.isSupported=u.f.isSupported;u.f.canPlaySource=u.f.mb;u.f.onReady=u.f.onReady;$("videojs.TextTrack",u.X);u.X.prototype.label=u.X.prototype.label;$("videojs.CaptionsTrack",u.Ub);$("videojs.SubtitlesTrack",u.$b);$("videojs.ChaptersTrack",u.Vb);$("videojs.autoSetup",u.fc);$("videojs.plugin",u.od);$("videojs.createTimeRange",u.tb);})();;;videojs.Youtube=videojs.MediaTechController.extend({init:function(player,options,ready){videojs.MediaTechController.call(this,player,options,ready);this.features['progressEvents']=false;this.features['timeupdateEvents']=false;if(typeof options['source']!='undefined'){for(var key in options['source']){player.options()[key]=options['source'][key];}}
this.userQuality=videojs.Youtube.convertQualityName(player.options()['quality']);this.player_=player;this.player_el_=document.getElementById(player.id());this.player_el_.className+=' vjs-youtube';if(!!navigator.userAgent.match(/iPhone/i)||!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPod/i)||!!navigator.userAgent.match(/Android.*AppleWebKit/i)){player.options()['ytcontrols']=true;}
this.qualityButton=document.createElement('div');this.qualityButton.setAttribute('class','vjs-quality-button vjs-menu-button vjs-control');this.qualityButton.setAttribute('tabindex',0);var qualityContent=document.createElement('div');this.qualityButton.appendChild(qualityContent);this.qualityTitle=document.createElement('span');qualityContent.appendChild(this.qualityTitle);var qualityMenu=document.createElement('div');qualityMenu.setAttribute('class','vjs-menu');this.qualityButton.appendChild(qualityMenu);this.qualityMenuContent=document.createElement('ul');this.qualityMenuContent.setAttribute('class','vjs-menu-content');qualityMenu.appendChild(this.qualityMenuContent);this.id_=this.player_.id()+'_youtube_api';this.el_=videojs.Component.prototype.createEl('iframe',{id:this.id_,className:'vjs-tech',scrolling:'no',marginWidth:0,marginHeight:0,frameBorder:0,webkitAllowFullScreen:'true',mozallowfullscreen:'true',allowFullScreen:'true'});this.iframeblocker=videojs.Component.prototype.createEl('div',{className:'iframeblocker'});var self=this;var toggleThis=function(){if(self.paused()){self.play();}else{self.pause();}};this.iframeblocker.addEventListener('click',toggleThis);this.iframeblocker.addEventListener('mousemove',function(e){if(!self.player_.userActive()){self.player_.userActive(true);}
e.stopPropagation();e.preventDefault();});if(!this.player_.options()['ytcontrols']){this.iframeblocker.style.display='block';}
this.player_el_.insertBefore(this.iframeblocker,this.player_el_.firstChild);this.player_el_.insertBefore(this.el_,this.iframeblocker);this.parseSrc(player.options()['src']);this.playOnReady=this.player_.options()['autoplay']||false;var params={enablejsapi:1,iv_load_policy:3,playerapiid:this.id(),disablekb:1,wmode:'transparent',controls:(this.player_.options()['ytcontrols'])?1:0,showinfo:0,modestbranding:1,rel:0,autoplay:(this.playOnReady)?1:0,loop:(this.player_.options()['loop'])?1:0,list:this.playlistId,vq:this.userQuality};if(typeof params.list=='undefined'){delete params.list;}
if(window.location.protocol!='file:'){params.origin=window.location.protocol+'//'+window.location.host;this.el_.src=window.location.protocol+'//www.youtube.com/embed/'+this.videoId+'?'+videojs.Youtube.makeQueryString(params);}else{this.el_.src='https://www.youtube.com/embed/'+this.videoId+'?'+videojs.Youtube.makeQueryString(params);}
var self=this;player.ready(function(){var controlBar=self.player_el_.getElementsByClassName('vjs-control-bar')[0];controlBar.appendChild(self.qualityButton);if(self.playOnReady&&!self.player_.options()['ytcontrols']){self.player_.loadingSpinner.show();self.player_.bigPlayButton.hide();}});if(this.player_.options()['ytcontrols']){this.player_.controls(false);}else{if(!this.player_.poster()){if(this.videoId==null){this.iframeblocker.style.backgroundColor='black';}else{this.player_.poster('https://img.youtube.com/vi/'+this.videoId+'/0.jpg');}}}
if(videojs.Youtube.apiReady){this.loadYoutube();}else{videojs.Youtube.loadingQueue.push(this);if(!videojs.Youtube.apiLoading){var tag=document.createElement('script');tag.src='//www.youtube.com/iframe_api';var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);videojs.Youtube.apiLoading=true;}}
this.on('dispose',function(){this.el_.parentNode.removeChild(this.el_);this.iframeblocker.parentNode.removeChild(this.iframeblocker);this.qualityButton.parentNode.removeChild(this.qualityButton);this.player_.loadingSpinner.hide();this.player_.bigPlayButton.hide();});}});videojs.Youtube.prototype.parseSrc=function(src){this.srcVal=src;if(src){var regId=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var match=src.match(regId);if(match&&match[2].length==11){this.videoId=match[2];}else{this.videoId=null;}
var regPlaylist=/[?&]list=([^#\&\?]+)/;match=src.match(regPlaylist);if(match!=null&&match.length>1){this.playlistId=match[1];}else{if(this.playlistId){delete this.playlistId;}}
var regVideoQuality=/[?&]vq=([^#\&\?]+)/;match=src.match(regVideoQuality);if(match!=null&&match.length>1){this.userQuality=match[1];}}};videojs.Youtube.prototype.src=function(src){if(src){this.parseSrc(src);if(this.videoId==null){this.iframeblocker.style.backgroundColor='black';this.iframeblocker.style.display='block';}else{this.ytplayer.loadVideoById({videoId:this.videoId,suggestedQuality:this.userQuality});this.player_el_.getElementsByClassName('vjs-poster')[0].style.backgroundImage='url(https://img.youtube.com/vi/'+this.videoId+'/0.jpg)';this.iframeblocker.style.backgroundColor='';this.iframeblocker.style.display='';this.player_.poster('https://img.youtube.com/vi/'+this.videoId+'/0.jpg');}}
return this.srcVal;};videojs.Youtube.prototype.load=function(){};videojs.Youtube.prototype.play=function(){if(this.videoId!=null){if(!this.player_.options()['ytcontrols']){this.player_.trigger('waiting');}
if(this.isReady_){this.ytplayer.playVideo();}else{this.playOnReady=true;}}};videojs.Youtube.prototype.pause=function(){this.ytplayer.pauseVideo();};videojs.Youtube.prototype.paused=function(){return(this.ytplayer)?(this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING):true;};videojs.Youtube.prototype.currentTime=function(){return(this.ytplayer&&this.ytplayer.getCurrentTime)?this.ytplayer.getCurrentTime():0;};videojs.Youtube.prototype.setCurrentTime=function(seconds){this.ytplayer.seekTo(seconds,true);this.player_.trigger('timeupdate');};videojs.Youtube.prototype.duration=function(){return(this.ytplayer&&this.ytplayer.getDuration)?this.ytplayer.getDuration():0;};videojs.Youtube.prototype.volume=function(){if(this.ytplayer&&isNaN(this.volumeVal)){this.volumeVal=this.ytplayer.getVolume()/ 100.0;}
return this.volumeVal;};videojs.Youtube.prototype.setVolume=function(percentAsDecimal){if(percentAsDecimal&&percentAsDecimal!=this.volumeVal){this.ytplayer.setVolume(percentAsDecimal*100.0);this.volumeVal=percentAsDecimal;this.player_.trigger('volumechange');}};videojs.Youtube.prototype.muted=function(){return this.mutedVal;};videojs.Youtube.prototype.setMuted=function(muted){if(muted){this.ytplayer.mute();}else{this.ytplayer.unMute();}
this.mutedVal=muted;this.player_.trigger('volumechange');};videojs.Youtube.prototype.buffered=function(){if(this.ytplayer&&this.ytplayer.getVideoBytesLoaded){var loadedBytes=this.ytplayer.getVideoBytesLoaded();var totalBytes=this.ytplayer.getVideoBytesTotal();if(!loadedBytes||!totalBytes)return 0;var duration=this.ytplayer.getDuration();var secondsBuffered=(loadedBytes / totalBytes)*duration;var secondsOffset=(this.ytplayer.getVideoStartBytes()/ totalBytes)*duration;return videojs.createTimeRange(secondsOffset,secondsOffset+secondsBuffered);}else{return videojs.createTimeRange(0,0);}};videojs.Youtube.prototype.supportsFullScreen=function(){return true;};videojs.Youtube.isSupported=function(){return true;};videojs.Youtube.canPlaySource=function(srcObj){return(srcObj.type=='video/youtube');};videojs.Youtube.canControlVolume=function(){return true;};videojs.Youtube.loadingQueue=[];videojs.Youtube.prototype.loadYoutube=function(){this.ytplayer=new YT.Player(this.id_,{events:{onReady:function(e){e.target.vjsTech.onReady();},onStateChange:function(e){e.target.vjsTech.onStateChange(e.data);},onPlaybackQualityChange:function(e){e.target.vjsTech.onPlaybackQualityChange(e.data);},onError:function(e){e.target.vjsTech.onError(e.data);}}});this.ytplayer.vjsTech=this;};videojs.Youtube.makeQueryString=function(args){var array=[];for(var key in args){if(args.hasOwnProperty(key)){array.push(encodeURIComponent(key)+'='+encodeURIComponent(args[key]));}}
return array.join('&');};window.onYouTubeIframeAPIReady=function(){var yt;while((yt=videojs.Youtube.loadingQueue.shift())){yt.loadYoutube();}
videojs.Youtube.loadingQueue=[];videojs.Youtube.apiReady=true;};videojs.Youtube.prototype.onReady=function(){this.isReady_=true;this.triggerReady();this.iframeblocker.style.display='';this.player_.loadingSpinner.hide();if(this.player_.options()['muted']){this.setMuted(true);}
if(this.playOnReady){this.playOnReady=false;this.play();}};videojs.Youtube.prototype.updateQualities=function(){var qualities=this.ytplayer.getAvailableQualityLevels();if(qualities.length==0){this.qualityButton.style.display='none';}else{this.qualityButton.style.display='';while(this.qualityMenuContent.hasChildNodes()){this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);}
for(var i=0;i<qualities.length;++i){var el=document.createElement('li');el.setAttribute('class','vjs-menu-item');setInnerText(el,videojs.Youtube.parseQualityName(qualities[i]));el.setAttribute('data-val',qualities[i]);if(qualities[i]==this.quality)el.classList.add('vjs-selected');var self=this;el.addEventListener('click',function(){var quality=this.getAttribute('data-val');self.ytplayer.setPlaybackQuality(quality);setInnerText(self.qualityTitle,videojs.Youtube.parseQualityName(quality));var selected=self.qualityMenuContent.querySelector('.vjs-selected');if(selected)selected.classList.remove('vjs-selected');this.classList.add('vjs-selected');});this.qualityMenuContent.appendChild(el);}}};videojs.Youtube.prototype.onStateChange=function(state){if(state!=this.lastState){switch(state){case-1:this.player_.trigger('durationchange');break;case YT.PlayerState.ENDED:if(!this.player_.options()['ytcontrols']){this.player_el_.getElementsByClassName('vjs-poster')[0].style.display='block';this.player_.bigPlayButton.show();}
this.player_.trigger('ended');break;case YT.PlayerState.PLAYING:this.player_.bigPlayButton.hide();this.updateQualities();this.player_.trigger('timeupdate');this.player_.trigger('durationchange');this.player_.trigger('playing');this.player_.trigger('play');break;case YT.PlayerState.PAUSED:this.player_.trigger('pause');break;case YT.PlayerState.BUFFERING:this.player_.trigger('timeupdate');if(!this.player_.options()['ytcontrols']){this.player_.trigger('waiting');}
break;case YT.PlayerState.CUED:break;}
this.lastState=state;}};videojs.Youtube.convertQualityName=function(name){switch(name){case'144p':return'tiny';case'240p':return'small';case'360p':return'medium';case'480p':return'large';case'720p':return'hd720';case'1080p':return'hd1080';}
return name;};videojs.Youtube.parseQualityName=function(name){switch(name){case'tiny':return'144p';case'small':return'240p';case'medium':return'360p';case'large':return'480p';case'hd720':return'720p';case'hd1080':return'1080p';}
return name;};videojs.Youtube.prototype.onPlaybackQualityChange=function(quality){this.quality=quality;setInnerText(this.qualityTitle,videojs.Youtube.parseQualityName(quality));switch(quality){case'medium':this.player_.videoWidth=480;this.player_.videoHeight=360;break;case'large':this.player_.videoWidth=640;this.player_.videoHeight=480;break;case'hd720':this.player_.videoWidth=960;this.player_.videoHeight=720;break;case'hd1080':this.player_.videoWidth=1440;this.player_.videoHeight=1080;break;case'highres':this.player_.videoWidth=1920;this.player_.videoHeight=1080;break;case'small':this.player_.videoWidth=320;this.player_.videoHeight=240;break;case'tiny':this.player_.videoWidth=144;this.player_.videoHeight=108;break;default:this.player_.videoWidth=0;this.player_.videoHeight=0;break;}
this.player_.trigger('ratechange');};videojs.Youtube.prototype.onError=function(error){this.player_.error=error;this.player_.trigger('error');};function setInnerText(element,text){var textProperty=('innerText'in element)?'innerText':'textContent';element[textProperty]=text;}
(function(){var style=document.createElement("style");style.type='text/css';var css=" .vjs-youtube .vjs-poster { background-size: cover; }.iframeblocker { display:none;position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer;z-index:2; }.vjs-youtube.vjs-user-inactive .iframeblocker { display:block; } .vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }";setInnerText(style,css);document.getElementsByTagName("head")[0].appendChild(style);})();;;var VimeoState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};videojs.Vimeo=videojs.MediaTechController.extend({init:function(a,d,e){videojs.MediaTechController.call(this,a,d,e);this.player_=a;this.player_el_=document.getElementById(this.player_.id());this.player_.controls(!1);this.id_=this.player_.id()+"_vimeo_api";this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0,webkitAllowFullScreen:"true",mozallowfullscreen:"true",allowFullScreen:"true"});this.player_el_.insertBefore(this.el_,this.player_el_.firstChild);this.baseUrl="https"==document.location.protocol?"https://secure.vimeo.com/video/":"http://player.vimeo.com/video/";this.vimeo={};this.vimeoInfo={};var h=this;this.el_.onload=function(){h.onLoad()};this.startMuted=a.options().muted;this.src(a.options().src)}});videojs.Vimeo.prototype.dispose=function(){this.vimeo.api("unload");delete this.vimeo;this.el_.parentNode.removeChild(this.el_);videojs.MediaTechController.prototype.dispose.call(this)};videojs.Vimeo.prototype.src=function(a){this.isReady_=!1;if(a=a.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/))this.videoId=a[5];a={api:1,byline:0,portrait:0,show_title:0,show_byline:0,show_portait:0,fullscreen:1,player_id:this.id_,autoplay:this.player_.options().autoplay?1:0,loop:this.player_.options().loop?1:0};this.el_.src=this.baseUrl+this.videoId+"?"+videojs.Vimeo.makeQueryString(a)};videojs.Vimeo.prototype.load=function(){};videojs.Vimeo.prototype.play=function(){this.vimeo.api("play")};videojs.Vimeo.prototype.pause=function(){this.vimeo.api("pause")};videojs.Vimeo.prototype.paused=function(){return this.lastState!==VimeoState.PLAYING&&this.lastState!==VimeoState.BUFFERING};videojs.Vimeo.prototype.currentTime=function(){return this.vimeoInfo.time||0};videojs.Vimeo.prototype.setCurrentTime=function(a){this.vimeo.api("seekTo",a);this.player_.trigger("timeupdate")};videojs.Vimeo.prototype.duration=function(){return this.vimeoInfo.duration||0};videojs.Vimeo.prototype.buffered=function(){return videojs.createTimeRange(0,this.vimeoInfo.buffered||0)};videojs.Vimeo.prototype.volume=function(){return this.vimeoInfo.muted?this.vimeoInfo.muteVolume:this.vimeoInfo.volume};videojs.Vimeo.prototype.setVolume=function(a){this.vimeo.api("setvolume",a);this.vimeoInfo.volume=a;this.player_.trigger("volumechange")};videojs.Vimeo.prototype.muted=function(){return this.vimeoInfo.muted||!1};videojs.Vimeo.prototype.setMuted=function(a){a?(this.vimeoInfo.muteVolume=this.vimeoInfo.volume,this.setVolume(0)):this.setVolume(this.vimeoInfo.muteVolume);this.vimeoInfo.muted=a;this.player_.trigger("volumechange")};videojs.Vimeo.prototype.onReady=function(){this.isReady_=!0;this.triggerReady();this.startMuted&&(this.setMuted(!0),this.startMuted=!1)};videojs.Vimeo.prototype.onLoad=function(){this.vimeo.api&&(this.vimeo.api("unload"),delete this.vimeo);this.vimeo=$f(this.el_);this.vimeoInfo={state:VimeoState.UNSTARTED,volume:1,muted:!1,muteVolume:1,time:0,duration:0,buffered:0,url:this.baseUrl+this.videoId,error:null};var a=this;this.vimeo.addEvent("ready",function(d){a.onReady()});this.vimeo.addEvent("loadProgress",function(d,e){a.onLoadProgress(d)});this.vimeo.addEvent("playProgress",function(d,e){a.onPlayProgress(d)});this.vimeo.addEvent("play",function(d){a.onPlay()});this.vimeo.addEvent("pause",function(d){a.onPause()});this.vimeo.addEvent("finish",function(d){a.onFinish()});this.vimeo.addEvent("seek",function(d,e){a.onSeek(d)})};videojs.Vimeo.prototype.onLoadProgress=function(a){var d=!this.vimeoInfo.duration;this.vimeoInfo.duration=a.duration;this.vimeoInfo.buffered=a.percent;this.player_.trigger("progress");d&&this.player_.trigger("durationchange")};videojs.Vimeo.prototype.onPlayProgress=function(a){this.vimeoInfo.time=a.seconds;this.player_.trigger("timeupdate")};videojs.Vimeo.prototype.onPlay=function(){this.vimeoInfo.state=VimeoState.PLAYING;this.player_.trigger("play")};videojs.Vimeo.prototype.onPause=function(){this.vimeoInfo.state=VimeoState.PAUSED;this.player_.trigger("pause")};videojs.Vimeo.prototype.onFinish=function(){this.vimeoInfo.state=VimeoState.ENDED;this.player_.trigger("ended")};videojs.Vimeo.prototype.onSeek=function(a){this.vimeoInfo.time=a.seconds;this.player_.trigger("timeupdate");this.player_.trigger("seeked")};videojs.Vimeo.prototype.onError=function(a){this.player_.error=a;this.player_.trigger("error")};videojs.Vimeo.isSupported=function(){return!0};videojs.Vimeo.prototype.supportsFullScreen=function(){return!1};videojs.Vimeo.canPlaySource=function(a){return"video/vimeo"==a.type};videojs.Vimeo.makeQueryString=function(a){var d=[],e;for(e in a)a.hasOwnProperty(e)&&d.push(encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return d.join("&")};var Froogaloop=function(){function a(m){return new a.fn.init(m)}function d(a,c,b){if(!b.contentWindow.postMessage)return!1;var d=b.getAttribute("src").split("?")[0];a=JSON.stringify({method:a,value:c});"//"===d.substr(0,2)&&(d=window.location.protocol+d);b.contentWindow.postMessage(a,d)}function e(a){var c,b;try{c=JSON.parse(a.data),b=c.event||c.method}catch(d){}"ready"!=b||k||(k=!0);if(a.origin!=l)return!1;a=c.value;var e=c.data,g=""===g?null:c.player_id;c=g?f[g][b]:f[b];b=[];if(!c)return!1;void 0!==a&&b.push(a);e&&b.push(e);g&&b.push(g);return 0<b.length?c.apply(null,b):c.call()}function h(a,c,b){b?(f[b]||(f[b]={}),f[b][a]=c):f[a]=c}var f={},k=!1,l="";a.fn=a.prototype={element:null,init:function(a){"string"===typeof a&&(a=document.getElementById(a));this.element=a;a=this.element.getAttribute("src");"//"===a.substr(0,2)&&(a=window.location.protocol+a);a=a.split("/");for(var c="",b=0,d=a.length;b<d;b++){if(3>b)c+=a[b];else break;2>b&&(c+="/")}l=c;return this},api:function(a,c){if(!this.element||!a)return!1;var b=this.element,e=""!==b.id?b.id:null,f=c&&c.constructor&&c.call&&c.apply?null:c,g=c&&c.constructor&&c.call&&c.apply?c:null;g&&h(a,g,e);d(a,f,b);return this},addEvent:function(a,c){if(!this.element)return!1;var b=this.element,e=""!==b.id?b.id:null;h(a,c,e);"ready"!=a?d("addEventListener",a,b):"ready"==a&&k&&c.call(null,e);return this},removeEvent:function(a){if(!this.element)return!1;var c=this.element,b=""!==c.id?c.id:null;a:{if(b&&f[b]){if(!f[b][a]){b=!1;break a}f[b][a]=null}else{if(!f[a]){b=!1;break a}f[a]=null}b=!0}"ready"!=a&&b&&d("removeEventListener",a,c)}};a.fn.init.prototype=a.fn;window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e);return window.Froogaloop=window.$f=a}();;;;;(function(window,document,$,undefined){"use strict";var W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments);},IE=navigator.userAgent.match(/msie/),didUpdate=null,isTouch=document.createTouch!==undefined,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $;},isString=function(str){return str&&$.type(str)==="string";},isPercentage=function(str){return isString(str)&&str.indexOf('%')>0;},isScrollable=function(el){return(el&&!(el.style.overflow&&el.style.overflow==='hidden')&&((el.clientWidth&&el.scrollWidth>el.clientWidth)||(el.clientHeight&&el.scrollHeight>el.clientHeight)));},getScalar=function(orig,dim){var value=parseInt(orig,10)||0;if(dim&&isPercentage(orig)){value=F.getViewport()[dim]/ 100*value;}
return Math.ceil(value);},getValue=function(value,dim){return getScalar(value,dim)+'px';};$.extend(F,{version:'2.1.4',defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!isTouch,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:'auto',wrapCSS:'',arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:'html',headers:{'X-fancyBox':true}},iframe:{scrolling:'auto',preload:true},swf:{wmode:'transparent',allowfullscreen:'true',allowscriptaccess:'always'},keys:{next:{13:'left',34:'up',39:'left',40:'up'},prev:{8:'right',33:'down',37:'right',38:'down'},close:[27],play:[32],toggle:[70]},direction:{next:'left',prev:'right'},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(IE?' allowtransparency="true"':'')+'></iframe>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:'fade',openSpeed:250,openEasing:'swing',openOpacity:true,openMethod:'zoomIn',closeEffect:'fade',closeSpeed:250,closeEasing:'swing',closeOpacity:true,closeMethod:'zoomOut',nextEffect:'elastic',nextSpeed:250,nextEasing:'swing',nextMethod:'changeIn',prevEffect:'elastic',prevSpeed:250,prevEasing:'swing',prevMethod:'changeOut',helpers:{overlay:true,title:true},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(group,opts){if(!group){return;}
if(!$.isPlainObject(opts)){opts={};}
if(false===F.close(true)){return;}
if(!$.isArray(group)){group=isQuery(group)?$(group).get():[group];}
$.each(group,function(i,element){var obj={},href,title,content,type,rez,hrefParts,selector;if($.type(element)==="object"){if(element.nodeType){element=$(element);}
if(isQuery(element)){obj={href:element.data('fancybox-href')||element.attr('href'),title:element.data('fancybox-title')||element.attr('title'),isDom:true,element:element};if($.metadata){$.extend(true,obj,element.metadata());}}else{obj=element;}}
href=opts.href||obj.href||(isString(element)?element:null);title=opts.title!==undefined?opts.title:obj.title||'';content=opts.content||obj.content;type=content?'html':(opts.type||obj.type);if(!type&&obj.isDom){type=element.data('fancybox-type');if(!type){rez=element.prop('class').match(/fancybox\.(\w+)/);type=rez?rez[1]:null;}}
if(isString(href)){if(!type){if(F.isImage(href)){type='image';}else if(F.isSWF(href)){type='swf';}else if(href.charAt(0)==='#'){type='inline';}else if(isString(element)){type='html';content=element;}}
if(type==='ajax'){hrefParts=href.split(/\s+/,2);href=hrefParts.shift();selector=hrefParts.shift();}}
if(!content){if(type==='inline'){if(href){content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,''):href);}else if(obj.isDom){content=element;}}else if(type==='html'){content=href;}else if(!type&&!href&&obj.isDom){type='inline';content=element;}}
$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector});group[i]=obj;});F.opts=$.extend(true,{},F.defaults,opts);if(opts.keys!==undefined){F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):false;}
F.group=group;return F._start(F.opts.index);},cancel:function(){var coming=F.coming;if(!coming||false===F.trigger('onCancel')){return;}
F.hideLoading();if(F.ajaxLoad){F.ajaxLoad.abort();}
F.ajaxLoad=null;if(F.imgPreload){F.imgPreload.onload=F.imgPreload.onerror=null;}
if(coming.wrap){coming.wrap.stop(true,true).trigger('onReset').remove();}
F.coming=null;if(!F.current){F._afterZoomOut(coming);}},close:function(event){F.cancel();if(false===F.trigger('beforeClose')){return;}
F.unbindEvents();if(!F.isActive){return;}
if(!F.isOpen||event===true){$('.fancybox-wrap').stop(true).trigger('onReset').remove();F._afterZoomOut();}else{F.isOpen=F.isOpened=false;F.isClosing=true;$('.fancybox-item, .fancybox-nav').remove();F.wrap.stop(true,true).removeClass('fancybox-opened');F.transitions[F.current.closeMethod]();}},play:function(action){var clear=function(){clearTimeout(F.player.timer);},set=function(){clear();if(F.current&&F.player.isActive){F.player.timer=setTimeout(F.next,F.current.playSpeed);}},stop=function(){clear();$('body').unbind('.player');F.player.isActive=false;F.trigger('onPlayEnd');},start=function(){if(F.current&&(F.current.loop||F.current.index<F.group.length-1)){F.player.isActive=true;$('body').bind({'afterShow.player onUpdate.player':set,'onCancel.player beforeClose.player':stop,'beforeLoad.player':clear});set();F.trigger('onPlayStart');}};if(action===true||(!F.player.isActive&&action!==false)){start();}else{stop();}},next:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.next;}
F.jumpto(current.index+1,direction,'next');}},prev:function(direction){var current=F.current;if(current){if(!isString(direction)){direction=current.direction.prev;}
F.jumpto(current.index-1,direction,'prev');}},jumpto:function(index,direction,router){var current=F.current;if(!current){return;}
index=getScalar(index);F.direction=direction||current.direction[(index>=current.index?'next':'prev')];F.router=router||'jumpto';if(current.loop){if(index<0){index=current.group.length+(index%current.group.length);}
index=index%current.group.length;}
if(current.group[index]!==undefined){F.cancel();F._start(index);}},reposition:function(e,onlyAbsolute){var current=F.current,wrap=current?current.wrap:null,pos;if(wrap){pos=F._getPosition(onlyAbsolute);if(e&&e.type==='scroll'){delete pos.position;wrap.stop(true,true).animate(pos,200);}else{wrap.css(pos);current.pos=$.extend({},current.dim,pos);}}},update:function(e){var type=(e&&e.type),anyway=!type||type==='orientationchange';if(anyway){clearTimeout(didUpdate);didUpdate=null;}
if(!F.isOpen||didUpdate){return;}
didUpdate=setTimeout(function(){var current=F.current;if(!current||F.isClosing){return;}
F.wrap.removeClass('fancybox-tmp');if(anyway||type==='load'||(type==='resize'&&current.autoResize)){F._setDimension();}
if(!(type==='scroll'&&current.canShrink)){F.reposition(e);}
F.trigger('onUpdate');didUpdate=null;},(anyway&&!isTouch?0:300));},toggle:function(action){if(F.isOpen){F.current.fitToView=$.type(action)==="boolean"?action:!F.current.fitToView;if(isTouch){F.wrap.removeAttr('style').addClass('fancybox-tmp');F.trigger('onUpdate');}
F.update();}},hideLoading:function(){D.unbind('.loading');$('#fancybox-loading').remove();},showLoading:function(){var el,viewport;F.hideLoading();el=$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo('body');D.bind('keydown.loading',function(e){if((e.which||e.keyCode)===27){e.preventDefault();F.cancel();}});if(!F.defaults.fixed){viewport=F.getViewport();el.css({position:'absolute',top:(viewport.h*0.5)+viewport.y,left:(viewport.w*0.5)+viewport.x});}},getViewport:function(){var locked=(F.current&&F.current.locked)||false,rez={x:W.scrollLeft(),y:W.scrollTop()};if(locked){rez.w=locked[0].clientWidth;rez.h=locked[0].clientHeight;}else{rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width();rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height();}
return rez;},unbindEvents:function(){if(F.wrap&&isQuery(F.wrap)){F.wrap.unbind('.fb');}
D.unbind('.fb');W.unbind('.fb');},bindEvents:function(){var current=F.current,keys;if(!current){return;}
W.bind('orientationchange.fb'+(isTouch?'':' resize.fb')+(current.autoCenter&&!current.locked?' scroll.fb':''),F.update);keys=current.keys;if(keys){D.bind('keydown.fb',function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;if(code===27&&F.coming){return false;}
if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey&&!(target&&(target.type||$(target).is('[contenteditable]')))){$.each(keys,function(i,val){if(current.group.length>1&&val[code]!==undefined){F[i](val[code]);e.preventDefault();return false;}
if($.inArray(code,val)>-1){F[i]();e.preventDefault();return false;}});}});}
if($.fn.mousewheel&&current.mouseWheel){F.wrap.bind('mousewheel.fb',function(e,delta,deltaX,deltaY){var target=e.target||null,parent=$(target),canScroll=false;while(parent.length){if(canScroll||parent.is('.fancybox-skin')||parent.is('.fancybox-wrap')){break;}
canScroll=isScrollable(parent[0]);parent=$(parent).parent();}
if(delta!==0&&!canScroll){if(F.group.length>1&&!current.canShrink){if(deltaY>0||deltaX>0){F.prev(deltaY>0?'down':'left');}else if(deltaY<0||deltaX<0){F.next(deltaY<0?'up':'right');}
e.preventDefault();}}});}},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(!obj){return;}
if($.isFunction(obj[event])){ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1));}
if(ret===false){return false;}
if(obj.helpers){$.each(obj.helpers,function(helper,opts){if(opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])){opts=$.extend(true,{},F.helpers[helper].defaults,opts);F.helpers[helper][event](opts,obj);}});}
$.event.trigger(event+'.fb');},isImage:function(str){return isString(str)&&str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i);},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i);},_start:function(index){var coming={},obj,href,type,margin,padding;index=getScalar(index);obj=F.group[index]||null;if(!obj){return false;}
coming=$.extend(true,{},F.opts,obj);margin=coming.margin;padding=coming.padding;if($.type(margin)==='number'){coming.margin=[margin,margin,margin,margin];}
if($.type(padding)==='number'){coming.padding=[padding,padding,padding,padding];}
if(coming.modal){$.extend(true,coming,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}});}
if(coming.autoSize){coming.autoWidth=coming.autoHeight=true;}
if(coming.width==='auto'){coming.autoWidth=true;}
if(coming.height==='auto'){coming.autoHeight=true;}
coming.group=F.group;coming.index=index;F.coming=coming;if(false===F.trigger('beforeLoad')){F.coming=null;return;}
type=coming.type;href=coming.href;if(!type){F.coming=null;if(F.current&&F.router&&F.router!=='jumpto'){F.current.index=index;return F[F.router](F.direction);}
return false;}
F.isActive=true;if(type==='image'||type==='swf'){coming.autoHeight=coming.autoWidth=false;coming.scrolling='visible';}
if(type==='image'){coming.aspectRatio=true;}
if(type==='iframe'&&isTouch){coming.scrolling='scroll';}
coming.wrap=$(coming.tpl.wrap).addClass('fancybox-'+(isTouch?'mobile':'desktop')+' fancybox-type-'+type+' fancybox-tmp '+coming.wrapCSS).appendTo(coming.parent||'body');$.extend(coming,{skin:$('.fancybox-skin',coming.wrap),outer:$('.fancybox-outer',coming.wrap),inner:$('.fancybox-inner',coming.wrap)});$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css('padding'+v,getValue(coming.padding[i]));});F.trigger('onReady');if(type==='inline'||type==='html'){if(!coming.content||!coming.content.length){return F._error('content');}}else if(!href){return F._error('href');}
if(type==='image'){F._loadImage();}else if(type==='ajax'){F._loadAjax();}else if(type==='iframe'){F._loadIframe();}else{F._afterLoad();}},_error:function(type){$.extend(F.coming,{type:'html',autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:'no',hasError:type,content:F.coming.tpl.error});F._afterLoad();},_loadImage:function(){var img=F.imgPreload=new Image();img.onload=function(){this.onload=this.onerror=null;F.coming.width=this.width;F.coming.height=this.height;F._afterLoad();};img.onerror=function(){this.onload=this.onerror=null;F._error('image');};img.src=F.coming.href;if(img.complete!==true){F.showLoading();}},_loadAjax:function(){var coming=F.coming;F.showLoading();F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){if(F.coming&&textStatus!=='abort'){F._error('ajax',jqXHR);}else{F.hideLoading();}},success:function(data,textStatus){if(textStatus==='success'){coming.content=data;F._afterLoad();}}}));},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr('scrolling',isTouch?'auto':coming.iframe.scrolling).attr('src',coming.href);$(coming.wrap).bind('onReset',function(){try{$(this).find('iframe').hide().attr('src','//about:blank').end().empty();}catch(e){}});if(coming.iframe.preload){F.showLoading();iframe.one('load',function(){$(this).data('ready',1);if(!isTouch){$(this).bind('load.fb',F.update);}
$(this).parents('.fancybox-wrap').width('100%').removeClass('fancybox-tmp').show();F._afterLoad();});}
coming.content=iframe.appendTo(coming.inner);if(!coming.iframe.preload){F._afterLoad();}},_preloadImages:function(){var group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0,item,i;for(i=1;i<=cnt;i+=1){item=group[(current.index+i)%len];if(item.type==='image'&&item.href){new Image().src=item.href;}}},_afterLoad:function(){var coming=F.coming,previous=F.current,placeholder='fancybox-placeholder',current,content,type,scrolling,href,embed;F.hideLoading();if(!coming||F.isActive===false){return;}
if(false===F.trigger('afterLoad',coming,previous)){coming.wrap.stop(true).trigger('onReset').remove();F.coming=null;return;}
if(previous){F.trigger('beforeChange',previous);previous.wrap.stop(true).removeClass('fancybox-opened').find('.fancybox-item, .fancybox-nav').remove();}
F.unbindEvents();current=coming;content=coming.content;type=coming.type;scrolling=coming.scrolling;$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous});href=current.href;switch(type){case'inline':case'ajax':case'html':if(current.selector){content=$('<div>').html(content).find(current.selector);}else if(isQuery(content)){if(!content.data(placeholder)){content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide());}
content=content.show().detach();current.wrap.bind('onReset',function(){if($(this).find(content).length){content.hide().replaceAll(content.data(placeholder)).data(placeholder,false);}});}
break;case'image':content=current.tpl.image.replace('{href}',href);break;case'swf':content='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>';embed='';$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>';embed+=' '+name+'="'+val+'"';});content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+'></embed></object>';break;}
if(!(isQuery(content)&&content.parent().is(current.inner))){current.inner.append(content);}
F.trigger('beforeShow');current.inner.css('overflow',scrolling==='yes'?'scroll':(scrolling==='no'?'hidden':scrolling));F._setDimension();F.reposition();F.isOpen=false;F.coming=null;F.bindEvents();if(!F.isOpened){$('.fancybox-wrap').not(current.wrap).stop(true).trigger('onReset').remove();}else if(previous.prevMethod){F.transitions[previous.prevMethod]();}
F.transitions[F.isOpened?current.nextMethod:current.openMethod]();F._preloadImages();},_setDimension:function(){var viewport=F.getViewport(),steps=0,canShrink=false,canExpand=false,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=getScalar(margin[1]+margin[3]),hMargin=getScalar(margin[0]+margin[2]),wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body;wrap.add(skin).add(inner).width('auto').height('auto').removeClass('fancybox-tmp');wPadding=getScalar(skin.outerWidth(true)-skin.width());hPadding=getScalar(skin.outerHeight(true)-skin.height());wSpace=wMargin+wPadding;hSpace=hMargin+hPadding;origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/ 100:width;origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/ 100:height;if(current.type==='iframe'){iframe=current.content;if(current.autoHeight&&iframe.data('ready')===1){try{if(iframe[0].contentWindow.document.location){inner.width(origWidth).height(9999);body=iframe.contents().find('body');if(scrollOut){body.css('overflow-x','hidden');}
origHeight=body.height();}}catch(e){}}}else if(current.autoWidth||current.autoHeight){inner.addClass('fancybox-tmp');if(!current.autoWidth){inner.width(origWidth);}
if(!current.autoHeight){inner.height(origHeight);}
if(current.autoWidth){origWidth=inner.width();}
if(current.autoHeight){origHeight=inner.height();}
inner.removeClass('fancybox-tmp');}
width=getScalar(origWidth);height=getScalar(origHeight);ratio=origWidth / origHeight;minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,'w')-wSpace:minWidth);maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,'w')-wSpace:maxWidth);minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,'h')-hSpace:minHeight);maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,'h')-hSpace:maxHeight);origMaxWidth=maxWidth;origMaxHeight=maxHeight;if(current.fitToView){maxWidth=Math.min(viewport.w-wSpace,maxWidth);maxHeight=Math.min(viewport.h-hSpace,maxHeight);}
maxWidth_=viewport.w-wMargin;maxHeight_=viewport.h-hMargin;if(current.aspectRatio){if(width>maxWidth){width=maxWidth;height=getScalar(width / ratio);}
if(height>maxHeight){height=maxHeight;width=getScalar(height*ratio);}
if(width<minWidth){width=minWidth;height=getScalar(width / ratio);}
if(height<minHeight){height=minHeight;width=getScalar(height*ratio);}}else{width=Math.max(minWidth,Math.min(width,maxWidth));if(current.autoHeight&&current.type!=='iframe'){inner.width(width);height=inner.height();}
height=Math.max(minHeight,Math.min(height,maxHeight));}
if(current.fitToView){inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();if(current.aspectRatio){while((width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight){if(steps++>19){break;}
height=Math.max(minHeight,Math.min(maxHeight,height-10));width=getScalar(height*ratio);if(width<minWidth){width=minWidth;height=getScalar(width / ratio);}
if(width>maxWidth){width=maxWidth;height=getScalar(width / ratio);}
inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();}}else{width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_)));height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)));}}
if(scrollOut&&scrolling==='auto'&&height<origHeight&&(width+wPadding+scrollOut)<maxWidth_){width+=scrollOut;}
inner.width(width).height(height);wrap.width(width+wPadding);width_=wrap.width();height_=wrap.height();canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight;canExpand=current.aspectRatio?(width<origMaxWidth&&height<origMaxHeight&&width<origWidth&&height<origHeight):((width<origMaxWidth||height<origMaxHeight)&&(width<origWidth||height<origHeight));$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(true),skinSpace:skin.height()-height});if(!iframe&&current.autoHeight&&height>minHeight&&height<maxHeight&&!canExpand){inner.height('auto');}},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:'absolute',top:margin[0],left:margin[3]};if(current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w){rez.position='fixed';}else if(!current.locked){rez.top+=viewport.y;rez.left+=viewport.x;}
rez.top=getValue(Math.max(rez.top,rez.top+((viewport.h-height)*current.topRatio)));rez.left=getValue(Math.max(rez.left,rez.left+((viewport.w-width)*current.leftRatio)));return rez;},_afterZoomIn:function(){var current=F.current;if(!current){return;}
F.isOpen=F.isOpened=true;F.wrap.css('overflow','visible').addClass('fancybox-opened');F.update();if(current.closeClick||(current.nextClick&&F.group.length>1)){F.inner.css('cursor','pointer').bind('click.fb',function(e){if(!$(e.target).is('a')&&!$(e.target).parent().is('a')){e.preventDefault();F[current.closeClick?'close':'next']();}});}
if(current.closeBtn){$(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb',function(e){e.preventDefault();F.close();});}
if(current.arrows&&F.group.length>1){if(current.loop||current.index>0){$(current.tpl.prev).appendTo(F.outer).bind('click.fb',F.prev);}
if(current.loop||current.index<F.group.length-1){$(current.tpl.next).appendTo(F.outer).bind('click.fb',F.next);}}
F.trigger('afterShow');if(!current.loop&&current.index===current.group.length-1){F.play(false);}else if(F.opts.autoPlay&&!F.player.isActive){F.opts.autoPlay=false;F.play();}},_afterZoomOut:function(obj){obj=obj||F.current;$('.fancybox-wrap').trigger('onReset').remove();$.extend(F,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});F.trigger('afterClose',obj);}});F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();if(!orig&&current.isDom&&element.is(':visible')){orig=element.find('img:first');if(!orig.length){orig=element;}}
if(isQuery(orig)){pos=orig.offset();if(orig.is('img')){width=orig.outerWidth();height=orig.outerHeight();}}else{pos.top=viewport.y+(viewport.h-height)*current.topRatio;pos.left=viewport.x+(viewport.w-width)*current.leftRatio;}
if(F.wrap.css('position')==='fixed'||current.locked){pos.top-=viewport.y;pos.left-=viewport.x;}
pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)};return pos;},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;if(prop==='width'||prop==='height'){ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start);if(F.isClosing){ratio=1-ratio;}
padding=prop==='width'?current.wPadding:current.hPadding;value=now-padding;F.skin[prop](getScalar(prop==='width'?value:value-(wrapSpace*ratio)));F.inner[prop](getScalar(prop==='width'?value:value-(wrapSpace*ratio)-(skinSpace*ratio)));}},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic=effect==='elastic',endPos=$.extend({opacity:1},startPos);delete endPos.position;if(elastic){startPos=this.getOrigPosition();if(current.openOpacity){startPos.opacity=0.1;}}else if(effect==='fade'){startPos.opacity=0.1;}
F.wrap.css(startPos).animate(endPos,{duration:effect==='none'?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn});},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic=effect==='elastic',endPos={opacity:0.1};if(elastic){endPos=this.getOrigPosition();if(current.closeOpacity){endPos.opacity=0.1;}}
F.wrap.animate(endPos,{duration:effect==='none'?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut});},changeIn:function(){var current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction,distance=200,field;startPos.opacity=0.1;if(effect==='elastic'){field=direction==='down'||direction==='up'?'top':'left';if(direction==='down'||direction==='right'){startPos[field]=getValue(getScalar(startPos[field])-distance);endPos[field]='+='+distance+'px';}else{startPos[field]=getValue(getScalar(startPos[field])+distance);endPos[field]='-='+distance+'px';}}
if(effect==='none'){F._afterZoomIn();}else{F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn});}},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:0.1},direction=F.direction,distance=200;if(effect==='elastic'){endPos[direction==='down'||direction==='up'?'top':'left']=(direction==='up'||direction==='left'?'-':'+')+'='+distance+'px';}
previous.wrap.animate(endPos,{duration:effect==='none'?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger('onReset').remove();}});}};F.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!isTouch,fixed:true},overlay:null,fixed:false,create:function(opts){opts=$.extend({},this.defaults,opts);if(this.overlay){this.close();}
this.overlay=$('<div class="fancybox-overlay"></div>').appendTo('body');this.fixed=false;if(opts.fixed&&F.defaults.fixed){this.overlay.addClass('fancybox-overlay-fixed');this.fixed=true;}},open:function(opts){var that=this;opts=$.extend({},this.defaults,opts);if(this.overlay){this.overlay.unbind('.overlay').width('auto').height('auto');}else{this.create(opts);}
if(!this.fixed){W.bind('resize.overlay',$.proxy(this.update,this));this.update();}
if(opts.closeClick){this.overlay.bind('click.overlay',function(e){if($(e.target).hasClass('fancybox-overlay')){if(F.isActive){F.close();}else{that.close();}}});}
this.overlay.css(opts.css).show();},close:function(){$('.fancybox-overlay').remove();W.unbind('resize.overlay');this.overlay=null;if(this.margin!==false){$('body').css('margin-right',this.margin);this.margin=false;}
if(this.el){this.el.removeClass('fancybox-lock');}},update:function(){var width='100%',offsetWidth;this.overlay.width(width).height('100%');if(IE){offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(D.width()>offsetWidth){width=D.width();}}else if(D.width()>W.width()){width=D.width();}
this.overlay.width(width).height(D.height());},onReady:function(opts,obj){$('.fancybox-overlay').stop(true,true);if(!this.overlay){this.margin=D.height()>W.height()||$('body').css('overflow-y')==='scroll'?$('body').css('margin-right'):false;this.el=document.all&&!document.querySelector?$('html'):$('body');this.create(opts);}
if(opts.locked&&this.fixed){obj.locked=this.overlay.append(obj.wrap);obj.fixed=false;}
if(opts.showEarly===true){this.beforeShow.apply(this,arguments);}},beforeShow:function(opts,obj){if(obj.locked){this.el.addClass('fancybox-lock');if(this.margin!==false){$('body').css('margin-right',getScalar(this.margin)+obj.scrollbarWidth);}}
this.open(opts);},onUpdate:function(){if(!this.fixed){this.update();}},afterClose:function(opts){if(this.overlay&&!F.isActive){this.overlay.fadeOut(opts.speedOut,$.proxy(this.close,this));}}};F.helpers.title={defaults:{type:'float',position:'bottom'},beforeShow:function(opts){var current=F.current,text=current.title,type=opts.type,title,target;if($.isFunction(text)){text=text.call(current.element,current);}
if(!isString(text)||$.trim(text)===''){return;}
title=$('<div class="fancybox-title fancybox-title-'+type+'-wrap">'+text+'</div>');switch(type){case'inside':target=F.skin;break;case'outside':target=F.wrap;break;case'over':target=F.inner;break;default:target=F.skin;title.appendTo('body');if(IE){title.width(title.width());}
title.wrapInner('<span class="child"></span>');F.current.margin[2]+=Math.abs(getScalar(title.css('margin-bottom')));break;}
title[(opts.position==='top'?'prependTo':'appendTo')](target);}};$.fn.fancybox=function(options){var index,that=$(this),selector=this.selector||'',run=function(e){var what=$(this).blur(),idx=index,relType,relVal;if(!(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&!what.is('.fancybox-wrap')){relType=options.groupAttr||'data-fancybox-group';relVal=what.attr(relType);if(!relVal){relType='rel';relVal=what.get(0)[relType];}
if(relVal&&relVal!==''&&relVal!=='nofollow'){what=selector.length?$(selector):that;what=what.filter('['+relType+'="'+relVal+'"]');idx=what.index(this);}
options.index=idx;if(F.open(what,options)!==false){e.preventDefault();}}};options=options||{};index=options.index||0;if(!selector||options.live===false){that.unbind('click.fb-start').bind('click.fb-start',run);}else{D.undelegate(selector,'click.fb-start').delegate(selector+":not('.fancybox-item, .fancybox-nav')",'click.fb-start',run);}
this.filter('[data-fancybox-start=1]').trigger('click');return this;};D.ready(function(){if($.scrollbarWidth===undefined){$.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body'),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();parent.remove();return width;};}
if($.support.fixedPosition===undefined){$.support.fixedPosition=(function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo('body'),fixed=(elem[0].offsetTop===20||elem[0].offsetTop===15);elem.remove();return fixed;}());}
$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$('body')});});}(window,document,jQuery));;;(function(){if(typeof Math.sgn=="undefined"){Math.sgn=function(x){return x==0?0:x>0?1:-1;};}
var Vectors={subtract:function(v1,v2){return{x:v1.x-v2.x,y:v1.y-v2.y};},dotProduct:function(v1,v2){return(v1.x*v2.x)+(v1.y*v2.y);},square:function(v){return Math.sqrt((v.x*v.x)+(v.y*v.y));},scale:function(v,s){return{x:v.x*s,y:v.y*s};}},maxRecursion=64,flatnessTolerance=Math.pow(2.0,-maxRecursion-1);var _distanceFromCurve=function(point,curve){var candidates=[],w=_convertToBezier(point,curve),degree=curve.length-1,higherDegree=(2*degree)-1,numSolutions=_findRoots(w,higherDegree,candidates,0),v=Vectors.subtract(point,curve[0]),dist=Vectors.square(v),t=0.0;for(var i=0;i<numSolutions;i++){v=Vectors.subtract(point,_bezier(curve,degree,candidates[i],null,null));var newDist=Vectors.square(v);if(newDist<dist){dist=newDist;t=candidates[i];}}
v=Vectors.subtract(point,curve[degree]);newDist=Vectors.square(v);if(newDist<dist){dist=newDist;t=1.0;}
return{location:t,distance:dist};};var _nearestPointOnCurve=function(point,curve){var td=_distanceFromCurve(point,curve);return{point:_bezier(curve,curve.length-1,td.location,null,null),location:td.location};};var _convertToBezier=function(point,curve){var degree=curve.length-1,higherDegree=(2*degree)-1,c=[],d=[],cdTable=[],w=[],z=[[1.0,0.6,0.3,0.1],[0.4,0.6,0.6,0.4],[0.1,0.3,0.6,1.0]];for(var i=0;i<=degree;i++)c[i]=Vectors.subtract(curve[i],point);for(var i=0;i<=degree-1;i++){d[i]=Vectors.subtract(curve[i+1],curve[i]);d[i]=Vectors.scale(d[i],3.0);}
for(var row=0;row<=degree-1;row++){for(var column=0;column<=degree;column++){if(!cdTable[row])cdTable[row]=[];cdTable[row][column]=Vectors.dotProduct(d[row],c[column]);}}
for(i=0;i<=higherDegree;i++){if(!w[i])w[i]=[];w[i].y=0.0;w[i].x=parseFloat(i)/ higherDegree;}
var n=degree,m=degree-1;for(var k=0;k<=n+m;k++){var lb=Math.max(0,k-m),ub=Math.min(k,n);for(i=lb;i<=ub;i++){j=k-i;w[i+j].y+=cdTable[j][i]*z[j][i];}}
return w;};var _findRoots=function(w,degree,t,depth){var left=[],right=[],left_count,right_count,left_t=[],right_t=[];switch(_getCrossingCount(w,degree)){case 0:{return 0;}
case 1:{if(depth>=maxRecursion){t[0]=(w[0].x+w[degree].x)/ 2.0;return 1;}
if(_isFlatEnough(w,degree)){t[0]=_computeXIntercept(w,degree);return 1;}
break;}}
_bezier(w,degree,0.5,left,right);left_count=_findRoots(left,degree,left_t,depth+1);right_count=_findRoots(right,degree,right_t,depth+1);for(var i=0;i<left_count;i++)t[i]=left_t[i];for(var i=0;i<right_count;i++)t[i+left_count]=right_t[i];return(left_count+right_count);};var _getCrossingCount=function(curve,degree){var n_crossings=0,sign,old_sign;sign=old_sign=Math.sgn(curve[0].y);for(var i=1;i<=degree;i++){sign=Math.sgn(curve[i].y);if(sign!=old_sign)n_crossings++;old_sign=sign;}
return n_crossings;};var _isFlatEnough=function(curve,degree){var error,intercept_1,intercept_2,left_intercept,right_intercept,a,b,c,det,dInv,a1,b1,c1,a2,b2,c2;a=curve[0].y-curve[degree].y;b=curve[degree].x-curve[0].x;c=curve[0].x*curve[degree].y-curve[degree].x*curve[0].y;var max_distance_above=max_distance_below=0.0;for(var i=1;i<degree;i++){var value=a*curve[i].x+b*curve[i].y+c;if(value>max_distance_above)
max_distance_above=value;else if(value<max_distance_below)
max_distance_below=value;}
a1=0.0;b1=1.0;c1=0.0;a2=a;b2=b;c2=c-max_distance_above;det=a1*b2-a2*b1;dInv=1.0/det;intercept_1=(b1*c2-b2*c1)*dInv;a2=a;b2=b;c2=c-max_distance_below;det=a1*b2-a2*b1;dInv=1.0/det;intercept_2=(b1*c2-b2*c1)*dInv;left_intercept=Math.min(intercept_1,intercept_2);right_intercept=Math.max(intercept_1,intercept_2);error=right_intercept-left_intercept;return(error<flatnessTolerance)?1:0;};var _computeXIntercept=function(curve,degree){var XLK=1.0,YLK=0.0,XNM=curve[degree].x-curve[0].x,YNM=curve[degree].y-curve[0].y,XMK=curve[0].x-0.0,YMK=curve[0].y-0.0,det=XNM*YLK-YNM*XLK,detInv=1.0/det,S=(XNM*YMK-YNM*XMK)*detInv;return 0.0+XLK*S;};var _bezier=function(curve,degree,t,left,right){var temp=[[]];for(var j=0;j<=degree;j++)temp[0][j]=curve[j];for(var i=1;i<=degree;i++){for(var j=0;j<=degree-i;j++){if(!temp[i])temp[i]=[];if(!temp[i][j])temp[i][j]={};temp[i][j].x=(1.0-t)*temp[i-1][j].x+t*temp[i-1][j+1].x;temp[i][j].y=(1.0-t)*temp[i-1][j].y+t*temp[i-1][j+1].y;}}
if(left!=null)
for(j=0;j<=degree;j++)left[j]=temp[j][0];if(right!=null)
for(j=0;j<=degree;j++)right[j]=temp[degree-j][j];return(temp[degree][0]);};var _curveFunctionCache={};var _getCurveFunctions=function(order){var fns=_curveFunctionCache[order];if(!fns){fns=[];var f_term=function(){return function(t){return Math.pow(t,order);};},l_term=function(){return function(t){return Math.pow((1-t),order);};},c_term=function(c){return function(t){return c;};},t_term=function(){return function(t){return t;};},one_minus_t_term=function(){return function(t){return 1-t;};},_termFunc=function(terms){return function(t){var p=1;for(var i=0;i<terms.length;i++)p=p*terms[i](t);return p;};};fns.push(new f_term());for(var i=1;i<order;i++){var terms=[new c_term(order)];for(var j=0;j<(order-i);j++)terms.push(new t_term());for(var j=0;j<i;j++)terms.push(new one_minus_t_term());fns.push(new _termFunc(terms));}
fns.push(new l_term());_curveFunctionCache[order]=fns;}
return fns;};var _pointOnPath=function(curve,location){var cc=_getCurveFunctions(curve.length-1),_x=0,_y=0;for(var i=0;i<curve.length;i++){_x=_x+(curve[i].x*cc[i](location));_y=_y+(curve[i].y*cc[i](location));}
return{x:_x,y:_y};};var _dist=function(p1,p2){return Math.sqrt(Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2));};var _isPoint=function(curve){return curve[0].x==curve[1].x&&curve[0].y==curve[1].y;};var _pointAlongPath=function(curve,location,distance){if(_isPoint(curve)){return{point:curve[0],location:location};}
var prev=_pointOnPath(curve,location),tally=0,curLoc=location,direction=distance>0?1:-1,cur=null;while(tally<Math.abs(distance)){curLoc+=(0.005*direction);cur=_pointOnPath(curve,curLoc);tally+=_dist(cur,prev);prev=cur;}
return{point:cur,location:curLoc};};var _length=function(curve){if(_isPoint(curve))return 0;var prev=_pointOnPath(curve,0),tally=0,curLoc=0,direction=1,cur=null;while(curLoc<1){curLoc+=(0.005*direction);cur=_pointOnPath(curve,curLoc);tally+=_dist(cur,prev);prev=cur;}
return tally;};var _pointAlongPathFrom=function(curve,location,distance){return _pointAlongPath(curve,location,distance).point;};var _locationAlongPathFrom=function(curve,location,distance){return _pointAlongPath(curve,location,distance).location;};var _gradientAtPoint=function(curve,location){var p1=_pointOnPath(curve,location),p2=_pointOnPath(curve.slice(0,curve.length-1),location),dy=p2.y-p1.y,dx=p2.x-p1.x;return dy==0?Infinity:Math.atan(dy / dx);};var _gradientAtPointAlongPathFrom=function(curve,location,distance){var p=_pointAlongPath(curve,location,distance);if(p.location>1)p.location=1;if(p.location<0)p.location=0;return _gradientAtPoint(curve,p.location);};var _perpendicularToPathAt=function(curve,location,length,distance){distance=distance==null?0:distance;var p=_pointAlongPath(curve,location,distance),m=_gradientAtPoint(curve,p.location),_theta2=Math.atan(-1 / m),y=length / 2*Math.sin(_theta2),x=length / 2*Math.cos(_theta2);return[{x:p.point.x+x,y:p.point.y+y},{x:p.point.x-x,y:p.point.y-y}];};var jsBezier=window.jsBezier={distanceFromCurve:_distanceFromCurve,gradientAtPoint:_gradientAtPoint,gradientAtPointAlongCurveFrom:_gradientAtPointAlongPathFrom,nearestPointOnCurve:_nearestPointOnCurve,pointOnCurve:_pointOnPath,pointAlongCurveFrom:_pointAlongPathFrom,perpendicularToCurveAt:_perpendicularToPathAt,locationAlongCurveFrom:_locationAlongPathFrom,getLength:_length};})();;;;(function(){"use strict";var Sniff={android:navigator.userAgent.toLowerCase().indexOf("android")>-1};var matchesSelector=function(el,selector,ctx){ctx=ctx||el.parentNode;var possibles=ctx.querySelectorAll(selector);for(var i=0;i<possibles.length;i++){if(possibles[i]===el){return true;}}
return false;},_gel=function(el){return typeof el=="string"?document.getElementById(el):el;},_t=function(e){return e.srcElement||e.target;},_d=function(l,fn){for(var i=0,j=l.length;i<j;i++){if(l[i]==fn)break;}
if(i<l.length)l.splice(i,1);},guid=1,_store=function(obj,event,fn){var g=guid++;obj.__ta=obj.__ta||{};obj.__ta[event]=obj.__ta[event]||{};obj.__ta[event][g]=fn;fn.__tauid=g;return g;},_unstore=function(obj,event,fn){obj.__ta&&obj.__ta[event]&&delete obj.__ta[event][fn.__tauid];if(fn.__taExtra){for(var i=0;i<fn.__taExtra.length;i++){_unbind(obj,fn.__taExtra[i][0],fn.__taExtra[i][1]);}
fn.__taExtra.length=0;}
fn.__taUnstore&&fn.__taUnstore();},_curryChildFilter=function(children,obj,fn,evt){if(children==null)return fn;else{var c=children.split(","),_fn=function(e){_fn.__tauid=fn.__tauid;var t=_t(e);for(var i=0;i<c.length;i++){if(matchesSelector(t,c[i],obj)){fn.apply(t,arguments);}}};registerExtraFunction(fn,evt,_fn);return _fn;}},registerExtraFunction=function(fn,evt,newFn){fn.__taExtra=fn.__taExtra||[];fn.__taExtra.push([evt,newFn]);},DefaultHandler=function(obj,evt,fn,children){if(isTouchDevice&&touchMap[evt]){_bind(obj,touchMap[evt],_curryChildFilter(children,obj,fn,touchMap[evt]),fn);}
else
_bind(obj,evt,_curryChildFilter(children,obj,fn,evt),fn);},SmartClickHandler=function(obj,evt,fn,children){if(obj.__taSmartClicks==null){var down=function(e){obj.__tad=_pageLocation(e);},up=function(e){obj.__tau=_pageLocation(e);},click=function(e){if(obj.__tad&&obj.__tau&&obj.__tad[0]===obj.__tau[0]&&obj.__tad[1]===obj.__tau[1]){for(var i=0;i<obj.__taSmartClicks.length;i++)
obj.__taSmartClicks[i].apply(_t(e),[e]);}};DefaultHandler(obj,"mousedown",down,children);DefaultHandler(obj,"mouseup",up,children);DefaultHandler(obj,"click",click,children);obj.__taSmartClicks=[];}
obj.__taSmartClicks.push(fn);fn.__taUnstore=function(){_d(obj.__taSmartClicks,fn);};},_tapProfiles={"tap":{touches:1,taps:1},"dbltap":{touches:1,taps:2},"contextmenu":{touches:2,taps:1}},TapHandler=function(clickThreshold,dblClickThreshold){return function(obj,evt,fn,children){if(evt=="contextmenu"&&isMouseDevice)
DefaultHandler(obj,evt,fn,children);else{if(obj.__taTapHandler==null){var tt=obj.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:false,taps:0,downSelectors:[]};var down=function(e){var target=e.srcElement||e.target;for(var i=0;i<tt.downSelectors.length;i++){if(tt.downSelectors[i]==null||matchesSelector(target,tt.downSelectors[i],obj)){tt.down=true;setTimeout(clearSingle,clickThreshold);setTimeout(clearDouble,dblClickThreshold);break;}}},up=function(e){if(tt.down){var target=e.srcElement||e.target;tt.taps++;var tc=_touchCount(e);for(var eventId in _tapProfiles){var p=_tapProfiles[eventId];if(p.touches===tc&&(p.taps===1||p.taps===tt.taps)){for(var i=0;i<tt[eventId].length;i++){if(tt[eventId][i][1]==null||matchesSelector(target,tt[eventId][i][1],obj))
tt[eventId][i][0].apply(_t(e),[e]);}}}}},clearSingle=function(){tt.down=false;},clearDouble=function(){tt.taps=0;};DefaultHandler(obj,"mousedown",down);DefaultHandler(obj,"mouseup",up);}
obj.__taTapHandler.downSelectors.push(children);obj.__taTapHandler[evt].push([fn,children]);fn.__taUnstore=function(){_d(obj.__taTapHandler[evt],fn);};}};},meeHelper=function(type,evt,obj,target){for(var i in obj.__tamee[type]){obj.__tamee[type][i].apply(target,[evt]);}},MouseEnterExitHandler=function(){var activeElements=[];return function(obj,evt,fn,children){if(!obj.__tamee){obj.__tamee={over:false,mouseenter:[],mouseexit:[]};var over=function(e){var t=_t(e);if((children==null&&(t==obj&&!obj.__tamee.over))||(matchesSelector(t,children,obj)&&(t.__tamee==null||!t.__tamee.over))){meeHelper("mouseenter",e,obj,t);t.__tamee=t.__tamee||{};t.__tamee.over=true;activeElements.push(t);}},out=function(e){var t=_t(e);for(var i=0;i<activeElements.length;i++){if(t==activeElements[i]&&!matchesSelector((e.relatedTarget||e.toElement),"*",t)){t.__tamee.over=false;activeElements.splice(i,1);meeHelper("mouseexit",e,obj,t);}}};_bind(obj,"mouseover",_curryChildFilter(children,obj,over,"mouseover"),over);_bind(obj,"mouseout",_curryChildFilter(children,obj,out,"mouseout"),out);}
fn.__taUnstore=function(){delete obj.__tamee[evt][fn.__tauid];};_store(obj,evt,fn);obj.__tamee[evt][fn.__tauid]=fn;};},isTouchDevice="ontouchstart"in document.documentElement,isMouseDevice="onmousedown"in document.documentElement,touchMap={"mousedown":"touchstart","mouseup":"touchend","mousemove":"touchmove"},touchstart="touchstart",touchend="touchend",touchmove="touchmove",ta_down="__MottleDown",ta_up="__MottleUp",ta_context_down="__MottleContextDown",ta_context_up="__MottleContextUp",iev=(function(){var rv=-1;if(navigator.appName=='Microsoft Internet Explorer'){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
return rv;})(),isIELT9=iev>-1&&iev<9,_genLoc=function(e,prefix){if(e==null)return[0,0];var ts=_touches(e),t=_getTouch(ts,0);return[t[prefix+"X"],t[prefix+"Y"]];},_pageLocation=function(e){if(e==null)return[0,0];if(isIELT9){return[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop];}
else{return _genLoc(e,"page");}},_screenLocation=function(e){return _genLoc(e,"screen");},_clientLocation=function(e){return _genLoc(e,"client");},_getTouch=function(touches,idx){return touches.item?touches.item(idx):touches[idx];},_touches=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e];},_touchCount=function(e){return _touches(e).length;},_bind=function(obj,type,fn,originalFn){_store(obj,type,fn);originalFn.__tauid=fn.__tauid;if(obj.addEventListener)
obj.addEventListener(type,fn,false);else if(obj.attachEvent){var key=type+fn.__tauid;obj["e"+key]=fn;obj[key]=function(){obj["e"+key]&&obj["e"+key](window.event);};obj.attachEvent("on"+type,obj[key]);}},_unbind=function(obj,type,fn){if(fn==null)return;_each(obj,function(){var _el=_gel(this);_unstore(_el,type,fn);if(fn.__tauid!=null){if(_el.removeEventListener)
_el.removeEventListener(type,fn,false);else if(this.detachEvent){var key=type+fn.__tauid;_el[key]&&_el.detachEvent("on"+type,_el[key]);_el[key]=null;_el["e"+key]=null;}}});},_devNull=function(){},_each=function(obj,fn){if(obj==null)return;obj=(typeof obj!=="string")&&(obj.tagName==null&&obj.length!=null)?obj:typeof obj==="string"?document.querySelectorAll(obj):[obj];for(var i=0;i<obj.length;i++)
fn.apply(obj[i]);};this.Mottle=function(params){params=params||{};var self=this,clickThreshold=params.clickThreshold||150,dblClickThreshold=params.dblClickThreshold||350,mouseEnterExitHandler=new MouseEnterExitHandler(),tapHandler=new TapHandler(clickThreshold,dblClickThreshold),_smartClicks=params.smartClicks,_doBind=function(obj,evt,fn,children){if(fn==null)return;_each(obj,function(){var _el=_gel(this);if(_smartClicks&&evt==="click")
SmartClickHandler(_el,evt,fn,children);else if(evt==="tap"||evt==="dbltap"||evt==="contextmenu"){tapHandler(_el,evt,fn,children);}
else if(evt==="mouseenter"||evt=="mouseexit")
mouseEnterExitHandler(_el,evt,fn,children);else
DefaultHandler(_el,evt,fn,children);});};this.remove=function(el){_each(el,function(){var _el=_gel(this);if(_el.__ta){for(var evt in _el.__ta){for(var h in _el.__ta[evt]){_unbind(_el,evt,_el.__ta[evt][h]);}}}
_el.parentNode&&_el.parentNode.removeChild(_el);});return this;};this.on=function(el,event,children,fn){var _el=arguments[0],_c=arguments.length==4?arguments[2]:null,_e=arguments[1],_f=arguments[arguments.length-1];_doBind(_el,_e,_f,_c);return this;};this.off=function(el,evt,fn){_unbind(el,evt,fn);return this;};this.trigger=function(el,event,originalEvent,payload){var eventToBind=(isTouchDevice&&touchMap[event])?touchMap[event]:event;var pl=_pageLocation(originalEvent),sl=_screenLocation(originalEvent),cl=_clientLocation(originalEvent);_each(el,function(){var _el=_gel(this),evt;originalEvent=originalEvent||{screenX:sl[0],screenY:sl[1],clientX:cl[0],clientY:cl[1]};var _decorate=function(_evt){if(payload)_evt.payload=payload;};var eventGenerators={"TouchEvent":function(evt){var t=document.createTouch(window,_el,0,pl[0],pl[1],sl[0],sl[1],cl[0],cl[1],0,0,0,0);evt.initTouchEvent(eventToBind,true,true,window,0,sl[0],sl[1],cl[0],cl[1],false,false,false,false,document.createTouchList(t));},"MouseEvents":function(evt){evt.initMouseEvent(eventToBind,true,true,window,0,sl[0],sl[1],cl[0],cl[1],false,false,false,false,1,_el);if(Sniff.android){var t=document.createTouch(window,_el,0,pl[0],pl[1],sl[0],sl[1],cl[0],cl[1],0,0,0,0);evt.touches=evt.targetTouches=evt.changedTouches=document.createTouchList(t);}}};if(document.createEvent){var ite=(isTouchDevice&&touchMap[event]&&!Sniff.android),evtName=ite?"TouchEvent":"MouseEvents";evt=document.createEvent(evtName);eventGenerators[evtName](evt);_decorate(evt);_el.dispatchEvent(evt);}
else if(document.createEventObject){evt=document.createEventObject();evt.eventType=evt.eventName=eventToBind;evt.screenX=sl[0];evt.screenY=sl[1];evt.clientX=cl[0];evt.clientY=cl[1];_decorate(evt);_el.fireEvent('on'+eventToBind,evt);}});return this;}};Mottle.consume=function(e,doNotPreventDefault){if(e.stopPropagation)
e.stopPropagation();else
e.returnValue=false;if(!doNotPreventDefault&&e.preventDefault)
e.preventDefault();};Mottle.pageLocation=_pageLocation;}).call(this);;;;(function(){"use strict";var Biltong=this.Biltong={};var _isa=function(a){return Object.prototype.toString.call(a)==="[object Array]";},_pointHelper=function(p1,p2,fn){p1=_isa(p1)?p1:[p1.x,p1.y];p2=_isa(p2)?p2:[p2.x,p2.y];return fn(p1,p2);},_gradient=Biltong.gradient=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){if(_p2[0]==_p1[0])
return _p2[1]>_p1[1]?Infinity:-Infinity;else if(_p2[1]==_p1[1])
return _p2[0]>_p1[0]?0:-0;else
return(_p2[1]-_p1[1])/(_p2[0]-_p1[0]);});},_normal=Biltong.normal=function(p1,p2){return-1 / _gradient(p1,p2);},_lineLength=Biltong.lineLength=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){return Math.sqrt(Math.pow(_p2[1]-_p1[1],2)+Math.pow(_p2[0]-_p1[0],2));});},_quadrant=Biltong.quadrant=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){if(_p2[0]>_p1[0]){return(_p2[1]>_p1[1])?2:1;}
else if(_p2[0]==_p1[0]){return _p2[1]>_p1[1]?2:1;}
else{return(_p2[1]>_p1[1])?3:4;}});},_theta=Biltong.theta=function(p1,p2){return _pointHelper(p1,p2,function(_p1,_p2){var m=_gradient(_p1,_p2),t=Math.atan(m),s=_quadrant(_p1,_p2);if((s==4||s==3))t+=Math.PI;if(t<0)t+=(2*Math.PI);return t;});},_intersects=Biltong.intersects=function(r1,r2){var x1=r1.x,x2=r1.x+r1.w,y1=r1.y,y2=r1.y+r1.h,a1=r2.x,a2=r2.x+r2.w,b1=r2.y,b2=r2.y+r2.h;return((x1<=a1&&a1<=x2)&&(y1<=b1&&b1<=y2))||((x1<=a2&&a2<=x2)&&(y1<=b1&&b1<=y2))||((x1<=a1&&a1<=x2)&&(y1<=b2&&b2<=y2))||((x1<=a2&&a1<=x2)&&(y1<=b2&&b2<=y2))||((a1<=x1&&x1<=a2)&&(b1<=y1&&y1<=b2))||((a1<=x2&&x2<=a2)&&(b1<=y1&&y1<=b2))||((a1<=x1&&x1<=a2)&&(b1<=y2&&y2<=b2))||((a1<=x2&&x1<=a2)&&(b1<=y2&&y2<=b2));},_encloses=Biltong.encloses=function(r1,r2,allowSharedEdges){var x1=r1.x,x2=r1.x+r1.w,y1=r1.y,y2=r1.y+r1.h,a1=r2.x,a2=r2.x+r2.w,b1=r2.y,b2=r2.y+r2.h,c=function(v1,v2,v3,v4){return allowSharedEdges?v1<=v2&&v3>=v4:v1<v2&&v3>v4;};return c(x1,a1,x2,a2)&&c(y1,b1,y2,b2);},_segmentMultipliers=[null,[1,-1],[1,1],[-1,1],[-1,-1]],_inverseSegmentMultipliers=[null,[-1,-1],[-1,1],[1,1],[1,-1]],_pointOnLine=Biltong.pointOnLine=function(fromPoint,toPoint,distance){var m=_gradient(fromPoint,toPoint),s=_quadrant(fromPoint,toPoint),segmentMultiplier=distance>0?_segmentMultipliers[s]:_inverseSegmentMultipliers[s],theta=Math.atan(m),y=Math.abs(distance*Math.sin(theta))*segmentMultiplier[1],x=Math.abs(distance*Math.cos(theta))*segmentMultiplier[0];return{x:fromPoint.x+x,y:fromPoint.y+y};},_perpendicularLineTo=Biltong.perpendicularLineTo=function(fromPoint,toPoint,length){var m=_gradient(fromPoint,toPoint),theta2=Math.atan(-1 / m),y=length / 2*Math.sin(theta2),x=length / 2*Math.cos(theta2);return[{x:toPoint.x+x,y:toPoint.y+y},{x:toPoint.x-x,y:toPoint.y-y}];};}).call(this);;;;(function(){var _isa=function(a){return Object.prototype.toString.call(a)==="[object Array]";},_isnum=function(n){return Object.prototype.toString.call(n)==="[object Number]";},_iss=function(s){return typeof s==="string";},_isb=function(s){return typeof s==="boolean";},_isnull=function(s){return s==null;},_iso=function(o){return o==null?false:Object.prototype.toString.call(o)==="[object Object]";},_isd=function(o){return Object.prototype.toString.call(o)==="[object Date]";},_isf=function(o){return Object.prototype.toString.call(o)==="[object Function]";},_ise=function(o){for(var i in o){if(o.hasOwnProperty(i))return false;}
return true;},pointHelper=function(p1,p2,fn){p1=_isa(p1)?p1:[p1.x,p1.y];p2=_isa(p2)?p2:[p2.x,p2.y];return fn(p1,p2);};var root=this;var exports=root.jsPlumbUtil={isArray:_isa,isString:_iss,isBoolean:_isb,isNull:_isnull,isObject:_iso,isDate:_isd,isFunction:_isf,isEmpty:_ise,isNumber:_isnum,clone:function(a){if(_iss(a))return""+a;else if(_isb(a))return!!a;else if(_isd(a))return new Date(a.getTime());else if(_isf(a))return a;else if(_isa(a)){var b=[];for(var i=0;i<a.length;i++)
b.push(this.clone(a[i]));return b;}
else if(_iso(a)){var c={};for(var j in a)
c[j]=this.clone(a[j]);return c;}
else return a;},merge:function(a,b,collations){var cMap={},ar,i;collations=collations||[];for(i=0;i<collations.length;i++)
cMap[collations[i]]=true;var c=this.clone(a);for(i in b){if(c[i]==null)
c[i]=b[i];else if(_iss(b[i])||_isb(b[i])){if(!cMap[i])c[i]=b[i];else{ar=[];ar.push.apply(ar,_isa(c[i])?c[i]:[c[i]]);ar.push.apply(ar,_isa(b[i])?b[i]:[b[i]]);c[i]=ar;}}
else{if(_isa(b[i])){ar=[];if(_isa(c[i]))ar.push.apply(ar,c[i]);ar.push.apply(ar,b[i]);c[i]=ar;}
else if(_iso(b[i])){if(!_iso(c[i]))
c[i]={};for(var j in b[i])
c[i][j]=b[i][j];}}}
return c;},replace:function(inObj,path,value){if(inObj==null)return;var q=inObj,t=q;path.replace(/([^\.])+/g,function(term,lc,pos,str){var array=term.match(/([^\[0-9]+){1}(\[)([0-9+])/),last=pos+term.length>=str.length,_getArray=function(){return t[array[1]]||(function(){t[array[1]]=[];return t[array[1]];})();};if(last){if(array)
_getArray()[array[3]]=value;else
t[term]=value;}
else{if(array){var a=_getArray();t=a[array[3]]||(function(){a[array[3]]={};return a[array[3]];})();}
else
t=t[term]||(function(){t[term]={};return t[term];})();}});return inObj;},functionChain:function(successValue,failValue,fns){for(var i=0;i<fns.length;i++){var o=fns[i][0][fns[i][1]].apply(fns[i][0],fns[i][2]);if(o===failValue){return o;}}
return successValue;},populate:function(model,values){var getValue=function(fromString){var matches=fromString.match(/(\${.*?})/g);if(matches!=null){for(var i=0;i<matches.length;i++){var val=values[matches[i].substring(2,matches[i].length-1)]||"";if(val!=null){fromString=fromString.replace(matches[i],val);}}}
return fromString;},_one=function(d){if(d!=null){if(_iss(d)){return getValue(d);}
else if(_isa(d)){var r=[];for(var i=0;i<d.length;i++)
r.push(_one(d[i]));return r;}
else if(_iso(d)){var s={};for(var j in d){s[j]=_one(d[j]);}
return s;}
else{return d;}}};return _one(model);},convertStyle:function(s,ignoreAlpha){if("transparent"===s)return s;var o=s,pad=function(n){return n.length==1?"0"+n:n;},hex=function(k){return pad(Number(k).toString(16));},pattern=/(rgb[a]?\()(.*)(\))/;if(s.match(pattern)){var parts=s.match(pattern)[2].split(",");o="#"+hex(parts[0])+hex(parts[1])+hex(parts[2]);if(!ignoreAlpha&&parts.length==4)
o=o+hex(parts[3]);}
return o;},findWithFunction:function(a,f){if(a)
for(var i=0;i<a.length;i++)if(f(a[i]))return i;return-1;},indexOf:function(l,v){return l.indexOf?l.indexOf(v):exports.findWithFunction(l,function(_v){return _v==v;});},removeWithFunction:function(a,f){var idx=exports.findWithFunction(a,f);if(idx>-1)a.splice(idx,1);return idx!=-1;},remove:function(l,v){var idx=exports.indexOf(l,v);if(idx>-1)l.splice(idx,1);return idx!=-1;},addWithFunction:function(list,item,hashFunction){if(exports.findWithFunction(list,hashFunction)==-1)list.push(item);},addToList:function(map,key,value,insertAtStart){var l=map[key];if(l==null){l=[];map[key]=l;}
l[insertAtStart?"unshift":"push"](value);return l;},extend:function(child,parent,_protoFn){var i;parent=_isa(parent)?parent:[parent];for(i=0;i<parent.length;i++){for(var j in parent[i].prototype){if(parent[i].prototype.hasOwnProperty(j)){child.prototype[j]=parent[i].prototype[j];}}}
var _makeFn=function(name,protoFn){return function(){for(i=0;i<parent.length;i++){if(parent[i].prototype[name])
parent[i].prototype[name].apply(this,arguments);}
return protoFn.apply(this,arguments);};};var _oneSet=function(fns){for(var k in fns){child.prototype[k]=_makeFn(k,fns[k]);}};if(arguments.length>2){for(i=2;i<arguments.length;i++)
_oneSet(arguments[i]);}
return child;},uuid:function(){return('xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c=='x'?r:(r&0x3|0x8);return v.toString(16);}));},logEnabled:true,log:function(){if(exports.logEnabled&&typeof console!="undefined"){try{var msg=arguments[arguments.length-1];console.log(msg);}
catch(e){}}},wrap:function(wrappedFunction,newFunction,returnOnThisValue){wrappedFunction=wrappedFunction||function(){};newFunction=newFunction||function(){};return function(){var r=null;try{r=newFunction.apply(this,arguments);}catch(e){exports.log("jsPlumb function failed : "+e);}
if(returnOnThisValue==null||(r!==returnOnThisValue)){try{r=wrappedFunction.apply(this,arguments);}catch(e){exports.log("wrapped function failed : "+e);}}
return r;};}};exports.EventGenerator=function(){var _listeners={},eventsSuspended=false,eventsToDieOn={"ready":true};this.bind=function(event,listener,insertAtStart){exports.addToList(_listeners,event,listener,insertAtStart);return this;};this.fire=function(event,value,originalEvent){if(!eventsSuspended&&_listeners[event]){var l=_listeners[event].length,i=0,_gone=false,ret=null;if(!this.shouldFireEvent||this.shouldFireEvent(event,value,originalEvent)){while(!_gone&&i<l&&ret!==false){if(eventsToDieOn[event])
_listeners[event][i].apply(this,[value,originalEvent]);else{ret=_listeners[event][i].apply(this,[value,originalEvent]);}
i++;if(_listeners==null||_listeners[event]==null)
_gone=true;}}}
return this;};this.unbind=function(event){if(event)
delete _listeners[event];else{_listeners={};}
return this;};this.getListener=function(forEvent){return _listeners[forEvent];};this.setSuspendEvents=function(val){eventsSuspended=val;};this.isSuspendEvents=function(){return eventsSuspended;};this.cleanupListeners=function(){for(var i in _listeners){_listeners[i]=null;}};};exports.EventGenerator.prototype={cleanup:function(){this.cleanupListeners();}};if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}}).call(this);;;;(function(){"use strict";var root=this;var exports=root.jsPlumbUtil;exports.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?(new Number(RegExp.$1)):-1;exports.oldIE=exports.ieVersion>-1&&exports.ieVersion<9;exports.matchesSelector=function(el,selector,ctx){ctx=ctx||el.parentNode;var possibles=ctx.querySelectorAll(selector);for(var i=0;i<possibles.length;i++){if(possibles[i]===el)
return true;}
return false;};exports.consume=function(e,doNotPreventDefault){if(e.stopPropagation)
e.stopPropagation();else
e.returnValue=false;if(!doNotPreventDefault&&e.preventDefault)
e.preventDefault();};exports.sizeElement=function(el,x,y,w,h){if(el){el.style.height=h+"px";el.height=h;el.style.width=w+"px";el.width=w;el.style.left=x+"px";el.style.top=y+"px";}};}).call(this);;;;(function(){var root=this;var svgAvailable=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),vmlAvailable=function(){if(vmlAvailable.vml===undefined){var a=document.body.appendChild(document.createElement('div'));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;if(b!=null&&b.style!=null){b.style.behavior="url(#default#VML)";vmlAvailable.vml=b?typeof b.adj=="object":true;}
else
vmlAvailable.vml=false;a.parentNode.removeChild(a);}
return vmlAvailable.vml;},iev=(function(){var rv=-1;if(navigator.appName=='Microsoft Internet Explorer'){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
return rv;})(),isIELT9=iev>-1&&iev<9,_genLoc=function(e,prefix){if(e==null)return[0,0];var ts=_touches(e),t=_getTouch(ts,0);return[t[prefix+"X"],t[prefix+"Y"]];},_pageLocation=function(e){if(e==null)return[0,0];if(isIELT9){return[e.clientX+document.documentElement.scrollLeft,e.clientY+document.documentElement.scrollTop];}
else{return _genLoc(e,"page");}},_screenLocation=function(e){return _genLoc(e,"screen");},_clientLocation=function(e){return _genLoc(e,"client");},_getTouch=function(touches,idx){return touches.item?touches.item(idx):touches[idx];},_touches=function(e){return e.touches&&e.touches.length>0?e.touches:e.changedTouches&&e.changedTouches.length>0?e.changedTouches:e.targetTouches&&e.targetTouches.length>0?e.targetTouches:[e];};var DragManager=function(_currentInstance){var _draggables={},_dlist=[],_delements={},_elementsWithEndpoints={},_draggablesForElements={};this.register=function(el){var id=_currentInstance.getId(el),parentOffset=jsPlumbAdapter.getOffset(el,_currentInstance);if(!_draggables[id]){_draggables[id]=el;_dlist.push(el);_delements[id]={};}
var _oneLevel=function(p,startOffset){if(p){for(var i=0;i<p.childNodes.length;i++){if(p.childNodes[i].nodeType!=3&&p.childNodes[i].nodeType!=8){var cEl=jsPlumb.getElementObject(p.childNodes[i]),cid=_currentInstance.getId(p.childNodes[i],null,true);if(cid&&_elementsWithEndpoints[cid]&&_elementsWithEndpoints[cid]>0){var cOff=jsPlumbAdapter.getOffset(cEl,_currentInstance);_delements[id][cid]={id:cid,offset:{left:cOff.left-parentOffset.left,top:cOff.top-parentOffset.top}};_draggablesForElements[cid]=id;}
_oneLevel(p.childNodes[i]);}}}};_oneLevel(el);};this.updateOffsets=function(elId){if(elId!=null){var domEl=jsPlumb.getDOMElement(elId),id=_currentInstance.getId(domEl),children=_delements[id],parentOffset=jsPlumbAdapter.getOffset(domEl,_currentInstance);if(children){for(var i in children){var cel=jsPlumb.getElementObject(i),cOff=jsPlumbAdapter.getOffset(cel,_currentInstance);_delements[id][i]={id:i,offset:{left:cOff.left-parentOffset.left,top:cOff.top-parentOffset.top}};_draggablesForElements[i]=id;}}}};this.endpointAdded=function(el,id){id=id||_currentInstance.getId(el);var b=document.body,p=el.parentNode;_elementsWithEndpoints[id]=_elementsWithEndpoints[id]?_elementsWithEndpoints[id]+1:1;while(p!=null&&p!=b){var pid=_currentInstance.getId(p,null,true);if(pid&&_draggables[pid]){var pLoc=jsPlumbAdapter.getOffset(p,_currentInstance);if(_delements[pid][id]==null){var cLoc=jsPlumbAdapter.getOffset(el,_currentInstance);_delements[pid][id]={id:id,offset:{left:cLoc.left-pLoc.left,top:cLoc.top-pLoc.top}};_draggablesForElements[id]=pid;}
break;}
p=p.parentNode;}};this.endpointDeleted=function(endpoint){if(_elementsWithEndpoints[endpoint.elementId]){_elementsWithEndpoints[endpoint.elementId]--;if(_elementsWithEndpoints[endpoint.elementId]<=0){for(var i in _delements){if(_delements[i]){delete _delements[i][endpoint.elementId];delete _draggablesForElements[endpoint.elementId];}}}}};this.changeId=function(oldId,newId){_delements[newId]=_delements[oldId];_delements[oldId]={};_draggablesForElements[newId]=_draggablesForElements[oldId];_draggablesForElements[oldId]=null;};this.getElementsForDraggable=function(id){return _delements[id];};this.elementRemoved=function(elementId){var elId=_draggablesForElements[elementId];if(elId){delete _delements[elId][elementId];delete _draggablesForElements[elementId];}};this.reset=function(){_draggables={};_dlist=[];_delements={};_elementsWithEndpoints={};};this.dragEnded=function(el){var id=_currentInstance.getId(el),ancestor=_draggablesForElements[id];if(ancestor)this.updateOffsets(ancestor);};this.setParent=function(el,elId,p,pId){var current=_draggablesForElements[elId];if(current){if(!_delements[pId])
_delements[pId]={};_delements[pId][elId]=_delements[current][elId];delete _delements[current][elId];var pLoc=jsPlumbAdapter.getOffset(p,_currentInstance),cLoc=jsPlumbAdapter.getOffset(el,_currentInstance);_delements[pId][elId].offset={left:cLoc.left-pLoc.left,top:cLoc.top-pLoc.top};_draggablesForElements[elId]=pId;}};this.getDragAncestor=function(el){var de=jsPlumb.getDOMElement(el),id=_currentInstance.getId(de),aid=_draggablesForElements[id];if(aid)
return jsPlumb.getDOMElement(aid);else
return null;};};if(!window.console)
window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}};var trim=function(str){return str==null?null:(str.replace(/^\s\s*/,'').replace(/\s\s*$/,''));},_setClassName=function(el,cn){cn=trim(cn);if(typeof el.className.baseVal!="undefined")
el.className.baseVal=cn;else
el.className=cn;},_getClassName=function(el){return(typeof el.className.baseVal=="undefined")?el.className:el.className.baseVal;},_classManip=function(el,add,clazz){var classesToAddOrRemove=jsPlumbUtil.isArray(clazz)?clazz:clazz.split(/\s+/),className=_getClassName(el),curClasses=className.split(/\s+/);for(var i=0;i<classesToAddOrRemove.length;i++){if(add){if(jsPlumbUtil.indexOf(curClasses,classesToAddOrRemove[i])==-1)
curClasses.push(classesToAddOrRemove[i]);}
else{var idx=jsPlumbUtil.indexOf(curClasses,classesToAddOrRemove[i]);if(idx!=-1)
curClasses.splice(idx,1);}}
_setClassName(el,curClasses.join(" "));},_classManipNew=function(el,classesToAdd,classesToRemove){classesToAdd=classesToAdd==null?[]:jsPlumbUtil.isArray(classesToAdd)?classesToAdd:classesToAdd.split(/\s+/);classesToRemove=classesToRemove==null?[]:jsPlumbUtil.isArray(classesToRemove)?classesToRemove:classesToRemove.split(/\s+/);var className=_getClassName(el),curClasses=className.split(/\s+/);var _oneSet=function(add,classes){for(var i=0;i<classes.length;i++){if(add){if(jsPlumbUtil.indexOf(curClasses,classes[i])==-1)
curClasses.push(classes[i]);}
else{var idx=jsPlumbUtil.indexOf(curClasses,classes[i]);if(idx!=-1)
curClasses.splice(idx,1);}}};_oneSet(true,classesToAdd);_oneSet(false,classesToRemove);_setClassName(el,curClasses.join(" "));},_each=function(spec,fn){if(spec==null)return;if(typeof spec==="string")
fn(jsPlumb.getDOMElement(spec));else if(spec.length!=null){for(var i=0;i<spec.length;i++)
fn(jsPlumb.getDOMElement(spec[i]));}
else
fn(spec);};window.jsPlumbAdapter={headless:false,pageLocation:_pageLocation,screenLocation:_screenLocation,clientLocation:_clientLocation,getAttribute:function(el,attName){return el.getAttribute(attName);},setAttribute:function(el,a,v){el.setAttribute(a,v);},appendToRoot:function(node){document.body.appendChild(node);},getRenderModes:function(){return["svg","vml"];},isRenderModeAvailable:function(m){return{"svg":svgAvailable,"vml":vmlAvailable()}[m];},getDragManager:function(_jsPlumb){return new DragManager(_jsPlumb);},setRenderMode:function(mode){var renderMode;if(mode){mode=mode.toLowerCase();var svgAvailable=this.isRenderModeAvailable("svg"),vmlAvailable=this.isRenderModeAvailable("vml");if(mode==="svg"){if(svgAvailable)renderMode="svg";else if(vmlAvailable)renderMode="vml";}
else if(vmlAvailable)renderMode="vml";}
return renderMode;},addClass:function(el,clazz){_each(el,function(e){_classManipNew(e,clazz);});},hasClass:function(el,clazz){el=jsPlumb.getDOMElement(el);if(el.classList)return el.classList.contains(clazz);else{return _getClassName(el).indexOf(clazz)!=-1;}},removeClass:function(el,clazz){_each(el,function(e){_classManipNew(e,null,clazz);});},updateClasses:function(el,toAdd,toRemove){_each(el,function(e){_classManipNew(e,toAdd,toRemove);});},setClass:function(el,clazz){_each(el,function(e){_setClassName(e,clazz);});},setPosition:function(el,p){el.style.left=p.left+"px";el.style.top=p.top+"px";},getPosition:function(el){var _one=function(prop){var v=el.style[prop];return v?v.substring(0,v.length-2):0;};return{left:_one("left"),top:_one("top")};},getOffset:function(el,_instance,relativeToRoot){el=jsPlumb.getDOMElement(el);var container=_instance.getContainer();var l=el.offsetLeft,t=el.offsetTop,op=(relativeToRoot||(container!=null&&el.offsetParent!=container))?el.offsetParent:null;while(op!=null){l+=op.offsetLeft;t+=op.offsetTop;op=relativeToRoot?op.offsetParent:op.offsetParent==container?null:op.offsetParent;}
return{left:l,top:t};},getPositionOnElement:function(evt,el,zoom){var box=typeof el.getBoundingClientRect!=="undefined"?el.getBoundingClientRect():{left:0,top:0,width:0,height:0},body=document.body,docElem=document.documentElement,offPar=el.offsetParent,scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop,scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,pst=0,psl=0,top=box.top+scrollTop-clientTop+(pst*zoom),left=box.left+scrollLeft-clientLeft+(psl*zoom),cl=jsPlumbAdapter.pageLocation(evt),w=box.width||(el.offsetWidth*zoom),h=box.height||(el.offsetHeight*zoom),x=(cl[0]-left)/ w,y=(cl[1]-top)/ h;return[x,y];},getAbsolutePosition:function(el){var _one=function(s){var ss=el.style[s];if(ss)return parseFloat(ss.substring(0,ss.length-2));};return[_one("left"),_one("top")];},setAbsolutePosition:function(el,xy,animateFrom,animateOptions){if(animateFrom){root.jsPlumb.animate(el,{left:"+="+(xy[0]-animateFrom[0]),top:"+="+(xy[1]-animateFrom[1])},animateOptions);}
else{el.style.left=xy[0]+"px";el.style.top=xy[1]+"px";}}};}).call(this);;;;(function(){"use strict";var _ju=jsPlumbUtil,_getOffset=function(el,_instance,relativeToRoot){return jsPlumbAdapter.getOffset(el,_instance,relativeToRoot);},_timestamp=function(){return""+(new Date()).getTime();},_updateHoverStyle=function(component){if(component._jsPlumb.paintStyle&&component._jsPlumb.hoverPaintStyle){var mergedHoverStyle={};jsPlumb.extend(mergedHoverStyle,component._jsPlumb.paintStyle);jsPlumb.extend(mergedHoverStyle,component._jsPlumb.hoverPaintStyle);delete component._jsPlumb.hoverPaintStyle;if(mergedHoverStyle.gradient&&component._jsPlumb.paintStyle.fillStyle)
delete mergedHoverStyle.gradient;component._jsPlumb.hoverPaintStyle=mergedHoverStyle;}},events=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],eventFilters={"mouseout":"mouseleave","mouseexit":"mouseleave"},_updateAttachedElements=function(component,state,timestamp,sourceElement){var affectedElements=component.getAttachedElements();if(affectedElements){for(var i=0,j=affectedElements.length;i<j;i++){if(!sourceElement||sourceElement!=affectedElements[i])
affectedElements[i].setHover(state,true,timestamp);}}},_splitType=function(t){return t==null?null:t.split(" ");},_applyTypes=function(component,params,doNotRepaint){if(component.getDefaultType){var td=component.getTypeDescriptor();var o=_ju.merge({},component.getDefaultType());for(var i=0,j=component._jsPlumb.types.length;i<j;i++)
o=_ju.merge(o,component._jsPlumb.instance.getType(component._jsPlumb.types[i],td),["cssClass"]);if(params){o=_ju.populate(o,params);}
component.applyType(o,doNotRepaint);if(!doNotRepaint)component.repaint();}},jsPlumbUIComponent=window.jsPlumbUIComponent=function(params){jsPlumbUtil.EventGenerator.apply(this,arguments);var self=this,a=arguments,idPrefix=self.idPrefix,id=idPrefix+(new Date()).getTime();this._jsPlumb={instance:params._jsPlumb,parameters:params.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:false,beforeDetach:params.beforeDetach,beforeDrop:params.beforeDrop,overlayPlacements:[],hoverClass:params.hoverClass||params._jsPlumb.Defaults.HoverClass,types:[]};this.getId=function(){return id;};if(params.events){for(var i in params.events)
self.bind(i,params.events[i]);}
this.clone=function(){var o={};this.constructor.apply(o,a);return o;}.bind(this);this.isDetachAllowed=function(connection){var r=true;if(this._jsPlumb.beforeDetach){try{r=this._jsPlumb.beforeDetach(connection);}
catch(e){_ju.log("jsPlumb: beforeDetach callback failed",e);}}
return r;};this.isDropAllowed=function(sourceId,targetId,scope,connection,dropEndpoint,source,target){var r=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:sourceId,targetId:targetId,scope:scope,connection:connection,dropEndpoint:dropEndpoint,source:source,target:target});if(this._jsPlumb.beforeDrop){try{r=this._jsPlumb.beforeDrop({sourceId:sourceId,targetId:targetId,scope:scope,connection:connection,dropEndpoint:dropEndpoint,source:source,target:target});}
catch(e){_ju.log("jsPlumb: beforeDrop callback failed",e);}}
return r;};var boundListeners=[],bindAListener=function(obj,type,fn){boundListeners.push([obj,type,fn]);obj.bind(type,fn);},domListeners=[];this.setListenerComponent=function(c){for(var i=0;i<domListeners.length;i++)
domListeners[i][3]=c;};};var _removeTypeCssHelper=function(component,typeIndex){var typeId=component._jsPlumb.types[typeIndex],type=component._jsPlumb.instance.getType(typeId,component.getTypeDescriptor());if(type!=null){if(type.cssClass&&component.canvas)
component._jsPlumb.instance.removeClass(component.canvas,type.cssClass);}};jsPlumbUtil.extend(jsPlumbUIComponent,jsPlumbUtil.EventGenerator,{getParameter:function(name){return this._jsPlumb.parameters[name];},setParameter:function(name,value){this._jsPlumb.parameters[name]=value;},getParameters:function(){return this._jsPlumb.parameters;},setParameters:function(p){this._jsPlumb.parameters=p;},addClass:function(clazz){jsPlumbAdapter.addClass(this.canvas,clazz);},removeClass:function(clazz){jsPlumbAdapter.removeClass(this.canvas,clazz);},updateClasses:function(classesToAdd,classesToRemove){jsPlumbAdapter.updateClasses(this.canvas,classesToAdd,classesToRemove);},setType:function(typeId,params,doNotRepaint){this.clearTypes();this._jsPlumb.types=_splitType(typeId)||[];_applyTypes(this,params,doNotRepaint);},getType:function(){return this._jsPlumb.types;},reapplyTypes:function(params,doNotRepaint){_applyTypes(this,params,doNotRepaint);},hasType:function(typeId){return jsPlumbUtil.indexOf(this._jsPlumb.types,typeId)!=-1;},addType:function(typeId,params,doNotRepaint){var t=_splitType(typeId),_cont=false;if(t!=null){for(var i=0,j=t.length;i<j;i++){if(!this.hasType(t[i])){this._jsPlumb.types.push(t[i]);_cont=true;}}
if(_cont)_applyTypes(this,params,doNotRepaint);}},removeType:function(typeId,doNotRepaint){var t=_splitType(typeId),_cont=false,_one=function(tt){var idx=_ju.indexOf(this._jsPlumb.types,tt);if(idx!=-1){_removeTypeCssHelper(this,idx);this._jsPlumb.types.splice(idx,1);return true;}
return false;}.bind(this);if(t!=null){for(var i=0,j=t.length;i<j;i++){_cont=_one(t[i])||_cont;}
if(_cont)_applyTypes(this,null,doNotRepaint);}},clearTypes:function(doNotRepaint){var i=this._jsPlumb.types.length;for(var j=0;j<i;j++){_removeTypeCssHelper(this,0);this._jsPlumb.types.splice(0,1);}
_applyTypes(this,{},doNotRepaint);},toggleType:function(typeId,params,doNotRepaint){var t=_splitType(typeId);if(t!=null){for(var i=0,j=t.length;i<j;i++){var idx=jsPlumbUtil.indexOf(this._jsPlumb.types,t[i]);if(idx!=-1){_removeTypeCssHelper(this,idx);this._jsPlumb.types.splice(idx,1);}
else
this._jsPlumb.types.push(t[i]);}
_applyTypes(this,params,doNotRepaint);}},applyType:function(t,doNotRepaint){this.setPaintStyle(t.paintStyle,doNotRepaint);this.setHoverPaintStyle(t.hoverPaintStyle,doNotRepaint);if(t.parameters){for(var i in t.parameters)
this.setParameter(i,t.parameters[i]);}},setPaintStyle:function(style,doNotRepaint){this._jsPlumb.paintStyle=style;this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle;_updateHoverStyle(this);if(!doNotRepaint)this.repaint();},getPaintStyle:function(){return this._jsPlumb.paintStyle;},setHoverPaintStyle:function(style,doNotRepaint){this._jsPlumb.hoverPaintStyle=style;_updateHoverStyle(this);if(!doNotRepaint)this.repaint();},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle;},destroy:function(){this.cleanupListeners();this.clone=null;this._jsPlumb=null;},isHover:function(){return this._jsPlumb.hover;},setHover:function(hover,ignoreAttachedElements,timestamp){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=hover;if(this.canvas!=null){if(this._jsPlumb.instance.hoverClass!=null){var method=hover?"addClass":"removeClass";this._jsPlumb.instance[method](this.canvas,this._jsPlumb.instance.hoverClass);}
if(this._jsPlumb.hoverClass!=null){this._jsPlumb.instance[method](this.canvas,this._jsPlumb.hoverClass);}}
if(this._jsPlumb.hoverPaintStyle!=null){this._jsPlumb.paintStyleInUse=hover?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle;if(!this._jsPlumb.instance.isSuspendDrawing()){timestamp=timestamp||_timestamp();this.repaint({timestamp:timestamp,recalc:false});}}
if(this.getAttachedElements&&!ignoreAttachedElements)
_updateAttachedElements(this,hover,_timestamp(),this);}}});var _internalLabelOverlayId="__label",_getOverlayIndex=function(component,id){var idx=-1;for(var i=0,j=component._jsPlumb.overlays.length;i<j;i++){if(id===component._jsPlumb.overlays[i].id){idx=i;break;}}
return idx;},_makeLabelOverlay=function(component,params){var _params={cssClass:params.cssClass,labelStyle:component.labelStyle,id:_internalLabelOverlayId,component:component,_jsPlumb:component._jsPlumb.instance},mergedParams=jsPlumb.extend(_params,params);return new jsPlumb.Overlays[component._jsPlumb.instance.getRenderMode()].Label(mergedParams);},_processOverlay=function(component,o){var _newOverlay=null;if(_ju.isArray(o)){var type=o[0],p=jsPlumb.extend({component:component,_jsPlumb:component._jsPlumb.instance},o[1]);if(o.length==3)jsPlumb.extend(p,o[2]);_newOverlay=new jsPlumb.Overlays[component._jsPlumb.instance.getRenderMode()][type](p);}else if(o.constructor==String){_newOverlay=new jsPlumb.Overlays[component._jsPlumb.instance.getRenderMode()][o]({component:component,_jsPlumb:component._jsPlumb.instance});}else{_newOverlay=o;}
component._jsPlumb.overlays.push(_newOverlay);},_calculateOverlaysToAdd=function(component,params){var defaultKeys=component.defaultOverlayKeys||[],o=params.overlays,checkKey=function(k){return component._jsPlumb.instance.Defaults[k]||jsPlumb.Defaults[k]||[];};if(!o)o=[];for(var i=0,j=defaultKeys.length;i<j;i++)
o.unshift.apply(o,checkKey(defaultKeys[i]));return o;},OverlayCapableJsPlumbUIComponent=window.OverlayCapableJsPlumbUIComponent=function(params){jsPlumbUIComponent.apply(this,arguments);this._jsPlumb.overlays=[];var _overlays=_calculateOverlaysToAdd(this,params);if(_overlays){for(var i=0,j=_overlays.length;i<j;i++){_processOverlay(this,_overlays[i]);}}
if(params.label){var loc=params.labelLocation||this.defaultLabelLocation||0.5,labelStyle=params.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle;this._jsPlumb.overlays.push(_makeLabelOverlay(this,{label:params.label,location:loc,labelStyle:labelStyle}));}
this.setListenerComponent=function(c){if(this._jsPlumb){for(var i=0;i<this._jsPlumb.overlays.length;i++)
this._jsPlumb.overlays[i].setListenerComponent(c);}};};jsPlumbUtil.extend(OverlayCapableJsPlumbUIComponent,jsPlumbUIComponent,{applyType:function(t,doNotRepaint){this.removeAllOverlays(doNotRepaint);if(t.overlays){for(var i=0,j=t.overlays.length;i<j;i++)
this.addOverlay(t.overlays[i],true);}},setHover:function(hover,ignoreAttachedElements){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){for(var i=0,j=this._jsPlumb.overlays.length;i<j;i++){this._jsPlumb.overlays[i][hover?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass);}}},addOverlay:function(overlay,doNotRepaint){_processOverlay(this,overlay);if(!doNotRepaint)this.repaint();},getOverlay:function(id){var idx=_getOverlayIndex(this,id);return idx>=0?this._jsPlumb.overlays[idx]:null;},getOverlays:function(){return this._jsPlumb.overlays;},hideOverlay:function(id){var o=this.getOverlay(id);if(o)o.hide();},hideOverlays:function(){for(var i=0,j=this._jsPlumb.overlays.length;i<j;i++)
this._jsPlumb.overlays[i].hide();},showOverlay:function(id){var o=this.getOverlay(id);if(o)o.show();},showOverlays:function(){for(var i=0,j=this._jsPlumb.overlays.length;i<j;i++)
this._jsPlumb.overlays[i].show();},removeAllOverlays:function(doNotRepaint){for(var i=0,j=this._jsPlumb.overlays.length;i<j;i++){if(this._jsPlumb.overlays[i].cleanup)this._jsPlumb.overlays[i].cleanup();}
this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length);this._jsPlumb.overlayPositions=null;if(!doNotRepaint)
this.repaint();},removeOverlay:function(overlayId){var idx=_getOverlayIndex(this,overlayId);if(idx!=-1){var o=this._jsPlumb.overlays[idx];if(o.cleanup)o.cleanup();this._jsPlumb.overlays.splice(idx,1);if(this._jsPlumb.overlayPositions)
delete this._jsPlumb.overlayPositions[overlayId];}},removeOverlays:function(){for(var i=0,j=arguments.length;i<j;i++)
this.removeOverlay(arguments[i]);},moveParent:function(newParent){if(this.bgCanvas){this.bgCanvas.parentNode.removeChild(this.bgCanvas);newParent.appendChild(this.bgCanvas);}
this.canvas.parentNode.removeChild(this.canvas);newParent.appendChild(this.canvas);for(var i=0;i<this._jsPlumb.overlays.length;i++){if(this._jsPlumb.overlays[i].isAppendedAtTopLevel){this._jsPlumb.overlays[i].canvas.parentNode.removeChild(this._jsPlumb.overlays[i].canvas);newParent.appendChild(this._jsPlumb.overlays[i].canvas);}}},getLabel:function(){var lo=this.getOverlay(_internalLabelOverlayId);return lo!=null?lo.getLabel():null;},getLabelOverlay:function(){return this.getOverlay(_internalLabelOverlayId);},setLabel:function(l){var lo=this.getOverlay(_internalLabelOverlayId);if(!lo){var params=l.constructor==String||l.constructor==Function?{label:l}:l;lo=_makeLabelOverlay(this,params);this._jsPlumb.overlays.push(lo);}
else{if(l.constructor==String||l.constructor==Function)lo.setLabel(l);else{if(l.label)lo.setLabel(l.label);if(l.location)lo.setLocation(l.location);}}
if(!this._jsPlumb.instance.isSuspendDrawing())
this.repaint();},cleanup:function(){for(var i=0;i<this._jsPlumb.overlays.length;i++){this._jsPlumb.overlays[i].cleanup();this._jsPlumb.overlays[i].destroy();}
this._jsPlumb.overlays.length=0;this._jsPlumb.overlayPositions=null;},setVisible:function(v){this[v?"showOverlays":"hideOverlays"]();},setAbsoluteOverlayPosition:function(overlay,xy){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{};this._jsPlumb.overlayPositions[overlay.id]=xy;},getAbsoluteOverlayPosition:function(overlay){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[overlay.id]:null;}});var _jsPlumbInstanceIndex=0,getInstanceIndex=function(){var i=_jsPlumbInstanceIndex+1;_jsPlumbInstanceIndex++;return i;};var jsPlumbInstance=window.jsPlumbInstance=function(_defaults){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:true,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:false,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:false,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:false,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"};if(_defaults)jsPlumb.extend(this.Defaults,_defaults);this.logEnabled=this.Defaults.LogEnabled;this._connectionTypes={};this._endpointTypes={};jsPlumbUtil.EventGenerator.apply(this);var _currentInstance=this,_instanceIndex=getInstanceIndex(),_bb=_currentInstance.bind,_initialDefaults={},_zoom=1,_info=function(el){var _el=_currentInstance.getDOMElement(el);return{el:_el,id:(jsPlumbUtil.isString(el)&&_el==null)?el:_getId(_el)};};this.getInstanceIndex=function(){return _instanceIndex;};this.setZoom=function(z,repaintEverything){if(!jsPlumbUtil.oldIE){_zoom=z;_currentInstance.fire("zoom",_zoom);if(repaintEverything)_currentInstance.repaintEverything();}
return!jsPlumbUtil.oldIE;};this.getZoom=function(){return _zoom;};for(var i in this.Defaults)
_initialDefaults[i]=this.Defaults[i];var _container;this.setContainer=function(c){c=this.getDOMElement(c);this.select().each(function(conn){conn.moveParent(c);});this.selectEndpoints().each(function(ep){ep.moveParent(c);});_container=c;var _oneDelegateHandler=function(id,e){var t=e.srcElement||e.target,jp=(t&&t.parentNode?t.parentNode._jsPlumb:null)||(t?t._jsPlumb:null)||(t&&t.parentNode&&t.parentNode.parentNode?t.parentNode.parentNode._jsPlumb:null);if(jp){jp.fire(id,jp,e);_currentInstance.fire(id,jp,e);}};var _oneDelegate=function(id){_currentInstance.on(_container,id,"._jsPlumb_connector, ._jsPlumb_connector > *",function(e){_oneDelegateHandler(id,e);});_currentInstance.on(_container,id,"._jsPlumb_endpoint, ._jsPlumb_endpoint > *, ._jsPlumb_endpoint svg *",function(e){_oneDelegateHandler(id,e);});_currentInstance.on(_container,id,"._jsPlumb_overlay, ._jsPlumb_overlay *",function(e){_oneDelegateHandler(id,e);});};for(var i=0;i<events.length;i++)
_oneDelegate(events[i]);};this.getContainer=function(){return _container;};this.bind=function(event,fn){if("ready"===event&&initialized)fn();else _bb.apply(_currentInstance,[event,fn]);};_currentInstance.importDefaults=function(d){for(var i in d){_currentInstance.Defaults[i]=d[i];}
if(d.Container)
_currentInstance.setContainer(d.Container);return _currentInstance;};_currentInstance.restoreDefaults=function(){_currentInstance.Defaults=jsPlumb.extend({},_initialDefaults);return _currentInstance;};var log=null,initialized=false,connections=[],endpointsByElement={},endpointsByUUID={},managedElements={},offsets={},offsetTimestamps={},draggableStates={},connectionBeingDragged=false,sizes=[],_suspendDrawing=false,_suspendedAt=null,DEFAULT_SCOPE=this.Defaults.Scope,renderMode=null,_curIdStamp=1,_idstamp=function(){return""+_curIdStamp++;},_appendElement=function(el,parent){if(_container)
_container.appendChild(el);else if(!parent)
this.appendToRoot(el);else
this.getDOMElement(parent).appendChild(el);}.bind(this),_draw=function(element,ui,timestamp,clearEdits){if(!jsPlumbAdapter.headless&&!_suspendDrawing){var id=_getId(element),repaintEls=_currentInstance.dragManager.getElementsForDraggable(id);if(timestamp==null)timestamp=_timestamp();var o=_updateOffset({elId:id,offset:ui,recalc:false,timestamp:timestamp});if(repaintEls){for(var i in repaintEls){_updateOffset({elId:repaintEls[i].id,offset:{left:o.o.left+repaintEls[i].offset.left,top:o.o.top+repaintEls[i].offset.top},recalc:false,timestamp:timestamp});}}
_currentInstance.anchorManager.redraw(id,ui,timestamp,null,clearEdits);if(repaintEls){for(var j in repaintEls){_currentInstance.anchorManager.redraw(repaintEls[j].id,ui,timestamp,repaintEls[j].offset,clearEdits,true);}}}},_elementProxy=function(element,fn){var retVal=null,el,id,del;if(_ju.isArray(element)){retVal=[];for(var i=0,j=element.length;i<j;i++){el=_currentInstance.getElementObject(element[i]);del=_currentInstance.getDOMElement(el);id=_currentInstance.getAttribute(del,"id");retVal.push(fn.apply(_currentInstance,[del,id]));}}else{el=_currentInstance.getDOMElement(element);id=_currentInstance.getId(el);retVal=fn.apply(_currentInstance,[el,id]);}
return retVal;},_getEndpoint=function(uuid){return endpointsByUUID[uuid];},_initDraggableIfNecessary=function(element,isDraggable,dragOptions,id){if(!jsPlumbAdapter.headless){var _draggable=isDraggable==null?false:isDraggable;if(_draggable){if(jsPlumb.isDragSupported(element,_currentInstance)&&!jsPlumb.isAlreadyDraggable(element,_currentInstance)){var options=dragOptions||_currentInstance.Defaults.DragOptions;options=jsPlumb.extend({},options);var dragEvent=jsPlumb.dragEvents.drag,stopEvent=jsPlumb.dragEvents.stop,startEvent=jsPlumb.dragEvents.start,_del=_currentInstance.getDOMElement(element),_ancestor=_currentInstance.dragManager.getDragAncestor(_del),_noOffset={left:0,top:0},_ancestorOffset=_noOffset,_started=false;_manage(id,element);options[startEvent]=_ju.wrap(options[startEvent],function(){_ancestorOffset=_ancestor!=null?jsPlumbAdapter.getOffset(_ancestor,_currentInstance):_noOffset;_currentInstance.setHoverSuspended(true);_currentInstance.select({source:element}).addClass(_currentInstance.elementDraggingClass+" "+_currentInstance.sourceElementDraggingClass,true);_currentInstance.select({target:element}).addClass(_currentInstance.elementDraggingClass+" "+_currentInstance.targetElementDraggingClass,true);_currentInstance.setConnectionBeingDragged(true);if(options.canDrag)return dragOptions.canDrag();},false);options[dragEvent]=_ju.wrap(options[dragEvent],function(){var ui=_currentInstance.getUIPosition(arguments,_currentInstance.getZoom());ui.left+=_ancestorOffset.left;ui.top+=_ancestorOffset.top;_draw(element,ui,null,true);if(_started)_currentInstance.addClass(element,"jsPlumb_dragged");_started=true;});options[stopEvent]=_ju.wrap(options[stopEvent],function(){var ui=_currentInstance.getUIPosition(arguments,_currentInstance.getZoom(),true);_draw(element,ui);_started=false;_currentInstance.removeClass(element,"jsPlumb_dragged");_currentInstance.setHoverSuspended(false);_currentInstance.select({source:element}).removeClass(_currentInstance.elementDraggingClass+" "+_currentInstance.sourceElementDraggingClass,true);_currentInstance.select({target:element}).removeClass(_currentInstance.elementDraggingClass+" "+_currentInstance.targetElementDraggingClass,true);_currentInstance.setConnectionBeingDragged(false);_currentInstance.dragManager.dragEnded(element);});var elId=_getId(element);draggableStates[elId]=true;var draggable=draggableStates[elId];options.disabled=draggable==null?false:!draggable;_currentInstance.initDraggable(element,options);_currentInstance.dragManager.register(element);}}}},_scopeMatch=function(e1,e2){var s1=e1.scope.split(/\s/),s2=e2.scope.split(/\s/);for(var i=0;i<s1.length;i++)
for(var j=0;j<s2.length;j++)
if(s2[j]==s1[i])return true;return false;},_prepareConnectionParams=function(params,referenceParams){var _p=jsPlumb.extend({},params);if(referenceParams)jsPlumb.extend(_p,referenceParams);if(_p.source){if(_p.source.endpoint)
_p.sourceEndpoint=_p.source;else
_p.source=_currentInstance.getDOMElement(_p.source);}
if(_p.target){if(_p.target.endpoint)
_p.targetEndpoint=_p.target;else
_p.target=_currentInstance.getDOMElement(_p.target);}
if(params.uuids){_p.sourceEndpoint=_getEndpoint(params.uuids[0]);_p.targetEndpoint=_getEndpoint(params.uuids[1]);}
if(_p.sourceEndpoint&&_p.sourceEndpoint.isFull()){_ju.log(_currentInstance,"could not add connection; source endpoint is full");return;}
if(_p.targetEndpoint&&_p.targetEndpoint.isFull()){_ju.log(_currentInstance,"could not add connection; target endpoint is full");return;}
if(!_p.type&&_p.sourceEndpoint)
_p.type=_p.sourceEndpoint.connectionType;if(_p.sourceEndpoint&&_p.sourceEndpoint.connectorOverlays){_p.overlays=_p.overlays||[];for(var i=0,j=_p.sourceEndpoint.connectorOverlays.length;i<j;i++){_p.overlays.push(_p.sourceEndpoint.connectorOverlays[i]);}}
if(!_p["pointer-events"]&&_p.sourceEndpoint&&_p.sourceEndpoint.connectorPointerEvents)
_p["pointer-events"]=_p.sourceEndpoint.connectorPointerEvents;var _mergeOverrides=function(def,values){var m=jsPlumb.extend({},def);for(var i in values){if(values[i])m[i]=values[i];}
return m;};var _addEndpoint=function(el,def,idx){return _currentInstance.addEndpoint(el,_mergeOverrides(def,{anchor:_p.anchors?_p.anchors[idx]:_p.anchor,endpoint:_p.endpoints?_p.endpoints[idx]:_p.endpoint,paintStyle:_p.endpointStyles?_p.endpointStyles[idx]:_p.endpointStyle,hoverPaintStyle:_p.endpointHoverStyles?_p.endpointHoverStyles[idx]:_p.endpointHoverStyle}));};var _oneElementDef=function(type,idx,defs){if(_p[type]&&!_p[type].endpoint&&!_p[type+"Endpoint"]&&!_p.newConnection){var tid=_getId(_p[type]),tep=defs[tid];if(tep){if(!tep.enabled)return false;var newEndpoint=tep.endpoint!=null&&tep.endpoint._jsPlumb?tep.endpoint:_addEndpoint(_p[type],tep.def,idx);if(tep.uniqueEndpoint)tep.endpoint=newEndpoint;if(newEndpoint.isFull())return false;_p[type+"Endpoint"]=newEndpoint;newEndpoint._doNotDeleteOnDetach=false;newEndpoint._deleteOnDetach=true;}}};if(_oneElementDef("source",0,this.sourceEndpointDefinitions)===false)return;if(_oneElementDef("target",1,this.targetEndpointDefinitions)===false)return;if(_p.sourceEndpoint&&_p.targetEndpoint)
if(!_scopeMatch(_p.sourceEndpoint,_p.targetEndpoint))_p=null;return _p;}.bind(_currentInstance),_newConnection=function(params){var connectionFunc=_currentInstance.Defaults.ConnectionType||_currentInstance.getDefaultConnectionType();params._jsPlumb=_currentInstance;params.newConnection=_newConnection;params.newEndpoint=_newEndpoint;params.endpointsByUUID=endpointsByUUID;params.endpointsByElement=endpointsByElement;params.finaliseConnection=_finaliseConnection;var con=new connectionFunc(params);con.id="con_"+_idstamp();if(con.isDetachable()){con.endpoints[0].initDraggable();con.endpoints[1].initDraggable();}
return con;},_finaliseConnection=_currentInstance.finaliseConnection=function(jpc,params,originalEvent,doInformAnchorManager){params=params||{};if(!jpc.suspendedEndpoint)
connections.push(jpc);jpc.endpoints[0].isTemporarySource=false;if(jpc.suspendedEndpoint==null||doInformAnchorManager)
_currentInstance.anchorManager.newConnection(jpc);_draw(jpc.source);if(!params.doNotFireConnectionEvent&&params.fireEvent!==false){var eventArgs={connection:jpc,source:jpc.source,target:jpc.target,sourceId:jpc.sourceId,targetId:jpc.targetId,sourceEndpoint:jpc.endpoints[0],targetEndpoint:jpc.endpoints[1]};_currentInstance.fire("connection",eventArgs,originalEvent);}},_newEndpoint=function(params,id){var endpointFunc=_currentInstance.Defaults.EndpointType||jsPlumb.Endpoint;var _p=jsPlumb.extend({},params);_p._jsPlumb=_currentInstance;_p.newConnection=_newConnection;_p.newEndpoint=_newEndpoint;_p.endpointsByUUID=endpointsByUUID;_p.endpointsByElement=endpointsByElement;_p.fireDetachEvent=fireDetachEvent;_p.elementId=id||_getId(_p.source);var ep=new endpointFunc(_p);ep.id="ep_"+_idstamp();_manage(_p.elementId,_p.source);if(!jsPlumbAdapter.headless)
_currentInstance.dragManager.endpointAdded(_p.source,id);return ep;},_operation=function(elId,func,endpointFunc){var endpoints=endpointsByElement[elId];if(endpoints&&endpoints.length){for(var i=0,ii=endpoints.length;i<ii;i++){for(var j=0,jj=endpoints[i].connections.length;j<jj;j++){var retVal=func(endpoints[i].connections[j]);if(retVal)return;}
if(endpointFunc)endpointFunc(endpoints[i]);}}},_setDraggable=function(element,draggable){return _elementProxy(element,function(el,id){draggableStates[id]=draggable;if(this.isDragSupported(el)){this.setElementDraggable(el,draggable);}});},_setVisible=function(el,state,alsoChangeEndpoints){state=state==="block";var endpointFunc=null;if(alsoChangeEndpoints){if(state)endpointFunc=function(ep){ep.setVisible(true,true,true);};else endpointFunc=function(ep){ep.setVisible(false,true,true);};}
var info=_info(el);_operation(info.id,function(jpc){if(state&&alsoChangeEndpoints){var oidx=jpc.sourceId===info.id?1:0;if(jpc.endpoints[oidx].isVisible())jpc.setVisible(true);}
else
jpc.setVisible(state);},endpointFunc);},_toggleDraggable=function(el){return _elementProxy(el,function(el,elId){var state=draggableStates[elId]==null?false:draggableStates[elId];state=!state;draggableStates[elId]=state;this.setDraggable(el,state);return state;}.bind(this));},_toggleVisible=function(elId,changeEndpoints){var endpointFunc=null;if(changeEndpoints){endpointFunc=function(ep){var state=ep.isVisible();ep.setVisible(!state);};}
_operation(elId,function(jpc){var state=jpc.isVisible();jpc.setVisible(!state);},endpointFunc);},_getCachedData=function(elId){var o=offsets[elId];if(!o)
return _updateOffset({elId:elId});else
return{o:o,s:sizes[elId]};},_getId=function(element,uuid,doNotCreateIfNotFound){if(jsPlumbUtil.isString(element))return element;if(element==null)return null;var id=_currentInstance.getAttribute(element,"id");if(!id||id==="undefined"){if(arguments.length==2&&arguments[1]!==undefined)
id=uuid;else if(arguments.length==1||(arguments.length==3&&!arguments[2]))
id="jsPlumb_"+_instanceIndex+"_"+_idstamp();if(!doNotCreateIfNotFound)_currentInstance.setAttribute(element,"id",id);}
return id;};this.setConnectionBeingDragged=function(v){connectionBeingDragged=v;};this.isConnectionBeingDragged=function(){return connectionBeingDragged;};this.connectorClass="_jsPlumb_connector";this.hoverClass="_jsPlumb_hover";this.endpointClass="_jsPlumb_endpoint";this.endpointConnectedClass="_jsPlumb_endpoint_connected";this.endpointFullClass="_jsPlumb_endpoint_full";this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed";this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden";this.overlayClass="_jsPlumb_overlay";this.draggingClass="_jsPlumb_dragging";this.elementDraggingClass="_jsPlumb_element_dragging";this.sourceElementDraggingClass="_jsPlumb_source_element_dragging";this.targetElementDraggingClass="_jsPlumb_target_element_dragging";this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor";this.hoverSourceClass="_jsPlumb_source_hover";this.hoverTargetClass="_jsPlumb_target_hover";this.dragSelectClass="_jsPlumb_drag_select";this.Anchors={};this.Connectors={"svg":{},"vml":{}};this.Endpoints={"svg":{},"vml":{}};this.Overlays={"svg":{},"vml":{}};this.ConnectorRenderers={};this.SVG="svg";this.VML="vml";this.addEndpoint=function(el,params,referenceParams){referenceParams=referenceParams||{};var p=jsPlumb.extend({},referenceParams);jsPlumb.extend(p,params);p.endpoint=p.endpoint||_currentInstance.Defaults.Endpoint;p.paintStyle=p.paintStyle||_currentInstance.Defaults.EndpointStyle;var results=[],inputs=(_ju.isArray(el)||(el.length!=null&&!_ju.isString(el)))?el:[el];for(var i=0,j=inputs.length;i<j;i++){p.source=_currentInstance.getDOMElement(inputs[i]);_ensureContainer(p.source);var id=_getId(p.source),e=_newEndpoint(p,id);var myOffset=_manage(id,p.source).info.o;_ju.addToList(endpointsByElement,id,e);if(!_suspendDrawing){e.paint({anchorLoc:e.anchor.compute({xy:[myOffset.left,myOffset.top],wh:sizes[id],element:e,timestamp:_suspendedAt}),timestamp:_suspendedAt});}
results.push(e);e._doNotDeleteOnDetach=true;}
return results.length==1?results[0]:results;};this.addEndpoints=function(el,endpoints,referenceParams){var results=[];for(var i=0,j=endpoints.length;i<j;i++){var e=_currentInstance.addEndpoint(el,endpoints[i],referenceParams);if(_ju.isArray(e))
Array.prototype.push.apply(results,e);else results.push(e);}
return results;};this.animate=function(el,properties,options){options=options||{};var ele=_currentInstance.getElementObject(el),del=_currentInstance.getDOMElement(el),id=_getId(del),stepFunction=jsPlumb.animEvents.step,completeFunction=jsPlumb.animEvents.complete;options[stepFunction]=_ju.wrap(options[stepFunction],function(){_currentInstance.revalidate(id);});options[completeFunction]=_ju.wrap(options[completeFunction],function(){_currentInstance.revalidate(id);});_currentInstance.doAnimate(ele,properties,options);};this.checkCondition=function(conditionName,value){var l=_currentInstance.getListener(conditionName),r=true;if(l&&l.length>0){try{for(var i=0,j=l.length;i<j;i++){r=r&&l[i](value);}}
catch(e){_ju.log(_currentInstance,"cannot check condition ["+conditionName+"]"+e);}}
return r;};this.connect=function(params,referenceParams){var _p=_prepareConnectionParams(params,referenceParams),jpc;if(_p){if(_p.source==null&&_p.sourceEndpoint==null){jsPlumbUtil.log("Cannot establish connection - source does not exist");return;}
if(_p.target==null&&_p.targetEndpoint==null){jsPlumbUtil.log("Cannot establish connection - target does not exist");return;}
_ensureContainer(_p.source);jpc=_newConnection(_p);_finaliseConnection(jpc,_p);}
return jpc;};var stTypes=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}];var _set=function(c,el,idx,doNotRepaint){var ep,_st=stTypes[idx],cId=c[_st.elId],cEl=c[_st.el],sid,sep,oldEndpoint=c.endpoints[idx];var evtParams={index:idx,originalSourceId:idx===0?cId:c.sourceId,newSourceId:c.sourceId,originalTargetId:idx==1?cId:c.targetId,newTargetId:c.targetId,connection:c};if(el.constructor==jsPlumb.Endpoint){ep=el;ep.addConnection(c);}
else{sid=_getId(el);sep=this[_st.epDefs][sid];if(sid===c[_st.elId])
ep=null;else if(sep){if(!sep.enabled)return;ep=sep.endpoint!=null&&sep.endpoint._jsPlumb?sep.endpoint:this.addEndpoint(el,sep.def);if(sep.uniqueEndpoint)sep.endpoint=ep;ep._doNotDeleteOnDetach=false;ep._deleteOnDetach=true;ep.addConnection(c);}
else{ep=c.makeEndpoint(idx===0,el,sid);ep._doNotDeleteOnDetach=false;ep._deleteOnDetach=true;}}
if(ep!=null){oldEndpoint.detachFromConnection(c);c.endpoints[idx]=ep;c[_st.el]=ep.element;c[_st.elId]=ep.elementId;evtParams[idx===0?"newSourceId":"newTargetId"]=ep.elementId;fireMoveEvent(evtParams);if(!doNotRepaint)
c.repaint();}
return evtParams;}.bind(this);this.setSource=function(connection,el,doNotRepaint){var p=_set(connection,el,0,doNotRepaint);this.anchorManager.sourceChanged(p.originalSourceId,p.newSourceId,connection);};this.setTarget=function(connection,el,doNotRepaint){var p=_set(connection,el,1,doNotRepaint);this.anchorManager.updateOtherEndpoint(p.originalSourceId,p.originalTargetId,p.newTargetId,connection);};this.deleteEndpoint=function(object,dontUpdateHover){var endpoint=(typeof object==="string")?endpointsByUUID[object]:object;if(endpoint){_currentInstance.deleteObject({endpoint:endpoint,dontUpdateHover:dontUpdateHover});}
return _currentInstance;};this.deleteEveryEndpoint=function(){var _is=_currentInstance.setSuspendDrawing(true);for(var id in endpointsByElement){var endpoints=endpointsByElement[id];if(endpoints&&endpoints.length){for(var i=0,j=endpoints.length;i<j;i++){_currentInstance.deleteEndpoint(endpoints[i],true);}}}
endpointsByElement={};managedElements={};endpointsByUUID={};_currentInstance.anchorManager.reset();_currentInstance.dragManager.reset();if(!_is)_currentInstance.setSuspendDrawing(false);return _currentInstance;};var fireDetachEvent=function(jpc,doFireEvent,originalEvent){var connType=_currentInstance.Defaults.ConnectionType||_currentInstance.getDefaultConnectionType(),argIsConnection=jpc.constructor==connType,params=argIsConnection?{connection:jpc,source:jpc.source,target:jpc.target,sourceId:jpc.sourceId,targetId:jpc.targetId,sourceEndpoint:jpc.endpoints[0],targetEndpoint:jpc.endpoints[1]}:jpc;if(doFireEvent)
_currentInstance.fire("connectionDetached",params,originalEvent);_currentInstance.anchorManager.connectionDetached(params);};var fireMoveEvent=_currentInstance.fireMoveEvent=function(params,evt){_currentInstance.fire("connectionMoved",params,evt);};this.unregisterEndpoint=function(endpoint){if(endpoint._jsPlumb.uuid)endpointsByUUID[endpoint._jsPlumb.uuid]=null;_currentInstance.anchorManager.deleteEndpoint(endpoint);for(var e in endpointsByElement){var endpoints=endpointsByElement[e];if(endpoints){var newEndpoints=[];for(var i=0,j=endpoints.length;i<j;i++)
if(endpoints[i]!=endpoint)newEndpoints.push(endpoints[i]);endpointsByElement[e]=newEndpoints;}
if(endpointsByElement[e].length<1){delete endpointsByElement[e];}}};this.detach=function(){if(arguments.length===0)return;var connType=_currentInstance.Defaults.ConnectionType||_currentInstance.getDefaultConnectionType(),firstArgIsConnection=arguments[0].constructor==connType,params=arguments.length==2?firstArgIsConnection?(arguments[1]||{}):arguments[0]:arguments[0],fireEvent=(params.fireEvent!==false),forceDetach=params.forceDetach,conn=firstArgIsConnection?arguments[0]:params.connection;if(conn){if(forceDetach||jsPlumbUtil.functionChain(true,false,[[conn.endpoints[0],"isDetachAllowed",[conn]],[conn.endpoints[1],"isDetachAllowed",[conn]],[conn,"isDetachAllowed",[conn]],[_currentInstance,"checkCondition",["beforeDetach",conn]]])){conn.endpoints[0].detach(conn,false,true,fireEvent);}}
else{var _p=jsPlumb.extend({},params);if(_p.uuids){_getEndpoint(_p.uuids[0]).detachFrom(_getEndpoint(_p.uuids[1]),fireEvent);}else if(_p.sourceEndpoint&&_p.targetEndpoint){_p.sourceEndpoint.detachFrom(_p.targetEndpoint);}else{var sourceId=_getId(_currentInstance.getDOMElement(_p.source)),targetId=_getId(_currentInstance.getDOMElement(_p.target));_operation(sourceId,function(jpc){if((jpc.sourceId==sourceId&&jpc.targetId==targetId)||(jpc.targetId==sourceId&&jpc.sourceId==targetId)){if(_currentInstance.checkCondition("beforeDetach",jpc)){jpc.endpoints[0].detach(jpc,false,true,fireEvent);}}});}}};this.detachAllConnections=function(el,params){params=params||{};el=_currentInstance.getDOMElement(el);var id=_getId(el),endpoints=endpointsByElement[id];if(endpoints&&endpoints.length){for(var i=0,j=endpoints.length;i<j;i++){endpoints[i].detachAll(params.fireEvent!==false);}}
return _currentInstance;};this.detachEveryConnection=function(params){params=params||{};_currentInstance.doWhileSuspended(function(){for(var id in endpointsByElement){var endpoints=endpointsByElement[id];if(endpoints&&endpoints.length){for(var i=0,j=endpoints.length;i<j;i++){endpoints[i].detachAll(params.fireEvent!==false);}}}
connections.length=0;});return _currentInstance;};this.deleteObject=function(params){var result={endpoints:{},connections:{},endpointCount:0,connectionCount:0},fireEvent=params.fireEvent!==false,deleteAttachedObjects=params.deleteAttachedObjects!==false;var unravelConnection=function(connection){if(connection!=null&&result.connections[connection.id]==null){if(!params.dontUpdateHover&&connection._jsPlumb!=null)connection.setHover(false);result.connections[connection.id]=connection;result.connectionCount++;if(deleteAttachedObjects){for(var j=0;j<connection.endpoints.length;j++){if(connection.endpoints[j]._deleteOnDetach)
unravelEndpoint(connection.endpoints[j]);}}}};var unravelEndpoint=function(endpoint){if(endpoint!=null&&result.endpoints[endpoint.id]==null){if(!params.dontUpdateHover&&endpoint._jsPlumb!=null)endpoint.setHover(false);result.endpoints[endpoint.id]=endpoint;result.endpointCount++;if(deleteAttachedObjects){for(var i=0;i<endpoint.connections.length;i++){var c=endpoint.connections[i];unravelConnection(c);}}}};if(params.connection)
unravelConnection(params.connection);else unravelEndpoint(params.endpoint);for(var i in result.connections){var c=result.connections[i];if(c._jsPlumb){jsPlumbUtil.removeWithFunction(connections,function(_c){return c.id==_c.id;});fireDetachEvent(c,fireEvent,params.originalEvent);c.endpoints[0].detachFromConnection(c);c.endpoints[1].detachFromConnection(c);c.cleanup();c.destroy();}}
for(var j in result.endpoints){var e=result.endpoints[j];if(e._jsPlumb){_currentInstance.unregisterEndpoint(e);e.cleanup();e.destroy();}}
return result;};this.draggable=function(el,options){var i,j,info;if(typeof el=='object'&&el.length){for(i=0,j=el.length;i<j;i++){info=_info(el[i]);if(info.el)_initDraggableIfNecessary(info.el,true,options,info.id);}}
else{info=_info(el);if(info.el)_initDraggableIfNecessary(info.el,true,options,info.id);}
return _currentInstance;};var _setOperation=function(list,func,args,selector){for(var i=0,j=list.length;i<j;i++){list[i][func].apply(list[i],args);}
return selector(list);},_getOperation=function(list,func,args){var out=[];for(var i=0,j=list.length;i<j;i++){out.push([list[i][func].apply(list[i],args),list[i]]);}
return out;},setter=function(list,func,selector){return function(){return _setOperation(list,func,arguments,selector);};},getter=function(list,func){return function(){return _getOperation(list,func,arguments);};},prepareList=function(input,doNotGetIds){var r=[];if(input){if(typeof input=='string'){if(input==="*")return input;r.push(input);}
else{if(doNotGetIds)r=input;else{if(input.length){for(var i=0,j=input.length;i<j;i++)
r.push(_info(input[i]).id);}
else
r.push(_info(input).id);}}}
return r;},filterList=function(list,value,missingIsFalse){if(list==="*")return true;return list.length>0?jsPlumbUtil.indexOf(list,value)!=-1:!missingIsFalse;};this.getConnections=function(options,flat){if(!options){options={};}else if(options.constructor==String){options={"scope":options};}
var scope=options.scope||_currentInstance.getDefaultScope(),scopes=prepareList(scope,true),sources=prepareList(options.source),targets=prepareList(options.target),results=(!flat&&scopes.length>1)?{}:[],_addOne=function(scope,obj){if(!flat&&scopes.length>1){var ss=results[scope];if(ss==null){ss=results[scope]=[];}
ss.push(obj);}else results.push(obj);};for(var j=0,jj=connections.length;j<jj;j++){var c=connections[j];if(filterList(scopes,c.scope)&&filterList(sources,c.sourceId)&&filterList(targets,c.targetId))
_addOne(c.scope,c);}
return results;};var _curryEach=function(list,executor){return function(f){for(var i=0,ii=list.length;i<ii;i++){f(list[i]);}
return executor(list);};},_curryGet=function(list){return function(idx){return list[idx];};};var _makeCommonSelectHandler=function(list,executor){var out={length:list.length,each:_curryEach(list,executor),get:_curryGet(list)},setters=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],getters=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],i,ii;for(i=0,ii=setters.length;i<ii;i++)
out[setters[i]]=setter(list,setters[i],executor);for(i=0,ii=getters.length;i<ii;i++)
out[getters[i]]=getter(list,getters[i]);return out;};var _makeConnectionSelectHandler=function(list){var common=_makeCommonSelectHandler(list,_makeConnectionSelectHandler);return jsPlumb.extend(common,{setDetachable:setter(list,"setDetachable",_makeConnectionSelectHandler),setReattach:setter(list,"setReattach",_makeConnectionSelectHandler),setConnector:setter(list,"setConnector",_makeConnectionSelectHandler),detach:function(){for(var i=0,ii=list.length;i<ii;i++)
_currentInstance.detach(list[i]);},isDetachable:getter(list,"isDetachable"),isReattach:getter(list,"isReattach")});};var _makeEndpointSelectHandler=function(list){var common=_makeCommonSelectHandler(list,_makeEndpointSelectHandler);return jsPlumb.extend(common,{setEnabled:setter(list,"setEnabled",_makeEndpointSelectHandler),setAnchor:setter(list,"setAnchor",_makeEndpointSelectHandler),isEnabled:getter(list,"isEnabled"),detachAll:function(){for(var i=0,ii=list.length;i<ii;i++)
list[i].detachAll();},"remove":function(){for(var i=0,ii=list.length;i<ii;i++)
_currentInstance.deleteObject({endpoint:list[i]});}});};this.select=function(params){params=params||{};params.scope=params.scope||"*";return _makeConnectionSelectHandler(params.connections||_currentInstance.getConnections(params,true));};this.selectEndpoints=function(params){params=params||{};params.scope=params.scope||"*";var noElementFilters=!params.element&&!params.source&&!params.target,elements=noElementFilters?"*":prepareList(params.element),sources=noElementFilters?"*":prepareList(params.source),targets=noElementFilters?"*":prepareList(params.target),scopes=prepareList(params.scope,true);var ep=[];for(var el in endpointsByElement){var either=filterList(elements,el,true),source=filterList(sources,el,true),sourceMatchExact=sources!="*",target=filterList(targets,el,true),targetMatchExact=targets!="*";if(either||source||target){inner:for(var i=0,ii=endpointsByElement[el].length;i<ii;i++){var _ep=endpointsByElement[el][i];if(filterList(scopes,_ep.scope,true)){var noMatchSource=(sourceMatchExact&&sources.length>0&&!_ep.isSource),noMatchTarget=(targetMatchExact&&targets.length>0&&!_ep.isTarget);if(noMatchSource||noMatchTarget)
continue inner;ep.push(_ep);}}}}
return _makeEndpointSelectHandler(ep);};this.getAllConnections=function(){return connections;};this.getDefaultScope=function(){return DEFAULT_SCOPE;};this.getEndpoint=_getEndpoint;this.getEndpoints=function(el){return endpointsByElement[_info(el).id];};this.getDefaultEndpointType=function(){return jsPlumb.Endpoint;};this.getDefaultConnectionType=function(){return jsPlumb.Connection;};this.getId=_getId;this.getOffset=function(id){return _updateOffset({elId:id}).o;};this.appendElement=_appendElement;var _hoverSuspended=false;this.isHoverSuspended=function(){return _hoverSuspended;};this.setHoverSuspended=function(s){_hoverSuspended=s;};var _isAvailable=function(m){return function(){return jsPlumbAdapter.isRenderModeAvailable(m);};};this.isSVGAvailable=_isAvailable("svg");this.isVMLAvailable=_isAvailable("vml");this.hide=function(el,changeEndpoints){_setVisible(el,"none",changeEndpoints);return _currentInstance;};this.idstamp=_idstamp;this.connectorsInitialized=false;var connectorTypes=[],rendererTypes=["svg","vml"];this.registerConnectorType=function(connector,name){connectorTypes.push([connector,name]);};var _ensureContainer=function(candidate){if(!_container&&candidate){var can=_currentInstance.getDOMElement(candidate);if(can.offsetParent)_currentInstance.setContainer(can.offsetParent);}};var _getContainerFromDefaults=function(){if(_currentInstance.Defaults.Container)
_currentInstance.setContainer(_currentInstance.Defaults.Container);};var _manage=_currentInstance.manage=function(id,element){if(!managedElements[id]){managedElements[id]={el:element,endpoints:[],connections:[]};managedElements[id].info=_updateOffset({elId:id,timestamp:_suspendedAt});}
return managedElements[id];};var _unmanage=function(id){delete managedElements[id];};var _updateOffset=this.updateOffset=function(params){var timestamp=params.timestamp,recalc=params.recalc,offset=params.offset,elId=params.elId,s;if(_suspendDrawing&&!timestamp)timestamp=_suspendedAt;if(!recalc){if(timestamp&&timestamp===offsetTimestamps[elId]){return{o:params.offset||offsets[elId],s:sizes[elId]};}}
if(recalc||(!offset&&offsets[elId]==null)){s=managedElements[elId]?managedElements[elId].el:null;if(s!=null){sizes[elId]=_currentInstance.getSize(s);offsets[elId]=_getOffset(s,_currentInstance);offsetTimestamps[elId]=timestamp;}}else{offsets[elId]=offset||offsets[elId];if(sizes[elId]==null){s=managedElements[elId].el;if(s!=null)sizes[elId]=_currentInstance.getSize(s);}
offsetTimestamps[elId]=timestamp;}
if(offsets[elId]&&!offsets[elId].right){offsets[elId].right=offsets[elId].left+sizes[elId][0];offsets[elId].bottom=offsets[elId].top+sizes[elId][1];offsets[elId].width=sizes[elId][0];offsets[elId].height=sizes[elId][1];offsets[elId].centerx=offsets[elId].left+(offsets[elId].width / 2);offsets[elId].centery=offsets[elId].top+(offsets[elId].height / 2);}
return{o:offsets[elId],s:sizes[elId]};};this.init=function(){var _oneType=function(renderer,name,fn){jsPlumb.Connectors[renderer][name]=function(){fn.apply(this,arguments);jsPlumb.ConnectorRenderers[renderer].apply(this,arguments);};jsPlumbUtil.extend(jsPlumb.Connectors[renderer][name],[fn,jsPlumb.ConnectorRenderers[renderer]]);};if(!jsPlumb.connectorsInitialized){for(var i=0;i<connectorTypes.length;i++){for(var j=0;j<rendererTypes.length;j++){_oneType(rendererTypes[j],connectorTypes[i][1],connectorTypes[i][0]);}}
jsPlumb.connectorsInitialized=true;}
if(!initialized){_getContainerFromDefaults();_currentInstance.anchorManager=new jsPlumb.AnchorManager({jsPlumbInstance:_currentInstance});_currentInstance.setRenderMode(_currentInstance.Defaults.RenderMode);initialized=true;_currentInstance.fire("ready",_currentInstance);}}.bind(this);this.log=log;this.jsPlumbUIComponent=jsPlumbUIComponent;this.makeAnchor=function(){var pp,_a=function(t,p){if(jsPlumb.Anchors[t])return new jsPlumb.Anchors[t](p);if(!_currentInstance.Defaults.DoNotThrowErrors)
throw{msg:"jsPlumb: unknown anchor type '"+t+"'"};};if(arguments.length===0)return null;var specimen=arguments[0],elementId=arguments[1],jsPlumbInstance=arguments[2],newAnchor=null;if(specimen.compute&&specimen.getOrientation)return specimen;else if(typeof specimen=="string"){newAnchor=_a(arguments[0],{elementId:elementId,jsPlumbInstance:_currentInstance});}
else if(_ju.isArray(specimen)){if(_ju.isArray(specimen[0])||_ju.isString(specimen[0])){if(specimen.length==2&&_ju.isObject(specimen[1])){if(_ju.isString(specimen[0])){pp=jsPlumb.extend({elementId:elementId,jsPlumbInstance:_currentInstance},specimen[1]);newAnchor=_a(specimen[0],pp);}
else{pp=jsPlumb.extend({elementId:elementId,jsPlumbInstance:_currentInstance,anchors:specimen[0]},specimen[1]);newAnchor=new jsPlumb.DynamicAnchor(pp);}}
else
newAnchor=new jsPlumb.DynamicAnchor({anchors:specimen,selector:null,elementId:elementId,jsPlumbInstance:_currentInstance});}
else{var anchorParams={x:specimen[0],y:specimen[1],orientation:(specimen.length>=4)?[specimen[2],specimen[3]]:[0,0],offsets:(specimen.length>=6)?[specimen[4],specimen[5]]:[0,0],elementId:elementId,jsPlumbInstance:_currentInstance,cssClass:specimen.length==7?specimen[6]:null};newAnchor=new jsPlumb.Anchor(anchorParams);newAnchor.clone=function(){return new jsPlumb.Anchor(anchorParams);};}}
if(!newAnchor.id)newAnchor.id="anchor_"+_idstamp();return newAnchor;};this.makeAnchors=function(types,elementId,jsPlumbInstance){var r=[];for(var i=0,ii=types.length;i<ii;i++){if(typeof types[i]=="string")
r.push(jsPlumb.Anchors[types[i]]({elementId:elementId,jsPlumbInstance:jsPlumbInstance}));else if(_ju.isArray(types[i]))
r.push(_currentInstance.makeAnchor(types[i],elementId,jsPlumbInstance));}
return r;};this.makeDynamicAnchor=function(anchors,anchorSelector){return new jsPlumb.DynamicAnchor({anchors:anchors,selector:anchorSelector,elementId:null,jsPlumbInstance:_currentInstance});};this.targetEndpointDefinitions={};var _setEndpointPaintStylesAndAnchor=function(ep,epIndex,_instance){ep.paintStyle=ep.paintStyle||_instance.Defaults.EndpointStyles[epIndex]||_instance.Defaults.EndpointStyle;ep.hoverPaintStyle=ep.hoverPaintStyle||_instance.Defaults.EndpointHoverStyles[epIndex]||_instance.Defaults.EndpointHoverStyle;ep.anchor=ep.anchor||_instance.Defaults.Anchors[epIndex]||_instance.Defaults.Anchor;ep.endpoint=ep.endpoint||_instance.Defaults.Endpoints[epIndex]||_instance.Defaults.Endpoint;};this.sourceEndpointDefinitions={};var selectorFilter=function(evt,_el,selector,_instance,negate){var t=evt.target||evt.srcElement,ok=false,sel=_instance.getSelector(_el,selector);for(var j=0;j<sel.length;j++){if(sel[j]==t){ok=true;break;}}
return negate?!ok:ok;};this.makeTarget=function(el,params,referenceParams){var p=jsPlumb.extend({_jsPlumb:this},referenceParams);jsPlumb.extend(p,params);_setEndpointPaintStylesAndAnchor(p,1,this);var targetScope=p.scope||_currentInstance.Defaults.Scope,deleteEndpointsOnDetach=!(p.deleteEndpointsOnDetach===false),maxConnections=p.maxConnections||-1,onMaxConnections=p.onMaxConnections,_doOne=function(el){var elInfo=_info(el),elid=elInfo.id,proxyComponent=new jsPlumbUIComponent(p),dropOptions=jsPlumb.extend({},p.dropOptions||{});_ensureContainer(elid);var _def={def:p,uniqueEndpoint:p.uniqueEndpoint,maxConnections:maxConnections,enabled:true};elInfo.el._jsPlumbTarget=_def;this.targetEndpointDefinitions[elid]=_def;var _drop=p._jsPlumb.EndpointDropHandler({jsPlumb:_currentInstance,enabled:function(){return elInfo.el._jsPlumbTarget.enabled;},isFull:function(originalEvent){var targetCount=_currentInstance.select({target:elid}).length;var def=elInfo.el._jsPlumbTarget;var full=def.maxConnections>0&&targetCount>=def.maxConnections;if(full&&onMaxConnections){onMaxConnections({element:elInfo.el,connection:jpc},originalEvent);}
return full;},element:elInfo.el,elementId:elid,isSource:false,isTarget:true,addClass:function(clazz){_currentInstance.addClass(elInfo.el,clazz);},removeClass:function(clazz){_currentInstance.removeClass(elInfo.el,clazz);},onDrop:function(jpc){var source=jpc.endpoints[0];source.anchor.locked=false;},isDropAllowed:function(){return proxyComponent.isDropAllowed.apply(proxyComponent,arguments);},getEndpoint:function(jpc){var _el=_currentInstance.getElementObject(elInfo.el),def=elInfo.el._jsPlumbTarget,newEndpoint=def.endpoint;if(newEndpoint==null||newEndpoint._jsPlumb==null)
newEndpoint=_currentInstance.addEndpoint(_el,p);if(p.uniqueEndpoint)def.endpoint=newEndpoint;newEndpoint._doNotDeleteOnDetach=false;newEndpoint._deleteOnDetach=true;if(jpc.isDetachable())
newEndpoint.initDraggable();if(newEndpoint.anchor.positionFinder!=null){var dropPosition=_currentInstance.getUIPosition(arguments,this.getZoom()),elPosition=_getOffset(_el,this),elSize=_currentInstance.getSize(_el),ap=newEndpoint.anchor.positionFinder(dropPosition,elPosition,elSize,newEndpoint.anchor.constructorParams);newEndpoint.anchor.x=ap[0];newEndpoint.anchor.y=ap[1];}
return newEndpoint;}});var dropEvent=jsPlumb.dragEvents.drop;dropOptions.scope=dropOptions.scope||targetScope;dropOptions[dropEvent]=_ju.wrap(dropOptions[dropEvent],_drop);if(p.allowLoopback===false){dropOptions.canDrop=function(_drag){var de=_drag.getDragElement()._jsPlumbRelatedElement;return de!=elInfo.el;};}
this.initDroppable(this.getElementObject(elInfo.el),dropOptions,"internal");}.bind(this);var inputs=el.length&&el.constructor!=String?el:[el];for(var i=0,ii=inputs.length;i<ii;i++){_doOne(inputs[i]);}
return this;};this.unmakeTarget=function(el,doNotClearArrays){var info=_info(el);jsPlumb.destroyDroppable(info.el);if(!doNotClearArrays){delete this.targetEndpointDefinitions[info.id];}
return this;};this.makeSource=function(el,params,referenceParams){var p=jsPlumb.extend({},referenceParams);jsPlumb.extend(p,params);_setEndpointPaintStylesAndAnchor(p,0,this);var maxConnections=p.maxConnections||1,onMaxConnections=p.onMaxConnections,_doOne=function(elInfo){var elid=elInfo.id,_el=this.getElementObject(elInfo.el),_del=this.getDOMElement(_el),parentElement=function(){return p.parent==null?null:p.parent==="parent"?elInfo.el.parentNode:_currentInstance.getDOMElement(p.parent);},idToRegisterAgainst=p.parent!=null?this.getId(parentElement()):elid;_ensureContainer(idToRegisterAgainst);this.sourceEndpointDefinitions[idToRegisterAgainst]={def:p,uniqueEndpoint:p.uniqueEndpoint,maxConnections:maxConnections,enabled:true};var stopEvent=jsPlumb.dragEvents.stop,dragEvent=jsPlumb.dragEvents.drag,dragOptions=jsPlumb.extend({},p.dragOptions||{}),existingDrag=dragOptions.drag,existingStop=dragOptions.stop,ep=null,endpointAddedButNoDragYet=false;dragOptions.scope=dragOptions.scope||p.scope;dragOptions[dragEvent]=_ju.wrap(dragOptions[dragEvent],function(){if(existingDrag)existingDrag.apply(this,arguments);endpointAddedButNoDragYet=false;});dragOptions[stopEvent]=_ju.wrap(dragOptions[stopEvent],function(){if(existingStop)existingStop.apply(this,arguments);this.currentlyDragging=false;if(ep._jsPlumb!=null){var anchorDef=p.anchor||this.Defaults.Anchor,oldAnchor=ep.anchor,oldConnection=ep.connections[0],newAnchor=this.makeAnchor(anchorDef,elid,this),_el=ep.element;if(newAnchor.positionFinder!=null){var elPosition=_getOffset(_el,this),elSize=this.getSize(_el),dropPosition={left:elPosition.left+(oldAnchor.x*elSize[0]),top:elPosition.top+(oldAnchor.y*elSize[1])},ap=newAnchor.positionFinder(dropPosition,elPosition,elSize,newAnchor.constructorParams);newAnchor.x=ap[0];newAnchor.y=ap[1];}
ep.setAnchor(newAnchor,true);if(p.parent){var parent=parentElement();if(parent){var potentialParent=p.container||_container;ep.setElement(parent,potentialParent);}}
ep.repaint();this.repaint(ep.elementId);this.repaint(oldConnection.targetId);}}.bind(this));var mouseDownListener=function(e){var evt=this.getOriginalEvent(e);if(e.which===3||e.button===2)return;var def=this.sourceEndpointDefinitions[idToRegisterAgainst];elid=this.getId(this.getDOMElement(_el));if(!def.enabled)return;if(p.filter){var r=jsPlumbUtil.isString(p.filter)?selectorFilter(evt,_el,p.filter,this,p.filterExclude):p.filter(evt,_el);if(r===false)return;}
var sourceCount=this.select({source:idToRegisterAgainst}).length;if(def.maxConnections>=0&&(def.uniqueEndpoint&&sourceCount>=def.maxConnections)){if(onMaxConnections){onMaxConnections({element:_el,maxConnections:maxConnections},e);}
return false;}
var elxy=jsPlumbAdapter.getPositionOnElement(evt,_del,_zoom),pelxy=elxy;var tempEndpointParams={};jsPlumb.extend(tempEndpointParams,p);tempEndpointParams.isTemporarySource=true;tempEndpointParams.anchor=[elxy[0],elxy[1],0,0];tempEndpointParams.dragOptions=dragOptions;ep=this.addEndpoint(elid,tempEndpointParams);endpointAddedButNoDragYet=true;ep.endpointWillMoveTo=p.parent?parentElement():null;if(def.uniqueEndpoint){if(!def.endpoint)
def.endpoint=ep;else
ep.finalEndpoint=def.endpoint;}
ep._doNotDeleteOnDetach=false;ep._deleteOnDetach=true;var _delTempEndpoint=function(){_currentInstance.off(ep.canvas,"mouseup",_delTempEndpoint);_currentInstance.off(_el,"mouseup",_delTempEndpoint);if(endpointAddedButNoDragYet){endpointAddedButNoDragYet=false;_currentInstance.deleteEndpoint(ep);}};_currentInstance.on(ep.canvas,"mouseup",_delTempEndpoint);_currentInstance.on(_el,"mouseup",_delTempEndpoint);_currentInstance.trigger(ep.canvas,"mousedown",e);jsPlumbUtil.consume(e);}.bind(this);this.on(_el,"mousedown",mouseDownListener);this.sourceEndpointDefinitions[idToRegisterAgainst].trigger=mouseDownListener;if(p.filter&&jsPlumbUtil.isString(p.filter)){_currentInstance.setDragFilter(_el,p.filter);}}.bind(this);var inputs=el.length&&el.constructor!=String?el:[el];for(var i=0,ii=inputs.length;i<ii;i++){_doOne(_info(inputs[i]));}
return this;};this.unmakeSource=function(el,doNotClearArrays){var info=_info(el),mouseDownListener=this.sourceEndpointDefinitions[info.id].trigger;if(mouseDownListener)
_currentInstance.off(info.el,"mousedown",mouseDownListener);if(!doNotClearArrays){delete this.sourceEndpointDefinitions[info.id];}
return this;};this.unmakeEverySource=function(){for(var i in this.sourceEndpointDefinitions)
_currentInstance.unmakeSource(i,true);this.sourceEndpointDefinitions={};return this;};var _getScope=function(el,types){types=jsPlumbUtil.isArray(types)?types:[types];var id=_getId(el);for(var i=0;i<types.length;i++){var def=this[types[i]][id];if(def)return def.def.scope||this.Defaults.Scope;}}.bind(this);var _setScope=function(el,scope,types){types=jsPlumbUtil.isArray(types)?types:[types];var id=_getId(el);for(var i=0;i<types.length;i++){var def=this[types[i]][id];if(def){def.def.scope=scope;if(this.scopeChange!=null)this.scopeChange(el,id,endpointsByElement[id],scope,types[i]);}}}.bind(this);this.getScope=function(el,scope){return _getScope(el,["sourceEndpointDefinitions","targetEndpointDefinitions"]);};this.getSourceScope=function(el){return _getScope(el,"sourceEndpointDefinitions");};this.getTargetScope=function(el){return _getScope(el,"targetEndpointDefinitions");};this.setScope=function(el,scope){_setScope(el,scope,["sourceEndpointDefinitions","targetEndpointDefinitions"]);};this.setSourceScope=function(el,scope){_setScope(el,scope,"sourceEndpointDefinitions");};this.setTargetScope=function(el,scope){_setScope(el,scope,"targetEndpointDefinitions");};this.unmakeEveryTarget=function(){for(var i in this.targetEndpointDefinitions)
_currentInstance.unmakeTarget(i,true);this.targetEndpointDefinitions={};return this;};var _setEnabled=function(type,el,state,toggle){var a=type=="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(_ju.isString(el))a[el].enabled=toggle?!a[el].enabled:state;else if(el.length){for(var i=0,ii=el.length;i<ii;i++){var info=_info(el[i]);if(a[info.id])
a[info.id].enabled=toggle?!a[info.id].enabled:state;}}
else{var id=_info(el).id;a[id].enabled=toggle?!a[id].enabled:state;}
return this;}.bind(this);var _first=function(el,fn){if(_ju.isString(el)||!el.length)
return fn.apply(this,[el]);else if(el.length)
return fn.apply(this,[el[0]]);}.bind(this);this.toggleSourceEnabled=function(el){_setEnabled("source",el,null,true);return this.isSourceEnabled(el);};this.setSourceEnabled=function(el,state){return _setEnabled("source",el,state);};this.isSource=function(el){return _first(el,function(_el){return this.sourceEndpointDefinitions[_info(_el).id]!=null;}.bind(this));};this.isSourceEnabled=function(el){return _first(el,function(_el){var sep=this.sourceEndpointDefinitions[_info(_el).id];return sep&&sep.enabled===true;}.bind(this));};this.toggleTargetEnabled=function(el){_setEnabled("target",el,null,true);return this.isTargetEnabled(el);};this.isTarget=function(el){return _first(el,function(_el){return this.targetEndpointDefinitions[_info(_el).id]!=null;}.bind(this));};this.isTargetEnabled=function(el){return _first(el,function(_el){var tep=this.targetEndpointDefinitions[_info(_el).id];return tep&&tep.enabled===true;}.bind(this));};this.setTargetEnabled=function(el,state){return _setEnabled("target",el,state);};this.ready=function(fn){_currentInstance.bind("ready",fn);};this.repaint=function(el,ui,timestamp){if(typeof el=='object'&&el.length)
for(var i=0,ii=el.length;i<ii;i++){_draw(el[i],ui,timestamp);}
else
_draw(el,ui,timestamp);return _currentInstance;};this.revalidate=function(el){var elId=_currentInstance.getId(el);_currentInstance.updateOffset({elId:elId,recalc:true});return _currentInstance.repaint(el);};this.repaintEverything=function(clearEdits){var timestamp=_timestamp(),elId;for(elId in endpointsByElement){_currentInstance.updateOffset({elId:elId,recalc:true,timestamp:timestamp});}
for(elId in endpointsByElement){_draw(elId,null,timestamp,clearEdits);}
return this;};this.removeAllEndpoints=function(el,recurse){var _one=function(_el){var info=_info(_el),ebe=endpointsByElement[info.id],i,ii;if(ebe){for(i=0,ii=ebe.length;i<ii;i++)
_currentInstance.deleteEndpoint(ebe[i]);}
delete endpointsByElement[info.id];if(recurse){if(info.el&&info.el.nodeType!=3&&info.el.nodeType!=8){for(i=0,ii=info.el.childNodes.length;i<ii;i++){_one(info.el.childNodes[i]);}}}};_one(el);return this;};this.remove=function(el,doNotRepaint){var info=_info(el);_currentInstance.doWhileSuspended(function(){_currentInstance.removeAllEndpoints(info.id,true);_currentInstance.dragManager.elementRemoved(info.id);delete _currentInstance.floatingConnections[info.id];_currentInstance.anchorManager.clearFor(info.id);_currentInstance.anchorManager.removeFloatingConnection(info.id);},doNotRepaint===false);_unmanage(info.id);if(info.el){_currentInstance.removeElement(info.el);info.el._jsPlumb=null;}
return _currentInstance;};this.reset=function(){_currentInstance.setSuspendEvents(true);_currentInstance.deleteEveryEndpoint();_currentInstance.unbind();this.targetEndpointDefinitions={};this.sourceEndpointDefinitions={};connections.length=0;_currentInstance.setSuspendEvents(false);};var _clearObject=function(obj){if(obj.canvas&&obj.canvas.parentNode)
obj.canvas.parentNode.removeChild(obj.canvas);obj.cleanup();obj.destroy();};var _clearOverlayObject=function(obj){_clearObject(obj);};this.clear=function(){_currentInstance.select().each(_clearOverlayObject);_currentInstance.selectEndpoints().each(_clearOverlayObject);endpointsByElement={};endpointsByUUID={};};this.setDefaultScope=function(scope){DEFAULT_SCOPE=scope;return _currentInstance;};this.setDraggable=_setDraggable;this.setId=function(el,newId,doNotSetAttribute){var id;if(jsPlumbUtil.isString(el)){id=el;}
else{el=this.getDOMElement(el);id=this.getId(el);}
var sConns=this.getConnections({source:id,scope:'*'},true),tConns=this.getConnections({target:id,scope:'*'},true);newId=""+newId;if(!doNotSetAttribute){el=this.getDOMElement(id);this.setAttribute(el,"id",newId);}
else
el=this.getDOMElement(newId);endpointsByElement[newId]=endpointsByElement[id]||[];for(var i=0,ii=endpointsByElement[newId].length;i<ii;i++){endpointsByElement[newId][i].setElementId(newId);endpointsByElement[newId][i].setReferenceElement(el);}
delete endpointsByElement[id];this.anchorManager.changeId(id,newId);if(this.dragManager)this.dragManager.changeId(id,newId);managedElements[newId]=managedElements[id];delete managedElements[id];var _conns=function(list,epIdx,type){for(var i=0,ii=list.length;i<ii;i++){list[i].endpoints[epIdx].setElementId(newId);list[i].endpoints[epIdx].setReferenceElement(el);list[i][type+"Id"]=newId;list[i][type]=el;}};_conns(sConns,0,"source");_conns(tConns,1,"target");this.repaint(newId);};this.setDebugLog=function(debugLog){log=debugLog;};this.setSuspendDrawing=function(val,repaintAfterwards){var curVal=_suspendDrawing;_suspendDrawing=val;if(val)_suspendedAt=new Date().getTime();else _suspendedAt=null;if(repaintAfterwards)this.repaintEverything();return curVal;};this.isSuspendDrawing=function(){return _suspendDrawing;};this.getSuspendedAt=function(){return _suspendedAt;};this.doWhileSuspended=function(fn,doNotRepaintAfterwards){var _wasSuspended=this.isSuspendDrawing();if(!_wasSuspended)
this.setSuspendDrawing(true);try{fn();}
catch(e){_ju.log("Function run while suspended failed",e);}
if(!_wasSuspended)
this.setSuspendDrawing(false,!doNotRepaintAfterwards);};this.getOffset=function(elId){return offsets[elId];};this.getCachedData=_getCachedData;this.timestamp=_timestamp;this.setRenderMode=function(mode){if(mode!==jsPlumb.SVG&&mode!==jsPlumb.VML)throw new TypeError("Render mode ["+mode+"] not supported");renderMode=jsPlumbAdapter.setRenderMode(mode);return renderMode;};this.getRenderMode=function(){return renderMode;};this.show=function(el,changeEndpoints){_setVisible(el,"block",changeEndpoints);return _currentInstance;};this.toggleVisible=_toggleVisible;this.toggleDraggable=_toggleDraggable;this.addListener=this.bind;if(!jsPlumbAdapter.headless){_currentInstance.dragManager=jsPlumbAdapter.getDragManager(_currentInstance);_currentInstance.recalculateOffsets=_currentInstance.dragManager.updateOffsets;}};jsPlumbUtil.extend(jsPlumbInstance,jsPlumbUtil.EventGenerator,{setAttribute:function(el,a,v){this.setAttribute(el,a,v);},getAttribute:function(el,a){return this.getAttribute(jsPlumb.getDOMElement(el),a);},registerConnectionType:function(id,type){this._connectionTypes[id]=jsPlumb.extend({},type);},registerConnectionTypes:function(types){for(var i in types)
this._connectionTypes[i]=jsPlumb.extend({},types[i]);},registerEndpointType:function(id,type){this._endpointTypes[id]=jsPlumb.extend({},type);},registerEndpointTypes:function(types){for(var i in types)
this._endpointTypes[i]=jsPlumb.extend({},types[i]);},getType:function(id,typeDescriptor){return typeDescriptor==="connection"?this._connectionTypes[id]:this._endpointTypes[id];},setIdChanged:function(oldId,newId){this.setId(oldId,newId,true);},setParent:function(el,newParent){var _el=this.getElementObject(el),_dom=this.getDOMElement(_el),_id=this.getId(_dom),_pel=this.getElementObject(newParent),_pdom=this.getDOMElement(_pel),_pid=this.getId(_pdom);_dom.parentNode.removeChild(_dom);_pdom.appendChild(_dom);this.dragManager.setParent(_el,_id,_pel,_pid);},getSize:function(el){return[el.offsetWidth,el.offsetHeight];},getWidth:function(el){return el.offsetWidth;},getHeight:function(el){return el.offsetHeight;},extend:function(o1,o2,names){var i;if(names){for(i=0;i<names.length;i++)
o1[names[i]]=o2[names[i]];}
else
for(i in o2)o1[i]=o2[i];return o1;},floatingConnections:{},getFloatingAnchorIndex:function(jpc){return jpc.endpoints[0].isFloating()?0:1;}},jsPlumbAdapter);var jsPlumb=new jsPlumbInstance();if(typeof window!='undefined')window.jsPlumb=jsPlumb;jsPlumb.getInstance=function(_defaults){var j=new jsPlumbInstance(_defaults);j.init();return j;};if(typeof define==="function"){define("jsplumb",[],function(){return jsPlumb;});define("jsplumbinstance",[],function(){return jsPlumb.getInstance();});}
if(typeof exports!=='undefined'){exports.jsPlumb=jsPlumb;}})();;;;(function(){"use strict";var _makeConnectionDragHandler=function(placeholder,_jsPlumb){var stopped=false;return{drag:function(){if(stopped){stopped=false;return true;}
var _ui=jsPlumb.getUIPosition(arguments,_jsPlumb.getZoom());if(placeholder.element){jsPlumbAdapter.setPosition(placeholder.element,_ui);_jsPlumb.repaint(placeholder.element,_ui);}},stopDrag:function(){stopped=true;}};};var _makeDraggablePlaceholder=function(placeholder,_jsPlumb){var n=document.createElement("div");n.style.position="absolute";var parent=_jsPlumb.getContainer()||document.body;parent.appendChild(n);var id=_jsPlumb.getId(n);_jsPlumb.manage(id,n);placeholder.id=id;placeholder.element=n;};var _makeFloatingEndpoint=function(paintStyle,referenceAnchor,endpoint,referenceCanvas,sourceElement,_jsPlumb,_newEndpoint,scope){var floatingAnchor=new jsPlumb.FloatingAnchor({reference:referenceAnchor,referenceCanvas:referenceCanvas,jsPlumbInstance:_jsPlumb});return _newEndpoint({paintStyle:paintStyle,endpoint:endpoint,anchor:floatingAnchor,source:sourceElement,scope:scope});};var typeParameters=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"];var findConnectionToUseForDynamicAnchor=function(ep,elementWithPrecedence){var idx=0;if(elementWithPrecedence!=null){for(var i=0;i<ep.connections.length;i++){if(ep.connections[i].sourceId==elementWithPrecedence||ep.connections[i].targetId==elementWithPrecedence){idx=i;break;}}}
return ep.connections[idx];};var findConnectionIndex=function(conn,ep){return jsPlumbUtil.findWithFunction(ep.connections,function(c){return c.id==conn.id;});};jsPlumb.Endpoint=function(params){var _jsPlumb=params._jsPlumb,_gel=jsPlumb.getElementObject,_ju=jsPlumbUtil,_newConnection=params.newConnection,_newEndpoint=params.newEndpoint,_finaliseConnection=params.finaliseConnection,_fireMoveEvent=params.fireMoveEvent;this.idPrefix="_jsplumb_e_";this.defaultLabelLocation=[0.5,0.5];this.defaultOverlayKeys=["Overlays","EndpointOverlays"];OverlayCapableJsPlumbUIComponent.apply(this,arguments);this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:params.connectorStyle,connectorHoverStyle:params.connectorHoverStyle,connectorClass:params.connectorClass,connectorHoverClass:params.connectorHoverClass,connectorOverlays:params.connectorOverlays,connector:params.connector,connectorTooltip:params.connectorTooltip};};this._jsPlumb.enabled=!(params.enabled===false);this._jsPlumb.visible=true;this.element=jsPlumb.getDOMElement(params.source);this._jsPlumb.uuid=params.uuid;this._jsPlumb.floatingEndpoint=null;var inPlaceCopy=null;if(this._jsPlumb.uuid)params.endpointsByUUID[this._jsPlumb.uuid]=this;this.elementId=params.elementId;this._jsPlumb.connectionCost=params.connectionCost;this._jsPlumb.connectionsDirected=params.connectionsDirected;this._jsPlumb.currentAnchorClass="";this._jsPlumb.events={};var _updateAnchorClass=function(){var oldAnchorClass=this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();jsPlumbAdapter.updateClasses(this.element,_jsPlumb.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass,_jsPlumb.endpointAnchorClassPrefix+"_"+oldAnchorClass);this.updateClasses(_jsPlumb.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass,_jsPlumb.endpointAnchorClassPrefix+"_"+oldAnchorClass);}.bind(this);this.setAnchor=function(anchorParams,doNotRepaint){this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId);this.anchor=this._jsPlumb.instance.makeAnchor(anchorParams,this.elementId,_jsPlumb);_updateAnchorClass();this.anchor.bind("anchorChanged",function(currentAnchor){this.fire("anchorChanged",{endpoint:this,anchor:currentAnchor});_updateAnchorClass();}.bind(this));if(!doNotRepaint)
this._jsPlumb.instance.repaint(this.elementId);return this;};var anchorParamsToUse=params.anchor?params.anchor:params.anchors?params.anchors:(_jsPlumb.Defaults.Anchor||"Top");this.setAnchor(anchorParamsToUse,true);var internalHover=function(state){if(this.connections.length>0){for(var i=0;i<this.connections.length;i++)
this.connections[i].setHover(state,false);}
else
this.setHover(state);}.bind(this);this.bind("mouseover",function(){internalHover(true);});this.bind("mouseout",function(){internalHover(false);});if(!params._transient)
this._jsPlumb.instance.anchorManager.add(this,this.elementId);this.setEndpoint=function(ep){if(this.endpoint!=null){this.endpoint.cleanup();this.endpoint.destroy();}
var _e=function(t,p){var rm=_jsPlumb.getRenderMode();if(jsPlumb.Endpoints[rm][t])return new jsPlumb.Endpoints[rm][t](p);if(!_jsPlumb.Defaults.DoNotThrowErrors)
throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"};};var endpointArgs={_jsPlumb:this._jsPlumb.instance,cssClass:params.cssClass,container:params.container,tooltip:params.tooltip,connectorTooltip:params.connectorTooltip,endpoint:this};if(_ju.isString(ep))
this.endpoint=_e(ep,endpointArgs);else if(_ju.isArray(ep)){endpointArgs=_ju.merge(ep[1],endpointArgs);this.endpoint=_e(ep[0],endpointArgs);}
else{this.endpoint=ep.clone();}
this.endpoint.clone=function(){if(_ju.isString(ep))
return _e(ep,endpointArgs);else if(_ju.isArray(ep)){endpointArgs=_ju.merge(ep[1],endpointArgs);return _e(ep[0],endpointArgs);}}.bind(this);this.type=this.endpoint.type;};this.setEndpoint(params.endpoint||_jsPlumb.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot");this.setPaintStyle(params.endpointStyle||params.paintStyle||params.style||_jsPlumb.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,true);this.setHoverPaintStyle(params.endpointHoverStyle||params.hoverPaintStyle||_jsPlumb.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,true);this._jsPlumb.paintStyleInUse=this.getPaintStyle();jsPlumb.extend(this,params,typeParameters);this.isSource=params.isSource||false;this.isTemporarySource=params.isTemporarySource||false;this.isTarget=params.isTarget||false;this._jsPlumb.maxConnections=params.maxConnections||_jsPlumb.Defaults.MaxConnections;this.canvas=this.endpoint.canvas;this.canvas._jsPlumb=this;this.addClass(_jsPlumb.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);jsPlumbAdapter.addClass(this.element,_jsPlumb.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this.connections=params.connections||[];this.connectorPointerEvents=params["connector-pointer-events"];this.scope=params.scope||_jsPlumb.getDefaultScope();this.timestamp=null;this.reattachConnections=params.reattach||_jsPlumb.Defaults.ReattachConnections;this.connectionsDetachable=_jsPlumb.Defaults.ConnectionsDetachable;if(params.connectionsDetachable===false||params.detachable===false)
this.connectionsDetachable=false;this.dragAllowedWhenFull=params.dragAllowedWhenFull!==false;if(params.onMaxConnections)
this.bind("maxConnections",params.onMaxConnections);this.addConnection=function(connection){this.connections.push(connection);this[(this.connections.length>0?"add":"remove")+"Class"](_jsPlumb.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](_jsPlumb.endpointFullClass);};this.detachFromConnection=function(connection,idx,doNotCleanup){idx=idx==null?findConnectionIndex(connection,this):idx;if(idx>=0){this.connections.splice(idx,1);this[(this.connections.length>0?"add":"remove")+"Class"](_jsPlumb.endpointConnectedClass);this[(this.isFull()?"add":"remove")+"Class"](_jsPlumb.endpointFullClass);}
if(!doNotCleanup&&this._deleteOnDetach&&this.connections.length===0){_jsPlumb.deleteObject({endpoint:this,fireEvent:false,deleteAttachedObjects:false});}};this.detach=function(connection,ignoreTarget,forceDetach,fireEvent,originalEvent,endpointBeingDeleted,connectionIndex){var idx=connectionIndex==null?findConnectionIndex(connection,this):connectionIndex,actuallyDetached=false;fireEvent=(fireEvent!==false);if(idx>=0){if(forceDetach||connection._forceDetach||(connection.isDetachable()&&connection.isDetachAllowed(connection)&&this.isDetachAllowed(connection)&&_jsPlumb.checkCondition("beforeDetach",connection))){_jsPlumb.deleteObject({connection:connection,fireEvent:(!ignoreTarget&&fireEvent),originalEvent:originalEvent,deleteAttachedObjects:false});actuallyDetached=true;}}
return actuallyDetached;};this.detachAll=function(fireEvent,originalEvent){while(this.connections.length>0){this.detach(this.connections[0],false,true,fireEvent!==false,originalEvent,this,0);}
return this;};this.detachFrom=function(targetEndpoint,fireEvent,originalEvent){var c=[];for(var i=0;i<this.connections.length;i++){if(this.connections[i].endpoints[1]==targetEndpoint||this.connections[i].endpoints[0]==targetEndpoint){c.push(this.connections[i]);}}
for(var j=0;j<c.length;j++){this.detach(c[j],false,true,fireEvent,originalEvent);}
return this;};this.getElement=function(){return this.element;};this.setElement=function(el){var parentId=this._jsPlumb.instance.getId(el),curId=this.elementId;_ju.removeWithFunction(params.endpointsByElement[this.elementId],function(e){return e.id==this.id;}.bind(this));this.element=jsPlumb.getDOMElement(el);this.elementId=_jsPlumb.getId(this.element);_jsPlumb.anchorManager.rehomeEndpoint(this,curId,this.element);_jsPlumb.dragManager.endpointAdded(this.element);_ju.addToList(params.endpointsByElement,parentId,this);return this;};this.makeInPlaceCopy=function(){var loc=this.anchor.getCurrentLocation({element:this}),o=this.anchor.getOrientation(this),acc=this.anchor.getCssClass(),inPlaceAnchor={bind:function(){},compute:function(){return[loc[0],loc[1]];},getCurrentLocation:function(){return[loc[0],loc[1]];},getOrientation:function(){return o;},getCssClass:function(){return acc;}};return _newEndpoint({dropOptions:params.dropOptions,anchor:inPlaceAnchor,source:this.element,paintStyle:this.getPaintStyle(),endpoint:params.hideOnDrag?"Blank":this.endpoint,_transient:true,scope:this.scope});};this.connectorSelector=function(){var candidate=this.connections[0];if(this.isTarget&&candidate)return candidate;else{return(this.connections.length<this._jsPlumb.maxConnections)||this._jsPlumb.maxConnections==-1?null:candidate;}};this.setStyle=this.setPaintStyle;this.paint=function(params){params=params||{};var timestamp=params.timestamp,recalc=!(params.recalc===false);if(!timestamp||this.timestamp!==timestamp){var info=_jsPlumb.updateOffset({elId:this.elementId,timestamp:timestamp});var xy=params.offset?params.offset.o:info.o;if(xy!=null){var ap=params.anchorPoint,connectorPaintStyle=params.connectorPaintStyle;if(ap==null){var wh=params.dimensions||info.s,anchorParams={xy:[xy.left,xy.top],wh:wh,element:this,timestamp:timestamp};if(recalc&&this.anchor.isDynamic&&this.connections.length>0){var c=findConnectionToUseForDynamicAnchor(this,params.elementWithPrecedence),oIdx=c.endpoints[0]==this?1:0,oId=oIdx===0?c.sourceId:c.targetId,oInfo=_jsPlumb.getCachedData(oId),oOffset=oInfo.o,oWH=oInfo.s;anchorParams.txy=[oOffset.left,oOffset.top];anchorParams.twh=oWH;anchorParams.tElement=c.endpoints[oIdx];}
ap=this.anchor.compute(anchorParams);}
this.endpoint.compute(ap,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,connectorPaintStyle||this.paintStyleInUse);this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor);this.timestamp=timestamp;for(var i=0;i<this._jsPlumb.overlays.length;i++){var o=this._jsPlumb.overlays[i];if(o.isVisible()){this._jsPlumb.overlayPlacements[i]=o.draw(this.endpoint,this._jsPlumb.paintStyleInUse);o.paint(this._jsPlumb.overlayPlacements[i]);}}}}};this.repaint=this.paint;var draggingInitialised=false;this.initDraggable=function(){if(!draggingInitialised&&jsPlumb.isDragSupported(this.element)){var placeholderInfo={id:null,element:null},jpc=null,existingJpc=false,existingJpcParams=null,_dragHandler=_makeConnectionDragHandler(placeholderInfo,_jsPlumb),dragOptions=params.dragOptions||{},defaultOpts={},startEvent=jsPlumb.dragEvents.start,stopEvent=jsPlumb.dragEvents.stop,dragEvent=jsPlumb.dragEvents.drag;var start=function(){jpc=this.connectorSelector();var _continue=true;if(!this.isEnabled())_continue=false;if(jpc==null&&!this.isSource&&!this.isTemporarySource)_continue=false;if(this.isSource&&this.isFull()&&!this.dragAllowedWhenFull)_continue=false;if(jpc!=null&&!jpc.isDetachable())_continue=false;if(_continue===false){if(_jsPlumb.stopDrag)_jsPlumb.stopDrag(this.canvas);_dragHandler.stopDrag();return false;}
for(var i=0;i<this.connections.length;i++)
this.connections[i].setHover(false);this.addClass("endpointDrag");_jsPlumb.setConnectionBeingDragged(true);if(jpc&&!this.isFull()&&this.isSource)jpc=null;_jsPlumb.updateOffset({elId:this.elementId});inPlaceCopy=this.makeInPlaceCopy();inPlaceCopy.referenceEndpoint=this;inPlaceCopy.paint();_makeDraggablePlaceholder(placeholderInfo,_jsPlumb);var ipcoel=_gel(inPlaceCopy.canvas),ipco=jsPlumbAdapter.getOffset(ipcoel,this._jsPlumb.instance),canvasElement=_gel(this.canvas);jsPlumbAdapter.setPosition(placeholderInfo.element,ipco);if(this.parentAnchor)this.anchor=_jsPlumb.makeAnchor(this.parentAnchor,this.elementId,_jsPlumb);_jsPlumb.setAttribute(this.canvas,"dragId",placeholderInfo.id);_jsPlumb.setAttribute(this.canvas,"elId",this.elementId);this._jsPlumb.floatingEndpoint=_makeFloatingEndpoint(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,placeholderInfo.element,_jsPlumb,_newEndpoint,this.scope);this.canvas.style.visibility="hidden";if(jpc==null){this.anchor.locked=true;this.setHover(false,false);jpc=_newConnection({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:placeholderInfo.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:params.connectorStyle,hoverPaintStyle:params.connectorHoverStyle,connector:params.connector,overlays:params.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass});jpc.addClass(_jsPlumb.draggingClass);this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);_jsPlumb.fire("connectionDrag",jpc);}else{existingJpc=true;jpc.setHover(false);var anchorIdx=jpc.endpoints[0].id==this.id?0:1;this.detachFromConnection(jpc,null,true);var dragScope=_jsPlumb.getDragScope(canvasElement);_jsPlumb.setAttribute(this.canvas,"originalScope",dragScope);var dropScope=_jsPlumb.getDropScope(canvasElement);_jsPlumb.setDragScope(canvasElement,dropScope);_jsPlumb.fire("connectionDrag",jpc);if(anchorIdx===0){existingJpcParams=[jpc.source,jpc.sourceId,canvasElement,dragScope];jpc.source=placeholderInfo.element;jpc.sourceId=placeholderInfo.id;}else{existingJpcParams=[jpc.target,jpc.targetId,canvasElement,dragScope];jpc.target=placeholderInfo.element;jpc.targetId=placeholderInfo.id;}
jpc.endpoints[anchorIdx===0?1:0].anchor.locked=true;jpc.suspendedEndpoint=jpc.endpoints[anchorIdx];jpc.suspendedElement=jpc.endpoints[anchorIdx].getElement();jpc.suspendedElementId=jpc.endpoints[anchorIdx].elementId;jpc.suspendedElementType=anchorIdx===0?"source":"target";jpc.suspendedEndpoint.setHover(false);this._jsPlumb.floatingEndpoint.referenceEndpoint=jpc.suspendedEndpoint;jpc.endpoints[anchorIdx]=this._jsPlumb.floatingEndpoint;jpc.addClass(_jsPlumb.draggingClass);this._jsPlumb.floatingEndpoint.addClass(_jsPlumb.draggingClass);}
_jsPlumb.floatingConnections[placeholderInfo.id]=jpc;_jsPlumb.anchorManager.addFloatingConnection(placeholderInfo.id,jpc);_ju.addToList(params.endpointsByElement,placeholderInfo.id,this._jsPlumb.floatingEndpoint);_jsPlumb.currentlyDragging=true;}.bind(this);var stop=function(){_jsPlumb.setConnectionBeingDragged(false);if(jpc&&jpc.endpoints!=null){var originalEvent=_jsPlumb.getDropEvent(arguments);var idx=_jsPlumb.getFloatingAnchorIndex(jpc);jpc.endpoints[idx===0?1:0].anchor.locked=false;jpc.removeClass(_jsPlumb.draggingClass);if(this._jsPlumb&&(jpc.deleteConnectionNow||jpc.endpoints[idx]==this._jsPlumb.floatingEndpoint)){if(existingJpc&&jpc.suspendedEndpoint){if(idx===0){jpc.source=existingJpcParams[0];jpc.sourceId=existingJpcParams[1];}else{jpc.target=existingJpcParams[0];jpc.targetId=existingJpcParams[1];}
var fe=this._jsPlumb.floatingEndpoint;_jsPlumb.setDragScope(existingJpcParams[2],existingJpcParams[3]);jpc.endpoints[idx]=jpc.suspendedEndpoint;if(jpc.isReattach()||jpc._forceReattach||jpc._forceDetach||!jpc.endpoints[idx===0?1:0].detach(jpc,false,false,true,originalEvent)){jpc.setHover(false);jpc._forceDetach=null;jpc._forceReattach=null;this._jsPlumb.floatingEndpoint.detachFromConnection(jpc);jpc.suspendedEndpoint.addConnection(jpc);_jsPlumb.repaint(existingJpcParams[1]);}
else
_jsPlumb.deleteObject({endpoint:fe});}}
_jsPlumb.remove(placeholderInfo.element,false);_jsPlumb.deleteObject({endpoint:inPlaceCopy});if(this.deleteAfterDragStop){_jsPlumb.deleteObject({endpoint:this});}
else{if(this._jsPlumb){this._jsPlumb.floatingEndpoint=null;this.canvas.style.visibility="visible";this.anchor.locked=false;this.paint({recalc:false});}}
_jsPlumb.fire("connectionDragStop",jpc,originalEvent);_jsPlumb.currentlyDragging=false;jpc=null;}}.bind(this);dragOptions=jsPlumb.extend(defaultOpts,dragOptions);dragOptions.scope=this.scope||dragOptions.scope;dragOptions[startEvent]=_ju.wrap(dragOptions[startEvent],start,false);dragOptions[dragEvent]=_ju.wrap(dragOptions[dragEvent],_dragHandler.drag);dragOptions[stopEvent]=_ju.wrap(dragOptions[stopEvent],stop);dragOptions.canDrag=function(){return this.isSource||this.isTemporarySource||(this.isTarget&&this.connections.length>0);}.bind(this);_jsPlumb.initDraggable(this.canvas,dragOptions,"internal");this.canvas._jsPlumbRelatedElement=this.element;draggingInitialised=true;}};if(this.isSource||this.isTarget||this.isTemporarySource)
this.initDraggable();var _initDropTarget=function(canvas,forceInit,isTransient,endpoint){if((this.isTarget||forceInit)&&jsPlumb.isDropSupported(this.element)){var dropOptions=params.dropOptions||_jsPlumb.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;dropOptions=jsPlumb.extend({},dropOptions);dropOptions.scope=dropOptions.scope||this.scope;var dropEvent=jsPlumb.dragEvents.drop,overEvent=jsPlumb.dragEvents.over,outEvent=jsPlumb.dragEvents.out,_ep=this,drop=_jsPlumb.EndpointDropHandler({getEndpoint:function(){return _ep;},jsPlumb:_jsPlumb,enabled:function(){return endpoint!=null?endpoint.isEnabled():true;},isFull:function(){return endpoint.isFull();},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(clazz){_ep.addClass(clazz);},removeClass:function(clazz){_ep.removeClass(clazz);},isDropAllowed:function(){return _ep.isDropAllowed.apply(_ep,arguments);}});dropOptions[dropEvent]=_ju.wrap(dropOptions[dropEvent],drop);dropOptions[overEvent]=_ju.wrap(dropOptions[overEvent],function(){var draggable=jsPlumb.getDragObject(arguments),id=_jsPlumb.getAttribute(jsPlumb.getDOMElement(draggable),"dragId"),_jpc=_jsPlumb.floatingConnections[id];if(_jpc!=null){var idx=_jsPlumb.getFloatingAnchorIndex(_jpc);var _cont=(this.isTarget&&idx!==0)||(_jpc.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==_jpc.suspendedEndpoint.id);if(_cont){var bb=_jsPlumb.checkCondition("checkDropAllowed",{sourceEndpoint:_jpc.endpoints[idx],targetEndpoint:this,connection:_jpc});this[(bb?"add":"remove")+"Class"](_jsPlumb.endpointDropAllowedClass);this[(bb?"remove":"add")+"Class"](_jsPlumb.endpointDropForbiddenClass);_jpc.endpoints[idx].anchor.over(this.anchor,this);}}}.bind(this));dropOptions[outEvent]=_ju.wrap(dropOptions[outEvent],function(){var draggable=jsPlumb.getDragObject(arguments),id=draggable==null?null:_jsPlumb.getAttribute(jsPlumb.getDOMElement(draggable),"dragId"),_jpc=id?_jsPlumb.floatingConnections[id]:null;if(_jpc!=null){var idx=_jsPlumb.getFloatingAnchorIndex(_jpc);var _cont=(this.isTarget&&idx!==0)||(_jpc.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==_jpc.suspendedEndpoint.id);if(_cont){this.removeClass(_jsPlumb.endpointDropAllowedClass);this.removeClass(_jsPlumb.endpointDropForbiddenClass);_jpc.endpoints[idx].anchor.out();}}}.bind(this));_jsPlumb.initDroppable(canvas,dropOptions,"internal",isTransient);}}.bind(this);if(!this.anchor.isFloating)
_initDropTarget(_gel(this.canvas),true,!(params._transient||this.anchor.isFloating),this);if(params.type)
this.addType(params.type,params.data,_jsPlumb.isSuspendDrawing());return this;};jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint";},isVisible:function(){return this._jsPlumb.visible;},setVisible:function(v,doNotChangeConnections,doNotNotifyOtherEndpoint){this._jsPlumb.visible=v;if(this.canvas)this.canvas.style.display=v?"block":"none";this[v?"showOverlays":"hideOverlays"]();if(!doNotChangeConnections){for(var i=0;i<this.connections.length;i++){this.connections[i].setVisible(v);if(!doNotNotifyOtherEndpoint){var oIdx=this===this.connections[i].endpoints[0]?1:0;if(this.connections[i].endpoints[oIdx].connections.length==1)this.connections[i].endpoints[oIdx].setVisible(v,true,true);}}}},getAttachedElements:function(){return this.connections;},applyType:function(t){this.setPaintStyle(t.endpointStyle||t.paintStyle);this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle);if(t.maxConnections!=null)this._jsPlumb.maxConnections=t.maxConnections;if(t.scope)this.scope=t.scope;jsPlumb.extend(this,t,typeParameters);if(t.anchor){this.anchor=this._jsPlumb.instance.makeAnchor(t.anchor);}
if(t.cssClass!=null&&this.canvas)this._jsPlumb.instance.addClass(this.canvas,t.cssClass);},isEnabled:function(){return this._jsPlumb.enabled;},setEnabled:function(e){this._jsPlumb.enabled=e;},cleanup:function(){jsPlumbAdapter.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass);this.anchor=null;this.endpoint.cleanup();this.endpoint.destroy();this.endpoint=null;var i=jsPlumb.getElementObject(this.canvas);this._jsPlumb.instance.destroyDraggable(i,"internal");this._jsPlumb.instance.destroyDroppable(i,"internal");},setHover:function(h){if(this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())
this.endpoint.setHover(h);},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections);},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating;},isConnectedTo:function(endpoint){var found=false;if(endpoint){for(var i=0;i<this.connections.length;i++){if(this.connections[i].endpoints[1]==endpoint||this.connections[i].endpoints[0]==endpoint){found=true;break;}}}
return found;},getConnectionCost:function(){return this._jsPlumb.connectionCost;},setConnectionCost:function(c){this._jsPlumb.connectionCost=c;},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected;},setConnectionsDirected:function(b){this._jsPlumb.connectionsDirected=b;},setElementId:function(_elId){this.elementId=_elId;this.anchor.elementId=_elId;},setReferenceElement:function(_el){this.element=jsPlumb.getDOMElement(_el);},setDragAllowedWhenFull:function(allowed){this.dragAllowedWhenFull=allowed;},equals:function(endpoint){return this.anchor.equals(endpoint.anchor);},getUuid:function(){return this._jsPlumb.uuid;},computeAnchor:function(params){return this.anchor.compute(params);}});jsPlumbInstance.prototype.EndpointDropHandler=function(dhParams){return function(e){var _jsPlumb=dhParams.jsPlumb;dhParams.removeClass(_jsPlumb.endpointDropAllowedClass);dhParams.removeClass(_jsPlumb.endpointDropForbiddenClass);var originalEvent=_jsPlumb.getDropEvent(arguments),draggable=_jsPlumb.getDOMElement(_jsPlumb.getDragObject(arguments)),id=_jsPlumb.getAttribute(draggable,"dragId"),elId=_jsPlumb.getAttribute(draggable,"elId"),scope=_jsPlumb.getAttribute(draggable,"originalScope"),jpc=_jsPlumb.floatingConnections[id];if(jpc==null)return;var _ep=dhParams.getEndpoint(jpc);if(dhParams.onDrop)dhParams.onDrop(jpc);var redrop=jpc.suspendedEndpoint&&(jpc.suspendedEndpoint.id==_ep.id||_ep.referenceEndpoint&&jpc.suspendedEndpoint.id==_ep.referenceEndpoint.id);if(redrop){jpc._forceReattach=true;jpc.setHover(false);return;}
var idx=_jsPlumb.getFloatingAnchorIndex(jpc);if(scope)_jsPlumb.setDragScope(draggable,scope);if(dhParams.isFull(e)){_ep.fire("maxConnections",{endpoint:this,connection:jpc,maxConnections:_ep._jsPlumb.maxConnections},originalEvent);}
if(!dhParams.isFull()&&!(idx===0&&!dhParams.isSource)&&!(idx==1&&!dhParams.isTarget)&&dhParams.enabled()){var _doContinue=true;if(jpc.suspendedEndpoint&&jpc.suspendedEndpoint.id!=_ep.id){if(!jpc.isDetachAllowed(jpc)||!jpc.endpoints[idx].isDetachAllowed(jpc)||!jpc.suspendedEndpoint.isDetachAllowed(jpc)||!_jsPlumb.checkCondition("beforeDetach",jpc))
_doContinue=false;}
if(idx===0){jpc.source=dhParams.element;jpc.sourceId=dhParams.elementId;}else{jpc.target=dhParams.element;jpc.targetId=dhParams.elementId;}
var continueFunction=function(){jpc.endpoints[idx].detachFromConnection(jpc);if(jpc.suspendedEndpoint)jpc.suspendedEndpoint.detachFromConnection(jpc);jpc.endpoints[idx]=_ep;_ep.addConnection(jpc);var params=_ep.getParameters();for(var aParam in params)
jpc.setParameter(aParam,params[aParam]);if(!jpc.suspendedEndpoint){if(params.draggable)
_jsPlumb.initDraggable(this.element,dragOptions,"internal",_jsPlumb);}
else{var suspendedElementId=jpc.suspendedEndpoint.elementId;_jsPlumb.fireMoveEvent({index:idx,originalSourceId:idx===0?suspendedElementId:jpc.sourceId,newSourceId:idx===0?_ep.elementId:jpc.sourceId,originalTargetId:idx==1?suspendedElementId:jpc.targetId,newTargetId:idx==1?_ep.elementId:jpc.targetId,originalSourceEndpoint:idx===0?jpc.suspendedEndpoint:jpc.endpoints[0],newSourceEndpoint:idx===0?_ep:jpc.endpoints[0],originalTargetEndpoint:idx==1?jpc.suspendedEndpoint:jpc.endpoints[1],newTargetEndpoint:idx==1?_ep:jpc.endpoints[1],connection:jpc},originalEvent);}
if(idx==1)
_jsPlumb.anchorManager.updateOtherEndpoint(jpc.sourceId,jpc.suspendedElementId,jpc.targetId,jpc);else
_jsPlumb.anchorManager.sourceChanged(jpc.suspendedEndpoint.elementId,jpc.sourceId,jpc);if(jpc.endpoints[0].finalEndpoint){var _toDelete=jpc.endpoints[0];_toDelete.detachFromConnection(jpc);jpc.endpoints[0]=jpc.endpoints[0].finalEndpoint;jpc.endpoints[0].addConnection(jpc);}
_jsPlumb.finaliseConnection(jpc,null,originalEvent);jpc.setHover(false);}.bind(this);var dontContinueFunction=function(){if(jpc.suspendedEndpoint){jpc.endpoints[idx]=jpc.suspendedEndpoint;jpc.setHover(false);jpc._forceDetach=true;if(idx===0){jpc.source=jpc.suspendedEndpoint.element;jpc.sourceId=jpc.suspendedEndpoint.elementId;}else{jpc.target=jpc.suspendedEndpoint.element;jpc.targetId=jpc.suspendedEndpoint.elementId;}
jpc.suspendedEndpoint.addConnection(jpc);_jsPlumb.repaint(jpc.sourceId);jpc._forceDetach=false;}};_doContinue=_doContinue&&dhParams.isDropAllowed(jpc.sourceId,jpc.targetId,jpc.scope,jpc,_ep);if(_doContinue){continueFunction();}
else{dontContinueFunction();}}
_jsPlumb.currentlyDragging=false;};};})();;;;(function(){"use strict";var makeConnector=function(_jsPlumb,renderMode,connectorName,connectorArgs,forComponent){if(!_jsPlumb.Defaults.DoNotThrowErrors&&jsPlumb.Connectors[renderMode][connectorName]==null)
throw{msg:"jsPlumb: unknown connector type '"+connectorName+"'"};return new jsPlumb.Connectors[renderMode][connectorName](connectorArgs,forComponent);},_makeAnchor=function(anchorParams,elementId,_jsPlumb){return(anchorParams)?_jsPlumb.makeAnchor(anchorParams,elementId,_jsPlumb):null;};jsPlumb.Connection=function(params){var _newEndpoint=params.newEndpoint,_ju=jsPlumbUtil;this.connector=null;this.idPrefix="_jsplumb_c_";this.defaultLabelLocation=0.5;this.defaultOverlayKeys=["Overlays","ConnectionOverlays"];this.previousConnection=params.previousConnection;this.source=jsPlumb.getDOMElement(params.source);this.target=jsPlumb.getDOMElement(params.target);if(params.sourceEndpoint)this.source=params.sourceEndpoint.endpointWillMoveTo||params.sourceEndpoint.getElement();if(params.targetEndpoint)this.target=params.targetEndpoint.getElement();OverlayCapableJsPlumbUIComponent.apply(this,arguments);this.sourceId=this._jsPlumb.instance.getId(this.source);this.targetId=this._jsPlumb.instance.getId(this.target);this.scope=params.scope;this.endpoints=[];this.endpointStyles=[];var _jsPlumb=this._jsPlumb.instance;_jsPlumb.manage(this.sourceId,this.source);_jsPlumb.manage(this.targetId,this.target);this._jsPlumb.visible=true;this._jsPlumb.editable=params.editable===true;this._jsPlumb.params={cssClass:params.cssClass,container:params.container,"pointer-events":params["pointer-events"],editorParams:params.editorParams};this._jsPlumb.lastPaintedAt=null;this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays};};this.bind("mouseover",function(){this.setHover(true);}.bind(this));this.bind("mouseout",function(){this.setHover(false);}.bind(this));this.makeEndpoint=function(isSource,el,elId,ep){elId=elId||this._jsPlumb.instance.getId(el);return this.prepareEndpoint(_jsPlumb,_newEndpoint,this,ep,isSource?0:1,params,el,elId);};var eS=this.makeEndpoint(true,this.source,this.sourceId,params.sourceEndpoint),eT=this.makeEndpoint(false,this.target,this.targetId,params.targetEndpoint);if(eS)_ju.addToList(params.endpointsByElement,this.sourceId,eS);if(eT)_ju.addToList(params.endpointsByElement,this.targetId,eT);if(!this.scope)this.scope=this.endpoints[0].scope;if(params.deleteEndpointsOnDetach!=null){this.endpoints[0]._deleteOnDetach=params.deleteEndpointsOnDetach;this.endpoints[1]._deleteOnDetach=params.deleteEndpointsOnDetach;}
else{if(!this.endpoints[0]._doNotDeleteOnDetach)this.endpoints[0]._deleteOnDetach=true;if(!this.endpoints[1]._doNotDeleteOnDetach)this.endpoints[1]._deleteOnDetach=true;}
this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||params.connector||_jsPlumb.Defaults.Connector||jsPlumb.Defaults.Connector,true,true);if(params.path)
this.connector.setPath(params.path);this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||params.paintStyle||_jsPlumb.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,true);this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||params.hoverPaintStyle||_jsPlumb.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,true);this._jsPlumb.paintStyleInUse=this.getPaintStyle();var _suspendedAt=_jsPlumb.getSuspendedAt();if(!_jsPlumb.isSuspendDrawing()){var myInfo=_jsPlumb.getCachedData(this.sourceId),myOffset=myInfo.o,myWH=myInfo.s,otherInfo=_jsPlumb.getCachedData(this.targetId),otherOffset=otherInfo.o,otherWH=otherInfo.s,initialTimestamp=_suspendedAt||_jsPlumb.timestamp(),anchorLoc=this.endpoints[0].anchor.compute({xy:[myOffset.left,myOffset.top],wh:myWH,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[otherOffset.left,otherOffset.top],twh:otherWH,tElement:this.endpoints[1],timestamp:initialTimestamp});this.endpoints[0].paint({anchorLoc:anchorLoc,timestamp:initialTimestamp});anchorLoc=this.endpoints[1].anchor.compute({xy:[otherOffset.left,otherOffset.top],wh:otherWH,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[myOffset.left,myOffset.top],twh:myWH,tElement:this.endpoints[0],timestamp:initialTimestamp});this.endpoints[1].paint({anchorLoc:anchorLoc,timestamp:initialTimestamp});}
this._jsPlumb.detachable=_jsPlumb.Defaults.ConnectionsDetachable;if(params.detachable===false)this._jsPlumb.detachable=false;if(this.endpoints[0].connectionsDetachable===false)this._jsPlumb.detachable=false;if(this.endpoints[1].connectionsDetachable===false)this._jsPlumb.detachable=false;this._jsPlumb.reattach=params.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||_jsPlumb.Defaults.ReattachConnections;this._jsPlumb.cost=params.cost||this.endpoints[0].getConnectionCost();this._jsPlumb.directed=params.directed;if(params.directed==null)this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected();var _p=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(_p,this.endpoints[0].getParameters());jsPlumb.extend(_p,this.getParameters());this.setParameters(_p);var _types=[params.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");if(/[^\s]/.test(_types))
this.addType(_types,params.data,true);};jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(t,doNotRepaint){if(t.detachable!=null)this.setDetachable(t.detachable);if(t.reattach!=null)this.setReattach(t.reattach);if(t.scope)this.scope=t.scope;this.setConnector(t.connector,doNotRepaint);if(t.cssClass!=null&&this.canvas)this._jsPlumb.instance.addClass(this.canvas,t.cssClass);if(t.anchor){this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(t.anchor);this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(t.anchor);}
else if(t.anchors){this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(t.anchors[0]);this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(t.anchors[1]);}},getTypeDescriptor:function(){return"connection";},getAttachedElements:function(){return this.endpoints;},addClass:function(c,informEndpoints){if(informEndpoints){this.endpoints[0].addClass(c);this.endpoints[1].addClass(c);if(this.suspendedEndpoint)this.suspendedEndpoint.addClass(c);}
if(this.connector){this.connector.addClass(c);}},removeClass:function(c,informEndpoints){if(informEndpoints){this.endpoints[0].removeClass(c);this.endpoints[1].removeClass(c);if(this.suspendedEndpoint)this.suspendedEndpoint.removeClass(c);}
if(this.connector){this.connector.removeClass(c);}},isVisible:function(){return this._jsPlumb.visible;},setVisible:function(v){this._jsPlumb.visible=v;if(this.connector)
this.connector.setVisible(v);this.repaint();},cleanup:function(){this.endpoints=null;this.source=null;this.target=null;if(this.connector!=null){this.connector.cleanup();this.connector.destroy();}
this.connector=null;},isDetachable:function(){return this._jsPlumb.detachable===true;},setDetachable:function(detachable){this._jsPlumb.detachable=detachable===true;},isReattach:function(){return this._jsPlumb.reattach===true;},setReattach:function(reattach){this._jsPlumb.reattach=reattach===true;},setHover:function(state){if(this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()){this.connector.setHover(state);jsPlumbAdapter[state?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass);jsPlumbAdapter[state?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass);}},getCost:function(){return this._jsPlumb.cost;},setCost:function(c){this._jsPlumb.cost=c;},isDirected:function(){return this._jsPlumb.directed===true;},getConnector:function(){return this.connector;},setConnector:function(connectorSpec,doNotRepaint,doNotChangeListenerComponent){var _ju=jsPlumbUtil;if(this.connector!=null){this.connector.cleanup();this.connector.destroy();}
var connectorArgs={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},renderMode=this._jsPlumb.instance.getRenderMode();if(_ju.isString(connectorSpec))
this.connector=makeConnector(this._jsPlumb.instance,renderMode,connectorSpec,connectorArgs,this);else if(_ju.isArray(connectorSpec)){if(connectorSpec.length==1)
this.connector=makeConnector(this._jsPlumb.instance,renderMode,connectorSpec[0],connectorArgs,this);else
this.connector=makeConnector(this._jsPlumb.instance,renderMode,connectorSpec[0],_ju.merge(connectorSpec[1],connectorArgs),this);}
this.canvas=this.connector.canvas;this.bgCanvas=this.connector.bgCanvas;if(this.canvas)this.canvas._jsPlumb=this;if(this.bgCanvas)this.bgCanvas._jsPlumb=this;if(!doNotChangeListenerComponent)this.setListenerComponent(this.connector);if(!doNotRepaint)this.repaint();},paint:function(params){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){params=params||{};var timestamp=params.timestamp,swap=false,tId=swap?this.sourceId:this.targetId,sId=swap?this.targetId:this.sourceId,tIdx=swap?0:1,sIdx=swap?1:0;if(timestamp==null||timestamp!=this._jsPlumb.lastPaintedAt){var sourceInfo=this._jsPlumb.instance.getOffset(sId),targetInfo=this._jsPlumb.instance.getOffset(tId),sE=this.endpoints[sIdx],tE=this.endpoints[tIdx];var sAnchorP=sE.anchor.getCurrentLocation({xy:[sourceInfo.left,sourceInfo.top],wh:[sourceInfo.width,sourceInfo.height],element:sE,timestamp:timestamp}),tAnchorP=tE.anchor.getCurrentLocation({xy:[targetInfo.left,targetInfo.top],wh:[targetInfo.width,targetInfo.height],element:tE,timestamp:timestamp});this.connector.resetBounds();this.connector.compute({sourcePos:sAnchorP,targetPos:tAnchorP,sourceEndpoint:this.endpoints[sIdx],targetEndpoint:this.endpoints[tIdx],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:sourceInfo,targetInfo:targetInfo});var overlayExtents={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};for(var i=0;i<this._jsPlumb.overlays.length;i++){var o=this._jsPlumb.overlays[i];if(o.isVisible()){this._jsPlumb.overlayPlacements[i]=o.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(o));overlayExtents.minX=Math.min(overlayExtents.minX,this._jsPlumb.overlayPlacements[i].minX);overlayExtents.maxX=Math.max(overlayExtents.maxX,this._jsPlumb.overlayPlacements[i].maxX);overlayExtents.minY=Math.min(overlayExtents.minY,this._jsPlumb.overlayPlacements[i].minY);overlayExtents.maxY=Math.max(overlayExtents.maxY,this._jsPlumb.overlayPlacements[i].maxY);}}
var lineWidth=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/ 2,outlineWidth=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),extents={xmin:Math.min(this.connector.bounds.minX-(lineWidth+outlineWidth),overlayExtents.minX),ymin:Math.min(this.connector.bounds.minY-(lineWidth+outlineWidth),overlayExtents.minY),xmax:Math.max(this.connector.bounds.maxX+(lineWidth+outlineWidth),overlayExtents.maxX),ymax:Math.max(this.connector.bounds.maxY+(lineWidth+outlineWidth),overlayExtents.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,extents);for(var j=0;j<this._jsPlumb.overlays.length;j++){var p=this._jsPlumb.overlays[j];if(p.isVisible()){p.paint(this._jsPlumb.overlayPlacements[j],extents);}}}
this._jsPlumb.lastPaintedAt=timestamp;}},repaint:function(params){params=params||{};this.paint({elId:this.sourceId,recalc:!(params.recalc===false),timestamp:params.timestamp});},prepareEndpoint:function(_jsPlumb,_newEndpoint,conn,existing,index,params,element,elementId){var e;if(existing){conn.endpoints[index]=existing;existing.addConnection(conn);}else{if(!params.endpoints)params.endpoints=[null,null];var ep=params.endpoints[index]||params.endpoint||_jsPlumb.Defaults.Endpoints[index]||jsPlumb.Defaults.Endpoints[index]||_jsPlumb.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;if(!params.endpointStyles)params.endpointStyles=[null,null];if(!params.endpointHoverStyles)params.endpointHoverStyles=[null,null];var es=params.endpointStyles[index]||params.endpointStyle||_jsPlumb.Defaults.EndpointStyles[index]||jsPlumb.Defaults.EndpointStyles[index]||_jsPlumb.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;if(es.fillStyle==null&&params.paintStyle!=null)
es.fillStyle=params.paintStyle.strokeStyle;if(es.outlineColor==null&&params.paintStyle!=null)
es.outlineColor=params.paintStyle.outlineColor;if(es.outlineWidth==null&&params.paintStyle!=null)
es.outlineWidth=params.paintStyle.outlineWidth;var ehs=params.endpointHoverStyles[index]||params.endpointHoverStyle||_jsPlumb.Defaults.EndpointHoverStyles[index]||jsPlumb.Defaults.EndpointHoverStyles[index]||_jsPlumb.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;if(params.hoverPaintStyle!=null){if(ehs==null)ehs={};if(ehs.fillStyle==null){ehs.fillStyle=params.hoverPaintStyle.strokeStyle;}}
var a=params.anchors?params.anchors[index]:params.anchor?params.anchor:_makeAnchor(_jsPlumb.Defaults.Anchors[index],elementId,_jsPlumb)||_makeAnchor(jsPlumb.Defaults.Anchors[index],elementId,_jsPlumb)||_makeAnchor(_jsPlumb.Defaults.Anchor,elementId,_jsPlumb)||_makeAnchor(jsPlumb.Defaults.Anchor,elementId,_jsPlumb),u=params.uuids?params.uuids[index]:null;e=_newEndpoint({paintStyle:es,hoverPaintStyle:ehs,endpoint:ep,connections:[conn],uuid:u,anchor:a,source:element,scope:params.scope,reattach:params.reattach||_jsPlumb.Defaults.ReattachConnections,detachable:params.detachable||_jsPlumb.Defaults.ConnectionsDetachable});conn.endpoints[index]=e;if(params.drawEndpoints===false)e.setVisible(false,true,true);}
return e;}});})();;;;(function(){"use strict";jsPlumb.AnchorManager=function(params){var _amEndpoints={},continuousAnchors={},continuousAnchorLocations={},userDefinedContinuousAnchorLocations={},continuousAnchorOrientations={},Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},axes=["left","top","right","bottom"],connectionsByElementId={},self=this,anchorLists={},jsPlumbInstance=params.jsPlumbInstance,floatingConnections={},calculateOrientation=function(sourceId,targetId,sd,td,sourceAnchor,targetAnchor){if(sourceId===targetId)return{orientation:Orientation.IDENTITY,a:["top","top"]};var theta=Math.atan2((td.centery-sd.centery),(td.centerx-sd.centerx)),theta2=Math.atan2((sd.centery-td.centery),(sd.centerx-td.centerx));var candidates=[],midpoints={};(function(types,dim){for(var i=0;i<types.length;i++){midpoints[types[i]]={"left":[dim[i].left,dim[i].centery],"right":[dim[i].right,dim[i].centery],"top":[dim[i].centerx,dim[i].top],"bottom":[dim[i].centerx,dim[i].bottom]};}})(["source","target"],[sd,td]);for(var sf=0;sf<axes.length;sf++){for(var tf=0;tf<axes.length;tf++){if(sf!=tf){candidates.push({source:axes[sf],target:axes[tf],dist:Biltong.lineLength(midpoints.source[axes[sf]],midpoints.target[axes[tf]])});}}}
candidates.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0;});var sourceEdge=candidates[0].source,targetEdge=candidates[0].target;for(var i=0;i<candidates.length;i++){if(!sourceAnchor.isContinuous||sourceAnchor.isEdgeSupported(candidates[i].source))
sourceEdge=candidates[i].source;else
sourceEdge=null;if(!targetAnchor.isContinuous||targetAnchor.isEdgeSupported(candidates[i].target))
targetEdge=candidates[i].target;else{targetEdge=null;}
if(sourceEdge!=null&&targetEdge!=null)break;}
return{a:[sourceEdge,targetEdge],theta:theta,theta2:theta2};},placeAnchorsOnLine=function(desc,elementDimensions,elementPosition,connections,horizontal,otherMultiplier,reverse){var a=[],step=elementDimensions[horizontal?0:1]/(connections.length+1);for(var i=0;i<connections.length;i++){var val=(i+1)*step,other=otherMultiplier*elementDimensions[horizontal?1:0];if(reverse)
val=elementDimensions[horizontal?0:1]-val;var dx=(horizontal?val:other),x=elementPosition[0]+dx,xp=dx / elementDimensions[0],dy=(horizontal?other:val),y=elementPosition[1]+dy,yp=dy / elementDimensions[1];a.push([x,y,xp,yp,connections[i][1],connections[i][2]]);}
return a;},currySort=function(reverseAngles){return function(a,b){var r=true;if(reverseAngles){r=a[0][0]<b[0][0];}
else{r=a[0][0]>b[0][0];}
return r===false?-1:1;};},leftSort=function(a,b){var p1=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],p2=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];if(p1>p2)return 1;else return a[0][1]>b[0][1]?1:-1;},edgeSortFunctions={"top":function(a,b){return a[0]>b[0]?1:-1;},"right":currySort(true),"bottom":currySort(true),"left":leftSort},_sortHelper=function(_array,_fn){return _array.sort(_fn);},placeAnchors=function(elementId,_anchorLists){var cd=jsPlumbInstance.getCachedData(elementId),sS=cd.s,sO=cd.o,placeSomeAnchors=function(desc,elementDimensions,elementPosition,unsortedConnections,isHorizontal,otherMultiplier,orientation){if(unsortedConnections.length>0){var sc=_sortHelper(unsortedConnections,edgeSortFunctions[desc]),reverse=desc==="right"||desc==="top",anchors=placeAnchorsOnLine(desc,elementDimensions,elementPosition,sc,isHorizontal,otherMultiplier,reverse);var _setAnchorLocation=function(endpoint,anchorPos){continuousAnchorLocations[endpoint.id]=[anchorPos[0],anchorPos[1],anchorPos[2],anchorPos[3]];continuousAnchorOrientations[endpoint.id]=orientation;};for(var i=0;i<anchors.length;i++){var c=anchors[i][4],weAreSource=c.endpoints[0].elementId===elementId,weAreTarget=c.endpoints[1].elementId===elementId;if(weAreSource)
_setAnchorLocation(c.endpoints[0],anchors[i]);else if(weAreTarget)
_setAnchorLocation(c.endpoints[1],anchors[i]);}}};placeSomeAnchors("bottom",sS,[sO.left,sO.top],_anchorLists.bottom,true,1,[0,1]);placeSomeAnchors("top",sS,[sO.left,sO.top],_anchorLists.top,true,0,[0,-1]);placeSomeAnchors("left",sS,[sO.left,sO.top],_anchorLists.left,false,0,[-1,0]);placeSomeAnchors("right",sS,[sO.left,sO.top],_anchorLists.right,false,1,[1,0]);};this.reset=function(){_amEndpoints={};connectionsByElementId={};anchorLists={};};this.addFloatingConnection=function(key,conn){floatingConnections[key]=conn;};this.removeFloatingConnection=function(key){delete floatingConnections[key];};this.newConnection=function(conn){var sourceId=conn.sourceId,targetId=conn.targetId,ep=conn.endpoints,doRegisterTarget=true,registerConnection=function(otherIndex,otherEndpoint,otherAnchor,elId,c){if((sourceId==targetId)&&otherAnchor.isContinuous){conn._jsPlumb.instance.removeElement(ep[1].canvas);doRegisterTarget=false;}
jsPlumbUtil.addToList(connectionsByElementId,elId,[c,otherEndpoint,otherAnchor.constructor==jsPlumb.DynamicAnchor]);};registerConnection(0,ep[0],ep[0].anchor,targetId,conn);if(doRegisterTarget)
registerConnection(1,ep[1],ep[1].anchor,sourceId,conn);};var removeEndpointFromAnchorLists=function(endpoint){(function(list,eId){if(list){var f=function(e){return e[4]==eId;};jsPlumbUtil.removeWithFunction(list.top,f);jsPlumbUtil.removeWithFunction(list.left,f);jsPlumbUtil.removeWithFunction(list.bottom,f);jsPlumbUtil.removeWithFunction(list.right,f);}})(anchorLists[endpoint.elementId],endpoint.id);};this.connectionDetached=function(connInfo){var connection=connInfo.connection||connInfo,sourceId=connInfo.sourceId,targetId=connInfo.targetId,ep=connection.endpoints,removeConnection=function(otherIndex,otherEndpoint,otherAnchor,elId,c){if(otherAnchor!=null&&otherAnchor.constructor==jsPlumb.FloatingAnchor){}
else{jsPlumbUtil.removeWithFunction(connectionsByElementId[elId],function(_c){return _c[0].id==c.id;});}};removeConnection(1,ep[1],ep[1].anchor,sourceId,connection);removeConnection(0,ep[0],ep[0].anchor,targetId,connection);removeEndpointFromAnchorLists(connection.endpoints[0]);removeEndpointFromAnchorLists(connection.endpoints[1]);self.redraw(connection.sourceId);self.redraw(connection.targetId);};this.add=function(endpoint,elementId){jsPlumbUtil.addToList(_amEndpoints,elementId,endpoint);};this.changeId=function(oldId,newId){connectionsByElementId[newId]=connectionsByElementId[oldId];_amEndpoints[newId]=_amEndpoints[oldId];delete connectionsByElementId[oldId];delete _amEndpoints[oldId];};this.getConnectionsFor=function(elementId){return connectionsByElementId[elementId]||[];};this.getEndpointsFor=function(elementId){return _amEndpoints[elementId]||[];};this.deleteEndpoint=function(endpoint){jsPlumbUtil.removeWithFunction(_amEndpoints[endpoint.elementId],function(e){return e.id==endpoint.id;});removeEndpointFromAnchorLists(endpoint);};this.clearFor=function(elementId){delete _amEndpoints[elementId];_amEndpoints[elementId]=[];};var _updateAnchorList=function(lists,theta,order,conn,aBoolean,otherElId,idx,reverse,edgeId,elId,connsToPaint,endpointsToPaint){var exactIdx=-1,firstMatchingElIdx=-1,endpoint=conn.endpoints[idx],endpointId=endpoint.id,oIdx=[1,0][idx],values=[[theta,order],conn,aBoolean,otherElId,endpointId],listToAddTo=lists[edgeId],listToRemoveFrom=endpoint._continuousAnchorEdge?lists[endpoint._continuousAnchorEdge]:null,i;if(listToRemoveFrom){var rIdx=jsPlumbUtil.findWithFunction(listToRemoveFrom,function(e){return e[4]==endpointId;});if(rIdx!=-1){listToRemoveFrom.splice(rIdx,1);for(i=0;i<listToRemoveFrom.length;i++){jsPlumbUtil.addWithFunction(connsToPaint,listToRemoveFrom[i][1],function(c){return c.id==listToRemoveFrom[i][1].id;});jsPlumbUtil.addWithFunction(endpointsToPaint,listToRemoveFrom[i][1].endpoints[idx],function(e){return e.id==listToRemoveFrom[i][1].endpoints[idx].id;});jsPlumbUtil.addWithFunction(endpointsToPaint,listToRemoveFrom[i][1].endpoints[oIdx],function(e){return e.id==listToRemoveFrom[i][1].endpoints[oIdx].id;});}}}
for(i=0;i<listToAddTo.length;i++){if(params.idx==1&&listToAddTo[i][3]===otherElId&&firstMatchingElIdx==-1)
firstMatchingElIdx=i;jsPlumbUtil.addWithFunction(connsToPaint,listToAddTo[i][1],function(c){return c.id==listToAddTo[i][1].id;});jsPlumbUtil.addWithFunction(endpointsToPaint,listToAddTo[i][1].endpoints[idx],function(e){return e.id==listToAddTo[i][1].endpoints[idx].id;});jsPlumbUtil.addWithFunction(endpointsToPaint,listToAddTo[i][1].endpoints[oIdx],function(e){return e.id==listToAddTo[i][1].endpoints[oIdx].id;});}
if(exactIdx!=-1){listToAddTo[exactIdx]=values;}
else{var insertIdx=reverse?firstMatchingElIdx!=-1?firstMatchingElIdx:0:listToAddTo.length;listToAddTo.splice(insertIdx,0,values);}
endpoint._continuousAnchorEdge=edgeId;};this.updateOtherEndpoint=function(elId,oldTargetId,newTargetId,connection){var sIndex=jsPlumbUtil.findWithFunction(connectionsByElementId[elId],function(i){return i[0].id===connection.id;}),tIndex=jsPlumbUtil.findWithFunction(connectionsByElementId[oldTargetId],function(i){return i[0].id===connection.id;});if(sIndex!=-1){connectionsByElementId[elId][sIndex][0]=connection;connectionsByElementId[elId][sIndex][1]=connection.endpoints[1];connectionsByElementId[elId][sIndex][2]=connection.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor;}
if(tIndex>-1){connectionsByElementId[oldTargetId].splice(tIndex,1);jsPlumbUtil.addToList(connectionsByElementId,newTargetId,[connection,connection.endpoints[0],connection.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]);}};this.sourceChanged=function(originalId,newId,connection){if(originalId!==newId){jsPlumbUtil.removeWithFunction(connectionsByElementId[originalId],function(info){return info[0].id===connection.id;});var tIdx=jsPlumbUtil.findWithFunction(connectionsByElementId[connection.targetId],function(i){return i[0].id===connection.id;});if(tIdx>-1){connectionsByElementId[connection.targetId][tIdx][0]=connection;connectionsByElementId[connection.targetId][tIdx][1]=connection.endpoints[0];connectionsByElementId[connection.targetId][tIdx][2]=connection.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor;}
jsPlumbUtil.addToList(connectionsByElementId,newId,[connection,connection.endpoints[1],connection.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor]);}};this.rehomeEndpoint=function(ep,currentId,element){var eps=_amEndpoints[currentId]||[],elementId=jsPlumbInstance.getId(element);if(elementId!==currentId){var idx=jsPlumbUtil.indexOf(eps,ep);if(idx>-1){var _ep=eps.splice(idx,1)[0];self.add(_ep,elementId);}}
for(var i=0;i<ep.connections.length;i++){if(ep.connections[i].sourceId==currentId){ep.connections[i].sourceId=ep.elementId;ep.connections[i].source=ep.element;self.sourceChanged(currentId,ep.elementId,ep.connections[i]);}
else if(ep.connections[i].targetId==currentId){ep.connections[i].targetId=ep.elementId;ep.connections[i].target=ep.element;self.updateOtherEndpoint(ep.connections[i].sourceId,currentId,ep.elementId,ep.connections[i]);}}};this.redraw=function(elementId,ui,timestamp,offsetToUI,clearEdits,doNotRecalcEndpoint){if(!jsPlumbInstance.isSuspendDrawing()){var ep=_amEndpoints[elementId]||[],endpointConnections=connectionsByElementId[elementId]||[],connectionsToPaint=[],endpointsToPaint=[],anchorsToUpdate=[];timestamp=timestamp||jsPlumbInstance.timestamp();offsetToUI=offsetToUI||{left:0,top:0};if(ui){ui={left:ui.left+offsetToUI.left,top:ui.top+offsetToUI.top};}
var myOffset=jsPlumbInstance.updateOffset({elId:elementId,offset:ui,recalc:false,timestamp:timestamp}),orientationCache={};for(var i=0;i<endpointConnections.length;i++){var conn=endpointConnections[i][0],sourceId=conn.sourceId,targetId=conn.targetId,sourceContinuous=conn.endpoints[0].anchor.isContinuous,targetContinuous=conn.endpoints[1].anchor.isContinuous;if(sourceContinuous||targetContinuous){var oKey=sourceId+"_"+targetId,oKey2=targetId+"_"+sourceId,o=orientationCache[oKey],oIdx=conn.sourceId==elementId?1:0;if(sourceContinuous&&!anchorLists[sourceId])anchorLists[sourceId]={top:[],right:[],bottom:[],left:[]};if(targetContinuous&&!anchorLists[targetId])anchorLists[targetId]={top:[],right:[],bottom:[],left:[]};if(elementId!=targetId)jsPlumbInstance.updateOffset({elId:targetId,timestamp:timestamp});if(elementId!=sourceId)jsPlumbInstance.updateOffset({elId:sourceId,timestamp:timestamp});var td=jsPlumbInstance.getCachedData(targetId),sd=jsPlumbInstance.getCachedData(sourceId);if(targetId==sourceId&&(sourceContinuous||targetContinuous)){_updateAnchorList(anchorLists[sourceId],-Math.PI / 2,0,conn,false,targetId,0,false,"top",sourceId,connectionsToPaint,endpointsToPaint);}
else{if(!o){o=calculateOrientation(sourceId,targetId,sd.o,td.o,conn.endpoints[0].anchor,conn.endpoints[1].anchor);orientationCache[oKey]=o;}
if(sourceContinuous)_updateAnchorList(anchorLists[sourceId],o.theta,0,conn,false,targetId,0,false,o.a[0],sourceId,connectionsToPaint,endpointsToPaint);if(targetContinuous)_updateAnchorList(anchorLists[targetId],o.theta2,-1,conn,true,sourceId,1,true,o.a[1],targetId,connectionsToPaint,endpointsToPaint);}
if(sourceContinuous)jsPlumbUtil.addWithFunction(anchorsToUpdate,sourceId,function(a){return a===sourceId;});if(targetContinuous)jsPlumbUtil.addWithFunction(anchorsToUpdate,targetId,function(a){return a===targetId;});jsPlumbUtil.addWithFunction(connectionsToPaint,conn,function(c){return c.id==conn.id;});if((sourceContinuous&&oIdx===0)||(targetContinuous&&oIdx===1))
jsPlumbUtil.addWithFunction(endpointsToPaint,conn.endpoints[oIdx],function(e){return e.id==conn.endpoints[oIdx].id;});}}
for(i=0;i<ep.length;i++){if(ep[i].connections.length===0&&ep[i].anchor.isContinuous){if(!anchorLists[elementId])anchorLists[elementId]={top:[],right:[],bottom:[],left:[]};_updateAnchorList(anchorLists[elementId],-Math.PI / 2,0,{endpoints:[ep[i],ep[i]],paint:function(){}},false,elementId,0,false,ep[i].anchor.getDefaultFace(),elementId,connectionsToPaint,endpointsToPaint);jsPlumbUtil.addWithFunction(anchorsToUpdate,elementId,function(a){return a===elementId;});}}
for(i=0;i<anchorsToUpdate.length;i++){placeAnchors(anchorsToUpdate[i],anchorLists[anchorsToUpdate[i]]);}
for(i=0;i<ep.length;i++){ep[i].paint({timestamp:timestamp,offset:myOffset,dimensions:myOffset.s,recalc:doNotRecalcEndpoint!==true});}
for(i=0;i<endpointsToPaint.length;i++){var cd=jsPlumbInstance.getCachedData(endpointsToPaint[i].elementId);endpointsToPaint[i].paint({timestamp:timestamp,offset:cd,dimensions:cd.s});}
for(i=0;i<endpointConnections.length;i++){var otherEndpoint=endpointConnections[i][1];if(otherEndpoint.anchor.constructor==jsPlumb.DynamicAnchor){otherEndpoint.paint({elementWithPrecedence:elementId,timestamp:timestamp});jsPlumbUtil.addWithFunction(connectionsToPaint,endpointConnections[i][0],function(c){return c.id==endpointConnections[i][0].id;});for(var k=0;k<otherEndpoint.connections.length;k++){if(otherEndpoint.connections[k]!==endpointConnections[i][0])
jsPlumbUtil.addWithFunction(connectionsToPaint,otherEndpoint.connections[k],function(c){return c.id==otherEndpoint.connections[k].id;});}}else if(otherEndpoint.anchor.constructor==jsPlumb.Anchor){jsPlumbUtil.addWithFunction(connectionsToPaint,endpointConnections[i][0],function(c){return c.id==endpointConnections[i][0].id;});}}
var fc=floatingConnections[elementId];if(fc)
fc.paint({timestamp:timestamp,recalc:false,elId:elementId});for(i=0;i<connectionsToPaint.length;i++){connectionsToPaint[i].paint({elId:elementId,timestamp:timestamp,recalc:false,clearEdits:clearEdits});}}};var ContinuousAnchor=function(anchorParams){jsPlumbUtil.EventGenerator.apply(this);this.type="Continuous";this.isDynamic=true;this.isContinuous=true;var faces=anchorParams.faces||["top","right","bottom","left"],clockwise=!(anchorParams.clockwise===false),availableFaces={},opposites={"top":"bottom","right":"left","left":"right","bottom":"top"},clockwiseOptions={"top":"right","right":"bottom","left":"top","bottom":"left"},antiClockwiseOptions={"top":"left","right":"top","left":"bottom","bottom":"right"},secondBest=clockwise?clockwiseOptions:antiClockwiseOptions,lastChoice=clockwise?antiClockwiseOptions:clockwiseOptions,cssClass=anchorParams.cssClass||"";for(var i=0;i<faces.length;i++){availableFaces[faces[i]]=true;}
this.getDefaultFace=function(){return faces.length===0?"top":faces[0];};this.verifyEdge=function(edge){if(availableFaces[edge])return edge;else if(availableFaces[opposites[edge]])return opposites[edge];else if(availableFaces[secondBest[edge]])return secondBest[edge];else if(availableFaces[lastChoice[edge]])return lastChoice[edge];return edge;};this.isEdgeSupported=function(edge){return availableFaces[edge]===true;};this.compute=function(params){return userDefinedContinuousAnchorLocations[params.element.id]||continuousAnchorLocations[params.element.id]||[0,0];};this.getCurrentLocation=function(params){return userDefinedContinuousAnchorLocations[params.element.id]||continuousAnchorLocations[params.element.id]||[0,0];};this.getOrientation=function(endpoint){return continuousAnchorOrientations[endpoint.id]||[0,0];};this.clearUserDefinedLocation=function(){delete userDefinedContinuousAnchorLocations[anchorParams.elementId];};this.setUserDefinedLocation=function(loc){userDefinedContinuousAnchorLocations[anchorParams.elementId]=loc;};this.getCssClass=function(){return cssClass;};this.setCssClass=function(c){cssClass=c;};};jsPlumbInstance.continuousAnchorFactory={get:function(params){return new ContinuousAnchor(params);},clear:function(elementId){delete userDefinedContinuousAnchorLocations[elementId];delete continuousAnchorLocations[elementId];}};};jsPlumb.Anchor=function(params){this.x=params.x||0;this.y=params.y||0;this.elementId=params.elementId;this.cssClass=params.cssClass||"";this.userDefinedLocation=null;this.orientation=params.orientation||[0,0];jsPlumbUtil.EventGenerator.apply(this);var jsPlumbInstance=params.jsPlumbInstance;this.lastReturnValue=null;this.offsets=params.offsets||[0,0];this.timestamp=null;this.compute=function(params){var xy=params.xy,wh=params.wh,element=params.element,timestamp=params.timestamp;if(params.clearUserDefinedLocation)
this.userDefinedLocation=null;if(timestamp&&timestamp===self.timestamp)
return this.lastReturnValue;if(this.userDefinedLocation!=null){this.lastReturnValue=this.userDefinedLocation;}
else{this.lastReturnValue=[xy[0]+(this.x*wh[0])+this.offsets[0],xy[1]+(this.y*wh[1])+this.offsets[1]];}
this.timestamp=timestamp;return this.lastReturnValue;};this.getCurrentLocation=function(params){return(this.lastReturnValue==null||(params.timestamp!=null&&this.timestamp!=params.timestamp))?this.compute(params):this.lastReturnValue;};};jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(anchor){if(!anchor)return false;var ao=anchor.getOrientation(),o=this.getOrientation();return this.x==anchor.x&&this.y==anchor.y&&this.offsets[0]==anchor.offsets[0]&&this.offsets[1]==anchor.offsets[1]&&o[0]==ao[0]&&o[1]==ao[1];},getUserDefinedLocation:function(){return this.userDefinedLocation;},setUserDefinedLocation:function(l){this.userDefinedLocation=l;},clearUserDefinedLocation:function(){this.userDefinedLocation=null;},getOrientation:function(_endpoint){return this.orientation;},getCssClass:function(){return this.cssClass;}});jsPlumb.FloatingAnchor=function(params){jsPlumb.Anchor.apply(this,arguments);var ref=params.reference,jsPlumbInstance=params.jsPlumbInstance,refCanvas=params.referenceCanvas,size=jsPlumb.getSize(refCanvas),xDir=0,yDir=0,orientation=null,_lastResult=null;this.orientation=null;this.x=0;this.y=0;this.isFloating=true;this.compute=function(params){var xy=params.xy,element=params.element,result=[xy[0]+(size[0]/ 2),xy[1]+(size[1]/ 2)];_lastResult=result;return result;};this.getOrientation=function(_endpoint){if(orientation)return orientation;else{var o=ref.getOrientation(_endpoint);return[Math.abs(o[0])*xDir*-1,Math.abs(o[1])*yDir*-1];}};this.over=function(anchor,endpoint){orientation=anchor.getOrientation(endpoint);};this.out=function(){orientation=null;};this.getCurrentLocation=function(params){return _lastResult==null?this.compute(params):_lastResult;};};jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var _convertAnchor=function(anchor,jsPlumbInstance,elementId){return anchor.constructor==jsPlumb.Anchor?anchor:jsPlumbInstance.makeAnchor(anchor,elementId,jsPlumbInstance);};jsPlumb.DynamicAnchor=function(params){jsPlumb.Anchor.apply(this,arguments);this.isSelective=true;this.isDynamic=true;this.anchors=[];this.elementId=params.elementId;this.jsPlumbInstance=params.jsPlumbInstance;for(var i=0;i<params.anchors.length;i++)
this.anchors[i]=_convertAnchor(params.anchors[i],this.jsPlumbInstance,this.elementId);this.addAnchor=function(anchor){this.anchors.push(_convertAnchor(anchor,this.jsPlumbInstance,this.elementId));};this.getAnchors=function(){return this.anchors;};this.locked=false;var _curAnchor=this.anchors.length>0?this.anchors[0]:null,_curIndex=this.anchors.length>0?0:-1,_lastAnchor=_curAnchor,self=this,_distance=function(anchor,cx,cy,xy,wh){var ax=xy[0]+(anchor.x*wh[0]),ay=xy[1]+(anchor.y*wh[1]),acx=xy[0]+(wh[0]/ 2),acy=xy[1]+(wh[1]/ 2);return(Math.sqrt(Math.pow(cx-ax,2)+Math.pow(cy-ay,2))+
Math.sqrt(Math.pow(acx-ax,2)+Math.pow(acy-ay,2)));},_anchorSelector=params.selector||function(xy,wh,txy,twh,anchors){var cx=txy[0]+(twh[0]/ 2),cy=txy[1]+(twh[1]/ 2);var minIdx=-1,minDist=Infinity;for(var i=0;i<anchors.length;i++){var d=_distance(anchors[i],cx,cy,xy,wh);if(d<minDist){minIdx=i+0;minDist=d;}}
return anchors[minIdx];};this.compute=function(params){var xy=params.xy,wh=params.wh,timestamp=params.timestamp,txy=params.txy,twh=params.twh;this.timestamp=timestamp;var udl=self.getUserDefinedLocation();if(udl!=null){return udl;}
if(this.locked||txy==null||twh==null)
return _curAnchor.compute(params);else
params.timestamp=null;_curAnchor=_anchorSelector(xy,wh,txy,twh,this.anchors);this.x=_curAnchor.x;this.y=_curAnchor.y;if(_curAnchor!=_lastAnchor)
this.fire("anchorChanged",_curAnchor);_lastAnchor=_curAnchor;return _curAnchor.compute(params);};this.getCurrentLocation=function(params){return this.getUserDefinedLocation()||(_curAnchor!=null?_curAnchor.getCurrentLocation(params):null);};this.getOrientation=function(_endpoint){return _curAnchor!=null?_curAnchor.getOrientation(_endpoint):[0,0];};this.over=function(anchor,endpoint){if(_curAnchor!=null)_curAnchor.over(anchor,endpoint);};this.out=function(){if(_curAnchor!=null)_curAnchor.out();};this.getCssClass=function(){return(_curAnchor&&_curAnchor.getCssClass())||"";};};jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var _curryAnchor=function(x,y,ox,oy,type,fnInit){jsPlumb.Anchors[type]=function(params){var a=params.jsPlumbInstance.makeAnchor([x,y,ox,oy,0,0],params.elementId,params.jsPlumbInstance);a.type=type;if(fnInit)fnInit(a,params);return a;};};_curryAnchor(0.5,0,0,-1,"TopCenter");_curryAnchor(0.5,1,0,1,"BottomCenter");_curryAnchor(0,0.5,-1,0,"LeftMiddle");_curryAnchor(1,0.5,1,0,"RightMiddle");_curryAnchor(0.5,0,0,-1,"Top");_curryAnchor(0.5,1,0,1,"Bottom");_curryAnchor(0,0.5,-1,0,"Left");_curryAnchor(1,0.5,1,0,"Right");_curryAnchor(0.5,0.5,0,0,"Center");_curryAnchor(1,0,0,-1,"TopRight");_curryAnchor(1,1,0,1,"BottomRight");_curryAnchor(0,0,0,-1,"TopLeft");_curryAnchor(0,1,0,1,"BottomLeft");jsPlumb.Defaults.DynamicAnchors=function(params){return params.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],params.elementId,params.jsPlumbInstance);};jsPlumb.Anchors.AutoDefault=function(params){var a=params.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(params));a.type="AutoDefault";return a;};var _curryContinuousAnchor=function(type,faces){jsPlumb.Anchors[type]=function(params){var a=params.jsPlumbInstance.makeAnchor(["Continuous",{faces:faces}],params.elementId,params.jsPlumbInstance);a.type=type;return a;};};jsPlumb.Anchors.Continuous=function(params){return params.jsPlumbInstance.continuousAnchorFactory.get(params);};_curryContinuousAnchor("ContinuousLeft",["left"]);_curryContinuousAnchor("ContinuousTop",["top"]);_curryContinuousAnchor("ContinuousBottom",["bottom"]);_curryContinuousAnchor("ContinuousRight",["right"]);_curryAnchor(0,0,0,0,"Assign",function(anchor,params){var pf=params.position||"Fixed";anchor.positionFinder=pf.constructor==String?params.jsPlumbInstance.AnchorPositionFinders[pf]:pf;anchor.constructorParams=params;});jsPlumbInstance.prototype.AnchorPositionFinders={"Fixed":function(dp,ep,es,params){return[(dp.left-ep.left)/ es[0],(dp.top-ep.top)/ es[1]];},"Grid":function(dp,ep,es,params){var dx=dp.left-ep.left,dy=dp.top-ep.top,gx=es[0]/(params.grid[0]),gy=es[1]/(params.grid[1]),mx=Math.floor(dx / gx),my=Math.floor(dy / gy);return[((mx*gx)+(gx / 2))/ es[0],((my*gy)+(gy / 2))/ es[1]];}};jsPlumb.Anchors.Perimeter=function(params){params=params||{};var anchorCount=params.anchorCount||60,shape=params.shape;if(!shape)throw new Error("no shape supplied to Perimeter Anchor type");var _circle=function(){var r=0.5,step=Math.PI*2 / anchorCount,current=0,a=[];for(var i=0;i<anchorCount;i++){var x=r+(r*Math.sin(current)),y=r+(r*Math.cos(current));a.push([x,y,0,0]);current+=step;}
return a;},_path=function(segments){var anchorsPerFace=anchorCount / segments.length,a=[],_computeFace=function(x1,y1,x2,y2,fractionalLength){anchorsPerFace=anchorCount*fractionalLength;var dx=(x2-x1)/ anchorsPerFace,dy=(y2-y1)/ anchorsPerFace;for(var i=0;i<anchorsPerFace;i++){a.push([x1+(dx*i),y1+(dy*i),0,0]);}};for(var i=0;i<segments.length;i++)
_computeFace.apply(null,segments[i]);return a;},_shape=function(faces){var s=[];for(var i=0;i<faces.length;i++){s.push([faces[i][0],faces[i][1],faces[i][2],faces[i][3],1 / faces.length]);}
return _path(s);},_rectangle=function(){return _shape([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]]);};var _shapes={"Circle":_circle,"Ellipse":_circle,"Diamond":function(){return _shape([[0.5,0,1,0.5],[1,0.5,0.5,1],[0.5,1,0,0.5],[0,0.5,0.5,0]]);},"Rectangle":_rectangle,"Square":_rectangle,"Triangle":function(){return _shape([[0.5,0,1,1],[1,1,0,1],[0,1,0.5,0]]);},"Path":function(params){var points=params.points,p=[],tl=0;for(var i=0;i<points.length-1;i++){var l=Math.sqrt(Math.pow(points[i][2]-points[i][0])+Math.pow(points[i][3]-points[i][1]));tl+=l;p.push([points[i][0],points[i][1],points[i+1][0],points[i+1][1],l]);}
for(var j=0;j<p.length;j++){p[j][4]=p[j][4]/ tl;}
return _path(p);}},_rotate=function(points,amountInDegrees){var o=[],theta=amountInDegrees / 180*Math.PI;for(var i=0;i<points.length;i++){var _x=points[i][0]-0.5,_y=points[i][1]-0.5;o.push([0.5+((_x*Math.cos(theta))-(_y*Math.sin(theta))),0.5+((_x*Math.sin(theta))+(_y*Math.cos(theta))),points[i][2],points[i][3]]);}
return o;};if(!_shapes[shape])throw new Error("Shape ["+shape+"] is unknown by Perimeter Anchor type");var da=_shapes[shape](params);if(params.rotation)da=_rotate(da,params.rotation);var a=params.jsPlumbInstance.makeDynamicAnchor(da);a.type="Perimeter";return a;};})();;;;(function(){"use strict";jsPlumb.Segments={AbstractSegment:function(params){this.params=params;this.findClosestPointOnPath=function(x,y){return{d:Infinity,x:null,y:null,l:null};};this.getBounds=function(){return{minX:Math.min(params.x1,params.x2),minY:Math.min(params.y1,params.y2),maxX:Math.max(params.x1,params.x2),maxY:Math.max(params.y1,params.y2)};};},Straight:function(params){var _super=jsPlumb.Segments.AbstractSegment.apply(this,arguments),length,m,m2,x1,x2,y1,y2,_recalc=function(){length=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));m=Biltong.gradient({x:x1,y:y1},{x:x2,y:y2});m2=-1 / m;};this.type="Straight";this.getLength=function(){return length;};this.getGradient=function(){return m;};this.getCoordinates=function(){return{x1:x1,y1:y1,x2:x2,y2:y2};};this.setCoordinates=function(coords){x1=coords.x1;y1=coords.y1;x2=coords.x2;y2=coords.y2;_recalc();};this.setCoordinates({x1:params.x1,y1:params.y1,x2:params.x2,y2:params.y2});this.getBounds=function(){return{minX:Math.min(x1,x2),minY:Math.min(y1,y2),maxX:Math.max(x1,x2),maxY:Math.max(y1,y2)};};this.pointOnPath=function(location,absolute){if(location===0&&!absolute)
return{x:x1,y:y1};else if(location==1&&!absolute)
return{x:x2,y:y2};else{var l=absolute?location>0?location:length+location:location*length;return Biltong.pointOnLine({x:x1,y:y1},{x:x2,y:y2},l);}};this.gradientAtPoint=function(_){return m;};this.pointAlongPathFrom=function(location,distance,absolute){var p=this.pointOnPath(location,absolute),farAwayPoint=distance<=0?{x:x1,y:y1}:{x:x2,y:y2};if(distance<=0&&Math.abs(distance)>1)distance*=-1;return Biltong.pointOnLine(p,farAwayPoint,distance);};var within=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b);};var closest=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b;};this.findClosestPointOnPath=function(x,y){var out={d:Infinity,x:null,y:null,l:null,x1:x1,x2:x2,y1:y1,y2:y2};if(m===0){out.y=y1;out.x=within(x1,x2,x)?x:closest(x1,x2,x);}
else if(m==Infinity||m==-Infinity){out.x=x1;out.y=within(y1,y2,y)?y:closest(y1,y2,y);}
else{var b=y1-(m*x1),b2=y-(m2*x),_x1=(b2-b)/(m-m2),_y1=(m*_x1)+b;out.x=within(x1,x2,_x1)?_x1:closest(x1,x2,_x1);out.y=within(y1,y2,_y1)?_y1:closest(y1,y2,_y1);}
var fractionInSegment=Biltong.lineLength([out.x,out.y],[x1,y1]);out.d=Biltong.lineLength([x,y],[out.x,out.y]);out.l=fractionInSegment / length;return out;};},Arc:function(params){var _super=jsPlumb.Segments.AbstractSegment.apply(this,arguments),_calcAngle=function(_x,_y){return Biltong.theta([params.cx,params.cy],[_x,_y]);},_calcAngleForLocation=function(segment,location){if(segment.anticlockwise){var sa=segment.startAngle<segment.endAngle?segment.startAngle+TWO_PI:segment.startAngle,s=Math.abs(sa-segment.endAngle);return sa-(s*location);}
else{var ea=segment.endAngle<segment.startAngle?segment.endAngle+TWO_PI:segment.endAngle,ss=Math.abs(ea-segment.startAngle);return segment.startAngle+(ss*location);}},TWO_PI=2*Math.PI;this.radius=params.r;this.anticlockwise=params.ac;this.type="Arc";if(params.startAngle&&params.endAngle){this.startAngle=params.startAngle;this.endAngle=params.endAngle;this.x1=params.cx+(this.radius*Math.cos(params.startAngle));this.y1=params.cy+(this.radius*Math.sin(params.startAngle));this.x2=params.cx+(this.radius*Math.cos(params.endAngle));this.y2=params.cy+(this.radius*Math.sin(params.endAngle));}
else{this.startAngle=_calcAngle(params.x1,params.y1);this.endAngle=_calcAngle(params.x2,params.y2);this.x1=params.x1;this.y1=params.y1;this.x2=params.x2;this.y2=params.y2;}
if(this.endAngle<0)this.endAngle+=TWO_PI;if(this.startAngle<0)this.startAngle+=TWO_PI;this.segment=Biltong.quadrant([this.x1,this.y1],[this.x2,this.y2]);var ea=this.endAngle<this.startAngle?this.endAngle+TWO_PI:this.endAngle;this.sweep=Math.abs(ea-this.startAngle);if(this.anticlockwise)this.sweep=TWO_PI-this.sweep;var circumference=2*Math.PI*this.radius,frac=this.sweep / TWO_PI,length=circumference*frac;this.getLength=function(){return length;};this.getBounds=function(){return{minX:params.cx-params.r,maxX:params.cx+params.r,minY:params.cy-params.r,maxY:params.cy+params.r};};var VERY_SMALL_VALUE=0.0000000001,gentleRound=function(n){var f=Math.floor(n),r=Math.ceil(n);if(n-f<VERY_SMALL_VALUE)
return f;else if(r-n<VERY_SMALL_VALUE)
return r;return n;};this.pointOnPath=function(location,absolute){if(location===0){return{x:this.x1,y:this.y1,theta:this.startAngle};}
else if(location==1){return{x:this.x2,y:this.y2,theta:this.endAngle};}
if(absolute){location=location / length;}
var angle=_calcAngleForLocation(this,location),_x=params.cx+(params.r*Math.cos(angle)),_y=params.cy+(params.r*Math.sin(angle));return{x:gentleRound(_x),y:gentleRound(_y),theta:angle};};this.gradientAtPoint=function(location,absolute){var p=this.pointOnPath(location,absolute);var m=Biltong.normal([params.cx,params.cy],[p.x,p.y]);if(!this.anticlockwise&&(m==Infinity||m==-Infinity))m*=-1;return m;};this.pointAlongPathFrom=function(location,distance,absolute){var p=this.pointOnPath(location,absolute),arcSpan=distance / circumference*2*Math.PI,dir=this.anticlockwise?-1:1,startAngle=p.theta+(dir*arcSpan),startX=params.cx+(this.radius*Math.cos(startAngle)),startY=params.cy+(this.radius*Math.sin(startAngle));return{x:startX,y:startY};};},Bezier:function(params){this.curve=[{x:params.x1,y:params.y1},{x:params.cp1x,y:params.cp1y},{x:params.cp2x,y:params.cp2y},{x:params.x2,y:params.y2}];var _super=jsPlumb.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(params.x1,params.x2,params.cp1x,params.cp2x),minY:Math.min(params.y1,params.y2,params.cp1y,params.cp2y),maxX:Math.max(params.x1,params.x2,params.cp1x,params.cp2x),maxY:Math.max(params.y1,params.y2,params.cp1y,params.cp2y)};this.type="Bezier";var _translateLocation=function(_curve,location,absolute){if(absolute)
location=jsBezier.locationAlongCurveFrom(_curve,location>0?0:1,location);return location;};this.pointOnPath=function(location,absolute){location=_translateLocation(this.curve,location,absolute);return jsBezier.pointOnCurve(this.curve,location);};this.gradientAtPoint=function(location,absolute){location=_translateLocation(this.curve,location,absolute);return jsBezier.gradientAtPoint(this.curve,location);};this.pointAlongPathFrom=function(location,distance,absolute){location=_translateLocation(this.curve,location,absolute);return jsBezier.pointAlongCurveFrom(this.curve,location,distance);};this.getLength=function(){return jsBezier.getLength(this.curve);};this.getBounds=function(){return this.bounds;};}};var AbstractComponent=function(){this.resetBounds=function(){this.bounds={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};};this.resetBounds();};jsPlumb.Connectors.AbstractConnector=function(params){AbstractComponent.apply(this,arguments);var segments=[],totalLength=0,segmentProportions=[],segmentProportionalLengths=[],stub=params.stub||0,sourceStub=jsPlumbUtil.isArray(stub)?stub[0]:stub,targetStub=jsPlumbUtil.isArray(stub)?stub[1]:stub,gap=params.gap||0,sourceGap=jsPlumbUtil.isArray(gap)?gap[0]:gap,targetGap=jsPlumbUtil.isArray(gap)?gap[1]:gap,userProvidedSegments=null,edited=false,paintInfo=null;this.getPath=function(){};this.setPath=function(path){};this.findSegmentForPoint=function(x,y){var out={d:Infinity,s:null,x:null,y:null,l:null};for(var i=0;i<segments.length;i++){var _s=segments[i].findClosestPointOnPath(x,y);if(_s.d<out.d){out.d=_s.d;out.l=_s.l;out.x=_s.x;out.y=_s.y;out.s=segments[i];out.x1=_s.x1;out.x2=_s.x2;out.y1=_s.y1;out.y2=_s.y2;out.index=i;}}
return out;};var _updateSegmentProportions=function(){var curLoc=0;for(var i=0;i<segments.length;i++){var sl=segments[i].getLength();segmentProportionalLengths[i]=sl / totalLength;segmentProportions[i]=[curLoc,(curLoc+=(sl / totalLength))];}},_findSegmentForLocation=function(location,absolute){if(absolute){location=location>0?location / totalLength:(totalLength+location)/ totalLength;}
var idx=segmentProportions.length-1,inSegmentProportion=1;for(var i=0;i<segmentProportions.length;i++){if(segmentProportions[i][1]>=location){idx=i;inSegmentProportion=location==1?1:location===0?0:(location-segmentProportions[i][0])/ segmentProportionalLengths[i];break;}}
return{segment:segments[idx],proportion:inSegmentProportion,index:idx};},_addSegment=function(conn,type,params){if(params.x1==params.x2&&params.y1==params.y2)return;var s=new jsPlumb.Segments[type](params);segments.push(s);totalLength+=s.getLength();conn.updateBounds(s);},_clearSegments=function(){totalLength=segments.length=segmentProportions.length=segmentProportionalLengths.length=0;};this.setSegments=function(_segs){userProvidedSegments=[];totalLength=0;for(var i=0;i<_segs.length;i++){userProvidedSegments.push(_segs[i]);totalLength+=_segs[i].getLength();}};var _prepareCompute=function(params){this.lineWidth=params.lineWidth;var segment=Biltong.quadrant(params.sourcePos,params.targetPos),swapX=params.targetPos[0]<params.sourcePos[0],swapY=params.targetPos[1]<params.sourcePos[1],lw=params.lineWidth||1,so=params.sourceEndpoint.anchor.getOrientation(params.sourceEndpoint),to=params.targetEndpoint.anchor.getOrientation(params.targetEndpoint),x=swapX?params.targetPos[0]:params.sourcePos[0],y=swapY?params.targetPos[1]:params.sourcePos[1],w=Math.abs(params.targetPos[0]-params.sourcePos[0]),h=Math.abs(params.targetPos[1]-params.sourcePos[1]);if(so[0]===0&&so[1]===0||to[0]===0&&to[1]===0){var index=w>h?0:1,oIndex=[1,0][index];so=[];to=[];so[index]=params.sourcePos[index]>params.targetPos[index]?-1:1;to[index]=params.sourcePos[index]>params.targetPos[index]?1:-1;so[oIndex]=0;to[oIndex]=0;}
var sx=swapX?w+(sourceGap*so[0]):sourceGap*so[0],sy=swapY?h+(sourceGap*so[1]):sourceGap*so[1],tx=swapX?targetGap*to[0]:w+(targetGap*to[0]),ty=swapY?targetGap*to[1]:h+(targetGap*to[1]),oProduct=((so[0]*to[0])+(so[1]*to[1]));var result={sx:sx,sy:sy,tx:tx,ty:ty,lw:lw,xSpan:Math.abs(tx-sx),ySpan:Math.abs(ty-sy),mx:(sx+tx)/ 2,my:(sy+ty)/ 2,so:so,to:to,x:x,y:y,w:w,h:h,segment:segment,startStubX:sx+(so[0]*sourceStub),startStubY:sy+(so[1]*sourceStub),endStubX:tx+(to[0]*targetStub),endStubY:ty+(to[1]*targetStub),isXGreaterThanStubTimes2:Math.abs(sx-tx)>(sourceStub+targetStub),isYGreaterThanStubTimes2:Math.abs(sy-ty)>(sourceStub+targetStub),opposite:oProduct==-1,perpendicular:oProduct===0,orthogonal:oProduct==1,sourceAxis:so[0]===0?"y":"x",points:[x,y,w,h,sx,sy,tx,ty]};result.anchorOrientation=result.opposite?"opposite":result.orthogonal?"orthogonal":"perpendicular";return result;};this.getSegments=function(){return segments;};this.updateBounds=function(segment){var segBounds=segment.getBounds();this.bounds.minX=Math.min(this.bounds.minX,segBounds.minX);this.bounds.maxX=Math.max(this.bounds.maxX,segBounds.maxX);this.bounds.minY=Math.min(this.bounds.minY,segBounds.minY);this.bounds.maxY=Math.max(this.bounds.maxY,segBounds.maxY);};var dumpSegmentsToConsole=function(){console.log("SEGMENTS:");for(var i=0;i<segments.length;i++){console.log(segments[i].type,segments[i].getLength(),segmentProportions[i]);}};this.pointOnPath=function(location,absolute){var seg=_findSegmentForLocation(location,absolute);return seg.segment&&seg.segment.pointOnPath(seg.proportion,false)||[0,0];};this.gradientAtPoint=function(location,absolute){var seg=_findSegmentForLocation(location,absolute);return seg.segment&&seg.segment.gradientAtPoint(seg.proportion,false)||0;};this.pointAlongPathFrom=function(location,distance,absolute){var seg=_findSegmentForLocation(location,absolute);return seg.segment&&seg.segment.pointAlongPathFrom(seg.proportion,distance,false)||[0,0];};this.compute=function(params){if(!edited)
paintInfo=_prepareCompute.call(this,params);_clearSegments();this._compute(paintInfo,params);this.x=paintInfo.points[0];this.y=paintInfo.points[1];this.w=paintInfo.points[2];this.h=paintInfo.points[3];this.segment=paintInfo.segment;_updateSegmentProportions();};return{addSegment:_addSegment,prepareCompute:_prepareCompute,sourceStub:sourceStub,targetStub:targetStub,maxStub:Math.max(sourceStub,targetStub),sourceGap:sourceGap,targetGap:targetGap,maxGap:Math.max(sourceGap,targetGap)};};jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,AbstractComponent);var Straight=jsPlumb.Connectors.Straight=function(){this.type="Straight";var _super=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(paintInfo,_){_super.addSegment(this,"Straight",{x1:paintInfo.sx,y1:paintInfo.sy,x2:paintInfo.startStubX,y2:paintInfo.startStubY});_super.addSegment(this,"Straight",{x1:paintInfo.startStubX,y1:paintInfo.startStubY,x2:paintInfo.endStubX,y2:paintInfo.endStubY});_super.addSegment(this,"Straight",{x1:paintInfo.endStubX,y1:paintInfo.endStubY,x2:paintInfo.tx,y2:paintInfo.ty});};};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(Straight,"Straight");jsPlumb.Endpoints.AbstractEndpoint=function(params){AbstractComponent.apply(this,arguments);var compute=this.compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){var out=this._compute.apply(this,arguments);this.x=out[0];this.y=out[1];this.w=out[2];this.h=out[3];this.bounds.minX=this.x;this.bounds.minY=this.y;this.bounds.maxX=this.x+this.w;this.bounds.maxY=this.y+this.h;return out;};return{compute:compute,cssClass:params.cssClass};};jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,AbstractComponent);jsPlumb.Endpoints.Dot=function(params){this.type="Dot";var _super=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);params=params||{};this.radius=params.radius||10;this.defaultOffset=0.5*this.radius;this.defaultInnerRadius=this.radius / 3;this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){this.radius=endpointStyle.radius||this.radius;var x=anchorPoint[0]-this.radius,y=anchorPoint[1]-this.radius,w=this.radius*2,h=this.radius*2;if(endpointStyle.strokeStyle){var lw=endpointStyle.lineWidth||1;x-=lw;y-=lw;w+=(lw*2);h+=(lw*2);}
return[x,y,w,h,this.radius];};};jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint);jsPlumb.Endpoints.Rectangle=function(params){this.type="Rectangle";var _super=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);params=params||{};this.width=params.width||20;this.height=params.height||20;this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){var width=endpointStyle.width||this.width,height=endpointStyle.height||this.height,x=anchorPoint[0]-(width/2),y=anchorPoint[1]-(height/2);return[x,y,width,height];};};jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var DOMElementEndpoint=function(params){jsPlumb.jsPlumbUIComponent.apply(this,arguments);this._jsPlumb.displayElements=[];};jsPlumbUtil.extend(DOMElementEndpoint,jsPlumb.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements;},appendDisplayElement:function(el){this._jsPlumb.displayElements.push(el);}});jsPlumb.Endpoints.Image=function(params){this.type="Image";DOMElementEndpoint.apply(this,arguments);jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var _onload=params.onload,src=params.src||params.url,clazz=params.cssClass?" "+params.cssClass:"";this._jsPlumb.img=new Image();this._jsPlumb.ready=false;this._jsPlumb.initialized=false;this._jsPlumb.deleted=false;this._jsPlumb.widthToUse=params.width;this._jsPlumb.heightToUse=params.height;this._jsPlumb.endpoint=params.endpoint;this._jsPlumb.img.onload=function(){if(this._jsPlumb!=null){this._jsPlumb.ready=true;this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width;this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height;if(_onload){_onload(this);}}}.bind(this);this._jsPlumb.endpoint.setImage=function(_img,onload){var s=_img.constructor==String?_img:_img.src;_onload=onload;this._jsPlumb.img.src=s;if(this.canvas!=null)
this.canvas.setAttribute("src",this._jsPlumb.img.src);}.bind(this);this._jsPlumb.endpoint.setImage(src,_onload);this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){this.anchorPoint=anchorPoint;if(this._jsPlumb.ready)return[anchorPoint[0]-this._jsPlumb.widthToUse / 2,anchorPoint[1]-this._jsPlumb.heightToUse / 2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse];else return[0,0,0,0];};this.canvas=document.createElement("img");this.canvas.style.margin=0;this.canvas.style.padding=0;this.canvas.style.outline=0;this.canvas.style.position="absolute";this.canvas.className=this._jsPlumb.instance.endpointClass+clazz;if(this._jsPlumb.widthToUse)this.canvas.setAttribute("width",this._jsPlumb.widthToUse);if(this._jsPlumb.heightToUse)this.canvas.setAttribute("height",this._jsPlumb.heightToUse);this._jsPlumb.instance.appendElement(this.canvas);this.actuallyPaint=function(d,style,anchor){if(!this._jsPlumb.deleted){if(!this._jsPlumb.initialized){this.canvas.setAttribute("src",this._jsPlumb.img.src);this.appendDisplayElement(this.canvas);this._jsPlumb.initialized=true;}
var x=this.anchorPoint[0]-(this._jsPlumb.widthToUse / 2),y=this.anchorPoint[1]-(this._jsPlumb.heightToUse / 2);jsPlumbUtil.sizeElement(this.canvas,x,y,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse);}};this.paint=function(style,anchor){if(this._jsPlumb!=null){if(this._jsPlumb.ready){this.actuallyPaint(style,anchor);}
else{window.setTimeout(function(){this.paint(style,anchor);}.bind(this),200);}}};};jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[DOMElementEndpoint,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=true;if(this.canvas)this.canvas.parentNode.removeChild(this.canvas);this.canvas=null;}});jsPlumb.Endpoints.Blank=function(params){var _super=jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank";DOMElementEndpoint.apply(this,arguments);this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){return[anchorPoint[0],anchorPoint[1],10,0];};var clazz=params.cssClass?" "+params.cssClass:"";this.canvas=document.createElement("div");this.canvas.style.display="block";this.canvas.style.width="1px";this.canvas.style.height="1px";this.canvas.style.background="transparent";this.canvas.style.position="absolute";this.canvas.className=this._jsPlumb.instance.endpointClass+clazz;this._jsPlumb.instance.appendElement(this.canvas);this.paint=function(style,anchor){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h);};};jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,DOMElementEndpoint],{cleanup:function(){if(this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas);}}});jsPlumb.Endpoints.Triangle=function(params){this.type="Triangle";jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);params=params||{};params.width=params.width||55;params.height=params.height||55;this.width=params.width;this.height=params.height;this._compute=function(anchorPoint,orientation,endpointStyle,connectorPaintStyle){var width=endpointStyle.width||self.width,height=endpointStyle.height||self.height,x=anchorPoint[0]-(width/2),y=anchorPoint[1]-(height/2);return[x,y,width,height];};};var AbstractOverlay=jsPlumb.Overlays.AbstractOverlay=function(params){this.visible=true;this.isAppendedAtTopLevel=true;this.component=params.component;this.loc=params.location==null?0.5:params.location;this.endpointLoc=params.endpointLocation==null?[0.5,0.5]:params.endpointLocation;};AbstractOverlay.prototype={cleanup:function(){this.component=null;this.canvas=null;this.endpointLoc=null;},setVisible:function(val){this.visible=val;this.component.repaint();},isVisible:function(){return this.visible;},hide:function(){this.setVisible(false);},show:function(){this.setVisible(true);},incrementLocation:function(amount){this.loc+=amount;this.component.repaint();},setLocation:function(l){this.loc=l;this.component.repaint();},getLocation:function(){return this.loc;}};jsPlumb.Overlays.Arrow=function(params){this.type="Arrow";AbstractOverlay.apply(this,arguments);this.isAppendedAtTopLevel=false;params=params||{};var _ju=jsPlumbUtil,_jg=Biltong;this.length=params.length||20;this.width=params.width||20;this.id=params.id;var direction=(params.direction||1)<0?-1:1,paintStyle=params.paintStyle||{lineWidth:1},foldback=params.foldback||0.623;this.computeMaxSize=function(){return self.width*1.5;};this.draw=function(component,currentConnectionPaintStyle){var hxy,mid,txy,tail,cxy;if(component.pointAlongPathFrom){if(_ju.isString(this.loc)||this.loc>1||this.loc<0){var l=parseInt(this.loc,10),fromLoc=this.loc<0?1:0;hxy=component.pointAlongPathFrom(fromLoc,l,false);mid=component.pointAlongPathFrom(fromLoc,l-(direction*this.length / 2),false);txy=_jg.pointOnLine(hxy,mid,this.length);}
else if(this.loc==1){hxy=component.pointOnPath(this.loc);mid=component.pointAlongPathFrom(this.loc,-(this.length));txy=_jg.pointOnLine(hxy,mid,this.length);if(direction==-1){var _=txy;txy=hxy;hxy=_;}}
else if(this.loc===0){txy=component.pointOnPath(this.loc);mid=component.pointAlongPathFrom(this.loc,this.length);hxy=_jg.pointOnLine(txy,mid,this.length);if(direction==-1){var __=txy;txy=hxy;hxy=__;}}
else{hxy=component.pointAlongPathFrom(this.loc,direction*this.length / 2);mid=component.pointOnPath(this.loc);txy=_jg.pointOnLine(hxy,mid,this.length);}
tail=_jg.perpendicularLineTo(hxy,txy,this.width);cxy=_jg.pointOnLine(hxy,txy,foldback*this.length);var d={hxy:hxy,tail:tail,cxy:cxy},strokeStyle=paintStyle.strokeStyle||currentConnectionPaintStyle.strokeStyle,fillStyle=paintStyle.fillStyle||currentConnectionPaintStyle.strokeStyle,lineWidth=paintStyle.lineWidth||currentConnectionPaintStyle.lineWidth;return{component:component,d:d,lineWidth:lineWidth,strokeStyle:strokeStyle,fillStyle:fillStyle,minX:Math.min(hxy.x,tail[0].x,tail[1].x),maxX:Math.max(hxy.x,tail[0].x,tail[1].x),minY:Math.min(hxy.y,tail[0].y,tail[1].y),maxY:Math.max(hxy.y,tail[0].y,tail[1].y)};}
else return{component:component,minX:0,maxX:0,minY:0,maxY:0};};};jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,AbstractOverlay);jsPlumb.Overlays.PlainArrow=function(params){params=params||{};var p=jsPlumb.extend(params,{foldback:1});jsPlumb.Overlays.Arrow.call(this,p);this.type="PlainArrow";};jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow);jsPlumb.Overlays.Diamond=function(params){params=params||{};var l=params.length||40,p=jsPlumb.extend(params,{length:l/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,p);this.type="Diamond";};jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var _getDimensions=function(component,forceRefresh){if(component._jsPlumb.cachedDimensions==null||forceRefresh)
component._jsPlumb.cachedDimensions=component.getDimensions();return component._jsPlumb.cachedDimensions;};var AbstractDOMOverlay=function(params){jsPlumb.jsPlumbUIComponent.apply(this,arguments);AbstractOverlay.apply(this,arguments);var _f=this.fire;this.fire=function(){_f.apply(this,arguments);if(this.component)this.component.fire.apply(this.component,arguments);};this.id=params.id;this._jsPlumb.div=null;this._jsPlumb.initialised=false;this._jsPlumb.component=params.component;this._jsPlumb.cachedDimensions=null;this._jsPlumb.create=params.create;this._jsPlumb.initiallyInvisible=params.visible===false;this.getElement=function(){if(this._jsPlumb.div==null){var div=this._jsPlumb.div=jsPlumb.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));div.style.position="absolute";div.className=this._jsPlumb.instance.overlayClass+" "+
(this.cssClass?this.cssClass:params.cssClass?params.cssClass:"");this._jsPlumb.instance.appendElement(div);this._jsPlumb.instance.getId(div);this.canvas=div;var ts="translate(-50%, -50%)";div.style.webkitTransform=ts;div.style.mozTransform=ts;div.style.msTransform=ts;div.style.oTransform=ts;div.style.transform=ts;div._jsPlumb=this;if(params.visible===false)
div.style.display="none";}
return this._jsPlumb.div;};this.draw=function(component,currentConnectionPaintStyle,absolutePosition){var td=_getDimensions(this);if(td!=null&&td.length==2){var cxy={x:0,y:0};if(absolutePosition){cxy={x:absolutePosition[0],y:absolutePosition[1]};}
else if(component.pointOnPath){var loc=this.loc,absolute=false;if(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1){loc=parseInt(this.loc,10);absolute=true;}
cxy=component.pointOnPath(loc,absolute);}
else{var locToUse=this.loc.constructor==Array?this.loc:this.endpointLoc;cxy={x:locToUse[0]*component.w,y:locToUse[1]*component.h};}
var minx=cxy.x-(td[0]/ 2),miny=cxy.y-(td[1]/ 2);return{component:component,d:{minx:minx,miny:miny,td:td,cxy:cxy},minX:minx,maxX:minx+td[0],minY:miny,maxY:miny+td[1]};}
else return{minX:0,maxX:0,minY:0,maxY:0};};};jsPlumbUtil.extend(AbstractDOMOverlay,[jsPlumb.jsPlumbUIComponent,AbstractOverlay],{getDimensions:function(){return jsPlumbUtil.oldIE?jsPlumb.getSize(this.getElement()):[1,1];},setVisible:function(state){this._jsPlumb.div.style.display=state?"block":"none";if(state&&this._jsPlumb.initiallyInvisible){_getDimensions(this,true);this.component.repaint();this._jsPlumb.initiallyInvisible=false;}},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null;},cleanup:function(){if(this._jsPlumb.div!=null){this._jsPlumb.div._jsPlumb=null;this._jsPlumb.instance.removeElement(this._jsPlumb.div);}},computeMaxSize:function(){var td=_getDimensions(this);return Math.max(td[0],td[1]);},paint:function(p,containerExtents){if(!this._jsPlumb.initialised){this.getElement();p.component.appendDisplayElement(this._jsPlumb.div);this._jsPlumb.initialised=true;}
this._jsPlumb.div.style.left=(p.component.x+p.d.minx)+"px";this._jsPlumb.div.style.top=(p.component.y+p.d.miny)+"px";}});jsPlumb.Overlays.Custom=function(params){this.type="Custom";AbstractDOMOverlay.apply(this,arguments);};jsPlumbUtil.extend(jsPlumb.Overlays.Custom,AbstractDOMOverlay);jsPlumb.Overlays.GuideLines=function(){var self=this;self.length=50;self.lineWidth=5;this.type="GuideLines";AbstractOverlay.apply(this,arguments);jsPlumb.jsPlumbUIComponent.apply(this,arguments);this.draw=function(connector,currentConnectionPaintStyle){var head=connector.pointAlongPathFrom(self.loc,self.length / 2),mid=connector.pointOnPath(self.loc),tail=Biltong.pointOnLine(head,mid,self.length),tailLine=Biltong.perpendicularLineTo(head,tail,40),headLine=Biltong.perpendicularLineTo(tail,head,20);return{connector:connector,head:head,tail:tail,headLine:headLine,tailLine:tailLine,minX:Math.min(head.x,tail.x,headLine[0].x,headLine[1].x),minY:Math.min(head.y,tail.y,headLine[0].y,headLine[1].y),maxX:Math.max(head.x,tail.x,headLine[0].x,headLine[1].x),maxY:Math.max(head.y,tail.y,headLine[0].y,headLine[1].y)};};};jsPlumb.Overlays.Label=function(params){this.labelStyle=params.labelStyle;var labelWidth=null,labelHeight=null,labelText=null,labelPadding=null;this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var p=jsPlumb.extend({create:function(){return document.createElement("div");}},params);jsPlumb.Overlays.Custom.call(this,p);this.type="Label";this.label=params.label||"";this.labelText=null;if(this.labelStyle){var el=this.getElement();this.labelStyle.font=this.labelStyle.font||"12px sans-serif";el.style.font=this.labelStyle.font;el.style.color=this.labelStyle.color||"black";if(this.labelStyle.fillStyle)el.style.background=this.labelStyle.fillStyle;if(this.labelStyle.borderWidth>0){var dStyle=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";el.style.border=this.labelStyle.borderWidth+"px solid "+dStyle;}
if(this.labelStyle.padding)el.style.padding=this.labelStyle.padding;}};jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null;this.label=null;this.labelText=null;this.cssClass=null;this.labelStyle=null;},getLabel:function(){return this.label;},setLabel:function(l){this.label=l;this.labelText=null;this.clearCachedDimensions();this.update();this.component.repaint();},getDimensions:function(){this.update();return AbstractDOMOverlay.prototype.getDimensions.apply(this,arguments);},update:function(){if(typeof this.label=="function"){var lt=this.label(this);this.getElement().innerHTML=lt.replace(/\r\n/g,"<br/>");}
else{if(this.labelText==null){this.labelText=this.label;this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>");}}}});})();;;;(function(){var Bezier=function(params){params=params||{};var _super=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),stub=params.stub||50,majorAnchor=params.curviness||150,minorAnchor=10;this.type="Bezier";this.getCurviness=function(){return majorAnchor;};this._findControlPoint=function(point,sourceAnchorPosition,targetAnchorPosition,sourceEndpoint,targetEndpoint){var soo=sourceEndpoint.anchor.getOrientation(sourceEndpoint),too=targetEndpoint.anchor.getOrientation(targetEndpoint),perpendicular=soo[0]!=too[0]||soo[1]==too[1],p=[];if(!perpendicular){if(soo[0]===0)
p.push(sourceAnchorPosition[0]<targetAnchorPosition[0]?point[0]+minorAnchor:point[0]-minorAnchor);else p.push(point[0]-(majorAnchor*soo[0]));if(soo[1]===0)
p.push(sourceAnchorPosition[1]<targetAnchorPosition[1]?point[1]+minorAnchor:point[1]-minorAnchor);else p.push(point[1]+(majorAnchor*too[1]));}
else{if(too[0]===0)
p.push(targetAnchorPosition[0]<sourceAnchorPosition[0]?point[0]+minorAnchor:point[0]-minorAnchor);else p.push(point[0]+(majorAnchor*too[0]));if(too[1]===0)
p.push(targetAnchorPosition[1]<sourceAnchorPosition[1]?point[1]+minorAnchor:point[1]-minorAnchor);else p.push(point[1]+(majorAnchor*soo[1]));}
return p;};this._compute=function(paintInfo,p){var sp=p.sourcePos,tp=p.targetPos,_w=Math.abs(sp[0]-tp[0]),_h=Math.abs(sp[1]-tp[1]),_sx=sp[0]<tp[0]?_w:0,_sy=sp[1]<tp[1]?_h:0,_tx=sp[0]<tp[0]?0:_w,_ty=sp[1]<tp[1]?0:_h,_CP=this._findControlPoint([_sx,_sy],sp,tp,p.sourceEndpoint,p.targetEndpoint,paintInfo.so,paintInfo.to),_CP2=this._findControlPoint([_tx,_ty],tp,sp,p.targetEndpoint,p.sourceEndpoint,paintInfo.so,paintInfo.to);_super.addSegment(this,"Bezier",{x1:_sx,y1:_sy,x2:_tx,y2:_ty,cp1x:_CP[0],cp1y:_CP[1],cp2x:_CP2[0],cp2y:_CP2[1]});};};jsPlumbUtil.extend(Bezier,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(Bezier,"Bezier");})();;;;(function(){"use strict";var Line=function(x1,y1,x2,y2){this.m=(y2-y1)/(x2-x1);this.b=-1*((this.m*x1)-y1);this.rectIntersect=function(x,y,w,h){var results=[],xInt,yInt;xInt=(y-this.b)/ this.m;if(xInt>=x&&xInt<=(x+w))results.push([xInt,(this.m*xInt)+this.b]);yInt=(this.m*(x+w))+this.b;if(yInt>=y&&yInt<=(y+h))results.push([(yInt-this.b)/ this.m,yInt]);xInt=((y+h)-this.b)/ this.m;if(xInt>=x&&xInt<=(x+w))results.push([xInt,(this.m*xInt)+this.b]);yInt=(this.m*x)+this.b;if(yInt>=y&&yInt<=(y+h))results.push([(yInt-this.b)/ this.m,yInt]);if(results.length==2){var midx=(results[0][0]+results[1][0])/ 2,midy=(results[0][1]+results[1][1])/ 2;results.push([midx,midy]);var xseg=midx<=x+(w / 2)?-1:1,yseg=midy<=y+(h / 2)?-1:1;results.push([xseg,yseg]);return results;}
return null;};},_segment=function(x1,y1,x2,y2){if(x1<=x2&&y2<=y1)return 1;else if(x1<=x2&&y1<=y2)return 2;else if(x2<=x1&&y2>=y1)return 3;return 4;},_findControlPoint=function(midx,midy,segment,sourceEdge,targetEdge,dx,dy,distance,proximityLimit){if(distance<=proximityLimit)return[midx,midy];if(segment===1){if(sourceEdge[3]<=0&&targetEdge[3]>=1)return[midx+(sourceEdge[2]<0.5?-1*dx:dx),midy];else if(sourceEdge[2]>=1&&targetEdge[2]<=0)return[midx,midy+(sourceEdge[3]<0.5?-1*dy:dy)];else return[midx+(-1*dx),midy+(-1*dy)];}
else if(segment===2){if(sourceEdge[3]>=1&&targetEdge[3]<=0)return[midx+(sourceEdge[2]<0.5?-1*dx:dx),midy];else if(sourceEdge[2]>=1&&targetEdge[2]<=0)return[midx,midy+(sourceEdge[3]<0.5?-1*dy:dy)];else return[midx+(1*dx),midy+(-1*dy)];}
else if(segment===3){if(sourceEdge[3]>=1&&targetEdge[3]<=0)return[midx+(sourceEdge[2]<0.5?-1*dx:dx),midy];else if(sourceEdge[2]<=0&&targetEdge[2]>=1)return[midx,midy+(sourceEdge[3]<0.5?-1*dy:dy)];else return[midx+(-1*dx),midy+(-1*dy)];}
else if(segment===4){if(sourceEdge[3]<=0&&targetEdge[3]>=1)return[midx+(sourceEdge[2]<0.5?-1*dx:dx),midy];else if(sourceEdge[2]<=0&&targetEdge[2]>=1)return[midx,midy+(sourceEdge[3]<0.5?-1*dy:dy)];else return[midx+(1*dx),midy+(-1*dy)];}};var StateMachine=function(params){params=params||{};this.type="StateMachine";var self=this,_super=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),curviness=params.curviness||10,margin=params.margin||5,proximityLimit=params.proximityLimit||80,clockwise=params.orientation&&params.orientation==="clockwise",loopbackRadius=params.loopbackRadius||25,showLoopback=params.showLoopback!==false;this._compute=function(paintInfo,params){var w=Math.abs(params.sourcePos[0]-params.targetPos[0]),h=Math.abs(params.sourcePos[1]-params.targetPos[1]),x=Math.min(params.sourcePos[0],params.targetPos[0]),y=Math.min(params.sourcePos[1],params.targetPos[1]);if(!showLoopback||(params.sourceEndpoint.elementId!==params.targetEndpoint.elementId)){var _sx=params.sourcePos[0]<params.targetPos[0]?0:w,_sy=params.sourcePos[1]<params.targetPos[1]?0:h,_tx=params.sourcePos[0]<params.targetPos[0]?w:0,_ty=params.sourcePos[1]<params.targetPos[1]?h:0;if(params.sourcePos[2]===0)_sx-=margin;if(params.sourcePos[2]===1)_sx+=margin;if(params.sourcePos[3]===0)_sy-=margin;if(params.sourcePos[3]===1)_sy+=margin;if(params.targetPos[2]===0)_tx-=margin;if(params.targetPos[2]===1)_tx+=margin;if(params.targetPos[3]===0)_ty-=margin;if(params.targetPos[3]===1)_ty+=margin;var _midx=(_sx+_tx)/ 2,_midy=(_sy+_ty)/ 2,m2=(-1*_midx)/ _midy,theta2=Math.atan(m2),dy=(m2==Infinity||m2==-Infinity)?0:Math.abs(curviness / 2*Math.sin(theta2)),dx=(m2==Infinity||m2==-Infinity)?0:Math.abs(curviness / 2*Math.cos(theta2)),segment=_segment(_sx,_sy,_tx,_ty),distance=Math.sqrt(Math.pow(_tx-_sx,2)+Math.pow(_ty-_sy,2)),_controlPoint=_findControlPoint(_midx,_midy,segment,params.sourcePos,params.targetPos,curviness,curviness,distance,proximityLimit);_super.addSegment(this,"Bezier",{x1:_tx,y1:_ty,x2:_sx,y2:_sy,cp1x:_controlPoint[0],cp1y:_controlPoint[1],cp2x:_controlPoint[0],cp2y:_controlPoint[1]});}
else{var x1=params.sourcePos[0],x2=params.sourcePos[0],y1=params.sourcePos[1]-margin,y2=params.sourcePos[1]-margin,cx=x1,cy=y1-loopbackRadius,_w=2*loopbackRadius,_h=2*loopbackRadius,_x=cx-loopbackRadius,_y=cy-loopbackRadius;paintInfo.points[0]=_x;paintInfo.points[1]=_y;paintInfo.points[2]=_w;paintInfo.points[3]=_h;_super.addSegment(this,"Arc",{loopback:true,x1:(x1-_x)+4,y1:y1-_y,startAngle:0,endAngle:2*Math.PI,r:loopbackRadius,ac:!clockwise,x2:(x1-_x)-4,y2:y1-_y,cx:cx-_x,cy:cy-_y});}};};jsPlumb.registerConnectorType(StateMachine,"StateMachine");})();;;;(function(){"use strict";var Flowchart=function(params){this.type="Flowchart";params=params||{};params.stub=params.stub==null?30:params.stub;var self=this,_super=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),midpoint=params.midpoint==null?0.5:params.midpoint,points=[],segments=[],grid=params.grid,alwaysRespectStubs=params.alwaysRespectStubs,userSuppliedSegments=null,lastx=null,lasty=null,lastOrientation,cornerRadius=params.cornerRadius!=null?params.cornerRadius:0,sgn=function(n){return n<0?-1:n===0?0:1;},addSegment=function(segments,x,y,paintInfo){if(lastx==x&&lasty==y)return;var lx=lastx==null?paintInfo.sx:lastx,ly=lasty==null?paintInfo.sy:lasty,o=lx==x?"v":"h",sgnx=sgn(x-lx),sgny=sgn(y-ly);lastx=x;lasty=y;segments.push([lx,ly,x,y,o,sgnx,sgny]);},segLength=function(s){return Math.sqrt(Math.pow(s[0]-s[2],2)+Math.pow(s[1]-s[3],2));},_cloneArray=function(a){var _a=[];_a.push.apply(_a,a);return _a;},updateMinMax=function(a1){self.bounds.minX=Math.min(self.bounds.minX,a1[2]);self.bounds.maxX=Math.max(self.bounds.maxX,a1[2]);self.bounds.minY=Math.min(self.bounds.minY,a1[3]);self.bounds.maxY=Math.max(self.bounds.maxY,a1[3]);},writeSegments=function(conn,segments,paintInfo){var current,next;for(var i=0;i<segments.length-1;i++){current=current||_cloneArray(segments[i]);next=_cloneArray(segments[i+1]);if(cornerRadius>0&&current[4]!=next[4]){var radiusToUse=Math.min(cornerRadius,segLength(current),segLength(next));current[2]-=current[5]*radiusToUse;current[3]-=current[6]*radiusToUse;next[0]+=next[5]*radiusToUse;next[1]+=next[6]*radiusToUse;var ac=(current[6]==next[5]&&next[5]==1)||((current[6]==next[5]&&next[5]===0)&&current[5]!=next[6])||(current[6]==next[5]&&next[5]==-1),sgny=next[1]>current[3]?1:-1,sgnx=next[0]>current[2]?1:-1,sgnEqual=sgny==sgnx,cx=(sgnEqual&&ac||(!sgnEqual&&!ac))?next[0]:current[2],cy=(sgnEqual&&ac||(!sgnEqual&&!ac))?current[3]:next[1];_super.addSegment(conn,"Straight",{x1:current[0],y1:current[1],x2:current[2],y2:current[3]});_super.addSegment(conn,"Arc",{r:radiusToUse,x1:current[2],y1:current[3],x2:next[0],y2:next[1],cx:cx,cy:cy,ac:ac});}
else{var dx=(current[2]==current[0])?0:(current[2]>current[0])?(paintInfo.lw / 2):-(paintInfo.lw / 2),dy=(current[3]==current[1])?0:(current[3]>current[1])?(paintInfo.lw / 2):-(paintInfo.lw / 2);_super.addSegment(conn,"Straight",{x1:current[0]-dx,y1:current[1]-dy,x2:current[2]+dx,y2:current[3]+dy});}
current=next;}
if(next!=null){_super.addSegment(conn,"Straight",{x1:next[0],y1:next[1],x2:next[2],y2:next[3]});}};this.setSegments=function(s){userSuppliedSegments=s;};this.isEditable=function(){return true;};this.getOriginalSegments=function(){return userSuppliedSegments||segments;};this._compute=function(paintInfo,params){if(params.clearEdits)
userSuppliedSegments=null;if(userSuppliedSegments!=null){writeSegments(this,userSuppliedSegments,paintInfo);return;}
segments=[];lastx=null;lasty=null;lastOrientation=null;var midx=paintInfo.startStubX+((paintInfo.endStubX-paintInfo.startStubX)*midpoint),midy=paintInfo.startStubY+((paintInfo.endStubY-paintInfo.startStubY)*midpoint);var findClearedLine=function(start,mult,anchorPos,dimension){return start+(mult*((1-anchorPos)*dimension)+_super.maxStub);},orientations={x:[0,1],y:[1,0]},commonStubCalculator=function(axis){return[paintInfo.startStubX,paintInfo.startStubY,paintInfo.endStubX,paintInfo.endStubY];},stubCalculators={perpendicular:commonStubCalculator,orthogonal:commonStubCalculator,opposite:function(axis){var pi=paintInfo,idx=axis=="x"?0:1,areInProximity={"x":function(){return((pi.so[idx]==1&&(((pi.startStubX>pi.endStubX)&&(pi.tx>pi.startStubX))||((pi.sx>pi.endStubX)&&(pi.tx>pi.sx)))))||((pi.so[idx]==-1&&(((pi.startStubX<pi.endStubX)&&(pi.tx<pi.startStubX))||((pi.sx<pi.endStubX)&&(pi.tx<pi.sx)))));},"y":function(){return((pi.so[idx]==1&&(((pi.startStubY>pi.endStubY)&&(pi.ty>pi.startStubY))||((pi.sy>pi.endStubY)&&(pi.ty>pi.sy)))))||((pi.so[idx]==-1&&(((pi.startStubY<pi.endStubY)&&(pi.ty<pi.startStubY))||((pi.sy<pi.endStubY)&&(pi.ty<pi.sy)))));}};if(!alwaysRespectStubs&&areInProximity[axis]()){return{"x":[(paintInfo.sx+paintInfo.tx)/ 2,paintInfo.startStubY,(paintInfo.sx+paintInfo.tx)/ 2,paintInfo.endStubY],"y":[paintInfo.startStubX,(paintInfo.sy+paintInfo.ty)/ 2,paintInfo.endStubX,(paintInfo.sy+paintInfo.ty)/ 2]}[axis];}
else{return[paintInfo.startStubX,paintInfo.startStubY,paintInfo.endStubX,paintInfo.endStubY];}}},lineCalculators={perpendicular:function(axis,ss,oss,es,oes){var pi=paintInfo,sis={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},stubs={x:[[pi.startStubX,pi.endStubX],null,[pi.endStubX,pi.startStubX]],y:[[pi.startStubY,pi.endStubY],null,[pi.endStubY,pi.startStubY]]},midLines={x:[[midx,pi.startStubY],[midx,pi.endStubY]],y:[[pi.startStubX,midy],[pi.endStubX,midy]]},linesToEnd={x:[[pi.endStubX,pi.startStubY]],y:[[pi.startStubX,pi.endStubY]]},startToEnd={x:[[pi.startStubX,pi.endStubY],[pi.endStubX,pi.endStubY]],y:[[pi.endStubX,pi.startStubY],[pi.endStubX,pi.endStubY]]},startToMidToEnd={x:[[pi.startStubX,midy],[pi.endStubX,midy],[pi.endStubX,pi.endStubY]],y:[[midx,pi.startStubY],[midx,pi.endStubY],[pi.endStubX,pi.endStubY]]},otherStubs={x:[pi.startStubY,pi.endStubY],y:[pi.startStubX,pi.endStubX]},soIdx=orientations[axis][0],toIdx=orientations[axis][1],_so=pi.so[soIdx]+1,_to=pi.to[toIdx]+1,otherFlipped=(pi.to[toIdx]==-1&&(otherStubs[axis][1]<otherStubs[axis][0]))||(pi.to[toIdx]==1&&(otherStubs[axis][1]>otherStubs[axis][0])),stub1=stubs[axis][_so][0],stub2=stubs[axis][_so][1],segmentIndexes=sis[axis][_so][_to];if(pi.segment==segmentIndexes[3]||(pi.segment==segmentIndexes[2]&&otherFlipped)){return midLines[axis];}
else if(pi.segment==segmentIndexes[2]&&stub2<stub1){return linesToEnd[axis];}
else if((pi.segment==segmentIndexes[2]&&stub2>=stub1)||(pi.segment==segmentIndexes[1]&&!otherFlipped)){return startToMidToEnd[axis];}
else if(pi.segment==segmentIndexes[0]||(pi.segment==segmentIndexes[1]&&otherFlipped)){return startToEnd[axis];}},orthogonal:function(axis,startStub,otherStartStub,endStub,otherEndStub){var pi=paintInfo,extent={"x":pi.so[0]==-1?Math.min(startStub,endStub):Math.max(startStub,endStub),"y":pi.so[1]==-1?Math.min(startStub,endStub):Math.max(startStub,endStub)}[axis];return{"x":[[extent,otherStartStub],[extent,otherEndStub],[endStub,otherEndStub]],"y":[[otherStartStub,extent],[otherEndStub,extent],[otherEndStub,endStub]]}[axis];},opposite:function(axis,ss,oss,es,oes){var pi=paintInfo,otherAxis={"x":"y","y":"x"}[axis],dim={"x":"height","y":"width"}[axis],comparator=pi["is"+axis.toUpperCase()+"GreaterThanStubTimes2"];if(params.sourceEndpoint.elementId==params.targetEndpoint.elementId){var _val=oss+((1-params.sourceEndpoint.anchor[otherAxis])*params.sourceInfo[dim])+_super.maxStub;return{"x":[[ss,_val],[es,_val]],"y":[[_val,ss],[_val,es]]}[axis];}
else if(!comparator||(pi.so[idx]==1&&ss>es)||(pi.so[idx]==-1&&ss<es)){return{"x":[[ss,midy],[es,midy]],"y":[[midx,ss],[midx,es]]}[axis];}
else if((pi.so[idx]==1&&ss<es)||(pi.so[idx]==-1&&ss>es)){return{"x":[[midx,pi.sy],[midx,pi.ty]],"y":[[pi.sx,midy],[pi.tx,midy]]}[axis];}}};var stubs=stubCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis),idx=paintInfo.sourceAxis=="x"?0:1,oidx=paintInfo.sourceAxis=="x"?1:0,ss=stubs[idx],oss=stubs[oidx],es=stubs[idx+2],oes=stubs[oidx+2];addSegment(segments,stubs[0],stubs[1],paintInfo);var p=lineCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis,ss,oss,es,oes);if(p){for(var i=0;i<p.length;i++){addSegment(segments,p[i][0],p[i][1],paintInfo);}}
addSegment(segments,stubs[2],stubs[3],paintInfo);addSegment(segments,paintInfo.tx,paintInfo.ty,paintInfo);writeSegments(this,segments,paintInfo);};this.getPath=function(){var _last=null,_lastAxis=null,s=[],segs=userSuppliedSegments||segments;for(var i=0;i<segs.length;i++){var seg=segs[i],axis=seg[4],axisIndex=(axis=="v"?3:2);if(_last!=null&&_lastAxis===axis){_last[axisIndex]=seg[axisIndex];}
else{if(seg[0]!=seg[2]||seg[1]!=seg[3]){s.push({start:[seg[0],seg[1]],end:[seg[2],seg[3]]});_last=seg;_lastAxis=seg[4];}}}
return s;};this.setPath=function(path){userSuppliedSegments=[];for(var i=0;i<path.length;i++){var lx=path[i].start[0],ly=path[i].start[1],x=path[i].end[0],y=path[i].end[1],o=lx==x?"v":"h",sgnx=sgn(x-lx),sgny=sgn(y-ly);userSuppliedSegments.push([lx,ly,x,y,o,sgnx,sgny]);}};};jsPlumbUtil.extend(Flowchart,jsPlumb.Connectors.AbstractConnector);jsPlumb.registerConnectorType(Flowchart,"Flowchart");})();;;;(function(){var AbstractEditor=function(params){var self=this;};var isTouchDevice="ontouchstart"in document.documentElement,downEvent=isTouchDevice?"touchstart":"mousedown",upEvent=isTouchDevice?"touchend":"mouseup",moveEvent=isTouchDevice?"touchmove":"mousemove";var findClosestPointOnPath=function(seg,x,y,i,bounds){var m=seg[0]==seg[2]?Infinity:0,m2=-1 / m,out={s:seg,m:m,i:i,x:-1,y:-1,d:Infinity};if(m==0){if((seg[0]<=x&&x<=seg[2])||(seg[2]<=x&&x<=seg[0])){out.x=x,out.y=seg[1];out.d=Math.abs(y-seg[1]);}}
else if(m==Infinity||m==-Infinity){if((seg[1]<=y&&y<=seg[3])||(seg[3]<=y&&y<=seg[1])){out.x=seg[0];out.y=y;out.d=Math.abs(x-seg[0]);}}
else{var b=seg[1]-(m*seg[0]),b2=y-(m2*x),_x1=(b2-b)/(m-m2),_y1=(m*_x1)+b,d=Biltong.lineLength([x,y],[_x1,_y1]),fractionInSegment=Biltong.lineLength([_x1,_y1],[seg[0],seg[1]]);out.d=d;out.x=_x1;out.y=_y1;out.l=fractionInSegment / length;}
return out;};jsPlumb.ConnectorEditors={"Flowchart":function(params){AbstractEditor.apply(this,arguments);var clickConsumer=function(conn){conn._jsPlumb.afterEditClick=function(){console.log("after edit click");conn.unbind("click",conn._jsPlumb.afterEditClick);conn._jsPlumb.afterEditClick=null;return false;};conn.bind("click",conn._jsPlumb.afterEditClick,true);},documentMouseUp=function(e){jsPlumbAdapter.removeClass(document.body,params.connection._jsPlumb.instance.dragSelectClass);params.connection._jsPlumb.instance.setConnectionBeingDragged(false);e.stopPropagation();e.preventDefault();jsPlumb.off(document,upEvent,documentMouseUp);jsPlumb.off(document,moveEvent,documentMouseMove);downAt=null;currentSegments=null;selectedSegment=null;segmentCoords=null;params.connection.setHover(false);params.connector.setSuspendEvents(false);params.connection.endpoints[0].setSuspendEvents(false);params.connection.endpoints[1].setSuspendEvents(false);params.connection.editCompleted();params.connector.justEdited=editing;editing=false;},downAt=null,currentSegments=null,selectedSegment=null,segmentCoords=null,editing=false,anchorsMoveable=true,sgn=function(p1,p2){if(p1[0]==p2[0])
return p1[1]<p2[1]?1:-1;else
return p1[0]<p2[0]?1:-1;},_collapseSegments=function(){var _last=null,_lastAxis=null,s=[];for(var i=0;i<currentSegments.length;i++){var seg=currentSegments[i],axis=seg[4],axisIndex=(axis=="v"?3:2);if(_last!=null&&_lastAxis===axis){_last[axisIndex]=seg[axisIndex];}
else{s.push(seg);_last=seg;_lastAxis=seg[4];}}
currentSegments=s;},_shiftAnchor=function(endpoint,horizontal,value){var elementSize=jsPlumb.getSize(endpoint.element),sizeValue=elementSize[horizontal?1:0],ee=jsPlumb.getElementObject(endpoint.element),off=jsPlumb.getOffset(ee),cc=jsPlumb.getElementObject(params.connector.canvas.parentNode),co=jsPlumb.getOffset(cc),offValue=off[horizontal?"top":"left"]-co[horizontal?"top":"left"],ap=endpoint.anchor.getCurrentLocation({element:endpoint}),desiredLoc=horizontal?params.connector.y+value:params.connector.x+value;if(anchorsMoveable){if(offValue<desiredLoc&&desiredLoc<offValue+sizeValue){var udl=[ap[0],ap[1]];ap[horizontal?1:0]=desiredLoc;endpoint.anchor.setUserDefinedLocation(ap);return value;}
else{var edgeVal=desiredLoc<offValue?offValue:offValue+sizeValue;return edgeVal-(horizontal?params.connector.y:params.connector.x);}}
else{return ap[horizontal?1:0]-params.connector[horizontal?"y":"x"];}},_updateSegmentOrientation=function(seg){if(seg[0]!=seg[2])seg[5]=(seg[0]<seg[2])?1:-1;if(seg[1]!=seg[3])seg[6]=(seg[1]<seg[3])?1:-1;},documentMouseMove=function(e){if(selectedSegment!=null){if(!editing){params.connection.setHover(true);params.connector.setSuspendEvents(true);params.connection.endpoints[0].setSuspendEvents(true);params.connection.endpoints[1].setSuspendEvents(true);}
editing=true;var m=selectedSegment.m,s=selectedSegment.s,x=(e.pageX||e.page.x),y=(e.pageY||e.page.y),dx=m==0?0:x-downAt[0],dy=m==0?y-downAt[1]:0,newX1=segmentCoords[0]+dx,newY1=segmentCoords[1]+dy,newX2=segmentCoords[2]+dx,newY2=segmentCoords[3]+dy,horizontal=s[4]=="h";if(selectedSegment.i==0){var anchorLoc=_shiftAnchor(params.connection.endpoints[0],horizontal,horizontal?newY1:newX1);if(horizontal)
newY1=newY2=anchorLoc;else
newX1=newX2=anchorLoc;currentSegments[1][0]=newX2;currentSegments[1][1]=newY2;_updateSegmentOrientation(currentSegments[1]);}
else if(selectedSegment.i==currentSegments.length-1){var anchorLoc=_shiftAnchor(params.connection.endpoints[1],horizontal,horizontal?newY1:newX1);if(horizontal)
newY1=newY2=anchorLoc;else
newX1=newX2=anchorLoc;currentSegments[currentSegments.length-2][2]=newX1;currentSegments[currentSegments.length-2][3]=newY1;_updateSegmentOrientation(currentSegments[currentSegments.length-2]);}
else{if(!horizontal){currentSegments[selectedSegment.i-1][2]=newX1;currentSegments[selectedSegment.i+1][0]=newX2;}
else{currentSegments[selectedSegment.i-1][3]=newY1;currentSegments[selectedSegment.i+1][1]=newY2;}
_updateSegmentOrientation(currentSegments[selectedSegment.i+1]);_updateSegmentOrientation(currentSegments[selectedSegment.i-1]);}
s[0]=newX1;s[1]=newY1;s[2]=newX2;s[3]=newY2;params.connector.setSegments(currentSegments);params.connection.repaint();params.connection.endpoints[0].repaint();params.connection.endpoints[1].repaint();params.connector.setEdited(true);}
else
editing=false;};params.connector.bind(downEvent,function(c,e){var x=(e.pageX||e.page.x),y=(e.pageY||e.page.y),oe=jsPlumb.getElementObject(params.connection.getConnector().canvas),o=jsPlumbAdapter.getOffset(oe,params.connection._jsPlumb.instance),minD=Infinity;var __seg=params.connector.findSegmentForPoint(x-o.left,y-o.top);console.log(__seg);currentSegments=params.connector.getOriginalSegments();_collapseSegments();for(var i=0;i<currentSegments.length;i++){var _s=findClosestPointOnPath(currentSegments[i],(x-o.left),(y-o.top),i,params.connector.bounds);if(_s.d<minD){selectedSegment=_s;segmentCoords=[_s.s[0],_s.s[1],_s.s[2],_s.s[3]];minD=_s.d;}}
downAt=[x,y];if(selectedSegment!=null){jsPlumb.on(document,upEvent,documentMouseUp);jsPlumb.on(document,moveEvent,documentMouseMove);jsPlumbAdapter.addClass(document.body,params.connection._jsPlumb.instance.dragSelectClass);params.connection._jsPlumb.instance.setConnectionBeingDragged(true);params.connection.editStarted();return false;}},true);}};jsPlumb.Connectors.AbstractConnector.prototype.shouldFireEvent=function(type,value,originalEvent){var out=!this.justEdited;if(type=="click"){this.justEdited=false;}
return out;};var EDIT_STARTED="editStarted",EDIT_COMPLETED="editCompleted",EDIT_CANCELED="editCanceled";jsPlumb.Connection.prototype.setEditable=function(e){if(this.connector&&this.connector.isEditable())
this._jsPlumb.editable=e;return this._jsPlumb.editable;};jsPlumb.Connection.prototype.isEditable=function(){return this._jsPlumb.editable;};jsPlumb.Connection.prototype.editStarted=function(){this.setSuspendEvents(true);this.fire(EDIT_STARTED,{path:this.connector.getPath()});this._jsPlumb.instance.setHoverSuspended(true);};jsPlumb.Connection.prototype.editCompleted=function(){this.fire(EDIT_COMPLETED,{path:this.connector.getPath()});this.setSuspendEvents(false);this._jsPlumb.instance.setHoverSuspended(false);this.setHover(false);};jsPlumb.Connection.prototype.editCanceled=function(){this.fire(EDIT_CANCELED,{path:this.connector.getPath()});this._jsPlumb.instance.setHoverSuspended(false);this.setHover(false);};})();;;;(function(){"use strict";var svgAttributeMap={"joinstyle":"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},STROKE_DASHARRAY="stroke-dasharray",DASHSTYLE="dashstyle",LINEAR_GRADIENT="linearGradient",RADIAL_GRADIENT="radialGradient",DEFS="defs",FILL="fill",STOP="stop",STROKE="stroke",STROKE_WIDTH="stroke-width",STYLE="style",NONE="none",JSPLUMB_GRADIENT="jsplumb_gradient_",LINE_WIDTH="lineWidth",ns={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},_attr=function(node,attributes){for(var i in attributes)
node.setAttribute(i,""+attributes[i]);},_node=function(name,attributes){var n=document.createElementNS(ns.svg,name);attributes=attributes||{};attributes.version="1.1";attributes.xmlns=ns.xhtml;_attr(n,attributes);return n;},_pos=function(d){return"position:absolute;left:"+d[0]+"px;top:"+d[1]+"px";},_clearGradient=function(parent){for(var i=0;i<parent.childNodes.length;i++){if(parent.childNodes[i].tagName==DEFS||parent.childNodes[i].tagName==LINEAR_GRADIENT||parent.childNodes[i].tagName==RADIAL_GRADIENT)
parent.removeChild(parent.childNodes[i]);}},_updateGradient=function(parent,node,style,dimensions,uiComponent){var id=JSPLUMB_GRADIENT+uiComponent._jsPlumb.instance.idstamp();_clearGradient(parent);var g;if(!style.gradient.offset)
g=_node(LINEAR_GRADIENT,{id:id,gradientUnits:"userSpaceOnUse"});else
g=_node(RADIAL_GRADIENT,{id:id});var defs=_node(DEFS);parent.appendChild(defs);defs.appendChild(g);for(var i=0;i<style.gradient.stops.length;i++){var styleToUse=uiComponent.segment==1||uiComponent.segment==2?i:style.gradient.stops.length-1-i,stopColor=jsPlumbUtil.convertStyle(style.gradient.stops[styleToUse][1],true),s=_node(STOP,{"offset":Math.floor(style.gradient.stops[i][0]*100)+"%","stop-color":stopColor});g.appendChild(s);}
var applyGradientTo=style.strokeStyle?STROKE:FILL;node.setAttribute(applyGradientTo,"url(#"+id+")");},_applyStyles=function(parent,node,style,dimensions,uiComponent){node.setAttribute(FILL,style.fillStyle?jsPlumbUtil.convertStyle(style.fillStyle,true):NONE);node.setAttribute(STROKE,style.strokeStyle?jsPlumbUtil.convertStyle(style.strokeStyle,true):NONE);if(style.gradient){_updateGradient(parent,node,style,dimensions,uiComponent);}
else{_clearGradient(parent);node.setAttribute(STYLE,"");}
if(style.lineWidth){node.setAttribute(STROKE_WIDTH,style.lineWidth);}
if(style[DASHSTYLE]&&style[LINE_WIDTH]&&!style[STROKE_DASHARRAY]){var sep=style[DASHSTYLE].indexOf(",")==-1?" ":",",parts=style[DASHSTYLE].split(sep),styleToUse="";parts.forEach(function(p){styleToUse+=(Math.floor(p*style.lineWidth)+sep);});node.setAttribute(STROKE_DASHARRAY,styleToUse);}
else if(style[STROKE_DASHARRAY]){node.setAttribute(STROKE_DASHARRAY,style[STROKE_DASHARRAY]);}
for(var i in svgAttributeMap){if(style[i]){node.setAttribute(svgAttributeMap[i],style[i]);}}},_decodeFont=function(f){var r=/([0-9].)(p[xt])\s(.*)/,bits=f.match(r);return{size:bits[1]+bits[2],font:bits[3]};},_appendAtIndex=function(svg,path,idx){if(svg.childNodes.length>idx){svg.insertBefore(path,svg.childNodes[idx]);}
else svg.appendChild(path);};jsPlumbUtil.svg={node:_node,attr:_attr,pos:_pos};var SvgComponent=function(params){var pointerEventsSpec=params.pointerEventsSpec||"all",renderer={};jsPlumb.jsPlumbUIComponent.apply(this,params.originalArgs);this.canvas=null;this.path=null;this.svg=null;this.bgCanvas=null;var clazz=params.cssClass+" "+(params.originalArgs[0].cssClass||""),svgParams={"style":"","width":0,"height":0,"pointer-events":pointerEventsSpec,"position":"absolute"};this.svg=_node("svg",svgParams);if(params.useDivWrapper){this.canvas=document.createElement("div");this.canvas.style.position="absolute";jsPlumbUtil.sizeElement(this.canvas,0,0,1,1);this.canvas.className=clazz;}
else{_attr(this.svg,{"class":clazz});this.canvas=this.svg;}
params._jsPlumb.appendElement(this.canvas,params.originalArgs[0].parent);if(params.useDivWrapper)this.canvas.appendChild(this.svg);var displayElements=[this.canvas];this.getDisplayElements=function(){return displayElements;};this.appendDisplayElement=function(el){displayElements.push(el);};this.paint=function(style,anchor,extents){if(style!=null){var xy=[this.x,this.y],wh=[this.w,this.h],p;if(extents!=null){if(extents.xmin<0)xy[0]+=extents.xmin;if(extents.ymin<0)xy[1]+=extents.ymin;wh[0]=extents.xmax+((extents.xmin<0)?-extents.xmin:0);wh[1]=extents.ymax+((extents.ymin<0)?-extents.ymin:0);}
if(params.useDivWrapper){jsPlumbUtil.sizeElement(this.canvas,xy[0],xy[1],wh[0],wh[1]);xy[0]=0;xy[1]=0;p=_pos([0,0]);}
else
p=_pos([xy[0],xy[1]]);renderer.paint.apply(this,arguments);_attr(this.svg,{"style":p,"width":wh[0],"height":wh[1]});}};return{renderer:renderer};};jsPlumbUtil.extend(SvgComponent,jsPlumb.jsPlumbUIComponent,{cleanup:function(){if(this.canvas)this.canvas._jsPlumb=null;if(this.svg)this.svg._jsPlumb=null;if(this.bgCanvas)this.bgCanvas._jsPlumb=null;if(this.canvas&&this.canvas.parentNode)this.canvas.parentNode.removeChild(this.canvas);if(this.bgCanvas&&this.bgCanvas.parentNode)this.canvas.parentNode.removeChild(this.canvas);this.svg=null;this.canvas=null;this.path=null;this.group=null;},setVisible:function(v){if(this.canvas){this.canvas.style.display=v?"block":"none";}}});jsPlumb.ConnectorRenderers.svg=function(params){var self=this,_super=SvgComponent.apply(this,[{cssClass:params._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:params._jsPlumb}]);_super.renderer.paint=function(style,anchor,extents){var segments=self.getSegments(),p="",offset=[0,0];if(extents.xmin<0)offset[0]=-extents.xmin;if(extents.ymin<0)offset[1]=-extents.ymin;if(segments.length>0){for(var i=0;i<segments.length;i++){p+=jsPlumb.Segments.svg.SegmentRenderer.getPath(segments[i]);p+=" ";}
var a={d:p,transform:"translate("+offset[0]+","+offset[1]+")","pointer-events":params["pointer-events"]||"visibleStroke"},outlineStyle=null,d=[self.x,self.y,self.w,self.h];if(style.outlineColor){var outlineWidth=style.outlineWidth||1,outlineStrokeWidth=style.lineWidth+(2*outlineWidth);outlineStyle=jsPlumb.extend({},style);delete outlineStyle.gradient;outlineStyle.strokeStyle=jsPlumbUtil.convertStyle(style.outlineColor);outlineStyle.lineWidth=outlineStrokeWidth;if(self.bgPath==null){self.bgPath=_node("path",a);_appendAtIndex(self.svg,self.bgPath,0);}
else{_attr(self.bgPath,a);}
_applyStyles(self.svg,self.bgPath,outlineStyle,d,self);}
if(self.path==null){self.path=_node("path",a);_appendAtIndex(self.svg,self.path,style.outlineColor?1:0);}
else{_attr(self.path,a);}
_applyStyles(self.svg,self.path,style,d,self);}};};jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,SvgComponent);jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(segment){return({"Straight":function(){var d=segment.getCoordinates();return"M "+d.x1+" "+d.y1+" L "+d.x2+" "+d.y2;},"Bezier":function(){var d=segment.params;return"M "+d.x1+" "+d.y1+" C "+d.cp1x+" "+d.cp1y+" "+d.cp2x+" "+d.cp2y+" "+d.x2+" "+d.y2;},"Arc":function(){var d=segment.params,laf=segment.sweep>Math.PI?1:0,sf=segment.anticlockwise?0:1;return"M"+segment.x1+" "+segment.y1+" A "+segment.radius+" "+d.r+" 0 "+laf+","+sf+" "+segment.x2+" "+segment.y2;}})[segment.type]();}}};var SvgEndpoint=window.SvgEndpoint=function(params){var _super=SvgComponent.apply(this,[{cssClass:params._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:true,_jsPlumb:params._jsPlumb}]);_super.renderer.paint=function(style){var s=jsPlumb.extend({},style);if(s.outlineColor){s.strokeWidth=s.outlineWidth;s.strokeStyle=jsPlumbUtil.convertStyle(s.outlineColor,true);}
if(this.node==null){this.node=this.makeNode(s);this.svg.appendChild(this.node);}
else if(this.updateNode!=null){this.updateNode(this.node);}
_applyStyles(this.svg,this.node,s,[this.x,this.y,this.w,this.h],this);_pos(this.node,[this.x,this.y]);}.bind(this);};jsPlumbUtil.extend(SvgEndpoint,SvgComponent);jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments);SvgEndpoint.apply(this,arguments);this.makeNode=function(style){return _node("circle",{"cx":this.w / 2,"cy":this.h / 2,"r":this.radius});};this.updateNode=function(node){_attr(node,{"cx":this.w / 2,"cy":this.h / 2,"r":this.radius});};};jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,SvgEndpoint]);jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments);SvgEndpoint.apply(this,arguments);this.makeNode=function(style){return _node("rect",{"width":this.w,"height":this.h});};this.updateNode=function(node){_attr(node,{"width":this.w,"height":this.h});};};jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,SvgEndpoint]);jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var AbstractSvgArrowOverlay=function(superclass,originalArgs){superclass.apply(this,originalArgs);jsPlumb.jsPlumbUIComponent.apply(this,originalArgs);this.isAppendedAtTopLevel=false;var self=this;this.path=null;this.paint=function(params,containerExtents){if(params.component.svg&&containerExtents){if(this.path==null){this.path=_node("path",{"pointer-events":"all"});params.component.svg.appendChild(this.path);this.canvas=params.component.svg;}
var clazz=originalArgs&&(originalArgs.length==1)?(originalArgs[0].cssClass||""):"",offset=[0,0];if(containerExtents.xmin<0)offset[0]=-containerExtents.xmin;if(containerExtents.ymin<0)offset[1]=-containerExtents.ymin;_attr(this.path,{"d":makePath(params.d),"class":clazz,stroke:params.strokeStyle?params.strokeStyle:null,fill:params.fillStyle?params.fillStyle:null,transform:"translate("+offset[0]+","+offset[1]+")"});}};var makePath=function(d){return"M"+d.hxy.x+","+d.hxy.y+" L"+d.tail[0].x+","+d.tail[0].y+" L"+d.cxy.x+","+d.cxy.y+" L"+d.tail[1].x+","+d.tail[1].y+" L"+d.hxy.x+","+d.hxy.y;};};jsPlumbUtil.extend(AbstractSvgArrowOverlay,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){if(this.path!=null)this._jsPlumb.instance.removeElement(this.path);},setVisible:function(v){if(this.path!=null)(this.path.style.display=(v?"block":"none"));}});jsPlumb.Overlays.svg.Arrow=function(){AbstractSvgArrowOverlay.apply(this,[jsPlumb.Overlays.Arrow,arguments]);};jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,AbstractSvgArrowOverlay]);jsPlumb.Overlays.svg.PlainArrow=function(){AbstractSvgArrowOverlay.apply(this,[jsPlumb.Overlays.PlainArrow,arguments]);};jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,AbstractSvgArrowOverlay]);jsPlumb.Overlays.svg.Diamond=function(){AbstractSvgArrowOverlay.apply(this,[jsPlumb.Overlays.Diamond,arguments]);};jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,AbstractSvgArrowOverlay]);jsPlumb.Overlays.svg.GuideLines=function(){var path=null,self=this,p1_1,p1_2;jsPlumb.Overlays.GuideLines.apply(this,arguments);this.paint=function(params,containerExtents){if(path==null){path=_node("path");params.connector.svg.appendChild(path);self.attachListeners(path,params.connector);self.attachListeners(path,self);p1_1=_node("path");params.connector.svg.appendChild(p1_1);self.attachListeners(p1_1,params.connector);self.attachListeners(p1_1,self);p1_2=_node("path");params.connector.svg.appendChild(p1_2);self.attachListeners(p1_2,params.connector);self.attachListeners(p1_2,self);}
var offset=[0,0];if(containerExtents.xmin<0)offset[0]=-containerExtents.xmin;if(containerExtents.ymin<0)offset[1]=-containerExtents.ymin;_attr(path,{"d":makePath(params.head,params.tail),stroke:"red",fill:null,transform:"translate("+offset[0]+","+offset[1]+")"});_attr(p1_1,{"d":makePath(params.tailLine[0],params.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+offset[0]+","+offset[1]+")"});_attr(p1_2,{"d":makePath(params.headLine[0],params.headLine[1]),stroke:"green",fill:null,transform:"translate("+offset[0]+","+offset[1]+")"});};var makePath=function(d1,d2){return"M "+d1.x+","+d1.y+" L"+d2.x+","+d2.y;};};jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines);})();;;;(function(){"use strict";var vmlAttributeMap={"stroke-linejoin":"joinstyle","joinstyle":"joinstyle","endcap":"endcap","miterlimit":"miterlimit"},jsPlumbStylesheet=null;if(document.createStyleSheet&&document.namespaces){var ruleClasses=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],rule="behavior:url(#default#VML);position:absolute;";jsPlumbStylesheet=document.createStyleSheet();for(var i=0;i<ruleClasses.length;i++)
jsPlumbStylesheet.addRule(ruleClasses[i],rule);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml");}
jsPlumb.vml={};var scale=1000,_atts=function(o,atts){for(var i in atts){o[i]=atts[i];}},_node=function(name,d,atts,parent,_jsPlumb,deferToJsPlumbContainer){atts=atts||{};var o=document.createElement("jsplumb:"+name);if(deferToJsPlumbContainer)
_jsPlumb.appendElement(o,parent);else
parent.appendChild(o);o.className=(atts["class"]?atts["class"]+" ":"")+"jsplumb_vml";_pos(o,d);_atts(o,atts);return o;},_pos=function(o,d,zIndex){o.style.left=d[0]+"px";o.style.top=d[1]+"px";o.style.width=d[2]+"px";o.style.height=d[3]+"px";o.style.position="absolute";if(zIndex)
o.style.zIndex=zIndex;},_conv=jsPlumb.vml.convertValue=function(v){return Math.floor(v*scale);},_maybeSetOpacity=function(styleToWrite,styleToCheck,type,component){if("transparent"===styleToCheck)
component.setOpacity(type,"0.0");else
component.setOpacity(type,"1.0");},_applyStyles=function(node,style,component,_jsPlumb){var styleToWrite={};if(style.strokeStyle){styleToWrite.stroked="true";var strokeColor=jsPlumbUtil.convertStyle(style.strokeStyle,true);styleToWrite.strokecolor=strokeColor;_maybeSetOpacity(styleToWrite,strokeColor,"stroke",component);styleToWrite.strokeweight=style.lineWidth+"px";}
else styleToWrite.stroked="false";if(style.fillStyle){styleToWrite.filled="true";var fillColor=jsPlumbUtil.convertStyle(style.fillStyle,true);styleToWrite.fillcolor=fillColor;_maybeSetOpacity(styleToWrite,fillColor,"fill",component);}
else styleToWrite.filled="false";if(style.dashstyle){if(component.strokeNode==null){component.strokeNode=_node("stroke",[0,0,0,0],{dashstyle:style.dashstyle},node,_jsPlumb);}
else
component.strokeNode.dashstyle=style.dashstyle;}
else if(style["stroke-dasharray"]&&style.lineWidth){var sep=style["stroke-dasharray"].indexOf(",")==-1?" ":",",parts=style["stroke-dasharray"].split(sep),styleToUse="";for(var i=0;i<parts.length;i++){styleToUse+=(Math.floor(parts[i]/ style.lineWidth)+sep);}
if(component.strokeNode==null){component.strokeNode=_node("stroke",[0,0,0,0],{dashstyle:styleToUse},node,_jsPlumb);}
else
component.strokeNode.dashstyle=styleToUse;}
_atts(node,styleToWrite);},VmlComponent=function(){var self=this,renderer={};jsPlumb.jsPlumbUIComponent.apply(this,arguments);this.opacityNodes={"stroke":null,"fill":null};this.initOpacityNodes=function(vml){self.opacityNodes.stroke=_node("stroke",[0,0,1,1],{opacity:"0.0"},vml,self._jsPlumb.instance);self.opacityNodes.fill=_node("fill",[0,0,1,1],{opacity:"0.0"},vml,self._jsPlumb.instance);};this.setOpacity=function(type,value){var node=self.opacityNodes[type];if(node)node.opacity=""+value;};var displayElements=[];this.getDisplayElements=function(){return displayElements;};this.appendDisplayElement=function(el,doNotAppendToCanvas){if(!doNotAppendToCanvas)self.canvas.parentNode.appendChild(el);displayElements.push(el);};};jsPlumbUtil.extend(VmlComponent,jsPlumb.jsPlumbUIComponent,{cleanup:function(){if(this.bgCanvas)this.bgCanvas.parentNode.removeChild(this.bgCanvas);if(this.canvas)this.canvas.parentNode.removeChild(this.canvas);}});var VmlConnector=jsPlumb.ConnectorRenderers.vml=function(params,component){this.strokeNode=null;this.canvas=null;VmlComponent.apply(this,arguments);var clazz=this._jsPlumb.instance.connectorClass+(params.cssClass?(" "+params.cssClass):"");this.paint=function(style){if(style!==null){this.w=Math.max(this.w,1);this.h=Math.max(this.h,1);var segments=this.getSegments(),p={"path":""},d=[this.x,this.y,this.w,this.h];for(var i=0;i<segments.length;i++){p.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(segments[i]);p.path+=" ";}
if(style.outlineColor){var outlineWidth=style.outlineWidth||1,outlineStrokeWidth=style.lineWidth+(2*outlineWidth),outlineStyle={strokeStyle:jsPlumbUtil.convertStyle(style.outlineColor),lineWidth:outlineStrokeWidth};for(var aa in vmlAttributeMap)outlineStyle[aa]=style[aa];if(this.bgCanvas==null){p["class"]=clazz;p.coordsize=(d[2]*scale)+","+(d[3]*scale);this.bgCanvas=_node("shape",d,p,params.parent,this._jsPlumb.instance,true);_pos(this.bgCanvas,d);this.appendDisplayElement(this.bgCanvas,true);this.initOpacityNodes(this.bgCanvas,["stroke"]);this.bgCanvas._jsPlumb=component;}
else{p.coordsize=(d[2]*scale)+","+(d[3]*scale);_pos(this.bgCanvas,d);_atts(this.bgCanvas,p);}
_applyStyles(this.bgCanvas,outlineStyle,this);}
if(this.canvas==null){p["class"]=clazz;p.coordsize=(d[2]*scale)+","+(d[3]*scale);this.canvas=_node("shape",d,p,params.parent,this._jsPlumb.instance,true);this.appendDisplayElement(this.canvas,true);this.initOpacityNodes(this.canvas,["stroke"]);this.canvas._jsPlumb=component;}
else{p.coordsize=(d[2]*scale)+","+(d[3]*scale);_pos(this.canvas,d);_atts(this.canvas,p);}
_applyStyles(this.canvas,style,this,this._jsPlumb.instance);}};};jsPlumbUtil.extend(VmlConnector,VmlComponent,{setVisible:function(v){if(this.canvas){this.canvas.style.display=v?"block":"none";}
if(this.bgCanvas){this.bgCanvas.style.display=v?"block":"none";}}});var VmlEndpoint=window.VmlEndpoint=function(params){VmlComponent.apply(this,arguments);this._jsPlumb.vml=null;this.canvas=document.createElement("div");this.canvas.style.position="absolute";this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(params.cssClass?(" "+params.cssClass):"");params._jsPlumb.appendElement(this.canvas,params.parent);this.paint=function(style,anchor){var p={},vml=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h);if(this._jsPlumb.vml==null){p["class"]=this._jsPlumb.clazz;vml=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],p,anchor,this.canvas,this._jsPlumb.instance);this.appendDisplayElement(vml,true);this.appendDisplayElement(this.canvas,true);this.initOpacityNodes(vml,["fill"]);}
else{_pos(vml,[0,0,this.w,this.h]);_atts(vml,p);}
_applyStyles(vml,style,this);};};jsPlumbUtil.extend(VmlEndpoint,VmlComponent);jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(segment){return({"Straight":function(segment){var d=segment.params;return"m"+_conv(d.x1)+","+_conv(d.y1)+" l"+_conv(d.x2)+","+_conv(d.y2)+" e";},"Bezier":function(segment){var d=segment.params;return"m"+_conv(d.x1)+","+_conv(d.y1)+" c"+_conv(d.cp1x)+","+_conv(d.cp1y)+","+_conv(d.cp2x)+","+_conv(d.cp2y)+","+_conv(d.x2)+","+_conv(d.y2)+" e";},"Arc":function(segment){var d=segment.params,xmin=Math.min(d.x1,d.x2),xmax=Math.max(d.x1,d.x2),ymin=Math.min(d.y1,d.y2),ymax=Math.max(d.y1,d.y2),sf=segment.anticlockwise?1:0,pathType=(segment.anticlockwise?"at ":"wa "),makePosString=function(){if(d.loopback)
return"0,0,"+_conv(2*d.r)+","+_conv(2*d.r);var xy=[null,[function(){return[xmin,ymin];},function(){return[xmin-d.r,ymin-d.r];}],[function(){return[xmin-d.r,ymin];},function(){return[xmin,ymin-d.r];}],[function(){return[xmin-d.r,ymin-d.r];},function(){return[xmin,ymin];}],[function(){return[xmin,ymin-d.r];},function(){return[xmin-d.r,ymin];}]][segment.segment][sf]();return _conv(xy[0])+","+_conv(xy[1])+","+_conv(xy[0]+(2*d.r))+","+_conv(xy[1]+(2*d.r));};return pathType+" "+makePosString()+","+_conv(d.x1)+","+_conv(d.y1)+","+_conv(d.x2)+","+_conv(d.y2)+" e";}})[segment.type](segment);}}};jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments);VmlEndpoint.apply(this,arguments);this.getVml=function(d,atts,anchor,parent,_jsPlumb){return _node("oval",d,atts,parent,_jsPlumb);};};jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,VmlEndpoint);jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments);VmlEndpoint.apply(this,arguments);this.getVml=function(d,atts,anchor,parent,_jsPlumb){return _node("rect",d,atts,parent,_jsPlumb);};};jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,VmlEndpoint);jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image;jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank;jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label;jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var AbstractVmlArrowOverlay=function(superclass,originalArgs){superclass.apply(this,originalArgs);VmlComponent.apply(this,originalArgs);var self=this,path=null;this.canvas=null;this.isAppendedAtTopLevel=true;var getPath=function(d){return"m "+_conv(d.hxy.x)+","+_conv(d.hxy.y)+" l "+_conv(d.tail[0].x)+","+_conv(d.tail[0].y)+" "+_conv(d.cxy.x)+","+_conv(d.cxy.y)+" "+_conv(d.tail[1].x)+","+_conv(d.tail[1].y)+" x e";};this.paint=function(params,containerExtents){if(params.component.canvas&&containerExtents){var p={},d=params.d,connector=params.component;if(params.strokeStyle){p.stroked="true";p.strokecolor=jsPlumbUtil.convertStyle(params.strokeStyle,true);}
if(params.lineWidth)p.strokeweight=params.lineWidth+"px";if(params.fillStyle){p.filled="true";p.fillcolor=params.fillStyle;}
var xmin=Math.min(d.hxy.x,d.tail[0].x,d.tail[1].x,d.cxy.x),ymin=Math.min(d.hxy.y,d.tail[0].y,d.tail[1].y,d.cxy.y),xmax=Math.max(d.hxy.x,d.tail[0].x,d.tail[1].x,d.cxy.x),ymax=Math.max(d.hxy.y,d.tail[0].y,d.tail[1].y,d.cxy.y),w=Math.abs(xmax-xmin),h=Math.abs(ymax-ymin),dim=[xmin,ymin,w,h];p.path=getPath(d);p.coordsize=(connector.w*scale)+","+(connector.h*scale);dim[0]=connector.x;dim[1]=connector.y;dim[2]=connector.w;dim[3]=connector.h;if(self.canvas==null){var overlayClass=connector._jsPlumb.overlayClass||"";var clazz=originalArgs&&(originalArgs.length==1)?(originalArgs[0].cssClass||""):"";p["class"]=clazz+" "+overlayClass;self.canvas=_node("shape",dim,p,connector.canvas.parentNode,connector._jsPlumb.instance,true);connector.appendDisplayElement(self.canvas,true);}
else{_pos(self.canvas,dim);_atts(self.canvas,p);}}};this.cleanup=function(){if(this.canvas!=null)this._jsPlumb.instance.removeElement(this.canvas);};};jsPlumbUtil.extend(AbstractVmlArrowOverlay,[VmlComponent,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(state){this.canvas.style.display=state?"block":"none";}});jsPlumb.Overlays.vml.Arrow=function(){AbstractVmlArrowOverlay.apply(this,[jsPlumb.Overlays.Arrow,arguments]);};jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,AbstractVmlArrowOverlay]);jsPlumb.Overlays.vml.PlainArrow=function(){AbstractVmlArrowOverlay.apply(this,[jsPlumb.Overlays.PlainArrow,arguments]);};jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,AbstractVmlArrowOverlay]);jsPlumb.Overlays.vml.Diamond=function(){AbstractVmlArrowOverlay.apply(this,[jsPlumb.Overlays.Diamond,arguments]);};jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,AbstractVmlArrowOverlay]);})();;;;(function(){"use strict";var _getEventManager=function(instance){var e=instance._mottle;if(!e){e=instance._mottle=new Mottle();}
return e;};jsPlumb.extend(jsPlumbInstance.prototype,{getEventManager:function(){return _getEventManager(this);},on:function(el,event,callback){this.getEventManager().on.apply(this,arguments);},off:function(el,event,callback){this.getEventManager().off.apply(this,arguments);}});}).call(this);;;;(function($){"use strict";var _getElementObject=function(el){return typeof(el)=="string"?$("#"+el):$(el);};$.extend(jsPlumbInstance.prototype,{getDOMElement:function(el){if(el==null)return null;if(typeof(el)=="string")return document.getElementById(el);else if(el.context||el.length!=null)return el[0];else return el;},getElementObject:_getElementObject,removeElement:function(element){_getElementObject(element).remove();},doAnimate:function(el,properties,options){el.animate(properties,options);},getSelector:function(context,spec){if(arguments.length==2)
return _getElementObject(context).find(spec);else
return $(context);},destroyDraggable:function(el){if($(el).data("draggable"))
$(el).draggable("destroy");},destroyDroppable:function(el){if($(el).data("droppable"))
$(el).droppable("destroy");},initDraggable:function(el,options,isPlumbedComponent){options=options||{};el=$(el);options.start=jsPlumbUtil.wrap(options.start,function(){$("body").addClass(this.dragSelectClass);},false);options.stop=jsPlumbUtil.wrap(options.stop,function(){$("body").removeClass(this.dragSelectClass);});if(!options.doNotRemoveHelper)
options.helper=null;if(isPlumbedComponent=="internal")
options.scope=options.scope||jsPlumb.Defaults.Scope;el.draggable(options);},initDroppable:function(el,options){options.scope=options.scope||jsPlumb.Defaults.Scope;$(el).droppable(options);},isAlreadyDraggable:function(el){return $(el).hasClass("ui-draggable");},isDragSupported:function(el,options){return $(el).draggable;},isDropSupported:function(el,options){return $(el).droppable;},getDragObject:function(eventArgs){return eventArgs[1].helper||eventArgs[1].draggable;},getDragScope:function(el){return $(el).draggable("option","scope");},getDropEvent:function(args){return args[0];},getDropScope:function(el){return $(el).droppable("option","scope");},getUIPosition:function(eventArgs,zoom,dontAdjustHelper){var ret;zoom=zoom||1;if(eventArgs.length==1){ret={left:eventArgs[0].pageX,top:eventArgs[0].pageY};}
else{var ui=eventArgs[1],_offset=ui.position;ret=_offset||ui.absolutePosition;if(!dontAdjustHelper){ui.position.left /=zoom;ui.position.top /=zoom;}}
return{left:ret.left,top:ret.top};},isDragFilterSupported:function(){return true;},setDragFilter:function(el,filter){if(jsPlumb.isAlreadyDraggable(el))
$(el).draggable("option","cancel",filter);},setElementDraggable:function(el,draggable){$(el).draggable("option","disabled",!draggable);},setDragScope:function(el,scope){$(el).draggable("option","scope",scope);},dragEvents:{'start':'start','stop':'stop','drag':'drag','step':'step','over':'over','out':'out','drop':'drop','complete':'complete'},animEvents:{'step':"step",'complete':'complete'},getOriginalEvent:function(e){return e.originalEvent||e;},trigger:function(el,event,originalEvent){var h=jQuery._data(_getElementObject(el)[0],"handle");h(originalEvent);}});$(document).ready(jsPlumb.init);})(jQuery);;;var LoaderWindow=Backbone.View.extend({el:$('<div></div>',{class:'easy-loader animated'}),isShown:false,animationOut:'fadeOut',showTimeout:undefined,hideTimeout:undefined,timeoutTime:50,initialize:function(){$('.darkan-content').append(this.$el);this.$el.css({display:'none'});},show:function(){var _that=this;_that.$el.removeClass(_that.animationOut).show();},hide:function(){var _that=this;clearTimeout(this.hideTimeout);this.hideTimeout=setTimeout(function(){_that.$el.addClass(_that.animationOut);setTimeout(function(){_that.$el.hide();},500);},500);}});var loaderDarkan=new LoaderWindow();;;function WebService(){}
WebService.create=function(type){switch(type){case'php':return new PhpWebservice();break;case'node':return new NodeWebservice();break;case'fake':return new FakeWebservice();break;default:return new FakeWebservice();break;}}
WebService.prototype.sortCategories=function(settings,onResult,onFault)
{}
WebService.prototype.updateSettings=function(settings,params)
{settings=settings||{};for(var item in params)
{settings[item]=params[item];}}
WebService.prototype.sendAndLoad=function(url,settings,onResult,onFault)
{};;function PhpWebservice(){this.APP_LINK='http://176.119.54.149/egzaminy';}
PhpWebservice.prototype=new WebService();PhpWebservice.prototype.test=function(params,onResult,onFault){this.sendAndLoad(this.APP_LINK+'/test',params,onResult,onFault);}
PhpWebservice.prototype.uploadDocFile=function(params,appLink,onResult,onFault,onProgress,onComplete){this.uploadFile(appLink+'courses/uploaddocfile',params,onResult,onFault,onProgress,onComplete);}
PhpWebservice.prototype.sendAndLoad=function(url,params,onResult,onFault,async){if(typeof async=="undefined"){async=true}
console.log(url);$.ajax({type:'POST',url:url,cache:false,dataType:'text',data:{params:JSON.stringify(params)},async:async,success:function(data)
{var dataJ=JSON.parse(data);console.log('data access',dataJ);onResult(dataJ);},error:function(data)
{console.log('data failed',data);onFault(data);}});}
PhpWebservice.prototype.uploadFile=function(url,params,onResult,onFault,onProgress,onComplete){if(typeof params.showLoader=="undefined"){params.showLoader=true;}
var showLoader=params.showLoader;if(showLoader){loaderDarkan.show();}
delete params.showLoader;$.ajax({url:url,data:params,dataType:'text',async:false,type:'post',processData:false,contentType:false,success:function(data)
{if(showLoader){loaderDarkan.hide();}
var dataJ=JSON.parse(data);onResult(dataJ);},error:function(data)
{if(showLoader){loaderDarkan.hide();}
onFault(data);}});};;function NodeWebservice(){}
NodeWebservice.prototype=new WebService();NodeWebservice.prototype.connect=function(params,onResult,onFault)
{};;function FakeWebservice(){}
FakeWebservice.prototype=new WebService();FakeWebservice.prototype.createNewFolder=function(params,onResult,onFault){onResult({status:true});}
FakeWebservice.prototype.createNewProject=function(params,onResult,onFault){onResult({status:true});}
FakeWebservice.prototype.sendAndLoad=function(url,settings,onResult,onFault)
{console.log('Fake webservice send');};;function DataAccess(){}
DataAccess.connect=function(data,onResult,onFault){this.phpWebService=WebService.create('php');this.fakeWebService=WebService.create('fake');}
DataAccess.uploadDocFile=function(data,appLink,onResult,onFault,onProgress,onComplete){this.phpWebService.uploadDocFile(data,appLink,onResult,onFault,onProgress,onComplete);}
DataAccess.connect();;;function EventDispatcher()
{this.listeners={};}
EventDispatcher.prototype.dispatchEvent=function(type,params,sender)
{if(this.listeners[type]!=null)
this.listeners[type](params,sender);}
EventDispatcher.prototype.addEventListener=function(type,callback)
{this.listeners[type]=callback;}
EventDispatcher.prototype.removeEventListener=function(type)
{delete this.listeners[type];}
function DarkanCourseAplicationAPI(data){var _that=this;this.listeners={};this.origin=DarkanCourseAplicationAPI.PREVENT_ORIGIN;this.controller=DarkanCourseController;window.addEventListener('message',function(e){_that.onMessageApiComming(e);},false);}
DarkanCourseAplicationAPI.ON_CONNECT='on-connect';DarkanCourseAplicationAPI.ON_PAGE_ADDED='on-page-added';DarkanCourseAplicationAPI.ON_PAGES_REMOVED='on-pages-removed';DarkanCourseAplicationAPI.ON_PAGE_SELECTED='on-page-selected';DarkanCourseAplicationAPI.ON_PROJECT_LOADED='on-project-loaded';DarkanCourseAplicationAPI.ON_PAGES_COLLECTION_CHANGED='on-pages-collection-chenged';DarkanCourseAplicationAPI.ON_DIAMONDS_CHANGED='on-diamonds-changed';DarkanCourseAplicationAPI.ON_COMPLETE_LOADING_PAGE='on-complete-loading-page';DarkanCourseAplicationAPI.GO_TO_NEXT_PAGE='go-to-next-page';DarkanCourseAplicationAPI.PREVENT_ORIGIN='*';DarkanCourseAplicationAPI.DARKAN_SENDER='darkan';DarkanCourseAplicationAPI.prototype=new EventDispatcher();DarkanCourseAplicationAPI.prototype.onMessageApiComming=function(e){_log('MESSAGE TO COURSE',e,_log.apidata);try{var jData=JSON.parse(e.data);var action=jData.action;var sender=jData.sender;if(sender==DarkanCourseAplicationAPI.DARKAN_SENDER){return;}
switch(action){case'no-message':_log('no-message',jData);break;case'go-to-page':this.controller.goToPage(jData.data,this);break;case'go-to-next-page':this.controller.goToNextPage(jData.data,this);break;case'go-to-prew-page':this.controller.goToPrewPage(jData.data,this);break;case'go-to-prev-page':this.controller.goToPrevPage(jData.data,this);break;case'save-scorm':this.controller.saveScorm(jData.data,this);break;}}catch(ex){_log('ex',ex,_log.apierror);}}
DarkanCourseAplicationAPI.prototype.connect=function(data){this.execute(DarkanCourseAplicationAPI.ON_CONNECT,data);}
DarkanCourseAplicationAPI.prototype.pageSelected=function(data){this.execute(DarkanCourseAplicationAPI.ON_PAGE_SELECTED,data);}
DarkanCourseAplicationAPI.prototype.pageAdded=function(data){this.execute(DarkanCourseAplicationAPI.ON_PAGE_ADDED,data);}
DarkanCourseAplicationAPI.prototype.pagesRemoved=function(data){this.execute(DarkanCourseAplicationAPI.ON_PAGES_REMOVED,data);}
DarkanCourseAplicationAPI.prototype.projectLoaded=function(data){this.execute(DarkanCourseAplicationAPI.ON_PROJECT_LOADED,data);}
DarkanCourseAplicationAPI.prototype.pagesCollectionChanged=function(data){this.execute(DarkanCourseAplicationAPI.ON_PAGES_COLLECTION_CHANGED,data);}
DarkanCourseAplicationAPI.prototype.diamondsChanged=function(data){this.execute(DarkanCourseAplicationAPI.ON_DIAMONDS_CHANGED,data);}
DarkanCourseAplicationAPI.prototype.onCompleteLoadingPage=function(data){this.execute(DarkanCourseAplicationAPI.ON_COMPLETE_LOADING_PAGE,data);}
DarkanCourseAplicationAPI.prototype.execute=function(action,data){data=data==undefined?{}:data;action=action==undefined?'no-action':action;var e={};e.action=action;e.sender=DarkanCourseAplicationAPI.DARKAN_SENDER;e.data=data;var se=JSON.stringify(e);top.postMessage(se,this.origin);}
DarkanCourseAplicationAPI.prototype.setApiController=function(controller){this.controller=controller;}
DarkanCourseAplicationAPI.getInstance=function(){return this.instance||(this.instance=new DarkanCourseAplicationAPI());};;function DarkanCourseController()
{}
DarkanCourseController.goToPage=function(data,sender){TriggerController.instance.goToPage(data);}
DarkanCourseController.goToNextPage=function(data,sender){TriggerController.instance.gotonextpage(data);}
DarkanCourseController.goToPrewPage=function(data,sender){TriggerController.instance.gotoprevpage(data);}
DarkanCourseController.goToPrevPage=function(data,sender){TriggerController.instance.gotoprevpage(data);}
DarkanCourseController.saveScorm=function(data,sender){if(ScormController.instance){ScormController.instance.saveScorm(data);}};;var WindowModel=Backbone.Model.extend({defaults:{type:"",draggable:true,modal:true,left:0,top:0,title:''}});;;var WindowView=Backbone.View.extend({tagName:'div',className:'window window-view',template:_.template($('#window-template').html()),events:{'click .window-close-button':'close'},initialize:function(data){this.windowModel=data.windowModel;this.runListeners();this.afterInitialize();},accept:function(visitor){visitor.visit(this);},afterInitialize:function(){},render:function(dataModel){this.beforeRender();var componentTemplate=this.template(dataModel);this.$el.html(componentTemplate);this.$el.addClass('animated expandUp');this.$el.css("animation-duration",".5s");this.$el.css("-webkit-animation-duration",".5s");var modal=this.windowModel.get('modal');if(modal){var windowID=new Date().getUTCMilliseconds();this.$el.attr('windowid',windowID);this.addModal(windowID);}
this.afterRender();return this;},scaleWindow:function(){var autoScale=ProjectModel.instance.isAutoScale();if(autoScale){var ratio=StageView.instance.getSmallerRatio();var scaledFontSize=parseInt(this.$el.css('font-size'))*ratio;this.$el.css('font-size',scaledFontSize+'px');this.$el.find('.window-content').css({'padding-left':30*ratio+'px','padding-top':20*ratio+'px','padding-right':30*ratio+'px','padding-bottom':30*ratio+'px',});this.$el.find('.window-top-bar').css({'height':45*ratio+'px','line-height':40*ratio+'px','padding-right':75*ratio+'px','font-size':parseInt(this.$el.find('.window-top-bar').css('font-size'))*ratio});this.$el.find('.window-close-button').css({'height':20*ratio+'px','width':20*ratio+'px','top':12*ratio+'px','right':10*ratio+'px','background-size':100+'%'});}},beforeRender:function(){},afterRender:function(){},close:function(){this.trigger('close');this.onClose();this.removeModal();this.unbind();this.remove();},setWindowPosition:function(position){var width=this.$el.width();var height=this.$el.height();var left=position.left-width;var top=position.top-height;if(left<0)
left=0;if(top<0)
top=0;this.$el.css('top',top+'px').css('left',left+'px');},centerWindow:function(){var width=this.$el.width();var height=this.$el.height();var sceneWidth=StageView.instance.$el.width();if(width>sceneWidth){width=sceneWidth-50;this.$el.css('width',width-50+'px');}
this.$el.css({top:'calc(50% - '+height/2+'px)',left:'calc(50% - '+width/2+'px)'});if(this.$el.find('.window-content').height()>this.$el.height()-45){this.$el.css('height','inherit');}},addModal:function(windowID){var modal=$('<div></div>',{class:'modal-block'});this.modalWindowEl=modal;$(__meta__.darkanContainer).append(modal);},removeModal:function(){if(this.windowModel.get('modal')){this.modalWindowEl.remove();}},hide:function(){this.$el.hide();},show:function(){this.$el.show();},runListeners:function(){},onClose:function(){}});WindowView.instance=new WindowView(new WindowModel());;;var FeedbackModel=Backbone.Model.extend({defaults:{type:"",draggable:false,modal:false,left:0,top:0}});;;var FeedbackView=Backbone.View.extend({tagName:'div',className:'window feedback-view',template:_.template($('#feedback-template').html()),events:{'click .window-close-button':'close'},initialize:function(data){this.windowModel=new FeedbackModel();this.runListeners();},render:function(dataModel){this.beforeRender();var componentTemplate=this.template(dataModel);this.$el.html(componentTemplate);var feedbackColor=dataModel.success?'#469E4B':'#BB3737';this.$el.find('.window-top-bar, .window-content').css({background:feedbackColor,color:'#fff'});this.$el.css({'border-color':feedbackColor})
this.$el.addClass('animated expandUp');this.$el.css("animation-duration",".5s");this.$el.css("-webkit-animation-duration",".5s");var modal=this.windowModel.get('modal');if(modal){var windowID=new Date().getUTCMilliseconds();this.$el.attr('windowid',windowID);this.addModal(windowID);}
this.afterRender();return this;},beforeRender:function(){},afterRender:function(){},close:function(){this.trigger('close');this.onClose();this.removeModal();this.unbind();this.remove();},setWindowPosition:function(position){var width=this.$el.width();var height=this.$el.height();var left=position.left-width;var top=position.top-height;if(left<0)
left=0;if(top<0)
top=0;this.$el.css('top',top+'px').css('left',left+'px');},scaleWindow:function(){var autoScale=ProjectModel.instance.isAutoScale();if(autoScale){var ratio=StageView.instance.getSmallerRatio();var scaledFontSize=parseInt(this.$el.css('font-size'))*ratio;this.$el.css('font-size',scaledFontSize+'px');this.$el.find('.window-content').css({'padding-left':30*ratio+'px','padding-top':20*ratio+'px','padding-right':30*ratio+'px','padding-bottom':30*ratio+'px',});}},centerWindow:function(){var width=this.$el.width();var height=this.$el.height();var sceneWidth=StageView.instance.$el.width();if(width>sceneWidth){width=sceneWidth-50;this.$el.css('width',width-50+'px');}
this.$el.css({top:'calc(50% - '+height/2+'px)',left:'calc(50% - '+width/2+'px)'});if(this.$el.find('.window-content').height()>this.$el.height()-45){this.$el.css('height','inherit');}},addModal:function(windowID){var modal=$('<div></div>',{class:'modal-block'});this.modalWindowEl=modal;$(__meta__.darkanContainer).append(modal);},removeModal:function(){if(this.windowModel.get('modal')){this.modalWindowEl.remove();}},hide:function(){this.$el.hide();},show:function(){this.$el.show();},runListeners:function(){},onClose:function(){}});WindowView.instance=new WindowView(new WindowModel());;;var ContinueWindowModel=Backbone.Model.extend({defaults:{type:"",draggable:false,modal:true,left:0,top:0}});;;var ContinueWindowView=Backbone.View.extend({tagName:'div',className:'window continue-view',template:_.template($('#continue-window-template').html()),events:{'click .window-close-button':'close','click .popup-cancel-button':'close','click .popup-ok-button':'openLastVisitedPage'},openLastVisitedPage:function(){this.trigger('open-last-visited-page');this.close();},initialize:function(data){this.windowModel=new FeedbackModel();this.runListeners();},render:function(data){this.beforeRender();var dataModel=this.serializeData(data);var componentTemplate=this.template(dataModel);this.$el.html(componentTemplate);this.$el.addClass('animated expandUp');this.$el.css("animation-duration",".5s");this.$el.css("-webkit-animation-duration",".5s");var modal=this.windowModel.get('modal');if(modal){var windowID=new Date().getUTCMilliseconds();this.$el.attr('windowid',windowID);this.addModal(windowID);}
this.afterRender();return this;},serializeData:function(data){var data=data||{};var options=ProjectModel.instance.get('options').toJSON();return $.extend(data,options);},beforeRender:function(){},afterRender:function(){},close:function(){this.onClose();this.removeModal();this.unbind();this.remove();},setWindowPosition:function(position){var width=this.$el.width();var height=this.$el.height();var left=position.left-width;var top=position.top-height;if(left<0)
left=0;if(top<0)
top=0;this.$el.css('top',top+'px').css('left',left+'px');},centerWindow:function(){var width=this.$el.width();var height=this.$el.height();this.$el.css({top:'calc(50% - '+height/2+'px)',left:'calc(50% - '+width/2+'px)'});if(this.$el.find('.window-content').height()>this.$el.height()-45){this.$el.css('height','inherit');}},addModal:function(windowID){var modal=$('<div></div>',{class:'modal-block'});this.modalWindowEl=modal;$(__meta__.darkanContainer.find('#skin')).append(modal);},removeModal:function(){if(this.windowModel.get('modal')){this.modalWindowEl.remove();}},hide:function(){this.$el.hide();},show:function(){this.$el.show();},runListeners:function(){},onClose:function(){}});;;var TocWindowModel=Backbone.Model.extend({defaults:{type:"",draggable:false,modal:true,left:0,top:0}});;;var TocWindowView=WindowView.extend({tagName:'div',className:'window feedback-view toc-view',template:_.template($('#toc-window-template').html()),events:{'click .window-close-button':'close',},afterRender:function(){var _that=this;var pages=this.model.get('pages');var tocList=this.$el.find('.window-content ul');_log('tocList',tocList);pages.each(function(pModel,order){var pageName=pModel.get('options').get('pagename');var pageOrder=pModel.collection.indexOf(pModel)+1;var pageID=pModel.get('options').get('pageid');var listItem=$('<li></li>',{ord:order,class:'toc-item'});listItem.html('<span class="toc-order">['+pageOrder+']</span>  '+pageName);listItem.click(function(){_that.trigger('go-to-page-order',parseInt($(this).attr('ord')));_that.close();})
tocList.append(listItem);});setTimeout(function(){_that.$el.find('.window-content').css({overflow:'auto'});},500);},});;;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(b,d,e){var d={content:{message:"object"==typeof d?d.message:d,title:d.title?d.title:"",icon:d.icon?d.icon:"",url:d.url?d.url:"#",target:d.target?d.target:"-"}};e=a.extend(!0,{},d,e),this.settings=a.extend(!0,{},c,e),this._defaults=c,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}var c={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};String.format=function(){for(var a=arguments[0],b=1;b<arguments.length;b++)a=a.replace(RegExp("\\{"+(b-1)+"\\}","gm"),arguments[b]);return a},a.extend(b.prototype,{init:function(){var a=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(b,c){var d={};"string"==typeof b?d[b]=c:d=b;for(var b in d)switch(b){case"type":this.$ele.removeClass("alert-"+a.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+a.settings.type),a.settings.type=d[b],this.$ele.addClass("alert-"+d[b]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+d[b]);break;case"icon":var e=this.$ele.find('[data-notify="icon"]');"class"==a.settings.icon_type.toLowerCase()?e.removeClass(a.settings.content.icon).addClass(d[b]):(e.is("img")||e.find("img"),e.attr("src",d[b]));break;case"progress":var f=a.settings.delay-a.settings.delay*(d[b]/100);this.$ele.data("notify-delay",f),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",d[b]).css("width",d[b]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",d[b]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",d[b]);break;default:this.$ele.find('[data-notify="'+b+'"]').html(d[b])}var g=this.$ele.outerHeight()+parseInt(a.settings.spacing)+parseInt(a.settings.offset.y);a.reposition(g)},close:function(){a.close()}}},buildNotify:function(){var b=this.settings.content;this.$ele=a(String.format(this.settings.template,this.settings.type,b.title,b.message,b.url,b.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var b=this,c=this.settings.offset.y,d={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},e=!1,f=this.settings;switch(a('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return c=Math.max(c,parseInt(a(this).css(f.placement.from))+parseInt(a(this).outerHeight())+parseInt(f.spacing))}),1==this.settings.newest_on_top&&(c=this.settings.offset.y),d[this.settings.placement.from]=c+"px",this.settings.placement.align){case"left":case"right":d[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":d.left=0,d.right=0}this.$ele.css(d).addClass(this.settings.animate.enter),a.each(Array("webkit","moz","o","ms",""),function(a,c){b.$ele[0].style[c+"AnimationIterationCount"]=1}),a(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(c=parseInt(c)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(c)),a.isFunction(b.settings.onShow)&&b.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(a){e=!0}).one(this.animations.end,function(c){a.isFunction(b.settings.onShown)&&b.settings.onShown.call(this)}),setTimeout(function(){e||a.isFunction(b.settings.onShown)&&b.settings.onShown.call(this)},600)},bind:function(){var b=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){b.close()}),this.$ele.mouseover(function(b){a(this).data("data-hover","true")}).mouseout(function(b){a(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),this.settings.delay>0){b.$ele.data("notify-delay",b.settings.delay);var c=setInterval(function(){var a=parseInt(b.$ele.data("notify-delay"))-b.settings.timer;if("false"===b.$ele.data("data-hover")&&"pause"==b.settings.mouse_over||"pause"!=b.settings.mouse_over){var d=(b.settings.delay-a)/b.settings.delay*100;b.$ele.data("notify-delay",a),b.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",d).css("width",d+"%")}a<=-b.settings.timer&&(clearInterval(c),b.close())},b.settings.timer)}},close:function(){var b=this,c=parseInt(this.$ele.css(this.settings.placement.from)),d=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),b.reposition(c),a.isFunction(b.settings.onClose)&&b.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(a){d=!0}).one(this.animations.end,function(c){a(this).remove(),a.isFunction(b.settings.onClosed)&&b.settings.onClosed.call(this)}),setTimeout(function(){d||(b.$ele.remove(),b.settings.onClosed&&b.settings.onClosed(b.$ele))},600)},reposition:function(b){var c=this,d='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',e=this.$ele.nextAll(d);1==this.settings.newest_on_top&&(e=this.$ele.prevAll(d)),e.each(function(){a(this).css(c.settings.placement.from,b),b=parseInt(b)+parseInt(c.settings.spacing)+a(this).outerHeight()})}}),a.notify=function(a,c){var d=new b(this,a,c);return d.notify},a.notifyDefaults=function(b){return c=a.extend(!0,{},c,b)},a.notifyClose=function(b){"undefined"==typeof b||"all"==b?a("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):a('[data-notify-position="'+b+'"]').find('[data-notify="dismiss"]').trigger("click")}});;;function _Notify(message,type){type=type||'info';$.notify({message:message},{type:type,z_index:2000,animate:{enter:'animated fadeInDown',exit:'animated fadeOutUp'},element:'#stage',placement:{from:"top",align:"center"},delay:1000,timer:1000});};;var ProggressBarModel=WindowModel.extend({defaults:{type:"",draggable:true,modal:true,left:0,top:0,title:''}});;;var ProggressBarView=WindowView.extend({className:'window window-view proggress-bar-window',template:_.template($('#proggress-bar-window-template').html()),showingTimeout:undefined,initialize:function(data){this.windowModel=data.windowModel;this.runListeners();},loadAllPeges:function(){var assets=ProjectModel.instance.getAssetsToLoad();var assetsToLoad=[];for(var i=0;i<assets.length;i++){assetsToLoad=assetsToLoad.concat(assets[i]);};_log('assetsToLoad 12345',assetsToLoad);var pageModel=this.getFirstPageToLoad();this.startUploading(assetsToLoad,pageModel,true);},loadFirstPageAndOtherPegesInBackground:function(){},loadPage:function(pageModel){var assets=pageModel.getAssetsToLoad();_log('assetsToLoad 12345',assets);this.startUploading(assets,pageModel);},startUploading:function(assetsToLoad,pageModel,all){var _that=this;if(_.isUndefined(this.loadQueue)){var loadQueue=new createjs.LoadQueue(true);loadQueue.on("progress",function(e){_that.onProgressLoading(e)});loadQueue.on("complete",function(e){_that.onCompleteLoading(e,pageModel,all)});loadQueue.on("error",function(e){_that.onCompleteLoading(e,pageModel,all)});this.loadQueue=loadQueue;}else{alert('cos jest nie tak');}
if(assetsToLoad.length&&window.location.protocol!=='file:'){this.loadQueue.loadManifest(assetsToLoad);}else{this.onCompleteLoading({},pageModel,all);}},onProgressLoading:function(e){progress=parseInt(e.progress*100);if(progress<25){var angle=-90+(progress/100)*360;this.$el.find(".animate-0-25-b").css("transform","rotate("+angle+"deg)");}
else if(progress>=25&&progress<50){var angle=-90+((progress-25)/100)*360;this.$el.find(".animate-0-25-b").css("transform","rotate(0deg)");this.$el.find(".animate-25-50-b").css("transform","rotate("+angle+"deg)");}
else if(progress>=50&&progress<75){var angle=-90+((progress-50)/100)*360;this.$el.find(".animate-25-50-b, .animate-0-25-b").css("transform","rotate(0deg)");this.$el.find(".animate-50-75-b").css("transform","rotate("+angle+"deg)");}
else if(progress>=75&&progress<=100){var angle=-90+((progress-75)/100)*360;this.$el.find(".animate-50-75-b, .animate-25-50-b, .animate-0-25-b").css("transform","rotate(0deg)");this.$el.find(".animate-75-100-b").css("transform","rotate("+angle+"deg)");}},onCompleteLoading:function(e,pageModel,all){var _that=this;_log('onCompleteLoading',pageModel);pageModel.isLoaded=true;if(all){ProjectModel.instance.get('pages').each(function(pageModel){pageModel.isLoaded=true;});}
clearTimeout(this.showingTimeout);setTimeout(function(){_that.trigger('on-complete',pageModel,_that);},5);},onErrorLoading:function(e){_log('onErrorLoading',e);},render:function(dataModel){this.beforeRender();var template=this.template(dataModel);this.$el.html(template);var modal=this.windowModel.get('modal');if(modal){var windowID=new Date().getUTCMilliseconds();this.$el.attr('windowid',windowID);this.addModalTransparent(windowID);}
this.afterRender();return this;},afterRender:function(){var _that=this;clearTimeout(this.showingTimeout);this.$el.hide();this.showingTimeout=setTimeout(function(){_that.$el.fadeIn(400);},300);},getFirstPageToLoad:function(){var par=Utils.getURLParam();for(var paramName in par){if(paramName=='p'){var pageOrder=parseInt(par[paramName])-1;var pageModel=ProjectModel.instance.get('pages').at(pageOrder);if(pageModel){return pageModel;}}}
var firstPage=ProjectModel.instance.get('pages').at(0);return firstPage;},reset:function(){if(this.loadQueue){this.loadQueue.removeAll();this.loadQueue.reset();}},cancel:function(){if(this.loadQueue){this.loadQueue.removeAll();this.close();}},onClose:function(){this.reset();this.loadQueue=undefined;},addModalTransparent:function(windowID){var modal=$('<div></div>',{class:'modal-block-transparent'});this.modalWindowEl=modal;$(__meta__.darkanContainer).append(modal);},});;;function WindowFactory(){}
WindowFactory.createProggressBarWindow=function(data){var windowModel=new ProggressBarModel();var windowView=new ProggressBarView({windowModel:windowModel,data:data});return windowView;}
WindowFactory.createProggressBarWindowNoModal=function(data){var windowModel=new ProggressBarModel({modal:false});var windowView=new ProggressBarView({windowModel:windowModel,data:data});return windowView;};;var ComponentView=Backbone.View.extend({tagName:'div',className:'component main-component',events:{'click ':'setActive','mouseenter':'onMouseOver','mouseleave':'onMouseOut','keyup':'onKeyUp','focus':'focusingElement'},template:_.template($('#component-template').html()),activeAnimation:'',animationOverEnabled:false,endlessAnimationTime:0,hiddenByTrigger:false,initialize:function(data){this.model.view=this;this.afterInitialize();this.applyTriggers(false,true);this.saveStartingAttempts();this.initUserSelectionObject();},focusingElement:function(){if(this.model.get('wcag')){StageView.instance.lastActiveWcagIndex=this.$el.attr('tabindex');}},onKeyUp:function(e){switch(e.keyCode){case 32:this.$el.trigger('click');break;}},prepareComponent:function(data){var _that=this;this.addListeners();this.model.view=this;this.delegateEvents();this.hiddenByTrigger=false;this.applyTriggers(true,false);},saveStartingAttempts:function(){this.startingAttempts=this.model.get('attempts');},resetAttempts:function(){this.model.set('attempts',this.startingAttempts);},resetCompl:function(){this.model.set('compl',0);},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){this.model.set('userSelection',{});}},setActive:function(){this.$el.attr('active','true');},allObjectsAreInitialized:function(){var componentStatus=parseInt(this.model.get('compl'));if(_.isNumber(componentStatus)){switch(componentStatus){case 1:this.markAsCompleted();break;case 2:this.markAsFailed();break;default:this.renderAsReadyToUse();break;}}
this.afterAllInitialized();},afterAllInitialized:function(){},applyParallax:function(){var _that=this;var stage=StageView.instance.stageWrapper;var parallax_obj=this.model.get('parallax');var screenOb=this.$el;if(_.isObject(parallax_obj)){if(parallax_obj.cursor.on===true||parallax_obj.scroll.on===true){this.parallax={width:screenOb.width(),height:screenOb.height(),top:parseInt(screenOb.css('top'))-stage.scrollTop(),left:parseInt(screenOb.css('left')),last_y:0,last_x:0};$('#stage').bind('scroll mousemove',function(e){var cont=$(this);var parallax=_that.parallax;var parallax_obj=_that.model.get('parallax');var cursor_new_left=null;var cursor_new_top=null;if(parallax_obj.scroll.on===true){if(parseInt(parallax_obj.scroll.sens)==0){parallax_obj.scroll.sens=10;}
var scroll_sens=parseInt(parallax_obj.scroll.sens)*0.1;cursor_new_top=(parallax.top+(cont.scrollTop()*scroll_sens));}else{cursor_new_top=parallax.top;}
if(parallax_obj.cursor.on===true){var cursor_sens=(101-parseInt(parallax_obj.cursor.sens));var x=((e.pageX-parallax.left-(screenOb.width()/ 2))/(cursor_sens));var y=((e.pageY-cursor_new_top-(screenOb.height()/ 2))/(cursor_sens));if(isNaN(x)||isNaN(y)){y=parallax.last_y;x=parallax.last_x;}
if(parallax_obj.cursor.dir===false){cursor_new_left=parallax.left-x;cursor_new_top=cursor_new_top-y;}else{cursor_new_left=parallax.left+x;cursor_new_top=cursor_new_top+y;}
parallax.last_y=y;parallax.last_x=x;}
if(parallax_obj.cursor.on===true){if(cursor_new_left!==null){screenOb.css({left:cursor_new_left+"px"});}}
screenOb.css({top:cursor_new_top+"px"});});}}},applyTriggers:function(aplayEl,applyCustom){var _that=this;var triggers=this.model.get('triggers')||[];if(triggers.length){this.$el.css({cursor:'pointer'})}
var i=0;var applyTrigger=function(){if(i==triggers.length){return;}
var trigger=triggers[i];var whendoit=trigger.whendoit;var opts=trigger.opts;var conditions=trigger.conditions;var elseactions=trigger.elseactions;var subtriggers=trigger.subtriggers;var exist=_that.checkElOnFunction(whendoit);if(exist){if(aplayEl){_that.$el.on(_that.mapWhenDoIt(whendoit),function(val){var condition=_that.checkCondition(conditions);if(condition){_that.runTriggerAction(subtriggers,val,opts,whendoit);}else{_that.runTriggerAction(elseactions,val,opts,whendoit);}});}}else{if(applyCustom){_that.on(whendoit,function(val){val=val||{};var condition=_that.checkCondition(conditions);if(condition){_that.runTriggerAction(subtriggers,val,opts,whendoit);}else{_that.runTriggerAction(elseactions,val,opts,whendoit);}});}}
i++;applyTrigger();};applyTrigger();},mapWhenDoIt:function(whendoit){switch(whendoit){case'mouseenter':return'mouseenter';break;case'mouseleave':return'mouseleave';break;default:return whendoit;break;}},runTriggerAction:function(triggerAction,val,whenopts,whendoit){for(var j=0;j<triggerAction.length;j++){var action=triggerAction[j];var whattodo=action.whattodo;var objs=action.objs;var opts=action.opts;var delay=parseFloat(action.opts.delay);if(_.isNumber(delay)&&delay>0){(function(whattodo,_this,objs,opts,val){setTimeout(function(){TriggerController.instance.execute(whattodo,_this,objs,opts,val,whenopts,whendoit);},delay*1000);})(whattodo,this,objs,opts,val,whenopts,whendoit);}else{TriggerController.instance.execute(whattodo,this,objs,opts,val,whenopts,whendoit);}}},checkElOnFunction:function(funName){var arr=['click','mouseenter','mouseleave'];var exist=arr.indexOf(funName);return exist==-1?false:true;},checkCondition:function(conditions){return TriggerController.instance.checkConditions(this,conditions);},afterInitialize:function(){return false;},addListeners:function(){},getAssets:function(){var componentAssets=[];componentAssets=componentAssets.concat(this.getPrivateAssets());return componentAssets;},getPrivateAssets:function(){return[];},userHasMoreAttempts:function(){var userAttempts=parseInt(this.model.get('attempts'));if(_.isNumber(userAttempts)&&userAttempts<=0){return false;}
return true;},decrementAttempts:function(){var userAttempts=parseInt(this.model.get('attempts'));if(_.isNumber(userAttempts)&&userAttempts>0){userAttempts-=1;this.model.set('attempts',userAttempts);}},showFeedbackWindow:function(title,content,success){StageView.instance.showFeedbackWindow(title,content,success);},validateQuestion:function(sender){if(this.model.get('compl')==1)return true;if(this.model.get('compl')==2)return false;if(this.model.get('compl')!=0)return;this.decrementAttempts();var success=this.checkAnswers();if(this.model.get('feedbackShow')){var content=success?this.model.get('feedbackGood'):this.model.get('feedbackBad');var title=success?'Dobra odpowiedź!':'Zła odpowiedź...';this.showFeedbackWindow(title,content,success);}
if(success){this.markAsCompleted();}else{var isTimerSender=(sender&&sender.model&&sender.model.get('type'))=='timer'?true:false;if(isTimerSender){this.markAsFailed();}else{var attempts=this.userHasMoreAttempts();if(!attempts){this.markAsFailed();}else{this.trigger('custom_questionbadanswer');this.animateQuestionBadAnswer();this.showAtempts();}}}
var passedQuizComponents=ProjectModel.instance.getPassedQiuzComponents();var failedQuizComponents=ProjectModel.instance.getFailedQiuzComponents();ProjectModel.instance.changeProjectStaticVariable('_passed_qiuz_count',passedQuizComponents.length);ProjectModel.instance.changeProjectStaticVariable('_failed_qiuz_count',failedQuizComponents.length);var pageModel=StageView.instance.model;ProjectModel.instance.changeProjectStaticVariable('_passed_qiuz_on_stage_count',pageModel.getPassedQiuzComponents().length);ProjectModel.instance.changeProjectStaticVariable('_failed_qiuz_on_stage_count',pageModel.getFailedQiuzComponents().length);return success;},showAtempts:function(){var attempts=this.model.get('attempts');if(attempts){_Notify(_lang('QUIZ_ATTEMPTS')+attempts);}},animateQuestionBadAnswer:function(){var _that=this;if(this.model.get('markQuestions')!=true){return;}
var oldDuration=this.$el.css('-webkit-animation-duration');var newDuration='0.5s';this.$el.css('-webkit-animation-duration',newDuration);this.$el.addClass('quiz-custom-question-bad-answer');clearTimeout(this.shackeTimeout);this.shackeTimeout=setTimeout(function(){_that.$el.removeClass('quiz-custom-question-bad-answer');_that.$el.css('-webkit-animation-duration',oldDuration);},500);},render:function(){var _that=this;this.$el.html("");var componentTemplate=this.template(this.model.toJSON());this.$el.html(componentTemplate);this.$el.attr({actionkey:this.model.get('actionkey')});this.renderComponentDimentions();this.renderStyle();this.renderCss();this.renderRotate();this.renderFlip();this.applyWcag();this.$el.on('remove',function(){_that.onRemove();});return this;},applyWcag:function(){var wcag=this.model.get('wcag');if(wcag){var wcagText=this.model.get('wcagMessage');this.$el.attr('aria-label',wcagText);this.$el.attr('tabindex',--StageView.instance.wcagTabIndex);}},renderRotate:function(){var angle=this.model.get('rotate')||0;this.$el.find('.component-inner').css('transform','rotate('+angle+'rad)');this.$el.find('.component-inner').css('-moz-transform','rotate('+angle+'rad)');this.$el.find('.component-inner').css('-webkit-transform','rotate('+angle+'rad)');this.$el.find('.component-inner').css('-o-transform','rotate('+angle+'rad)');},renderCss:function(){},renderStyle:function(className){var _that=this;var styles=this.model.get('styles');_.each(styles,function(style,className){_that.$el.find('.'+className).css(styles[className]);});},renderBorder:function(){var borderData=this.model.get('border');this.$el.find('.component-inner').css({'border-top-width':borderData.top+'px','border-bottom-width':borderData.bottom+'px','border-left-width':borderData.left+'px','border-right-width':borderData.right+'px','border-color':borderData.color,'border-style':borderData.style});},renderRadius:function(){var radiusData=this.model.get('borderRadius');this.$el.find('.component-inner').css({'border-top-right-radius':radiusData.topRight+'px','border-top-left-radius':radiusData.topLeft+'px','border-bottom-right-radius':radiusData.bottomRight+'px','border-bottom-left-radius':radiusData.bottomLeft+'px'});},renderShadow:function(){var shadowData=this.model.get('shadow');this.$el.find('.component-inner').css('box-shadow',shadowData.color+' '+shadowData.x+'px '+shadowData.y+'px '+shadowData.blur+'px '+shadowData.size+'px').css('-moz-box-shadow',shadowData.color+' '+shadowData.x+'px '+shadowData.y+'px '+shadowData.blur+'px '+shadowData.size+'px').css('-webkit-box-shadow',shadowData.color+' '+shadowData.x+'px '+shadowData.y+'px '+shadowData.blur+'px '+shadowData.size+'px');},onRemove:function(){},afterRender:function(){},applyPremadeStyle:function(){var premadeStyles=this.model.get('premade-style').toString().replace(',',' ');this.$el.find('.component-inner').attr('class',this.model.get('type')+'-component-inner '+'component-inner '+premadeStyles);},showComponentWithTrigger:function(customAnimationData){var _that=this;if(this.alternativeShow()){return;}
this.resetToOriginalPosition();this.renderComponentDimentions();this.hiddenByTrigger=false;this.$el.removeClass(this.activeAnimation);var animationIn,animationTime;animationIn=customAnimationData.animationType.animationName;animationTime=customAnimationData.animationType.animationTime;if(animationIn=="none"){animationTime=0}
if(animationTime>0){this.$el.css("animation-duration",animationTime+"s");this.$el.css("-webkit-animation-duration",animationTime+"s");}
this.activeAnimation=animationIn;var componentShowtime=parseFloat(this.model.get('showtime'));if(isNaN(componentShowtime)){componentShowtime=0;}
clearTimeout(this.showTimeTO);this.showTimeTO=setTimeout(function(){_that.$el.addClass(animationIn);_that.$el.show();_that.onShow();},componentShowtime*1000);clearTimeout(this.animationTO);this.animationTO=setTimeout(function(){_that.$el.removeClass(animationIn);_that.addEndlessAnimation();_that.addOverAnimation();_that.afterShow();_that.applyParallax();setTimeout(function(){_that.trigger('onShow');},5);},animationTime*1000);var componentLifetime=parseFloat(this.model.get('lifetime'));if(componentLifetime>0){clearTimeout(this.triggerHideTimeout);this.triggerHideTimeout=setTimeout(function(){_that.hideComponent();},(componentLifetime+componentShowtime)*1000);}
if(this.model.get('autoplaySound')){this.playComponentAudio();}},resetToOriginalPosition:function(){this.$el.css({width:this.model.get('width')+"px",height:this.model.get('height')+"px",opacity:this.model.get('opacity'),left:this.model.get('x')+"px",top:this.model.get('y')+"px",transform:''});},alternativeShow:function(){return false;},onShow:function(){},hideComponent:function(){var _that=this;this.removeOverAnimation();this.removeEndlessAnimation();this.$el.removeClass(this.activeAnimation);this.$el.addClass('animated');var animationOut,animationTime;animationOut=this.model.get('animations').animOut.animationName;animationTime=parseFloat(this.model.get('animations').animOut.animationTime);if(animationOut!=="none"){this.$el.css("animation-duration",animationTime+"s");this.$el.css("-webkit-animation-duration",animationTime+"s");this.$el.addClass(animationOut);this.activeAnimation=animationOut;clearTimeout(this.animationTO);this.animationTO=setTimeout(function(){_that.$el.css("display","none");_that.$el.removeClass(animationOut);_that.trigger('onHide');_that.afterHide();},animationTime*1000);}else{this.$el.hide();this.trigger('onHide');_that.afterHide();}},hideComponentWithTrigger:function(customAnimationData){var _that=this;this.removeOverAnimation();this.removeEndlessAnimation();this.$el.removeClass(this.activeAnimation);this.hiddenByTrigger=true;this.$el.addClass('animated');var animationOut,animationTime;animationOut=customAnimationData.animationType.animationName;animationTime=parseFloat(customAnimationData.animationType.animationTime);if(animationOut!=="none"){this.$el.css("animation-duration",animationTime+"s");this.$el.css("-webkit-animation-duration",animationTime+"s");this.$el.addClass(animationOut);this.activeAnimation=animationOut;clearTimeout(this.animationTO);this.animationTO=setTimeout(function(){_that.$el.css("display","none");_that.$el.removeClass(animationOut);_that.trigger('onHide');_that.afterHide();},animationTime*1000);}else{this.$el.hide();this.trigger('onHide');_that.afterHide();}},afterHide:function(){},delayAndShowComponent:function(){var _that=this;if(this.model.get('hidden')){return false;}
var showtime=parseFloat(this.model.get('showtime'));if(showtime==0){_that.showComponent();}else{setTimeout(function(){_that.showComponent();},showtime*1000);}},showComponent:function(){var _that=this;if(this.hiddenByTrigger)return;this.$el.removeClass(this.activeAnimation);this.$el.addClass('animated');var animationIn,animationOut,animationTime;animationIn=this.model.get('animations').animIn.animationName;animationOut=this.model.get('animations').animOut.animationName;animationTime=parseFloat(this.model.get('animations').animIn.animationTime);animationOutTime=parseFloat(this.model.get('animations').animOut.animationTime);if(animationOut=='none'){animationOutTime=0;}
if(animationIn=='none'){animationTime=0;}
if(animationOut!=="none"&&this.$el.hasClass(animationOut)){screenOb.removeClass(animationOut);screenOb.css("display","none");}
this.$el.css("animation-duration",animationTime+"s");this.$el.css("-webkit-animation-duration",animationTime+"s");this.activeAnimation=animationIn;this.$el.addClass(animationIn);this.$el.show();clearTimeout(this.animationTO);this.animationTO=setTimeout(function(){_that.$el.removeClass(animationIn);_that.addEndlessAnimation();_that.addOverAnimation();_that.afterShow();_that.applyParallax();setTimeout(function(){_that.trigger('onShow');},5);},animationTime*1000);var componentLifetime=parseFloat(this.model.get('lifetime'));var componentShowtime=parseFloat(this.model.get('showtime'));if(componentLifetime>0){setTimeout(function(){_that.hideComponent();},(componentLifetime)*1000);}
this.onShow();if(this.model.get('autoplaySound')){this.playComponentAudio();}},afterShow:function(){return false;},addOverAnimation:function(){var animationOver=this.model.get('animations').animOver.animationName;var animationTime=parseFloat(this.model.get('animations').animOver.animationTime);if(animationOver!=="none"){if(!this.$el.hasClass(animationOver)){this.$el.addClass(animationOver);this.animationOverEnabled=true;}}},removeOverAnimation:function(){var animationOver=this.model.get('animations').animOver.animationName;if(animationOver!=="none"){if(this.$el.hasClass(animationOver)){this.$el.removeClass(animationOver);this.animationOverEnabled=false;}}},removeEndlessAnimation:function(){var animEndless=this.model.get('animations').animEndless.animationName;if(animEndless!=="none"){if(this.$el.hasClass(animEndless)){this.$el.removeClass(animEndless);}}},onMouseOver:function(){if(!this.animationOverEnabled)return;var animationOverTime=parseFloat(this.model.get('animations').animOver.animationTime);if(this.endlessAnimationTime){this.removeEndlessAnimation();}
this.$el.css("animation-duration",animationOverTime+"s");this.$el.css("-webkit-animation-duration",animationOverTime+"s");},onMouseOut:function(){if(!this.animationOverEnabled)return;if(this.endlessAnimationTime){this.addEndlessAnimation();this.$el.css("animation-duration",this.endlessAnimationTime+"s");this.$el.css("-webkit-animation-duration",this.endlessAnimationTime+"s");}},addEndlessAnimation:function(){var animationEndless=this.model.get('animations').animEndless.animationName;var animationTime=parseFloat(this.model.get('animations').animEndless.animationTime);if(animationEndless!=="none"){if(!this.$el.hasClass(animationEndless)){this.$el.css("animation-duration",animationTime+"s");this.$el.css("-webkit-animation-duration",animationTime+"s");this.endlessAnimationTime=animationTime;this.$el.addClass(animationEndless);}}},setPositionToComponent:function(){this.$el.css({position:'absolute',top:this.model.get('y')+'px',left:this.model.get('x')+'px',width:this.model.get('width')+'px',height:this.model.get('height')+'px'});},getHeightRatio:function(){return StageView.instance.getHeightRatio();},getWidthRatio:function(){return StageView.instance.getWidthRatio();},getSmallerRatio:function(){return StageView.instance.getSmallerRatio();},renderComponentDimentions:function(){var autoScale=ProjectModel.instance.isAutoScale();if(autoScale){if(StageView.instance&&StageView.instance.model){var fontRatio=this.getSmallerRatio();var widthRatio=this.getWidthRatio();var heightRatio=this.getHeightRatio();this.$el.css({position:'absolute',top:this.model.get('y')*heightRatio+'px',left:this.model.get('x')*widthRatio+'px',width:this.model.get('width')*widthRatio+'px',height:this.model.get('height')*heightRatio+'px'});var styles=this.model.get('styles');var componentInner=this.$el.find('.component-inner');if(styles&&styles['component-inner']){var componentInnerStyles=styles['component-inner'];componentInner.css({'border-top-width':parseFloat(componentInnerStyles['border-top-width'])*fontRatio+'px','border-right-width':parseFloat(componentInnerStyles['border-right-width'])*fontRatio+'px','border-bottom-width':parseFloat(componentInnerStyles['border-bottom-width'])*fontRatio+'px','border-left-width':parseFloat(componentInnerStyles['border-left-width'])*fontRatio+'px','border-bottom-left-radius':parseFloat(componentInnerStyles['border-bottom-left-radius'])*fontRatio+'px','border-top-left-radius':parseFloat(componentInnerStyles['border-top-left-radius'])*fontRatio+'px','border-bottom-right-radius':parseFloat(componentInnerStyles['border-bottom-right-radius'])*fontRatio+'px','border-top-right-radius':parseFloat(componentInnerStyles['border-top-right-radius'])*fontRatio+'px',});}
this.specialRenderDimentions();}}else{this.setPositionToComponent();}},specialRenderDimentions:function(){},markAsCompleted:function(){var complStatus=this.model.get('compl');if(complStatus!=1){this.model.set('compl',1);this.trigger('custom_questionpassed',{blockPoints:false});}else{this.trigger('custom_questionpassed',{blockPoints:true});}
this.renderAsCompleted();this.$el.trigger('check-course-status');},markAsFailed:function(){var complStatus=this.model.get('compl');if(complStatus!=2){this.model.set('compl',2);this.trigger('custom_questionfailed',{blockPoints:false});}else{this.trigger('custom_questionfailed',{blockPoints:true});}
this.renderAsFailed();this.$el.trigger('check-course-status');},disabledComponent:function(){},renderAsCompleted:function(){},renderAsFailed:function(){},renderAsReadyToUse:function(){},getModel:function(){return this.model;},playComponentAudio:function(){var soundFile=this.getComponentSoundFile();if(soundFile){this.$el.trigger('play-component-audio',[soundFile,this]);}},stopComponentAudio:function(){var soundFile=this.getComponentSoundFile();if(soundFile){this.$el.trigger('stop-component-audio',[soundFile,this]);}},pauseComponentAudio:function(){var soundFile=this.getComponentSoundFile();if(soundFile){this.$el.trigger('pause-component-audio',[soundFile,this]);}},makeTransition:function(options){var _that=this;var opts=options==undefined?{}:options;var delay=opts.delay==undefined?0:parseInt(opts.delay);setTimeout(function(){_that.executeTransition(opts);},delay*1000);},executeTransition:function(opts,classes){var _that=this;var componentTransition=this.$el;var transition=opts.transition==undefined?{}:opts.transition;var x=transition.x==undefined?this.model.get('x'):parseInt(transition.x);var y=transition.y==undefined?this.model.get('y'):parseInt(transition.y);var width=transition.width==undefined?this.model.get('width'):parseInt(transition.width);var height=transition.height==undefined?this.model.get('height'):parseInt(transition.height);var rotate=(!$.isNumeric(transition.rotate))?0:parseInt(transition.rotate);var time=transition.time==undefined?0:parseInt(transition.time);var ease=transition.ease==undefined?'0.250, 0.250, 0.750, 0.750':transition.ease;var axis=transition.axis==undefined?'center-center':transition.axis;var scale=(!$.isNumeric(transition.scale))?1:transition.scale;var opacity=(!$.isNumeric(transition.opacity))?1:transition.opacity;ease='cubic-bezier('+ease+')';var animation='opacity time ease, top time ease, left time ease, width time ease, height time ease, transform time ease';animation=animation.replace(/time/g,(time+'s'));animation=animation.replace(/ease/g,ease);componentTransition.css('-webkit-transition',animation);componentTransition.css('-moz-transition',animation);componentTransition.css('-o-transition',animation);componentTransition.css('transition',animation);componentTransition.css('left',x+'px');componentTransition.css('top',y+'px');componentTransition.css('width',width+'px');componentTransition.css('height',height+'px');componentTransition.css('opacity',opacity);componentTransition.css('-webkit-transform','rotate('+rotate+'deg) '+'scale('+scale+')');componentTransition.css('-moz-transform','rotate('+rotate+'deg) '+'scale('+scale+')');componentTransition.css('-o-transform','rotate('+rotate+'deg) '+'scale('+scale+')');componentTransition.css('-ms-transform','rotate('+rotate+'deg) '+'scale('+scale+')');componentTransition.css('transform','rotate('+rotate+'deg) '+'scale('+scale+')');var axisX=axis.split('-')[0];var axisY=axis.split('-')[1];componentTransition.css('-webkit-transform-origin',axisY+' '+axisX);componentTransition.css('-ms-transform-origin',axisY+' '+axisX);clearTimeout(this.transitionTimeout);this.transitionTimeout=setTimeout(function(){componentTransition.css('-webkit-transition','');componentTransition.css('-moz-transition','');componentTransition.css('-o-transition','');componentTransition.css('transition','');},time*1000);},getComponentSoundFile:function(){var actionkey=this.model.get('actionkey');var componentSound=this.model.get('point-sound')||[];if(componentSound.length){var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/sounds/'+actionkey+'/'+componentSound;return audioSrc;}
return false;},addSoundListener:function(sound){var _that=this;if(!sound){return;}
sound.off()
sound.on('ended',function(e){_that.onSoundEnded();_that.trigger('onSoundEnded');});},onSoundEnded:function(){},resetExerciseApproach:function(){this.resetPoints();this.resetAttempts();this.resetCompl();this.resetExerciseApproachSpecial();this.model.set('userSelection',undefined);this.initUserSelectionObject();this.renderAsReadyToUse();},resetPoints:function(){var model=this.model;var compl=model.get('compl');if(compl==1){this.subScorePoints('custom_questionpassed',model);}
if(compl==2){this.subScorePoints('custom_questionfailed',model);}},subScorePoints:function(whenDoItSearcher,model){var subtriggers=this.findSubtriggers(whenDoItSearcher,model);if(subtriggers.length==1){var firstSubtrigger=_.first(subtriggers);var varValue=parseInt(firstSubtrigger.objs.varValue);if(_.isNumber(varValue)){var scoreVariable=ProjectModel.instance.getScoreVariable();scoreVariable.pvarvalue-=varValue;ProjectModel.instance.get('options').trigger('change');}}},findSubtriggers:function(whenDoItSearcher,model){var triggers=model.get('triggers');var finedSubtriggers=[];if(triggers==undefined){return finedSubtriggers;}
for(var i=0;i<triggers.length;i++){var trigger=triggers[i];var subtriggers=trigger.subtriggers;var whenDoIt=trigger.whendoit;if(whenDoIt==whenDoItSearcher){for(var j=0;j<subtriggers.length;j++){var subtrigger=subtriggers[j];var whattodo=subtrigger.whattodo;var objs=subtrigger.objs;if(whattodo=='changevarvalue'&&objs.varName=='00000000000000000000000000000000'&&objs.varAction=='add'){finedSubtriggers.push(subtrigger);}}}}
return finedSubtriggers;},renderFlip:function(){var flipX=this.model.get('flipX');var flipY=this.model.get('flipY');var componentFlips=this.$el.find('.component-flips');componentFlips.removeClass('xnormal-ynormal xflip-ynormal xnormal-yflip xflip-yflip');componentFlips.addClass(flipX+'-'+flipY);},changeStyle:function(opts){var style=opts.style||{};var background=style.background;var element;switch(this.model.get('type')){case'quiz':case'quiz-selectone':element=this.$el.find('.quiz-body');break;default:element=this.$el.find('.component-inner');break;}
if(!_.isUndefined(background)){element.css('background',background);}
var borderWeight=style.borderWeight;var borderColor=style.borderColor;var borderType=style.borderType||'solid';_log('borderWeight',borderWeight);_log('borderColor',borderColor);if(!_.isUndefined(borderWeight)&&_.isNumber(borderWeight)){element.css('border-width',borderWeight+'px');element.css('border-style',borderType);}
if(!_.isUndefined(borderColor)){element.css('border-color',borderColor);element.css('border-style',borderType);}},resetExerciseApproachSpecial:function(){},checkExercise:function(){},beforeDestroy:function(){},getSpecialScormData:function(){},setSpecialScormData:function(){},destroy:function(){this.beforeDestroy();this.remove();}});;;var ExerciseComponentView=ComponentView.extend({checkExercise:function(){return false;},checkSelfEnter:function(e){switch(e.which){case 13:var checkSelf=this.model.get('checkSelf');if(checkSelf){this.validateQuestion();}
break;}},checkSelf:function(e){var checkSelf=this.model.get('checkSelf');if(checkSelf){this.validateQuestion();}},});;;var TextComponentView=ComponentView.extend({className:'component text-component',template:_.template($('#text-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{});},afterRender:function(){this.initProjectVarDefautBindings();this.listenTo(TriggerController.instance.projectModel.get('options'),'change',this.showVariableValue);this.removeHandle();this.renderScrollbar();},removeHandle:function(){this.$el.find('.text-component-handle').remove();},specialRenderDimentions:function(){var _that=this;var fontRatio=this.getSmallerRatio();try{var tempContainer=$('<span></span>');tempContainer.html(this.model.get('contents'));tempContainer.find('*').each(function(){console.log('lineHeight',$(this).css('line-height'));console.log('lineHeightorg',$(this).html());var elFontSize=parseInt($(this).css('font-size'));var lineHeight=parseFloat($(this).css('line-height'));console.log('lineHeight',lineHeight);lineHeight=isNaN(lineHeight)?1.2:lineHeight;if(Utils.isIE()){lineHeight='1.2em';$(this).css({'font-family':''});}
if(parseInt($(this).find('span').css('font-size'))*fontRatio<11){lineHeight=0.1;}
$(this).css({'font-size':elFontSize*fontRatio+'px','line-height':lineHeight,'border-top-width':parseFloat($(this).css('line-height'))});});_log('this.model',this.model);var componentInner=this.$el.find('.component-inner');var padding=this.model.get('padding');componentInner.html(tempContainer.html());componentInner.css({padding:padding*fontRatio+'px'});}catch(err){_log('error',err,_log.error);}},showVariableValue:function(){var courseOptions=TriggerController.instance.projectModel.get('options');var courseVariables=courseOptions.get('projectVariables');courseVariables=courseVariables.concat(courseOptions.get('staticVariables'));for(var varID in courseVariables){this.$el.find('*[pvarbind="'+courseVariables[varID].varhash+'"]').text(courseVariables[varID].pvarvalue);}},initProjectVarDefautBindings:function(){var _that=this;var courseOptions=TriggerController.instance.projectModel.get('options');var courseVariables=courseOptions.get('projectVariables');courseVariables=courseVariables.concat(courseOptions.get('staticVariables'));for(var varID in courseVariables){var elems=this.findElementsDirectlyContainingText(this.el,'{%'+courseVariables[varID].pvarname+'%}');$(elems).html(function(){var oldText=this.textContent;searchFor="{%"+courseVariables[varID].pvarname+"%}";var reg=new RegExp(searchFor,"g");var newText=oldText.replace(reg,'<span pvarbind="'+courseVariables[varID].varhash+'">'+courseVariables[varID].pvarvalue+'</span>');return newText;});}},findElementsDirectlyContainingText:function(ancestor,text){var elements=[];walk(ancestor);return elements;function walk(element){var n=element.childNodes.length;for(var i=0;i<n;i++){var child=element.childNodes[i];if(child.nodeType===3&&child.data.indexOf(text)!==-1){elements.push(element);break;}}
for(var i=0;i<n;i++){var child=element.childNodes[i];if(child.nodeType===1)
walk(child);}}},renderScrollbar:function(){var enableScrollbar=this.model.get('enable-scrollbar');this.$el.find('.component-inner').css({overflow:enableScrollbar?'auto':'hidden'});},});;;var ImageComponentView=ComponentView.extend({className:'component image-component',template:_.template($('#image-component-template').html()),getPrivateAssets:function(){var componentAssets=[];var actionkey=this.model.get('actionkey');var imageFile=this.model.get('imageFileName');var fileExtension=imageFile.split('.').pop();if(imageFile&&imageFile.length){var randomval=__meta__.randomval;var imageSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/images/'+actionkey+'/min.'+fileExtension+'?r='+randomval;componentAssets.push(imageSrc);}
return componentAssets;}});;;var VideoComponentView=ComponentView.extend({className:'component video-component',template:_.template($('#video-component-template').html()),afterShow:function(){var _that=this;if(this.model.get('videoAutoplay')){this.tryPlayInterval=setInterval(function(){_that.playVideo();},400);}},playVideo:function(){if(this.video){this.video.play();clearInterval(this.tryPlayInterval);}},pauseVideo:function(){if(this.video){this.video.pause();}},stopVideo:function(opts){if(this.video){this.reserExecutedOpts();this.video.currentTime(0);this.video.pause();this.trigger('onVideoStop',this.video);}},goToPositionVideo:function(opts){var vid=opts.video==undefined?{}:opts.video;var position=vid.position==undefined?0:parseInt(vid.position);var play=vid.play==undefined?false:vid.play;if(this.video){this.video.currentTime(position);if(play){this.video.play();}else{this.video.pause();}
this.trigger('onVideoGoToPosition',this.video);}},reserExecutedOpts:function(){var triggers=this.model.get('triggers');for(var i=0;i<triggers.length;i++){var trigger=triggers[i];var elseactions=trigger.elseactions;var subtriggers=trigger.subtriggers;for(var j=0;j<subtriggers.length;j++){var action=subtriggers[j];var opts=action.opts;_log('reserExecutedOpts opts',opts);if(opts&&opts.video&&opts.video.isExecuted){opts.video.isExecuted=false;}}
for(var j=0;j<elseactions.length;j++){var action=elseactions[j];var opts=action.opts;if(opts&&opts.video&&opts.video.isExecuted){opts.video.isExecuted=false;}}};this.model.set('triggers',triggers);},afterRender:function(){this.reserExecutedOpts();var videoType=this.model.get('videoType');var videoLink=this.model.get('videoLink');switch(videoType){case 1:this.showVideo();break;case 2:this.showYoutube();break;case 3:this.showVimeo();break;}},getOptions:function(){return{autoplay:this.model.get('videoAutoplay'),controls:this.model.get('videoControls'),loop:this.model.get('videoLoop'),id:this.model.get('actionkey')}},getVideoHtml:function(options){var videoHtml='<video id="'+options.id+'"';if(options.controls){videoHtml+=' controls'};if(options.loop){videoHtml+=' loop'};videoHtml+=' class="video-js vjs-default-skin" preload="auto" width="100%" height="100%" ></video>';return videoHtml;},showVideo:function(){this.getOptions();var _that=this;var videoFileName=this.model.get('videoFileName');if(videoFileName!==''){var actionkey=this.model.get('actionkey');var videoSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/videos/'+actionkey+'/'+videoFileName;var videoWrapper=this.$el.find('.video-wrapper');try{videojs(actionkey).dispose();}catch(err){}
videoWrapper.html('');videoWrapper.append(this.getVideoHtml(this.getOptions()));videojs(actionkey,{},function(){this.src(videoSrc);_that.addVideoEvents(this);_that.video=this;});}},showYoutube:function(){var _that=this;var videoLink=this.model.get('videoLink');var videoWrapper=this.$el.find('.video-wrapper');var actionkey=this.model.get('actionkey');try{videojs(actionkey).dispose();}catch(err){}
videoWrapper.html('');videoWrapper.append(this.getVideoHtml(this.getOptions()));videojs(actionkey,{"techOrder":["youtube"],"ytcontrols":false,"autoplay":false,"src":videoLink},function(){_that.addYouTubeVideoEvents(this);_that.video=this;});},showVimeo:function(){var _that=this;var videoLink=this.model.get('videoLink');var videoWrapper=this.$el.find('.video-wrapper');var actionkey=this.model.get('actionkey');try{videojs(actionkey).dispose();}catch(err){}
videoWrapper.html('');videoWrapper.append(this.getVideoHtml(this.getOptions()));videojs(actionkey,{"techOrder":["vimeo"],"ytcontrols":false,"autoplay":false,"src":videoLink},function(){_that.addVimeoVideoEvents(this);_that.video=this;});},addVideoEvents:function(video){var _that=this;video.on('play',function(e){_log('play',e);_that.trigger('onVideoPlay',e);});video.on('pause',function(e){_log('pause',e);_that.trigger('onVideoPause',e);});video.on('canplaythrough',function(e){_log('canplaythrough',e);_that.trigger('onVideoLoaded',e);});video.on('ended',function(e){_log('onVideoEnded',e);_that.trigger('onVideoEnded',e);});video.on("timeupdate",function(e){_that.trigger('onVideoTimeUpdate',e);_log('onVideoTimeUpdate',e.currentTarget.currentTime);if(e.currentTarget.currentTime==e.currentTarget.duration){_log('video ended');}});},addYouTubeVideoEvents:function(video){var _that=this;video.on('play',function(e){_log('play',e);_that.trigger('onVideoPlay',e);});video.on('pause',function(e){_log('pause',e);_that.trigger('onVideoPause',e);});video.on('ended',function(e){_log('onVideoEnded',e);_that.trigger('onVideoEnded',e);});_that.trigger('onVideoLoaded',video);},addVimeoVideoEvents:function(video){var _that=this;video.on('play',function(e){_log('play',e);_that.trigger('onVideoPlay',e);});video.on('pause',function(e){_log('pause',e);_that.trigger('onVideoPause',e);});video.on('canplaythrough',function(e){_log('canplaythrough',e);_that.trigger('onVideoLoaded',e);});video.on('ended',function(e){_log('onVideoEnded',e);_that.trigger('onVideoEnded',e);});video.on("timeupdate",function(e){_that.trigger('onVideoTimeUpdate',e);_log('onVideoTimeUpdate',e.currentTarget.currentTime);if(e.currentTarget.currentTime==e.currentTarget.duration){_log('video ended');}});},});;;var QuizComponentView=ExerciseComponentView.extend({className:'component quiz-component',template:_.template($('#quiz-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click .quiz-submit-button':'validateQuestion','change .answer-checkbox':'selectAnswer'});},specialRenderDimentions:function(){var _that=this;var ratio=this.getSmallerRatio();var calculatedFontSize=this.model.get('fontSize')*ratio;if(!isNaN(calculatedFontSize)){this.$el.find('.answer-wrapper').each(function(){var answerId=$(this).find('input').attr('it');$(this).css({top:_that.model.get('answers')[answerId].top*ratio+"px",left:_that.model.get('answers')[answerId].left*ratio+"px"});$(this).find('.answer-text').css({'font-size':calculatedFontSize});$(this).find('input').css({width:20*ratio+"px",height:20*ratio+"px",left:-28*ratio+"px",top:'calc(50% - '+(20/2*ratio)+'px)'});});var submitBtnModel=this.model.get('submitButton');this.$el.find('.quiz-submit-button').css({'font-size':13*ratio+"px",left:submitBtnModel.left*ratio+"px",top:submitBtnModel.top*ratio+"px",top:submitBtnModel.top*ratio+"px",'padding-left':25*ratio+"px",'padding-right':25*ratio+"px",'padding-top':7*ratio+"px",'padding-bottom':7*ratio+"px",});}},selectAnswer:function(e){var input=$(e.currentTarget);var userSelection=this.model.get('userSelection');if(!this.model.get('multiselect')){_.each(userSelection,function(answer){answer.c=false;});}
if(_.isUndefined(userSelection[input.attr('it')])){userSelection[input.attr('it')]={};}
userSelection[input.attr('it')].c=input.prop('checked');this.model.set('userSelection',userSelection);},applyWcag:function(){var _that=this;var wcag=this.model.get('wcag');if(wcag){var submit=this.$el.find('.quiz-submit-button');if(submit.push()){submit.attr('tabindex',--StageView.instance.wcagTabIndex);}
var answers=$(this.$el.find('.answer-wrapper').get().reverse());answers.each(function(){var input=$(this).find('input');input.attr('tabindex',--StageView.instance.wcagTabIndex);input.attr('aria-label',input.next().text());});var wcagText=this.model.get('wcagMessage');this.$el.attr('aria-label',wcagText);this.$el.attr('tabindex',--StageView.instance.wcagTabIndex);}},checkAnswers:function(){var success=true;var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var answer in answers){if(userSelection[answer].c!==answers[answer].goodAnswer){success=false;}}
return success;},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');var answers=this.model.get('answers');if(_.isUndefined(userSelection)){userSelection={};for(var answer in answers){userSelection[answer]={c:false};}
this.model.set('userSelection',userSelection);}
this.renderUserSelection();},renderAsFailed:function(){this.$el.find('input, .quiz-submit-button').attr('disabled','disabled');this.$el.find('.quiz-submit-button').css({opacity:'.7'});if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-failed');}
this.renderUserSelection();},renderAsCompleted:function(){this.$el.find('input, .quiz-submit-button').attr('disabled','disabled');this.$el.find('.quiz-submit-button').css({opacity:'.7'});if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-passed');}
this.renderUserSelection();},renderAsReadyToUse:function(){this.$el.find('input, .quiz-submit-button').removeAttr('disabled');this.$el.find('.quiz-submit-button').css({opacity:'1'});this.$el.removeClass('mark-questions-as-passed');this.$el.removeClass('mark-questions-as-failed');this.renderUserSelection();},renderUserSelection:function(){var _that=this;var userSelection=this.model.get('userSelection');_.each(userSelection,function(answer,it){_that.$el.find('input[it="'+it+'"]').prop('checked',answer.c);});},});;;var QuizFillInBlanksComponentView=ExerciseComponentView.extend({className:'component quizfillinblanks-component',template:_.template($('#quizfillinblanks-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'change select':'onInputChange','keyup input':'onInputKeyUp',});},saveUserSelectValue:function(choosenAnswer,answerId){var userSelectionObject=this.model.get('userSelection');userSelectionObject['#'+answerId]=choosenAnswer;this.model.set('userSelection',userSelectionObject);},renderAsReadyToUse:function(){this.renderUserSelection();},renderAsCompleted:function(){this.renderUserSelection();this.disableInputs();},renderAsFailed:function(){this.renderUserSelection();this.disableInputs();},disableInputs:function(){var answersElements=this.$el.find('[aid]');answersElements.each(function(){var ob=$(this);ob.prop('disabled',true);});},afterRender:function(){this.$el.find('[placeholder]').removeAttr('placeholder');this.model.set('markQuestions',false);this.model.set('feedbackShow',false);},renderUserSelection:function(){var _that=this;var userSelectionObject=this.model.get('userSelection');_.each(userSelectionObject,function(userSelection,it){if(userSelection){var aid=it.substring(1);var input=_that.$el.find('[aid="'+aid+'"]');_that.setInputValue(input,userSelection);_that.checkInput(input);}});},getInputType:function(jQueryObject){if(jQueryObject.is('select')){return'select';}
if(jQueryObject.is('input')){return'input';}
if(jQueryObject.is('textarea')){return'textarea';}
return'';},setInputValue:function(jQueryObject,value){var inputType=this.getInputType(jQueryObject);switch(inputType){case'select':jQueryObject.find('option').each(function(){if($(this).text()==value){$(this).attr('selected','selected');}});break;case'input':case'textarea':jQueryObject.val(value);break;}},getCurrentInputValue:function(jQueryObject){var inputType=this.getInputType(jQueryObject);switch(inputType){case'select':return jQueryObject.find(":selected").text();break;case'input':case'textarea':return jQueryObject.val();break;}
return'';},checkAnswers:function(){var _that=this;var success=true;var answersElements=this.$el.find('[aid]');answersElements.each(function(){var ob=$(this);if(!_that.checkInput(ob)){success=false;}});return success;},onInputChange:function(e){if(!this.model.get('checkSelf')){return;}
var ob=$(e.currentTarget);this.checkInput(ob);_log('onInputChange',e);},onInputKeyUp:function(e){switch(e.which){case 13:_log('onInputKeyUp',e);this.onInputChange(e);break;}},checkInput:function(ob){var choosenAnswer=this.getCurrentInputValue(ob);var answerId=ob.attr('aid');var inputAnswers=this.model.get('answers');var thisInputAnswers=inputAnswers['#'+answerId];this.saveUserSelectValue(choosenAnswer,answerId);var correct=this.answerIsCorrect(choosenAnswer,thisInputAnswers);var backgroundColor=correct?'#469E4B':'#BB3737';ob.css({'background-color':backgroundColor,color:'#fff'});return correct;},answerIsCorrect:function(choosenAnswer,possibleAnswers){if(choosenAnswer&&possibleAnswers&&possibleAnswers.goodanswers){possibleAnswers=possibleAnswers.goodanswers;for(var i=possibleAnswers.length-1;i>=0;i--){var possibleAnswer=possibleAnswers[i];if(possibleAnswer.iscorrect){if(possibleAnswer.text.toLowerCase()==choosenAnswer.toLowerCase()){return true;}}};}
return false;},});;;var QuizDnDComponentView=ExerciseComponentView.extend({className:'component quizdnd-component',template:_.template($('#quizdnd-component-template').html()),dndtimeouts:[],events:function(){return _.extend({},ComponentView.prototype.events,{'click':'validateQuestion',});},afterAllInitialized:function(params){var _that=this;params=params||{};var prepareDraggable=_.isUndefined(params.prepareDraggable)?true:params.prepareDraggable;var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);this.setSpecialScormData();draggableObjectsModels.each(function(cModel){_that.setEndPositionToComponent(cModel.view,cModel);});var componentStatus=parseInt(this.model.get('compl'));var containers=_.keys(this.model.get('answers'));var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var ans in answers){var containerObject=TriggerController.instance.getComponentModelByActionkey([ans]);_that.refreshContainers(userSelection[ans],answers[ans],containerObject.at(0));}
if(componentStatus!=0){return;}
var fontSize=(this.$el.height()/6)<15?15:(this.$el.height()/6);this.$el.find('.quiz-dnd-component-inner').css({'font-size':fontSize+"px"});if(prepareDraggable){draggableObjectsModels.each(function(cModel){_that.prepareDraggableObject(cModel.view,cModel);});}
draggableObjectsModels.each(function(cModel){_that.setDraggable(cModel.view,cModel);});var containers=_.keys(this.model.get('answers'));var containersModels=TriggerController.instance.getComponentModelByActionkey(containers);containersModels.each(function(cModel){_that.setDroppable(cModel.view,cModel);});_log('userSelection 1',JSON.stringify(userSelection));var isEmpty=this.userSelectionIsEmpty();_log('isEmpty',isEmpty);if(isEmpty){this.distributeAllAnswersInContainerOnStart();}
_log('userSelection 2',JSON.stringify(userSelection));},refreshDraggableObject:function(cView,cModel){var ratio=this.getSmallerRatio();var originalStartPos=cModel.get('originalStartPos');if(originalStartPos){_log('originalStartPos',originalStartPos);_log('top i left',cModel.get('x')+', y: '+cModel.get('x'));_log('-------------------');var startPos={leftStartPos:cModel.get('x')*ratio,topStartPos:cModel.get('y')*ratio};cModel.set('startPos',startPos);}},specialRenderDimentions:function(){var _that=this;try{var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);draggableObjectsModels.each(function(cModel){_that.refreshDraggableObject(cModel.view,cModel);});setTimeout(function(){var containers=_.keys(_that.model.get('answers'));var answers=_that.model.get('answers');var userSelection=_that.model.get('userSelection');for(var ans in answers){var containerObject=TriggerController.instance.getComponentModelByActionkey([ans]);_that.refreshContainers(userSelection[ans],answers[ans],containerObject.at(0),false);}},1);}catch(err){_log('error',err,_log.error);}},setEndPositionToComponent:function(cView,cModel){var endPosition=cModel.get('endPosition');_log('setEndPositionToComponent',endPosition);if(endPosition){cView.$el.css('left',endPosition.left+'px');cView.$el.css('top',endPosition.top+'px');}},userSelectionIsEmpty:function(){var userSelection=this.model.get('userSelection');var isEmpty=true;for(var answers in userSelection){if(userSelection[answers].length>0){isEmpty=false;break;}}
return isEmpty;},setDroppable:function(cView,cModel){var _that=this;var actionkey=this.model.get('actionkey');cView.$el.droppable({tolerance:"pointer",scope:actionkey,drop:function(evt,objDropped){var droppedObject=objDropped.draggable[0];var droppedObjectModel=TriggerController.instance.getComponentModelByActionkey([$(droppedObject).attr('name')]);_that.objectDropped(cModel,droppedObjectModel.at(0));}});},isGoodAnswer:function(containerID,droppedID){var answers=this.model.get('answers');if(answers[containerID].pa.indexOf(droppedID)!==-1){return true;}
return false;},distributeAllAnswersInContainerOnStart:function(){var _that=this;var allAnswers=this.model.get('answers');_log('dnd model',this.model);for(var container in allAnswers){var goodAnswers=allAnswers[container].pa;var answersModels=TriggerController.instance.getComponentModelByActionkey(goodAnswers);var containerModel=TriggerController.instance.getComponentModelByActionkey([container]).at(0);answersModels.comparator='x';answersModels.sort();answersModels.each(function(aModel){if(_that.objectIsOnContainer(aModel,containerModel)){_that.objectDropped(containerModel,aModel);_that.setEndPosition(aModel,aModel.view.$el);}});}},objectIsOnContainer:function(objectModel,containerModel){var _that=this;if(!containerModel||!objectModel){return false;}
var containerEl=containerModel.view.$el;var objectEl=objectModel.view.$el;var x1=parseInt(containerModel.get('x'));var y1=parseInt(containerModel.get('y'));var x2=parseInt(containerModel.get('width'))+x1;var y2=parseInt(containerModel.get('height'))+y1;var htmlObjectsArray=[];var actualX1=parseInt(objectModel.get('x'));var actualY1=parseInt(objectModel.get('y'));var actualX2=parseInt(objectModel.get('width'))+actualX1;var actualY2=parseInt(objectModel.get('height'))+actualY1;var allObject=true;var corner1=_that.checkPosition(actualX1,actualY1,x1,y1,x2,y2);var corner2=_that.checkPosition(actualX2,actualY1,x1,y1,x2,y2);var corner3=_that.checkPosition(actualX2,actualY2,x1,y1,x2,y2);var corner4=_that.checkPosition(actualX1,actualY2,x1,y1,x2,y2);if(corner1&&corner2&&corner3&&corner4){return true;}else{if(_that.checkRect(x1,y1,x2,y2,actualX1,actualY1,actualX2,actualY2)){return true;}}
return false;},checkRect:function(firstX1,firstY1,firstX2,firstY2,secondX1,secondY1,secondX2,secondY2){if(firstX1<secondX2&&firstX2>secondX1&&firstY1<secondY2&&firstY2>secondY1){return true;}
return false;},checkPosition:function(pointX,pointY,x1,y1,x2,y2){if(pointX>=x1&&pointX<=x2&&pointY>=y1&&pointY<=y2){return true;}
return false;},sortUserSelectionByObjectsPosition:function(){var _that=this;var allAnswers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var container in userSelection){var userAnswers=userSelection[container];if(userAnswers.length){var answersModels=TriggerController.instance.getComponentModelByActionkey(userAnswers);answersModels.each(function(aModel){var objectScreenX=parseInt(aModel.view.$el.css('left'));aModel.set('screenx',objectScreenX);});answersModels.comparator='screenx';answersModels.sort();var _userSelection=[];_log('answersModels',answersModels);answersModels.each(function(aModel){_log('PUSHING:',aModel.get('actionkey'));_userSelection.push(aModel.get('actionkey'));});userSelection[container]=_userSelection;_log('przejście... ilość: ',_userSelection.length);}}
this.model.set('userSelection',userSelection);return userSelection;},setEndPosition:function(cModel,cEl){cModel.set('endPosition',{left:parseInt(cEl.css('left')),top:parseInt(cEl.css('top'))});this.createSpecialScormData();_log('stop drag seve end position ',cModel.get('endPosition'));},objectDropped:function(containerModel,droppedObjectModel){var _that=this;var droppedID=droppedObjectModel.get('actionkey');var droppedObject=droppedObjectModel.view.$el;var droppableID=containerModel.get('actionkey');var success=false;var reverted=false;var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');var opts=this.model.get('opts');if(answers[droppableID].opts.onlygoodanswers===true){if(!(_that.isGoodAnswer(containerModel.get('actionkey'),droppedID))){droppedObject.animate({left:droppedObjectModel.get('startPos').leftStartPos+"px",top:droppedObjectModel.get('startPos').topStartPos+"px"},500);success=false;reverted=true;}}
if(!reverted){var maxAnswers=parseInt(answers[droppableID].opts.maxAnswers);if(typeof maxAnswers==="number"){if(userSelection[droppableID]&&(maxAnswers>userSelection[droppableID].length||maxAnswers<=0)){userSelection[droppableID].push(droppedID);success=true;}else{droppedObject.animate({left:droppedObjectModel.get('startPos').leftStartPos+"px",top:droppedObjectModel.get('startPos').topStartPos+"px"},500);success=false;}}else{userSelection[droppableID].push(droppedID);success=true;}}
if(success){if(answers[droppableID].opts.autoArrangeAnswers===false){this.setEndPosition(droppedObjectModel,droppedObject);}}
if(success&&opts.disableOnGoodDrop&&answers[droppableID].opts.onlygoodanswers){droppedObject.draggable("disable");var containerLabel=containerModel.view.$el.attr('aria-label');var objectLabel=droppedObject.attr('aria-label');containerModel.view.$el.attr('aria-label-org',containerLabel);containerModel.view.$el.attr('aria-label',"Upuszczono prawidłowo, "+containerLabel+", "+objectLabel);containerModel.view.$el.focus();if(typeof droppedObject.attr('tabindex')!=="undefined"){droppedObject.attr('tabindexorg',droppedObject.attr('tabindex'));droppedObject.removeAttr('tabindex');}}
containerModel.view.trigger('onDropToObject');if(_that.isGoodAnswer(containerModel.get('actionkey'),droppedID)){droppedObjectModel.view.trigger('onDropGoodAnswer');}else{droppedObjectModel.view.trigger('onDropWrongAnswer');}
_that.refreshContainers(userSelection[droppableID],answers[droppableID],containerModel);},setDraggable:function(cView,cModel){var _that=this;var actionkey=this.model.get('actionkey');var pointerX;var pointerY;cView.$el.draggable({scope:actionkey,disabled:false,revert:function(droppedOn){_that.revertObject(droppedOn,cView.$el,cModel);},drag:function(evt,ui){evt.stopPropagation();},start:function(evt,ui){evt.stopPropagation();_that.startDragging(cView.$el,cModel);cView.$el.css({'z-index':990});cView.trigger('onStartDrag');},stop:function(evt){evt.stopPropagation();cView.$el.css({'z-index':''});cView.trigger('onStopDrag');}});cView.$el.on('mousedown',function(e){e.preventDefault();e.stopPropagation();});cView.$el.on('touchmove',function(e){e.stopPropagation();});cView.$el.on('touchstart',function(e){e.stopPropagation();});},startDragging:function(draggedObject,draggedObjectModel){var _that=this;draggedObject.attr('aria-grabbed','true');var draggedObjectID=draggedObjectModel.get('actionkey');var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var ans in answers){var indexOfObject=userSelection[ans].indexOf(draggedObjectID);var containerObject=TriggerController.instance.getComponentModelByActionkey([ans]);if(indexOfObject!==-1){userSelection[ans].splice(indexOfObject,1);_that.refreshContainers(userSelection[ans],answers[ans],containerObject.at(0));}}},revertObject:function(droppedOn,droppedObject,droppedObjectModel){var revertObject=this.model.get('opts').revertObjects;if(droppedOn===false&&revertObject===true){droppedObject.animate({left:droppedObjectModel.get('startPos').leftStartPos+"px",top:droppedObjectModel.get('startPos').topStartPos+"px"},500);}
if(droppedOn===false){droppedObjectModel.unset('endPosition');this.createSpecialScormData();}},prepareDraggableObject:function(cView,cModel){var actionkey=cModel.get('actionkey');cView.$el.attr('name',actionkey);cView.$el.css('cursor','pointer');if(typeof cView.$el.attr('tabindexorg')!=="undefined"){cView.$el.attr('tabindex',cView.$el.attr('tabindexorg'));}
var startPos=cModel.get('startPos');if(_.isObject(startPos)){cView.$el.css({left:startPos.leftStartPos,top:startPos.topStartPos,opacity:1});}
startPos={leftStartPos:parseInt(cView.$el.css('left')),topStartPos:parseInt(cView.$el.css('top'))};cModel.set('startPos',startPos);cModel.set('originalStartPos',startPos);cView.$el.removeClass('bounceOut');},refreshContainers:function(userSelection,dndObject,containerModel,animate){var _that=this;animate=_.isUndefined(animate)?true:animate;if(containerModel==undefined||userSelection==undefined){return;}
var containerScreenObject=containerModel.view.$el;var position={leftPos:parseInt(containerScreenObject.css('left')),topPos:parseInt(containerScreenObject.css('top'))}
var containerID=containerModel.get('actionkey');var previousElem;var highestElemValue=0;for(var i=0;i<userSelection.length;i++){var answerID=userSelection[i];var answerObjectModels=TriggerController.instance.getComponentModelByActionkey([answerID]);var answerObjectModel=answerObjectModels.at(0);var answerObject=answerObjectModel.view.$el;if(dndObject.opts.dropandhide===true){if(!answerObject.hasClass('bounceOut')){var actualAnimationTime=answerObject.css("animation-duration");answerObject.attr('animation-time',actualAnimationTime);answerObject.css("animation-duration","1s");answerObject.css("-webkit-animation-duration","1s");answerObject.addClass('animated');answerObject.addClass('bounceOut');answerObject.attr('tabindex-b',answerObject.attr('tabindex'));answerObject.removeAttr('tabindex');var answerObjectTimeout=setTimeout(function(){answerObject.removeClass('bounceOut');answerObject.removeClass('animated');answerObject.hide();answerObject.css("animation-duration",answerObject.attr('animation-time'));},1000);(function(answerObject){setTimeout(function(){answerObject.attr('tabindex',answerObject.attr('tabindex-b'));},1000);})(answerObject);_that.dndtimeouts.push(answerObjectTimeout);}}else{if(dndObject.opts.autoArrangeAnswers||typeof dndObject.opts.autoArrangeAnswers==='undefined'){if(typeof previousElem!=="undefined"){if(highestElemValue<previousElem.height()){highestElemValue=previousElem.height();}
if((position.leftPos+previousElem.width()+answerObject.width())>(parseInt(containerScreenObject.css('left'))+containerScreenObject.width())){position.leftPos=parseInt(containerScreenObject.css('left'));position.topPos+=highestElemValue;}else{position.leftPos+=previousElem.width();}}
if(position.topPos>=(containerScreenObject.height()+parseInt(containerScreenObject.css('top')))){position.topPos=parseInt(containerScreenObject.css('top'));}
if(animate){answerObject.animate({left:position.leftPos+"px",top:position.topPos+"px"},500);}else{answerObject.css({left:position.leftPos+"px",top:position.topPos+"px"});}}else{}}
previousElem=answerObject;};},checkAnswers:function(){var _that=this;var containersStatus={};var allUserAnswers={};var badAnswers={};var atLeastOneAnswerHasBennDrawed=false;var allAnswers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var container in allAnswers){containersStatus[container]=true;var iteratedOnlyOnce=false;if(!allAnswers[container].opts.autoArrangeAnswers&&allAnswers[container].opts.forceGoodSequence){if(!iteratedOnlyOnce){userSelection=_that.sortUserSelectionByObjectsPosition();iteratedOnlyOnce=true;}}
var userAnswers=userSelection[container];var goodAnswers=allAnswers[container].pa;allUserAnswers[container]=[];for(var ua=userAnswers.length-1;ua>=0;ua--){allUserAnswers[container].push(userAnswers[ua]);};badAnswers[container]=[];for(var a=userAnswers.length-1;a>=0;a--){if(goodAnswers.indexOf(userAnswers[a])===-1){containersStatus[container]=false;badAnswers[container].push(userAnswers[a]);}else{if(allAnswers[container].opts.forceGoodSequence){if(a!==goodAnswers.indexOf(userAnswers[a])){containersStatus[container]=false;badAnswers[container].push(userAnswers[a]);}}}
atLeastOneAnswerHasBennDrawed=true;};if(userAnswers.length!==goodAnswers.length){containersStatus[container]=false;}
if(parseInt(allAnswers[container].opts.enoughAnswers)!==0){if((allUserAnswers[container].length-badAnswers[container].length)>=allAnswers[container].opts.enoughAnswers){containersStatus[container]=true;}}}
var answersStatus={questionIsPassed:true};for(var stat in containersStatus){if(!containersStatus[stat]){answersStatus.questionIsPassed=false;}}
if(answersStatus.questionIsPassed){}else{for(var container in allAnswers){if(allAnswers[container].opts.revertType!="revertNone"){if(allAnswers[container].opts.revertType==="revertOnlyBad"){for(var ba=badAnswers[container].length-1;ba>=0;ba--){var badAnswerID=badAnswers[container][ba];var indexOfBadAnswer=userSelection[container].indexOf(badAnswerID);userSelection[container].splice(indexOfBadAnswer,1);var cModel=TriggerController.instance.getComponentModelByActionkey([badAnswerID]).at(0);var screenObject=cModel.view.$el;for(var i=_that.dndtimeouts.length-1;i>=0;i--){clearTimeout(_that.dndtimeouts[i]);};screenObject.removeClass('bounceOut');screenObject.removeClass('animated');if(typeof screenObject.attr('tabindex-b')!=="undefined"){screenObject.attr('tabindex',screenObject.attr('tabindex-b'));}
screenObject.show();screenObject.animate({left:cModel.get('startPos').leftStartPos+"px",top:cModel.get('startPos').topStartPos+"px"},500);};}
if(allAnswers[container].opts.revertType==="revertAll"){for(var aua=allUserAnswers[container].length-1;aua>=0;aua--){var cModel=TriggerController.instance.getComponentModelByActionkey([allUserAnswers[container][aua]]).at(0);var screenObject=cModel.view.$el;for(var i=_that.dndtimeouts.length-1;i>=0;i--){clearTimeout(_that.dndtimeouts[i]);};screenObject.removeClass('bounceOut');screenObject.removeClass('animated');if(typeof screenObject.attr('tabindex-b')!=="undefined"){screenObject.attr('tabindex',screenObject.attr('tabindex-b'));}
screenObject.show();screenObject.animate({left:cModel.get('startPos').leftStartPos+"px",top:cModel.get('startPos').topStartPos+"px"},500);screenObject.draggable("enable");};userSelection[container]=[];_that.distributeAllAnswersInContainerOnStart();}}}}
return answersStatus.questionIsPassed;},renderAsFailed:function(){var _that=this;this.$el.css({opacity:'.7'});var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);draggableObjectsModels.each(function(cModel){cModel.view.$el.draggable({disabled:true});});if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-failed');}},renderAsCompleted:function(){var _that=this;this.$el.css({opacity:'.7'});var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);draggableObjectsModels.each(function(cModel){cModel.view.$el.draggable({disabled:true});});if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-passed');}},renderAsReadyToUse:function(){this.$el.css({opacity:'1'});var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);draggableObjectsModels.each(function(cModel){cModel.view.$el.draggable().css({opacity:'1'});});this.$el.removeClass('mark-questions-passed');this.$el.removeClass('mark-questions-failed');},revertAllAnswers:function(){var _that=this;var allUserAnswers={};var badAnswers={};var allAnswers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var container in allAnswers){var userAnswers=userSelection[container];var goodAnswers=allAnswers[container].pa;allUserAnswers[container]=[];for(var ua=userAnswers.length-1;ua>=0;ua--){allUserAnswers[container].push(userAnswers[ua]);};for(var aua=allUserAnswers[container].length-1;aua>=0;aua--){var cModel=TriggerController.instance.getComponentModelByActionkey([allUserAnswers[container][aua]]).at(0);var screenObject=cModel.view.$el;for(var i=_that.dndtimeouts.length-1;i>=0;i--){clearTimeout(_that.dndtimeouts[i]);};screenObject.removeClass('bounceOut');screenObject.removeClass('animated');if(typeof screenObject.attr('tabindex-b')!=="undefined"){screenObject.attr('tabindex',screenObject.attr('tabindex-b'));}
screenObject.show();screenObject.animate({left:cModel.get('startPos').leftStartPos+"px",top:cModel.get('startPos').topStartPos+"px"},500);screenObject.draggable("enable");};userSelection[container]=[];}
this.model.set('userSelection',userSelection);},resetExerciseApproach:function(){this.resetPoints();this.resetAttempts();this.resetCompl();this.resetExerciseApproachSpecial();this.initUserSelectionObject();this.renderAsReadyToUse();_log('resetExerciseApproach',this.model);},resetExerciseApproachSpecial:function(){this.revertAllAnswers();this.afterAllInitialized({prepareDraggable:false});},createSpecialScormData:function(){var objects={};var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);draggableObjectsModels.each(function(cModel){var splittedObjectID=cModel.get('actionkey').split("-");var endPosition=cModel.get('endPosition');if(endPosition){var x=endPosition.left;var y=endPosition.top;objects[splittedObjectID[1]]={x:x,y:y}}});if(Utils.ObjectLength(objects)){this.model.set('scormSpecialData',{o:objects});}
return this.model.get('scormSpecialData');},setSpecialScormData:function(){var scormSpecialData=this.model.get('scormSpecialData');_log('scormSpecialData',scormSpecialData);if(!scormSpecialData){return}
var objects=scormSpecialData.o;var draggableObjects=this.model.get('draggableObjs');var draggableObjectsModels=TriggerController.instance.getComponentModelByActionkey(draggableObjects);_log('setSpecialScormData draggableObjectsModels',draggableObjectsModels);draggableObjectsModels.each(function(cModel){var splittedObjectID=cModel.get('actionkey').split("-");var cIndex=splittedObjectID[1];var oneObject=objects[cIndex];_log('oneObject',oneObject);if(oneObject){var left=oneObject.x;var top=oneObject.y;cModel.set('endPosition',{left:left,top:top});}});},});;;var QuizConnectLinesComponentView=ExerciseComponentView.extend({className:'component quizconnectlines-component',template:_.template($('#quizconnectlines-component-template').html()),connections:[],tmpUserSelection:[],events:function(){return _.extend({},ComponentView.prototype.events,{'click':'validateQuestion',});},afterInitialize:function(){this._isDisabled=false;},afterAllInitialized:function(){var userSelection=this.model.get('userSelection');this.tmpUserSelection=[];this.copyObject(userSelection,this.tmpUserSelection);userSelection=[];this.model.set('userSelection',userSelection);this.drawDots();},hideAllDotsAndLines:function(){_log('hiding',$('._jsPlumb_endpoint[actionkey="'+this.qclInstance._obActionkey+'"], ._jsPlumb_connector[actionkey_id="'+this.qclInstance._obActionkey+'"]'));if(this.qclInstance){$('._jsPlumb_endpoint[actionkey="'+this.qclInstance._obActionkey+'"], ._jsPlumb_connector[actionkey_id="'+this.qclInstance._obActionkey+'"]').hide();}},showAllDotsAndLines:function(){if(this.qclInstance){$('._jsPlumb_endpoint[actionkey="'+this.qclInstance._obActionkey+'"], ._jsPlumb_connector[actionkey_id="'+this.qclInstance._obActionkey+'"]').show();}},afterHide:function(){this.hideAllDotsAndLines();},onShow:function(){var _that=this;this.showAllDotsAndLines();},copyObject:function(source,target){var _that=this;_.each(source,function(val,key){if(_.isArray(val)){target[key]=Array();_that.copyObject(source[key],target[key]);}else if(_.isObject(val)){target[key]={};_that.copyObject(source[key],target[key]);}else{target[key]=val;}});},updateConnections:function(conn,remove){var _that=this;var userSelection=this.model.get('userSelection');if(!remove){this.connections.push(conn.connection);}
else{var idx=-1;for(var i=0;i<this.connections.length;i++){if(this.connections[i]==conn.connection){idx=i;break;}}
if(idx!=-1){this.connections.splice(idx,1);}}
var isNew=true;if(remove==false){for(var i in userSelection){if($(conn.connection.source).attr('actionkey')===userSelection[i][0]&&$(conn.connection.target).attr('actionkey')===userSelection[i][1]||$(conn.connection.source).attr('actionkey')===userSelection[i][1]&&$(conn.connection.target).attr('actionkey')===userSelection[i][0]){setTimeout(function(){jsPlumb.detach(conn);},50);isNew=false;}}}
if(isNew){userSelection=[];for(var i=0;i<this.connections.length;i++){var connection=this.connections[i];userSelection.push([$(connection.source).attr('actionkey'),$(connection.target).attr('actionkey')]);};}
_log('conn',conn);$(conn.connection.canvas).attr('actionkey_id',_that.qclInstance._obActionkey);this.model.set('userSelection',userSelection);},isGoodAnswer:function(connection){var _that=this;var allGoodAnswers=[];var answers=this.model.get('answers');var connectionActionkeys=[$(connection.source).attr('actionkey'),$(connection.target).attr('actionkey')];for(var i=0;i<answers.length;i++){var answer=answers[i];var from=answer.from;for(var j=0;j<answer.to.length;j++){var to=answer.to[j];var goodAnswer=[from,to];goodAnswer.sort();allGoodAnswers.push(goodAnswer);};};for(var ga=0;ga<allGoodAnswers.length;ga++){var goodAnswer=allGoodAnswers[ga];if(Utils.arrayAreEqual(goodAnswer,connectionActionkeys.sort())){return true;}}
return false},drawDots:function(){var _that=this;var allObjs=this.model.get('objs');var actionkey=this.model.get('actionkey');var opts=this.model.get('opts');var userSelection=this.model.get('userSelection');var compl=!_.isUndefined(this.model.get('compl'))?this.model.get('compl'):0;this.connections=[];this.qclInstance=jsPlumb.getInstance({Scope:actionkey,Container:$('#qcl-'+actionkey),logEnabled:true});_log('this.qclInstance',this.qclInstance);this.qclInstance.bind("connectionDetached",function(info,originalEvent){_that.updateConnections(info,true);});this.qclInstance.bind("connectionMoved",function(info,originalEvent){_that.updateConnections(info,true);});this.qclInstance._obActionkey=actionkey;this.qclInstance.bind("click",function(component,originalEvent){if(!_that._isDisabled){jsPlumb.detach(component);}});this.allEndpoints={};for(var a in allObjs){var ans=allObjs[a];var qclOb=TriggerController.instance.getComponentModelByActionkey([a]).at(0);var qclScreenOb=qclOb.view.$el;var options=allObjs[a];var align=options.align;var color1=options.color;var size1=options.size;var lineWidth1=options.lineWidth;var maxConnections1=options.maxConnections;maxConnections1=maxConnections1==0?maxConnections1=-1:maxConnections1;var objectIsSource=opts.onlySourceTarget?options.isSource:true;var objectIsTarget=opts.onlySourceTarget?options.isTarget:true;if(!objectIsSource&&!objectIsTarget){objectIsTarget=true;}
if(compl!=0){objectIsSource=false;objectIsTarget=false;}
var endpointOptions={endpoint:["Dot",{radius:size1}],paintStyle:{fillStyle:color1},connectorStyle:{strokeStyle:color1,lineWidth:lineWidth1},connector:"Straight",dropOptions:{tolerance:"touch"},maxConnections:maxConnections1,isSource:objectIsSource,isTarget:objectIsTarget,beforeDrop:function(params){return true;},}
var elFix=false;if(qclScreenOb.css('display')=="none"){_log('Jest None!',qclScreenOb);elFix=true;qclScreenOb.css({visibility:'hidden',display:'block'});}
var actionKey=qclOb.get('actionkey');_that.allEndpoints[actionKey]=_that.qclInstance.addEndpoint(qclScreenOb,{anchor:align},endpointOptions);if(elFix===true){(function(element){element.css({visibility:'visible',display:'none'});})(qclScreenOb);}
$(_that.allEndpoints[actionKey].canvas).attr('actionkey',_that.qclInstance._obActionkey);if(qclOb.get('hidden')){$('._jsPlumb_endpoint[actionkey="'+_that.qclInstance._obActionkey+'"]').hide();}
_log('_that.allEndpoints[actionKey]',_that.allEndpoints[actionKey]);}
this.qclInstance.bind("connection",function(info,originalEvent){_that.updateConnections(info,false);if(!opts.allowBadAnswers){if(!_that.isGoodAnswer(info.connection)){setTimeout(function(){_that.qclInstance.detach(info.connection);},10);}}});_.each(this.tmpUserSelection,function(connection){if(Object.keys(connection).length===2){_that.qclInstance.connect({source:_that.allEndpoints[connection[0]],target:_that.allEndpoints[connection[1]]});}});},getConnectionByActionkeys:function(actionkeys){var allConnections=this.qclInstance.getAllConnections();for(var i=allConnections.length-1;i>=0;i--){var connection=allConnections[i];var connectionActionkeys=[$(connection.source).attr('actionkey'),$(connection.target).attr('actionkey')];if(Utils.arrayAreEqual(actionkeys.sort(),connectionActionkeys.sort())){return connection;}};return false;},checkAnswers:function(){var _that=this;var userSelection=this.model.get('userSelection');var answers=this.model.get('answers');var opts=this.model.get('opts');var isCorrect=true;var allGoodAnswers=[];for(var i=0;i<answers.length;i++){var answer=answers[i];var from=answer.from;for(var j=0;j<answer.to.length;j++){var to=answer.to[j];var goodAnswer=[from,to];goodAnswer.sort();allGoodAnswers.push(goodAnswer);};};var userAnswersStatus=[];var allBadAnswers=[];if(_.isObject(userSelection)){for(var us=0;us<userSelection.length;us++){var userAnswer=userSelection[us].sort();var answerStatus=false;for(var ga=0;ga<allGoodAnswers.length;ga++){var goodAnswer=allGoodAnswers[ga];if(Utils.arrayAreEqual(goodAnswer,userAnswer)){answerStatus=true;}}
if(!answerStatus){allBadAnswers.push(userAnswer);}
userAnswersStatus.push(answerStatus);};}
if(allGoodAnswers.length!==userSelection.length){userAnswersStatus=[false];}
var answers_status={questionIsPassed:false}
if(userAnswersStatus.indexOf(false)===-1&&userAnswersStatus.length>0){answers_status.questionIsPassed=true;}else{answers_status.questionIsPassed=false;switch(opts.afterBadAnswer){case'donothing':break;case'removebad':for(var i=allBadAnswers.length-1;i>=0;i--){var singleBadAnswer=allBadAnswers[i].sort();var connection=this.getConnectionByActionkeys(singleBadAnswer);if(connection){_that.qclInstance.detach(connection);}};break;case'removeall':_that.qclInstance.detachEveryConnection();break;}}
return answers_status.questionIsPassed;},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');var answers=this.model.get('answers');_log('userSelection QCL',userSelection);if(_.isUndefined(userSelection)){userSelection=[];this.model.set('userSelection',userSelection);}},renderAsFailed:function(){var _that=this;this.$el.css({opacity:'.7'});this._isDisabled=true;this.disableAllDots()},renderAsCompleted:function(){this.$el.css({opacity:'.7'});this._isDisabled=true;this.disableAllDots()},renderAsReadyToUse:function(){this.$el.css({opacity:'1'});},resetExerciseApproachSpecial:function(){this.qclInstance.detachEveryConnection();this.drawDots();},disableAllDots:function(){for(var endP in this.allEndpoints){var endpoint=this.allEndpoints[endP];endpoint.isTarget=false;endpoint.isSource=false;}},beforeDestroy:function(){$('._jsPlumb_endpoint, ._jsPlumb_connector').remove();},afterRender:function(){var _that=this;var actionkey=this.model.get('actionkey');var stageOffset=StageView.instance.$el.offset();var container=$('<div/>',{id:'qcl-'+actionkey,class:'qcl-container',style:'top:-'+stageOffset.top+'px;left:-'+stageOffset.left+'px;'});StageView.instance.$el.append(container);setTimeout(function(){var stageOffset=StageView.instance.$el.offset();$('.qcl-container').css({top:'-'+stageOffset.top+'px',left:'-'+stageOffset.left+'px'});},200);},});;;var ScrollerComponentView=ComponentView.extend({className:'component scroller-component',template:_.template($('#scroller-component-template').html()),showComponent:function(){this.$el.hide();if(this.model.get('hidden')){return false;}
var scrollTopValue=this.model.get('y');var scrollTime=this.model.get('scrollTime');this.$el.trigger('scroll-top',{scrollTopValue:scrollTopValue,scrollTime:scrollTime});},alternativeShow:function(){this.$el.hide();var scrollTopValue=this.model.get('y');var scrollTime=this.model.get('scrollTime');this.$el.trigger('scroll-top',{scrollTopValue:scrollTopValue,scrollTime:scrollTime});return true;}});;;var CrosswordComponentView=ExerciseComponentView.extend({className:'component crossword-component',template:_.template($('#crossword-component-template').html()),wordDirection:'left',crosswordTimerID:null,crosswordSecondToEnd:0,events:function(){return _.extend({},ComponentView.prototype.events,{'click .crossword-cell[celltype="question"]':'findWordDirectionQuestion','click .crossword-cell[celltype="answer"]':'findWordDirectionAnswer','keyup .crossword-cell':'insertLetter'});},findWordDirectionQuestion:function(e){var target=$(e.target);var targetCell=target.attr('cellid');var cellTarget=this.clickOnQuestion(targetCell,target.parent().attr('gender'));this.selectAnswerCell(cellTarget);this.playQuestionAudio(targetCell);_log('targetQuestion',target);},findWordDirectionAnswer:function(e){var target=$(e.target);var targetCell=target.attr('cellid');this.clickOnAnswer(targetCell,target.parent().attr('gender'));_log('targetAnswer',target);_log('targetCell',targetCell);this.selectAnswerCell(target);},selectAnswerCell:function(target){target.focus().select();target[0].setSelectionRange(0,9999);this.$el.find('.crossword-cell[celltype="answer"]').removeClass('crossword-cell-background-color-mobile');target.addClass('crossword-cell-background-color-mobile');},playQuestionAudio:function(questionCell){var objs=this.model.get('objs');if(objs[questionCell].opts.questionType==='audio'){var soundFile=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/sounds/'+actionkey+'/'+objs[questionCell].opts.soundFile;this.$el.trigger('play-component-audio',soundFile);}},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){this.model.set('userSelection',{});}},startTimer:function(){var _that=this;var timeLimitOption=this.model.get('timeLimitOption');var compl=this.model.get('compl')||0;this.crosswordSecondToEndStarted=this.model.get('qcrosswordTimeout');this.crosswordSecondToEnd=this.model.get('qcrosswordTimeout');if(timeLimitOption&&this.crosswordSecondToEnd!==0){clearInterval(this.crosswordTimerID);this.crosswordTimerID=setInterval(function(){if(_that.crosswordSecondToEnd>0){_that.crosswordSecondToEnd--;}else{_that.checkIsCompleteTimeOut();_that.stopTimer();_that.validateQuestion();}},1000);}},stopTimer:function(){clearInterval(this.crosswordTimerID);this.model.set('qcrosswordTimeout',this.crosswordSecondToEnd);},resetTimer:function(){clearInterval(this.crosswordTimerID);this.model.set('qcrosswordTimeout',this.crosswordSecondToEndStarted);},colorizeGoodAnswer:function(){var _that=this;var objs=this.model.get('objs');var userSelection=this.model.get('userSelection');var divisionCrossword=this.model.get('divisionCrossword');var colorizeGoodAnswer=this.model.get('colorizeGoodAnswer');var colorizeGoodWord=this.model.get('colorizeGoodWord');var colorizeCrosswordAfterWriteLastWord=this.model.get('colorizeCrosswordAfterWriteLastWord');var compl=this.model.get('compl')||0;var cellDOM;var allLetter=true;_.each(objs,function(cellVal,cellKey){if(cellVal.type==='answer'&&cellVal.text!==''){if(typeof userSelection[cellKey]!=='undefined'&&userSelection[cellKey]!==''){}else{allLetter=false;}}});_.each(userSelection,function(val,key){cellDOM=_that.$el.find('.crossword-cell[cellid="'+key+'"]');cellDOM.removeClass('crossword-answer-select').removeClass('qcrossword-word-is-good');if(val.toUpperCase()===objs[key].text.toUpperCase()){if(colorizeGoodAnswer){cellDOM.addClass('crossword-answer-select');}}});_.each(divisionCrossword.answersStatus,function(goodWord,wordID){_.each(divisionCrossword.answers[wordID],function(letterID){if((goodWord&&colorizeGoodWord)||(goodWord&&colorizeCrosswordAfterWriteLastWord&&allLetter)){_that.$el.find('.crossword-cell[cellid="'+letterID+'"]').removeClass('crossword-cell-background-color-mobile').removeClass('crossword-answer-select').addClass('qcrossword-word-is-good');}});});if(compl!==0){this.blockExercise();}},insertLetter:function(e){switch(e.which){case 9:case 17:case 18:case 16:case 20:return;break;}
var target=$(e.currentTarget);var cellID=target.attr('cellid');var userSelection=this.model.get('userSelection');var newCellID=this.checkNextCell(cellID);userSelection[cellID]=target.val();this.model.set('userSelection',userSelection);this.checkGoodWords();this.colorizeGoodAnswer();this.validateQuestion();if(e.keyCode!==8&&e.keyCode!==46){if(newCellID!==false){var crosswordCell=this.$el.find('.crossword-cell[cellid="'+newCellID+'"]');this.selectAnswerCell(crosswordCell);}}},checkGoodWords:function(){var _that=this;var objs=this.model.get('objs');var userSelection=this.model.get('userSelection');var divisionCrossword=this.model.get('divisionCrossword');var allWordsIsGood=true;var countGoodWords=0;_.each(divisionCrossword.answers,function(wordVal,wordKey){var goodWord=true;_.each(wordVal,function(letterID){if(typeof userSelection[letterID]!=='undefined'&&userSelection[letterID].toUpperCase()===objs[letterID].text.toUpperCase()){}else{goodWord=false;allWordsIsGood=false;}});if(goodWord){countGoodWords++;}
divisionCrossword.answersStatus[wordKey]=goodWord;});if(allWordsIsGood){this.stopTimer();}
this.model.set('divisionCrossword',divisionCrossword);return countGoodWords;},checkIsCompleteTimeOut:function(){var requireAnswersToAllQuestions=this.model.get('requireAnswersToAllQuestions');var minAnswersNumber=this.model.get('minAnswersNumber');var compl=this.model.get('compl')||0;var goodWords=this.checkGoodWords();this.colorizeGoodAnswer();var success=false;if(requireAnswersToAllQuestions){if(goodWords==this.getAllAnswersCount()){success=true;}}else{if(minAnswersNumber<=goodWords){success=true;}}
if(success){this.blockExercise();}
return success},blockExercise:function(){this.$el.find('.crossword-component-overlay').show();},checkNextCell:function(cellID){var cols=this.model.get('cols').length;var rows=this.model.get('rows').length;var objs=this.model.get('objs');var _cellID=cellID.split('-');var position={x:_cellID[1],y:_cellID[0]};switch(this.wordDirection){case'left':position.x++;break;case'down':position.y++;break;}
if(position.x>=0&&position.y>=0&&position.x<cols&&position.y<rows){var key=position.y+'-'+position.x;_log('newCellID',key);if(objs[key].type==='answer'){var newCellID=position.y+'-'+position.x;return newCellID;}}
return false;},clickOnQuestion:function(questionCell,gender){var _questionCell=questionCell.split('-');var questionCellY=parseInt(_questionCell[0]);var questionCellX=parseInt(_questionCell[1]);var startWordCell;var objs=this.model.get('objs');var actionkey=this.model.get('actionkey');switch(parseInt(gender)){case 1:startWordCell=(questionCellY+1)+'-'+questionCellX;this.wordDirection='down';break;case 2:startWordCell=questionCellY+'-'+(questionCellX+1);this.wordDirection='down';break;case 3:startWordCell=questionCellY+'-'+(questionCellX-1);this.wordDirection='down';break;case 4:startWordCell=questionCellY+'-'+(questionCellX+1);this.wordDirection='left';break;case 5:startWordCell=(questionCellY+1)+'-'+questionCellX;this.wordDirection='left';break;case 6:startWordCell=(questionCellY-1)+'-'+questionCellX;this.wordDirection='left';break;default:break;}
var crosswordCell=this.$el.find('.crossword-cell[cellid="'+startWordCell+'"]');return crosswordCell;},clickOnAnswer:function(answerCell,gender){var _answerCell=answerCell.split('-');var answerCellY=parseInt(_answerCell[0]);var answerCellX=parseInt(_answerCell[1]);var startWordCell;var objs=this.model.get('objs');var actionkey=this.model.get('actionkey');var allQuestionCells=this.$el.find('.crossword-cell[celltype="question"]');var crossedQuestionCells=[];for(var i=0;i<allQuestionCells.length;i++){var questionCell=$(allQuestionCells[i]);if(questionCell.attr('cellx')==answerCellX||questionCell.attr('celly')==answerCellY){crossedQuestionCells.push(questionCell);}};_log('allQuestionCells',allQuestionCells);var finddedCell;var lastD=0;for(var i=0;i<crossedQuestionCells.length;i++){var crossedQuestionCell=crossedQuestionCells[i];var dX=parseInt(crossedQuestionCell.attr('cellx'))+answerCellX;var dY=parseInt(crossedQuestionCell.attr('celly'))+answerCellY;var dX1=answerCellX-parseInt(crossedQuestionCell.attr('cellx'));var dY1=answerCellY-parseInt(crossedQuestionCell.attr('celly'));_log('cellx',parseInt(crossedQuestionCell.attr('cellx')));_log('answerCellX',answerCellX);_log('answerCellY',answerCellY);_log('dX',dX);_log('dY',dY);_log('dX1',dX1);_log('dY1',dY1);if(dX1>=0&&dY1>=0){var newD=dX+dY;if(newD>lastD){finddedCell=crossedQuestionCell;}
lastD=newD;}};if(finddedCell.length){this.clickOnQuestion(finddedCell.attr('cellid'),finddedCell.parent().attr('gender'));}
_log('finddedCell',finddedCell);},prepareAnswers:function(){var _that=this;var objs=this.model.get('objs');var divisionCrossword={answers:{},questions:{},answersStatus:{}};var direction;_.each(objs,function(val,key){if(val.type==='question'){var _questionCell=key.split('-');var questionCellX=parseInt(_questionCell[1]);var questionCellY=parseInt(_questionCell[0]);var startWordCell;var OK=true;switch(parseInt(val.gender)){case 1:startWordCell=(questionCellY+1)+'-'+questionCellX;direction='down';break;case 2:startWordCell=questionCellY+'-'+(questionCellX+1);direction='down';break;case 3:startWordCell=questionCellY+'-'+(questionCellX-1);direction='down';break;case 4:startWordCell=questionCellY+'-'+(questionCellX+1);direction='left';break;case 5:startWordCell=(questionCellY+1)+'-'+questionCellX;direction='left';break;case 6:startWordCell=(questionCellY-1)+'-'+questionCellX;direction='left';break;default:OK=false;break;}
if(OK){divisionCrossword.answers[key]=_that.prepareFindWord(startWordCell,direction);divisionCrossword.answersStatus[key]=false;}}});this.model.set('divisionCrossword',divisionCrossword);},prepareFindWord:function(startWordCell,direction){var objs=this.model.get('objs');var word=[];var _startWordCell=startWordCell.split('-');var startWordCellX=_startWordCell[1];var startWordCellY=_startWordCell[0];var letter;for(var i=0;i<100;i++){if(direction==='left'&&i!==0){startWordCellX++;}else if(direction==='down'&&i!==0){startWordCellY++}
letterID=startWordCellY+'-'+startWordCellX;if(typeof objs[letterID]!=='undefined'&&objs[letterID].type==='answer'&&objs[letterID].text!==''){word.push(letterID);}else{break;}}
return word;},replaceLetters:function(){var _that=this;var userSelection=this.model.get('userSelection');var objs=this.model.get('objs');var actionkey=this.model.get('actionkey');_.each(userSelection,function(letterVal,letterID){_that.$el.find('.crossword-cell[cellid="'+letterID+'"]').val(letterVal);});_.each(objs,function(val,key){if(val.type==='question'){var crosswordCell=_that.$el.find('.crossword-cell[cellid="'+key+'"]');crosswordCell.val(val.text);if(val.opts.questionType==='image'){var imageUrl=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/images/'+actionkey+'/'+val.opts.imageFile;_that.$el.find('.crossword-cell[cellid="'+key+'"]').css('background',"url('"+imageUrl+"') no-repeat").css('background-size','contain');}
if(val.opts.questionType==='audio'){_that.$el.find('.crossword-cell[cellid="'+key+'"]').addClass('crossword-cell-audio');}}});},afterRender:function(){var _that=this;var divisionCrossword=this.model.get('divisionCrossword');if(typeof divisionCrossword==='undefined'){this.prepareAnswers();}
setTimeout(function(){_that.replaceLetters();});this.colorizeGoodAnswer();this.startTimer();},onShow:function(){this.onCrosswordResize();},onCrosswordResize:function(){var objectWrapperWidth=this.$el.width();var objectWrapperHeight=this.$el.height();var qcrosswordWrapper=this.$el.find('.crossword-component-inner');var crosswordHeight=qcrosswordWrapper.height();var crosswordWidth=qcrosswordWrapper.width();var newCrosswordWidth=objectWrapperWidth;var newCrosswordHeight=((crosswordHeight*newCrosswordWidth)/ crosswordWidth);if(newCrosswordHeight<10){newCrosswordHeight=10;}
if(newCrosswordHeight>objectWrapperHeight){newCrosswordHeight=objectWrapperHeight;newCrosswordWidth=(crosswordWidth*newCrosswordHeight)/ crosswordHeight;}
var row_count=this.model.get('rows').length;var cell_size=(newCrosswordHeight / row_count);this.$el.find('.crossword-row').css('height',cell_size+'px');this.$el.find('.crossword-cell-background').css({height:cell_size+"px",width:cell_size+"px",'line-height':cell_size+"px"});this.$el.find('.crossword-cell[celltype="answer"]').css({'line-height':cell_size*0.95+"px",'font-size':cell_size/1.5+"px"});this.$el.find('.crossword-cell[celltype="question"]').css({'line-height':cell_size/3.5+"px",'font-size':cell_size/3.5+"px"});this.$el.find('.crossword-cell-password').css({height:cell_size*0.3+"px",width:cell_size*0.3+"px",'line-height':cell_size*0.3+"px"});},onRemove:function(){this.stopTimer();},checkAnswers:function(){return this.checkIsCompleteTimeOut();},resetExerciseApproachSpecial:function(){this.resetTimer();},renderAsReadyToUse:function(){this.render();this.onCrosswordResize();},getAllAnswersCount:function(){var divisionCrossword=this.model.get('divisionCrossword');var count=Utils.ObjectLength(divisionCrossword.answers);return count;},});;;var QuizSelectOneComponentView=ExerciseComponentView.extend({className:'component quiz-component',template:_.template($('#quizselectone-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click .selectone-block-answer':'selectAnswer','keyup .selectone-block-answer':'onKeyUp'});},specialRenderDimentions:function(){var _that=this;var ratio=this.getSmallerRatio();var calculatedFontSize=20*ratio;_log(_that.model,_that.model.get('answers'));this.$el.find('.block-answer').each(function(){var answerId=$(this).find('.selectone-block-answer').attr('it');$(this).css({top:_that.model.get('answers')[answerId].top*ratio+"px",left:_that.model.get('answers')[answerId].left*ratio+"px",'min-width':250*ratio+"px",'max-width':350*ratio+"px",});$(this).find('.selectone-block-answer').css({'font-size':calculatedFontSize,padding:10*ratio+"px",});});},onKeyUp:function(e){var el=$(e.currentTarget);switch(e.keyCode){case 32:this.selectAnswer({currentTarget:el});break;}},afterRender:function(){this.renderUserSelection();},applyWcag:function(){var _that=this;var wcag=this.model.get('wcag');if(wcag){var answers=$(this.$el.find('.selectone-block-answer').get().reverse());answers.each(function(){var label=$(this);label.attr('tabindex',--StageView.instance.wcagTabIndex);});var wcagText=this.model.get('wcagMessage');this.$el.attr('aria-label',wcagText);this.$el.attr('tabindex',--StageView.instance.wcagTabIndex);}},selectAnswer:function(e){var _that=this;_log('this',this);_log('this.model',this.model);if(this.model.get('compl')!=0)return;var input=$(e.currentTarget);var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');_.each(userSelection,function(answer){answer.choosen=false;});this.$el.find('.selectone-block-answer').each(function(){_that.renderBlockAsNotSelected($(this));});userSelection[input.attr('it')].choosen=true;this.model.set('userSelection',userSelection);this.validateQuestion();if(answers[input.attr('it')].goodAnswer){this.renderBlockAsGoodAnswer(input);}else{this.renderBlockAsBadAnswer(input);}},renderBlockAsNotSelected:function(ob){ob.css({color:'#000','background-color':'#fff'});},renderBlockAsGoodAnswer:function(ob){ob.css({color:'#fff','background-color':'#42B342'});},renderBlockAsBadAnswer:function(ob){ob.css({color:'#fff','background-color':'#BB3737'});},checkAnswers:function(){var success=true;var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');for(var answer in answers){if(userSelection[answer].choosen!==answers[answer].goodAnswer){success=false;}}
return success;},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');var answers=this.model.get('answers');if(_.isUndefined(userSelection)){userSelection={};for(var answer in answers){userSelection[answer]={choosen:false};}
this.model.set('userSelection',userSelection);}},renderAsFailed:function(){this.$el.find('.selectone-block-answer').off('click');this.$el.css({opacity:'.8'});if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-failed');}
this.renderUserSelection();},renderAsCompleted:function(){this.$el.find('.selectone-block-answer').off('click');this.$el.css({opacity:'.8'});if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-passed');}
this.renderUserSelection();},renderAsReadyToUse:function(){var _that=this;this.$el.css({opacity:'1'});this.$el.removeClass('mark-questions-as-passed');this.$el.removeClass('mark-questions-as-failed');this.renderUserSelection();},renderUserSelection:function(){var _that=this;var answers=this.model.get('answers');var userSelection=this.model.get('userSelection');_.each(answers,function(answer,it){var answerOnScreen=_that.$el.find('.selectone-block-answer[it="'+it+'"]');if(userSelection[it].choosen){if(answer.goodAnswer){_that.renderBlockAsGoodAnswer(answerOnScreen);}else{_that.renderBlockAsBadAnswer(answerOnScreen);}}});},});;;var QuizWordsearchComponentView=ExerciseComponentView.extend({className:'component quizwordsearch-component',template:_.template($('#quizwordsearch-component-template').html()),mouseDownTarget:false,wordsearchTimerID:null,wordsearchSecondToEnd:0,events:function(){if(Utils.isMobile()){return _.extend({},ComponentView.prototype.events,{'touchmove':'mouseMoveMobile','touchstart .wordsearch-cell':'mouseDown','touchend .wordsearch-cell':'mouseUpMobile'});}else{return _.extend({},ComponentView.prototype.events,{'mousemove .wordsearch-cell':'mouseMove','mousedown .wordsearch-cell':'mouseDown','mouseup .wordsearch-cell':'mouseUp'});}},mouseMoveMobile:function(e){e.stopPropagation();e.preventDefault();if(this.mouseDownTarget!==false){var myLocation=e.originalEvent.changedTouches[0];var realTarget=document.elementFromPoint(myLocation.clientX,myLocation.clientY);var target=$(realTarget);var cellID=target.attr('cellid');this.onControllerMove(this.mouseDownTarget,cellID);}},startTimer:function(){var _that=this;var timeLimitOption=this.model.get('timeLimitOption');var compl=this.model.get('compl')||0;this.wordsearchSecondToEndStarted=parseInt(this.model.get('wordSearchTimeOut'));this.wordsearchSecondToEnd=parseInt(this.model.get('wordSearchTimeOut'));if(timeLimitOption&&this.wordsearchSecondToEnd!==0&&compl===0){clearInterval(this.wordsearchTimerID);this.wordsearchTimerID=setInterval(function(){if(_that.wordsearchSecondToEnd>0){_that.wordsearchSecondToEnd--;}else{_that.stopTimer();_that.checkSelf();}},1000);}},stopTimer:function(){clearInterval(this.wordsearchTimerID);this.model.set('wordSearchTimeOut',this.wordsearchSecondToEnd);},resetTimer:function(){clearInterval(this.wordsearchTimerID);this.model.set('wordSearchTimeOut',this.wordsearchSecondToEndStarted);},mouseMove:function(e){if(this.mouseDownTarget!==false){var target=$(e.currentTarget);var cellID=target.attr('cellid');this.onControllerMove(this.mouseDownTarget,cellID);}},mouseDown:function(e){var compl=this.model.get('compl')||0;if(compl===0){var target=$(e.currentTarget);var cellID=target.attr('cellid');this.mouseDownTarget=cellID;}},mouseUpMobile:function(e){var compl=this.model.get('compl')||0;if(compl===0||this.mouseDownTarget){var myLocation=e.originalEvent.changedTouches[0];var realTarget=document.elementFromPoint(myLocation.clientX,myLocation.clientY);var target=$(realTarget);var cellID=target.attr('cellid');var selectedWord=this.onControllerMove(this.mouseDownTarget,cellID);this.$el.find('.wordsearch-cell').removeClass('qwordsearch-select');this.checkWord(selectedWord);this.mouseDownTarget=false;this.checkSelf();}},mouseUp:function(e){var compl=this.model.get('compl')||0;if(compl===0||this.mouseDownTarget){var target=$(e.currentTarget);var cellID=target.attr('cellid');var selectedWord=this.onControllerMove(this.mouseDownTarget,cellID);this.$el.find('.wordsearch-cell').removeClass('qwordsearch-select');this.checkWord(selectedWord);this.mouseDownTarget=false;this.checkSelf();}},checkWord:function(word){var _that=this;var answers=this.model.get('answers');_.each(answers,function(answer,index){if(_.difference(answer.objs,word).length===0&&_.difference(word,answer.objs).length===0){if(!answers[index].opts.isCorrect){answers[index].opts.isCorrect=true;_that.trigger('onWordSelectedCorrect',{model:_that.model,word:word,answer:answers[index]});}}});this.model.set('answers',answers);_that.colorizeGoodAnswers();},checkIsCompleteTimeOut:function(){},colorizeGoodAnswers:function(){var _that=this;var answers=this.model.get('answers');_.each(answers,function(answer,index){if(typeof answer.opts.isCorrect!=='undefined'&&answer.opts.isCorrect===true){_.each(answer.objs,function(letter){_that.$el.find('.wordsearch-cell[cellid="'+letter+'"]').addClass('qwordsearch-selected-word');});}});},onControllerMove:function(startCellID,endCellID){var _that=this;var _startCellID=startCellID.split('-');var _endCellID=endCellID.split('-');var startCellX=parseInt(_startCellID[1]);var startCellY=parseInt(_startCellID[0]);var endCellX=parseInt(_endCellID[1]);var endCellY=parseInt(_endCellID[0]);var translateX=Math.abs(Math.abs(startCellX)-Math.abs(endCellX));var translateY=Math.abs(Math.abs(startCellY)-Math.abs(endCellY));var selectedCells=[];_that.$el.find('.wordsearch-cell').removeClass('qwordsearch-select');if((translateX===translateY)||translateX===0||translateY===0){var translate=translateX>translateY?translateX:translateY;var actualX=startCellX;var actualY=startCellY;for(var i=0;i<=translate;i++){if(translateX!==0){if(startCellX<endCellX)
actualX=startCellX+i;else
actualX=startCellX-i;}
if(translateY!==0){if(startCellY<endCellY)
actualY=startCellY+i;else
actualY=startCellY-i;}
var cell=actualY+'-'+actualX;selectedCells.push(cell);_that.$el.find('.wordsearch-cell[cellid="'+cell+'"]').addClass('qwordsearch-select');}}
return selectedCells;},afterInitialize:function(){this.prepareWordsearch();},afterRender:function(){this.colorizeGoodAnswers();this.startTimer();},onShow:function(){this.onWordsearchResize();},prepareWordsearch:function(){var alphabet=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','R','S','T','U','W','Y','Z'];var objs=this.model.get('objs');_.each(objs,function(val,index){if(val===''){var letterID=Math.floor(Math.random()*(alphabet.length-1));objs[index]=alphabet[letterID];}});this.model.get('objs',objs);},onWordsearchResize:function(){var objectWrapperWidth=this.$el.width();var objectWrapperHeight=this.$el.height();var qcrosswordWrapper=this.$el.find('.quizwordsearch-component-inner');var crosswordHeight=qcrosswordWrapper.height();var crosswordWidth=qcrosswordWrapper.width();var newCrosswordWidth=objectWrapperWidth;var newCrosswordHeight=((crosswordHeight*newCrosswordWidth)/ crosswordWidth);if(newCrosswordHeight<10){newCrosswordHeight=10;}
if(newCrosswordHeight>objectWrapperHeight){newCrosswordHeight=objectWrapperHeight;newCrosswordWidth=(crosswordWidth*newCrosswordHeight)/ crosswordHeight;}
var row_count=this.model.get('rows').length;var cell_size=(newCrosswordHeight / row_count);this.$el.find('.wordsearch-row').css('height',cell_size+'px');this.$el.find('.wordsearch-cell-background').css({height:cell_size+"px",width:cell_size+"px",'line-height':cell_size+"px"});this.$el.find('.wordsearch-cell[celltype="answer"]').css({'line-height':cell_size*0.95+"px",'font-size':cell_size/1.5+"px"});this.$el.find('.wordsearch-cell[celltype="question"]').css({'line-height':cell_size/3.5+"px",'font-size':cell_size/3.5+"px"});this.$el.find('.wordsearch-cell-password').css({height:cell_size*0.3+"px",width:cell_size*0.3+"px",'line-height':cell_size*0.3+"px"});},onRemove:function(){this.stopTimer();},checkAnswers:function(){var answers=this.model.get('answers');var compl=true;var goodAnswers=0;_.each(answers,function(answer,index){if(typeof answer.opts.isCorrect!=='undefined'&&answer.opts.isCorrect===true){goodAnswers++;}else{compl=false;}});if(this.model.get('wordSearchTimeOut')==0){var requireAnswersToAllQuestions=this.model.get('requireAnswersToAllQuestions');var minAnswersNumber=this.model.get('minAnswersNumber');if(!requireAnswersToAllQuestions&&minAnswersNumber<=goodAnswers){compl=true;}}
return compl;},checkSelf:function(e){var success=this.validateQuestion();if(success){this.stopTimer();}},userHasMoreAttempts:function(){return true;},resetExerciseApproachSpecial:function(){this.resetTimer();},renderAsReadyToUse:function(){var answers=this.model.get('answers');_.each(answers,function(answer,index){answer.opts.isCorrect=false;});this.model.set('answers',answers);this.render();this.onWordsearchResize();},initUserSelectionObject:function(){},});;;var FormInputTextComponentView=ExerciseComponentView.extend({className:'component forminputtext-component',template:_.template($('#forminputtext-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'keyup input':'changeValue','click':'focusInput',});},focusInput:function(){if(Utils.isIOS()){var value=this.$el.find('input').val();this.$el.find('input')[0].setSelectionRange(value.length,9999);}},afterRender:function(){var userSelection=this.model.get('userSelection');var defaultValue=this.model.get('defaultValue');if(_.isEmpty(userSelection)){this.model.set('userSelection',defaultValue);}
this.renderUserSelection();this.formDisabled();},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){this.model.set('userSelection',this.model.get('defaultValue'));}},renderUserSelection:function(){var userSelection=this.model.get('userSelection');this.$el.find('input').val(userSelection);},disabledComponent:function(){this.formDisabled();},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('input').attr('disabled','disabled');},changeValue:function(e){var input=$(e.target);var value=input.val();this.model.set('userSelection',value);this.checkSelfEnter(e);if(Utils.isIOS()){this.$el.find('input')[0].setSelectionRange(value.length,9999);}
this.checkSelfEnter(e);},checkAnswers:function(){var userAnswer=this.model.get('userSelection');if(!userAnswer)return false;if(userAnswer.length>0){var goodAnswers=this.model.get('goodAnswers');if(goodAnswers==undefined){return true;}
var goodAnswer=goodAnswers.toLowerCase().split(';|');if(goodAnswer.indexOf(userAnswer.toLowerCase())===-1){return false;}else{return true;}}
return false;}});;;var QuizInputTextComponentView=ExerciseComponentView.extend({className:'component quizinputtext-component',template:_.template($('#quizinputtext-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'keyup input':'changeValue','click':'focusInput',});},focusInput:function(){if(Utils.isIOS()){var value=this.$el.find('input').val();this.$el.find('input')[0].setSelectionRange(value.length,9999);}},afterRender:function(){var userSelection=this.model.get('userSelection');var defaultValue=this.model.get('defaultValue');if(_.isEmpty(userSelection)){this.model.set('userSelection',defaultValue);}
this.renderUserSelection();this.formDisabled();},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');_log('this.model quiz select',this.model);if(_.isUndefined(userSelection)){userSelection=this.model.get('defaultValue');this.model.set('userSelection',userSelection);}},renderUserSelection:function(){var userSelection=this.model.get('userSelection');this.$el.find('input').val(userSelection);},renderAsCompleted:function(){this.formDisabled();if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-passed');}
this.renderUserSelection();},renderAsFailed:function(){this.formDisabled();if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-failed');}
this.renderUserSelection();},renderAsReadyToUse:function(){this.formEnabled();this.$el.removeClass('mark-questions-as-passed');this.$el.removeClass('mark-questions-as-failed');this.renderUserSelection();},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('input').attr('disabled','disabled');},formEnabled:function(){this.$el.find('input').removeAttr('disabled');},changeValue:function(e){var input=$(e.target);var value=input.val();this.model.set('userSelection',value);this.checkSelfEnter(e);if(Utils.isIOS()){this.$el.find('input')[0].setSelectionRange(value.length,9999);}},checkAnswers:function(){var userAnswer=this.model.get('userSelection');if(!userAnswer)return false;if(userAnswer.length>0){var goodAnswers=this.model.get('goodAnswers');if(goodAnswers==undefined){return true;}
var goodAnswer=goodAnswers.split(';|');if(!this.model.get('caseSensitive')){userAnswer=userAnswer.toLowerCase();goodAnswer=goodAnswers.toLowerCase().split(';|');}
if(goodAnswer.indexOf(userAnswer)===-1){return false;}else{return true;}}
return false;}});;;var FormTextareaComponentView=ExerciseComponentView.extend({className:'component formtextarea-component',template:_.template($('#formtextarea-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'keyup textarea':'changeValue','click':'focusInput',});},focusInput:function(){if(Utils.isIOS()){var value=this.$el.find('textarea').val();this.$el.find('textarea')[0].setSelectionRange(value.length,9999);}},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){this.model.set('userSelection',this.model.get('defaultValue'));}},afterRender:function(){var userSelection=this.model.get('userSelection');var defaultValue=this.model.get('defaultValue');if(_.isEmpty(userSelection)){this.model.set('userSelection',defaultValue);}
this.renderUserSelection();this.formDisabled();},renderUserSelection:function(){var userSelection=this.model.get('userSelection');this.$el.find('textarea').val(userSelection);},disabledComponent:function(){this.formDisabled();},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('textarea').attr('disabled','disabled');},changeValue:function(e){this.checkSelfEnter(e);var input=$(e.target);var value=input.val();this.model.set('userSelection',value);this.checkSelfEnter(e);if(Utils.isIOS()){input[0].setSelectionRange(value.length,9999);}},checkAnswers:function(){var userAnswer=this.model.get('userSelection');if(!userAnswer)return false;if(userAnswer.length>0){var goodAnswers=this.model.get('goodAnswers');if(goodAnswers==undefined){return true;}
var goodAnswer=goodAnswers.toLowerCase().split(';|');if(goodAnswer.indexOf(userAnswer.toLowerCase())===-1){return false;}else{return true;}}
return false;}});;;var FormSelectComponentView=ExerciseComponentView.extend({className:'component formselect-component',template:_.template($('#formselect-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'change select':'changeValue','focusin select':'focusIn'});},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){var startValue=this.getStartValue();this.model.set('userSelection',startValue);}},getStartValue:function(){var formData=this.model.get('formData');var selectOptions=formData.selectOptions;if(selectOptions){for(var option in selectOptions){if(selectOptions[option].startValue){return selectOptions[option].option;}}}
return false;},afterRender:function(){var value=this.$el.find('select').val();this.renderUserSelection();this.formDisabled();},renderUserSelection:function(){var userSelection=this.model.get('userSelection');if(!_.isObject(userSelection)){this.$el.find('.form-select').val(userSelection);}},disabledComponent:function(){this.formDisabled();},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('select').attr('disabled','disabled');},changeValue:function(e){var value=$(e.currentTarget).val();this.model.set('userSelection',value);this.checkSelf(e);},checkAnswers:function(){var userAnswer=this.model.get('userSelection');var answerData=null;if(!_.isString(userAnswer)){userAnswer=this.$el.find('select').val();}
_.each(this.model.get('formData').selectOptions,function(answer){if(answer.option==userAnswer){answerData=answer;}})
if(answerData!=null){if(answerData.require){return true;}}
return false;}});;;var QuizSelectComponentView=ExerciseComponentView.extend({className:'component quizselect-component',template:_.template($('#quizselect-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'change select':'changeValue','focusin select':'focusIn'});},afterRender:function(){var value=this.$el.find('select').val();this.renderUserSelection();},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');_log('initUserSelectionObject',this.model);if(_.isUndefined(userSelection)){var formData=this.model.get('formData');if(formData){selectOptions=formData.selectOptions;var option=_.first(_.where(selectOptions,{startValue:true}));if(option){var value=option.option;this.model.set('userSelection',value);this.$el.find('select').val(value);}}}},renderUserSelection:function(){var userSelection=this.model.get('userSelection');if(!_.isObject(userSelection)){this.$el.find('.form-select').val(userSelection);}},renderAsCompleted:function(){this.formDisabled();if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-passed');}
this.renderUserSelection();},renderAsFailed:function(){this.formDisabled();if(this.model.get('markQuestions')){this.$el.addClass('mark-questions-as-failed');}
this.renderUserSelection();},renderAsReadyToUse:function(){this.formEnabled();this.$el.removeClass('mark-questions-passed');this.$el.removeClass('mark-questions-failed');this.renderUserSelection();this.render();},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('select').attr('disabled','disabled');},formEnabled:function(){this.$el.find('select').removeAttr('disabled');},changeValue:function(e){var value=$(e.currentTarget).val();this.model.set('userSelection',value);this.checkSelf(e);},checkAnswers:function(){var userAnswer=this.model.get('userSelection');var answerData=null;if(!_.isString(userAnswer)){userAnswer=this.$el.find('select').val();}
_.each(this.model.get('formData').selectOptions,function(answer){if(answer.option==userAnswer){answerData=answer;}})
if(answerData!=null){if(answerData.require){return true;}}
return false;}});;;var FormSubmitComponentView=ExerciseComponentView.extend({className:'component formsubmit-component',template:_.template($('#formsubmit-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click':'validateQuestion'});},formFieldsModels:{},afterAllInitialized:function(){var formFields=this.model.get('formFields')
this.formFieldsModels=TriggerController.instance.getComponentModelByActionkey(formFields);},checkAnswers:function(){var _that=this;var answersStatus={};var answersArray=[];this.formFieldsModels.each(function(cModel){answersArray.push(cModel.view.validateQuestion());});var answer=_.indexOf(answersArray,false)==-1;return answer;},resetExerciseApproachSpecial:function(){this.formFieldsModels.each(function(cModel){cModel.view.resetExerciseApproach();});},renderAsFailed:function(){this.$el.css({opacity:'.7'});},renderAsCompleted:function(){this.$el.css({opacity:'.7'});},renderAsReadyToUse:function(){this.$el.css({opacity:'1'});},});;;var FormCheckboxComponentView=ExerciseComponentView.extend({className:'component formcheckbox-component',template:_.template($('#formcheckbox-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'change input':'changeValue'});},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){this.model.set('userSelection',this.model.get('defaultValue'));}},afterRender:function(){this.selectOrDeselectInputOnScreen();this.renderUserSelection();this.formDisabled();},renderUserSelection:function(){var userSelection=this.model.get('userSelection');if(!_.isObject(userSelection)){this.$el.find('input').prop('checked',userSelection);}},changeValue:function(e){var value=$(e.currentTarget).prop('checked');this.model.set('userSelection',value);this.checkSelf(e);},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('input').attr('disabled','disabled');},formEnabled:function(){this.$el.find('input').removeAttr('disabled');},disabledComponent:function(){this.formDisabled();},selectOrDeselectInputOnScreen:function(){this.$el.find('input[type="checkbox"]').prop('checked',this.model.get('defaultValue'));},checkAnswers:function(){var isRequired=this.model.get('correctValue');var userAnswer=this.model.get('userSelection');if(_.isUndefined(userAnswer))return false;if(isRequired==userAnswer){return true;}else{return false;}},renderAsReadyToUse:function(){this.formEnabled();this.renderUserSelection();},lockComponent:function(){},});;;var FormRadioComponentView=ExerciseComponentView.extend({className:'component formradio-component',template:_.template($('#formradio-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'change input':'changeValue','deselect':'saveUserSelection'});},initUserSelectionObject:function(){var userSelection=this.model.get('userSelection');if(_.isUndefined(userSelection)){this.model.set('userSelection',this.model.get('defaultValue'));}},afterRender:function(){this.selectOrDeselectInputOnScreen();this.renderUserSelection();this.formDisabled();},renderUserSelection:function(){var userSelection=this.model.get('userSelection');if(!_.isObject(userSelection)){this.$el.find('input').prop('checked',userSelection);}},formDisabled:function(){var compl=this.model.get('compl');if(compl!=0)
this.$el.find('input').attr('disabled','disabled');},formEnabled:function(){this.$el.find('input').removeAttr('disabled');},saveUserSelection:function(){var value=this.$el.find('input').prop('checked');this.model.set('userSelection',value);},changeValue:function(e){var groupName=this.model.get('groupName');$('#stage-content input[type="radio"][name="'+groupName+'"]').each(function(){$(this).trigger('deselect');});this.checkSelf(e);},selectOrDeselectInputOnScreen:function(){this.$el.find('input[type="radio"]').prop('checked',this.model.get('defaultValue'));},checkAnswers:function(){var isRequired=this.model.get('correctValue');var userAnswer=this.model.get('userSelection');if(_.isUndefined(userAnswer))return false;if(isRequired===userAnswer){return true;}else{return false;}},renderAsFailed:function(){this.formDisabled();},renderAsCompleted:function(){this.formDisabled();},renderAsReadyToUse:function(){this.formEnabled();},});;;var FormUploadComponentView=ComponentView.extend({className:'component formupload-component',template:_.template($('#formupload-component-template').html()),formTemplate:_.template($('#upload-file-form-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click .uploadfopointlink-component-inner':'uploadOnClick','change .changefile':'uploadFile'});},bindings:{'input[name="pageid"]':'pageId','input[name="bannerid"]':'bannerId','input[name="actionkey"]':'actionkey',},isUploading:false,afterInitialize:function(){this.model.set('pageId','');this.model.set('bannerId','');this.stickit();},uploadOnClick:function(){var _that=this;var hash=$(window.top.document).find('.course-preview').attr('hash');var params={hash:hash,acceptTypeFormat:this.getAcceptTypeFormat(),actionkey:this.model.get('actionkey'),goodExtensions:this.model.get('goodExtensions'),}
this.addForm(params);var input=this.$el.find('.changefile');input.click();},getAcceptTypeFormat:function(){return'';},addForm:function(params){var formTemplate=this.formTemplate(params);this.$el.find('.form-wrapper').html(formTemplate);},removeForm:function(e){var form=this.$el.find('form').remove();},uploadFile:function(e){var _that=this;_log('uploadFile e',e);if(this.isUploading){return;}
this.showLoader();this.isUploading=true;this.startUplading();},startUplading:function(){var _that=this;var postData=new FormData(this.$el.find('.uploadfileform')[0]);var appLink=window.location.origin+'/egzaminy/';DataAccess.uploadDocFile(postData,appLink,function(data){_that.removeForm();_log('uploadDocFile',data,_log.dataaccessOutResult);_that.isUploading=false;_that.hideLoader();if(!data.success){switch(data.data.error){case-1:_that.showFeedbackWindow('','Serwer zabrania przesłania pliku o podanym rozszerzeniu.',false);break;case 0:_that.showFeedbackWindow('','Wystąpił błąd podczas wysyłania pliku.',false);break;case 1:_that.showFeedbackWindow('','Nieprawidłowe rozszerzenie pliku.',false);break;case 2:_that.showFeedbackWindow('','Wystąpił błąd podczas przetwarzania pliku.',false);break;case 3:_that.showFeedbackWindow('','Rozszerzenie pliku jest nieprawidłoweu.',false);break;case 4:var count=Math.abs(data.data.count);var massage='Przekroczono limit znaków w nazwie pliku o ('+count+')';_that.showFeedbackWindow('',massage,false);break;default:_that.showFeedbackWindow('','Wgrywanie pliku nie powiodło się.',false);break;}
return;}
_that.showFeedbackWindow('','Plik przesłany prawidłowo!',true);},function(data){_log('onFault',data);_that.showFeedbackWindow('','Wystąpił błąd podczas wysyłania.',false);_that.removeForm();_that.isUploading=false;_that.hideLoader();},function(data){_log('onProgress',data);},function(data){_log('onComplete',data);});},hideLoader:function(){var loader=this.$el.find('.upload-file-loader');loader.hide();var submit=this.$el;loader.css('opacity','1');},showLoader:function(){var loader=this.$el.find('.upload-file-loader');loader.show();var submit=this.$el;loader.css('opacity','0.4');},afterRender:function(){}});;;var IframeComponentView=ComponentView.extend({className:'component iframe-component',template:_.template($('#iframe-component-template').html()),});;;var SwfComponentView=ComponentView.extend({className:'component swf-component',template:_.template($('#swf-component-template').html()),putSwf:function(){var swfFileName=this.model.get('swfFileName');var actionkey=this.model.get('actionkey');var swfPath=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/swf/'+actionkey+'/'+swfFileName;var width=this.model.get('width');var height=this.model.get('height');this.$el.find('.swf-wrapper').flash({swf:swfPath,encodeParams:false,wmode:'transparent',loop:false});this.$el.find('.swf-wrapper').css({width:width+'px',height:height+'px',});},afterRender:function(){this.putSwf();},});;;var InfoPointPopupComponentView=ImageComponentView.extend({className:'component infopointpopup-component md-trigger',template:_.template($('#infopointpopup-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click':'openPopup'});},openPopup:function(){var _that=this;var windowData={title:this.model.get('title'),content:this.model.get('text')};var windowModel=new WindowModel({type:"modal",modal:true});var windowView=new WindowView({windowModel:windowModel});$(__meta__.darkanContainer).append(windowView.render(windowData).$el);windowView.scaleWindow();windowView.centerWindow();windowView.on('close',function(){StageView.instance.selectLastActiveWcagElement();});windowView.$el.find('.window-close-button').attr({'aria-label':windowData.content+', click to close.'});windowView.$el.find('.window-close-button').focus();this.markAsCompleted();},afterRender:function(){},renderAsCompleted:function(){this.$el.attr({active:true})},renderCss:function(){this.$el.css('cursor','pointer');}});;;var InfoPointLinkComponentView=ImageComponentView.extend({className:'component infopointlink-component',template:_.template($('#infopointlink-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click':'openLink'});},openLink:function(){var link=this.model.get('link');if(link.length){if(link.substring(0,7)==="http://"||link.substring(0,8)==="https://"){window.open(link);}else{window.open("http://"+link);}}
this.markAsCompleted();},renderAsCompleted:function(){this.$el.attr({active:true})},renderCss:function(){this.$el.css('cursor','pointer');}});;;var InfoPointSoundComponentView=ImageComponentView.extend({className:'component infopointsound-component',template:_.template($('#infopointsound-component-template').html()),soundIsPlaying:false,events:function(){return _.extend({},ComponentView.prototype.events,{'click':'playComponentAudioOnClick'});},animatePlaying:function(){_log('animatePlaying',this);this.$el.css({'background-position':'-60px 0px','-webkit-transition':'transform 300ms ease-out','-moz-transition':'transform 300ms ease-out','-o-transition':'transform 300ms ease-out','transition':'transform 300ms ease-out','transform':'rotate(90deg)','-moz-transform':'rotate(90deg)','-webkit-transform':'rotate(90deg)','-o-transform':'rotate(90deg)','-ms-transform':'rotate(90deg)'});},animateStop:function(){_log('animateStop',this);this.$el.css({'background-position':'-30px 0px','-webkit-transition':'transform 300ms ease-out','-moz-transition':'transform 300ms ease-out','-o-transition':'transform 300ms ease-out','transition':'transform 300ms ease-out','transform':'rotate(0deg)','-moz-transform':'rotate(0deg)','-webkit-transform':'rotate(0deg)','-o-transform':'rotate(0deg)','-ms-transform':'rotate(0deg)'});},afterRender:function(){var _that=this;},playComponentAudioOnClick:function(){if(this.soundIsPlaying){this.pauseComponentAudio();}else{this.playComponentAudio();}
this.markAsCompleted();},setComponentAudioAsPause:function(){this.animateStop();this.soundIsPlaying=false;},onSoundEnded:function(){_log('onSoundEnded',this);this.setComponentAudioAsPause();},getComponentSoundFile:function(){var actionkey=this.model.get('actionkey');var componentSound=this.model.get('sound');if(componentSound.length){var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/sounds/'+actionkey+'/'+componentSound;return audioSrc;}
return false;},renderAsCompleted:function(){this.$el.attr({active:true});},getComponentSoundFile:function(){var actionkey=this.model.get('actionkey');var componentSound=this.model.get('sound');if(componentSound.length){var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/audio/'+actionkey+'/'+componentSound;return audioSrc;}
return false;},renderCss:function(){this.$el.css('cursor','pointer');},playComponentAudio:function(){var soundFile=this.getComponentSoundFile();if(soundFile){this.$el.trigger('play-component-audio',[soundFile,this]);this.animatePlaying();this.soundIsPlaying=true;}},stopComponentAudio:function(){var soundFile=this.getComponentSoundFile();if(soundFile){this.$el.trigger('stop-component-audio',[soundFile,this]);this.animateStop();this.soundIsPlaying=false;}},pauseComponentAudio:function(){var soundFile=this.getComponentSoundFile();if(soundFile){this.$el.trigger('pause-component-audio',[soundFile,this]);this.animateStop();this.soundIsPlaying=false;}},});;;var InfoPointSoundControlComponentView=ComponentView.extend({className:'component infopointsoundcontrol-component',template:_.template($('#infopointsoundcontrol-component-template').html()),soundIsPlaying:false,events:function(){return _.extend({},ComponentView.prototype.events,{});},getSound:function(){var actionkey=this.model.get('actionkey');var componentSound=this.model.get('sound');if(componentSound.length){var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/audio/'+actionkey+'/'+componentSound;return audioSrc;}
return false;},getSwfLocation:function(){var swfLocation=__meta__.directLocation+'js/libs/jplayer';return swfLocation;},afterRender:function(){var _that=this;var actionkey=this.model.get('actionkey');var playerId=actionkey.split('-')[1];this.$el.find('#audio-player-'+playerId).jPlayer({ready:function(event){$(this).jPlayer("setMedia",{mp3:_that.getSound(),});},supplied:"mp3",cssSelectorAncestor:'#jp-container-'+playerId,wmode:"window",useStateClassSkin:true,autoBlur:false,smoothPlayBar:true,keyEnabled:true,remainingDuration:true,toggleDuration:true});},getComponentSoundFile:function(){var actionkey=this.model.get('actionkey');var componentSound=this.model.get('sound');if(componentSound.length){var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/audio/'+actionkey+'/'+componentSound;return audioSrc;}
return false;},renderCss:function(){this.$el.css('cursor','pointer');},stopComponentAudio:function(){var soundFile=this.getSound();if(!soundFile){return;}
this.soundIsPlaying=false;var noskin=this.model.get('noskin');if(!noskin){var actionkey=this.model.get('actionkey');var playerId=actionkey.split('-')[1];this.$el.find('#audio-player-'+playerId).jPlayer('stop');}else{var player=this.$el.find('audio');$(player).removeClass('playing').trigger("pause").next().addClass('pause').removeClass('play');player[0].currentTime=0;}},playComponentAudio:function(){var soundFile=this.getSound();if(!soundFile){return;}
var noskin=this.model.get('noskin');this.soundIsPlaying=true;if(!noskin){var actionkey=this.model.get('actionkey');var playerId=actionkey.split('-')[1];this.$el.find('#audio-player-'+playerId).jPlayer('play');}else{var player=this.$el.find('audio');$(player).addClass('playing').trigger("play").next().removeClass('pause').addClass('play');}},pauseComponentAudio:function(){var soundFile=this.getSound();if(!soundFile){return;}
this.soundIsPlaying=false;var noskin=this.model.get('noskin');if(!noskin){var actionkey=this.model.get('actionkey');var playerId=actionkey.split('-')[1];this.$el.find('#audio-player-'+playerId).jPlayer('pause');}else{var player=this.$el.find('audio');$(player).removeClass('playing').trigger("pause").next().addClass('pause').removeClass('play')}},});;;var InfoPointSoundRecordComponentView=ImageComponentView.extend({className:'component infopointsoundrecord-component',template:_.template($('#infopointsoundrecord-component-template').html()),renderCss:function(){this.$el.css('cursor','pointer');}});;;var InfoPointGalleryComponentView=ImageComponentView.extend({className:'component infopointgallery-component',template:_.template($('#infopointgallery-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click':'openGallery'});},openGallery:function(){var galleryObjects=[];var galleryFiles=this.model.get('galleryFiles');var actionkey=this.model.get('actionkey');if(galleryFiles.length){for(var file in galleryFiles){var imageSrc={href:__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/gallery/'+actionkey+'/'+galleryFiles[file]};galleryObjects.push(imageSrc);};$.fancybox.open(galleryObjects,{helpers:{thumbs:{width:75,height:50}}});}
this.markAsCompleted();},renderAsCompleted:function(){this.$el.attr({active:true})},renderCss:function(){this.$el.css('cursor','pointer');}});;;var InfoPointDownloadComponentView=ImageComponentView.extend({className:'component infopointdownload-component',template:_.template($('#infopointdownload-component-template').html()),events:function(){return _.extend({},ComponentView.prototype.events,{'click':'markAsCompleted'});},renderAsCompleted:function(){this.$el.attr({active:true})},renderCss:function(){this.$el.css('cursor','pointer');},afterInitialize:function(){var useNewDownloadFileName=this.model.get('useNewDownloadFileName');var newDownloadFileName=this.model.get('newDownloadFileName');if(useNewDownloadFileName==undefined){this.model.set('useNewDownloadFileName',useNewDownloadFileName);}
if(newDownloadFileName==undefined){this.model.set('newDownloadFileName',newDownloadFileName);}},});;;var DrawedInfoPointLinkComponentView=ComponentView.extend({className:'component drawedinfopointlink-component',template:_.template($('#drawedinfopointlink-component-template').html()),});;;var DrawedInfoPointDownloadComponentView=ComponentView.extend({className:'component drawedinfopointdownload-component',template:_.template($('#drawedinfopointdownload-component-template').html()),});;;var DrawedInfoPointGalleryComponentView=InfoPointGalleryComponentView.extend({className:'component drawedinfopointgallery-component',template:_.template($('#drawedinfopointgallery-component-template').html()),});;;var DrawedInfoPointPopupComponentView=ComponentView.extend({className:'component drawedinfopointpopup-component',template:_.template($('#drawedinfopointpopup-component-template').html()),});;;var TimerComponentView=TextComponentView.extend({className:'component timer-component',template:_.template($('#timer-component-template').html()),isRuning:false,timerTime:0,afterInitialize:function(){this.model.set('s_hours',this.model.get('hours'));this.model.set('s_minutes',this.model.get('minutes'));this.model.set('s_seconds',this.model.get('seconds'));},startTimer:function(){var _that=this;if(!this.isRuning){var timerComponentsCollection=ProjectModel.instance.getTimerComponentsById(this.model.get('timerId'));timerComponentsCollection.each(function(tModel){if(tModel.cid!=_that.model.cid){tModel.set('hours',_that.model.get('hours'));tModel.set('minutes',_that.model.get('minutes'));tModel.set('seconds',_that.model.get('seconds'));if(tModel.view){window.clearTimeout(tModel.view.timerId);tModel.view.isRuning=false;tModel.view.renderTime();}}});this.loop();}
this.isRuning=true;},loop:function(){var _that=this;this.setTimeToModel();this.renderTime();if(this.timerTime>0){this.timerId=window.setTimeout(function(){_that.onTick()},1000);}else{this.onComplete();}
this.timerTime--;},stopTimer:function(){var _that=this;var timerComponentsCollection=ProjectModel.instance.getTimerComponentsById(this.model.get('timerId'));timerComponentsCollection.each(function(tModel){if(tModel.view){window.clearTimeout(tModel.view.timerId);tModel.view.isRuning=false;}
tModel.set('hours',_that.model.get('hours'));tModel.set('minutes',_that.model.get('minutes'));tModel.set('seconds',_that.model.get('seconds'));});},pause:function(){window.clearTimeout(this.timerId);},resetTimer:function(){var _that=this;var timerComponentsCollection=ProjectModel.instance.getTimerComponentsById(this.model.get('timerId'));timerComponentsCollection.each(function(tModel){if(tModel.view){window.clearTimeout(tModel.view.timerId);tModel.view.isRuning=false;}
tModel.set('hours',_that.model.get('s_hours'));tModel.set('minutes',_that.model.get('s_minutes'));tModel.set('seconds',_that.model.get('s_seconds'));if(tModel.view){tModel.view.renderTime();}});this.afterShow();},onTick:function(){if(this.timerTime>=0){this.trigger('onTimerTick');this.loop();}},onComplete:function(){this.stopTimer();this.trigger('onTimerComplete');},setTimeToModel:function(){var _that=this;var date=new Date(null);date.setSeconds(this.timerTime);var hours=date.getUTCHours();var minutes=date.getUTCMinutes();var seconds=date.getUTCSeconds();this.model.set('hours',hours);this.model.set('minutes',minutes);this.model.set('seconds',seconds);var timerComponentsCollection=ProjectModel.instance.getTimerComponentsById(this.model.get('timerId'));timerComponentsCollection.each(function(tModel){if(tModel.cid!=_that.model.cid){tModel.set('hours',_that.model.get('hours'));tModel.set('minutes',_that.model.get('minutes'));tModel.set('seconds',_that.model.get('seconds'));if(tModel.view){tModel.view.renderTime();}}});},afterRender:function(){this.renderTime();this.renderScrollbar();},afterShow:function(){var hoursEnabled=this.model.get('hoursEnabled');var minutesEnabled=this.model.get('minutesEnabled');var secondsEnabled=this.model.get('secondsEnabled');var counterAutostart=this.model.get('counterAutostart');var hours=hoursEnabled?parseInt(this.model.get('hours'))*3600:0;var minutes=minutesEnabled?parseInt(this.model.get('minutes'))*60:0;var seconds=secondsEnabled?parseInt(this.model.get('seconds')):0;this.timerTime=hours+minutes+seconds;if(counterAutostart){this.startTimer();}},renderTime:function(){var hours=this.retValue(this.model.get('hours'));var minutes=this.retValue(this.model.get('minutes'));var seconds=this.retValue(this.model.get('seconds'));var hoursEnabled=this.model.get('hoursEnabled');var minutesEnabled=this.model.get('minutesEnabled');var secondsEnabled=this.model.get('secondsEnabled');if(!secondsEnabled){seconds="";}
if(!minutesEnabled){minutes="";}
if(!hoursEnabled){hours="";}
this.$el.find('span[name="hours"]').text(hours);this.$el.find('span[name="minutes"]').text(minutes);this.$el.find('span[name="seconds"]').text(seconds);var separatorHours=":";var separatorMinutes=":";if(!secondsEnabled){separatorMinutes="";}
if(!minutesEnabled){separatorMinutes="";}
if(!hoursEnabled){separatorHours="";}
if(hoursEnabled&&(secondsEnabled||minutesEnabled)){separatorHours=":";}
if(hoursEnabled&&(!secondsEnabled&&!minutesEnabled)){separatorHours="";}
this.$el.find('span[name="separator-hours"]').text(separatorHours);this.$el.find('span[name="separator-minutes"]').text(separatorMinutes);},retValue:function(value){var ret=value<10?'0'+value:value;return ret;},beforeDestroy:function(){_log('beforeDestroy','beforeDestroy');this.stopTimer();},});;;var QuizResultComponentView=TextComponentView.extend({className:'component',template:_.template($('#quiz-result-component-template').html()),afterInitialize:function(){TriggerController.instance.calculatePrecentScore();}});;;function ComponentFactory(){}
ComponentFactory.createComponentByType=function(type,model){switch(type){case'text':return ComponentFactory.createTextComponent(model);break;case'image':return ComponentFactory.createImageComponent(model);break;case'video':return ComponentFactory.createVideoComponent(model);break;case'quiz':return ComponentFactory.createQuizComponent(model);break;case'quiz-selectone':return ComponentFactory.createQuizSelectOneComponent(model);break;case'quiz-fillinblanks':return ComponentFactory.createQuizFillInBlanksComponent(model);break;case'quiz-dnd':return ComponentFactory.createQuizDnDComponent(model);break;case'quiz-connectlines':return ComponentFactory.createQuizConnectLinesComponent(model);break;case'scroller':return ComponentFactory.createScrollerComponent(model);break;case'crossword':return ComponentFactory.createCrosswordComponent(model);break;case'form-inputtext':return ComponentFactory.createFormInputTextComponent(model);break;case'form-upload':return ComponentFactory.createFormUploadComponent(model);break;case'form-textarea':return ComponentFactory.createFormTextareaComponent(model);break;case'form-select':return ComponentFactory.createFormSelectComponent(model);break;case'form-checkbox':return ComponentFactory.createFormCheckboxComponent(model);break;case'form-radio':return ComponentFactory.createFormRadioComponent(model);break;case'form-submit':return ComponentFactory.createFormSubmitComponent(model);break;case'iframe':return ComponentFactory.createIframeComponent(model);break;case'swf':return ComponentFactory.createSwfComponent(model);break;case'drawedinfopoint-link':return ComponentFactory.createDrawedInfoPointLinkComponent(model);break;case'drawedinfopoint-download':return ComponentFactory.createDrawedInfoPointDownloadComponent(model);break;case'drawedinfopoint-gallery':return ComponentFactory.createDrawedInfoPointGalleryComponent(model);break;case'drawedinfopoint-popup':return ComponentFactory.createDrawedInfoPointPopupComponent(model);break;case'infopoint-popup':return ComponentFactory.createInfoPointPopupComponent(model);break;case'infopoint-link':return ComponentFactory.createInfoPointLinkComponent(model);break;case'infopoint-sound':return ComponentFactory.createInfoPointSoundComponent(model);break;case'infopoint-sound-control':return ComponentFactory.createInfoPointSoundControlComponent(model);break;case'infopoint-soundrecord':return ComponentFactory.createInfoPointSoundRecordComponent(model);break;case'infopoint-gallery':return ComponentFactory.createInfoPointGalleryComponent(model);break;case'infopoint-download':return ComponentFactory.createInfoPointDownloadComponent(model);break;case'timer':return ComponentFactory.createTimerComponent(model);break;case'quiz-wordsearch':return ComponentFactory.createQuizWordsearchComponent(model);break;case'quiz-result':return ComponentFactory.createQuizResultComponent(model);break;case'quiz-inputtext':return ComponentFactory.createQuizInputTextComponent(model);break;case'quiz-select':return ComponentFactory.createQuizSelectComponent(model);break;default:console.log("No component: "+type);break;}}
ComponentFactory.createQuizSelectComponent=function(model){var componentView=new QuizSelectComponentView({model:model});return componentView;}
ComponentFactory.createQuizInputTextComponent=function(model){var componentView=new QuizInputTextComponentView({model:model});return componentView;}
ComponentFactory.createFormInputTextComponent=function(model){var componentView=new FormInputTextComponentView({model:model});return componentView;}
ComponentFactory.createFormUploadComponent=function(model){var componentView=new FormUploadComponentView({model:model});return componentView;}
ComponentFactory.createFormTextareaComponent=function(model){var componentView=new FormTextareaComponentView({model:model});return componentView;}
ComponentFactory.createFormSelectComponent=function(model){var componentView=new FormSelectComponentView({model:model});return componentView;}
ComponentFactory.createFormCheckboxComponent=function(model){var componentView=new FormCheckboxComponentView({model:model});return componentView;}
ComponentFactory.createFormRadioComponent=function(model){var componentView=new FormRadioComponentView({model:model});return componentView;}
ComponentFactory.createFormSubmitComponent=function(model){var componentView=new FormSubmitComponentView({model:model});return componentView;}
ComponentFactory.createIframeComponent=function(model){var componentView=new IframeComponentView({model:model});return componentView;}
ComponentFactory.createSwfComponent=function(model){var componentView=new SwfComponentView({model:model});return componentView;}
ComponentFactory.createDrawedInfoPointLinkComponent=function(model){var componentView=new DrawedInfoPointLinkComponentView({model:model});return componentView;}
ComponentFactory.createDrawedInfoPointDownloadComponent=function(model){var componentView=new DrawedInfoPointDownloadComponentView({model:model});return componentView;}
ComponentFactory.createDrawedInfoPointGalleryComponent=function(model){var componentView=new DrawedInfoPointGalleryComponentView({model:model});return componentView;}
ComponentFactory.createDrawedInfoPointPopupComponent=function(model){var componentView=new DrawedInfoPointPopupComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointPopupComponent=function(model){var componentView=new InfoPointPopupComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointLinkComponent=function(model){var componentView=new InfoPointLinkComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointSoundComponent=function(model){var componentView=new InfoPointSoundComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointSoundControlComponent=function(model){var componentView=new InfoPointSoundControlComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointSoundRecordComponent=function(model){var componentView=new InfoPointSoundRecordComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointGalleryComponent=function(model){var componentView=new InfoPointGalleryComponentView({model:model});return componentView;}
ComponentFactory.createInfoPointDownloadComponent=function(model){var componentView=new InfoPointDownloadComponentView({model:model});return componentView;}
ComponentFactory.createComponentByModel=function(model){var type=model.get('type');return ComponentFactory.createComponentByType(type,model);}
ComponentFactory.createTextComponent=function(model){var componentView=new TextComponentView({model:model});return componentView;}
ComponentFactory.createImageComponent=function(model){var componentView=new ImageComponentView({model:model});return componentView;}
ComponentFactory.createVideoComponent=function(model){var componentView=new VideoComponentView({model:model});return componentView;}
ComponentFactory.createQuizComponent=function(model){var componentView=new QuizComponentView({model:model});return componentView;}
ComponentFactory.createQuizSelectOneComponent=function(model){var componentView=new QuizSelectOneComponentView({model:model});return componentView;}
ComponentFactory.createQuizFillInBlanksComponent=function(model){var componentView=new QuizFillInBlanksComponentView({model:model});return componentView;}
ComponentFactory.createQuizDnDComponent=function(model){var componentView=new QuizDnDComponentView({model:model});return componentView;}
ComponentFactory.createQuizConnectLinesComponent=function(model){var componentView=new QuizConnectLinesComponentView({model:model});return componentView;}
ComponentFactory.createScrollerComponent=function(model){var componentView=new ScrollerComponentView({model:model});return componentView;}
ComponentFactory.createCrosswordComponent=function(model){var componentView=new CrosswordComponentView({model:model});return componentView;}
ComponentFactory.createQuizWordsearchComponent=function(model){var componentView=new QuizWordsearchComponentView({model:model});return componentView;}
ComponentFactory.createTimerComponent=function(model){var componentView=new TimerComponentView({model:model});return componentView;}
ComponentFactory.createQuizResultComponent=function(model){var componentView=new QuizResultComponentView({model:model});return componentView;};;_log.pageOptions='background: #E1D42D; color: black;';_log.apidata='background: #2FE026; color: black; border: 1px solid black;';_log.apierror='background: red; color: black;';_log.timeline='background: #2FE026; color: white; border: 1px solid black;';_log.updateComingInStage='background: #E85E32; color: white; border: 1px solid black;';_log.rightMenu='background: #2788E0; color: white; border: 1px solid black;';_log.dataaccessOutResult='background: #9158E0; color: white; border: 1px solid black;';_log.dataaccessOutFault='background: #810C29; color: white;';_log.dataaccessIn='background: #9D0DFF; color: white;';_log.error='background: red; color: white;';_log.message='background: pink;';_log.selector='background: #FF0EE8;';_log.componentView='background: #5FE1D6;';_log.stageView='background: #E0CD05;';_log.imageComponetView='background: #0AE18B;';_log.popup='background: #05E01C;';_log.trigger='background: #E88134;';_log.scorm='background: #2C60A2; color: #fff';function _log(message,object,css){var hostname=window.location.hostname;var islocalhost=(hostname=='pio.pl'||hostname=='jerzy.pl'||hostname=='localhost');var DEBUG=islocalhost?true:false;if(DEBUG){css=css||_log.message;if(console&&console.log){console.log("%c%s",css,message,object);}}};;function _log_mobile(message,object){if(true){if(console&&console.re&&console.re.log){console.re.log(message,object);}}};;var Utils={};var scaleFactor=1;Utils.getURLParam=function()
{url=window.location.search.substring(0);var result={};var searchIndex=url.indexOf("?");if(searchIndex==-1)return result;var sPageURL=url.substring(searchIndex+1);var sURLVariables=sPageURL.split('&');for(var i=0;i<sURLVariables.length;i++)
{var sParameterName=sURLVariables[i].split('=');result[sParameterName[0]]=sParameterName[1];}
return result;}
Utils.setModalText=function(textValues){if(!_.isUndefined(textValues.main)){_layout.load_project_modal.find('.main').text(textValues.main);}
if(!_.isUndefined(textValues.extra)){_layout.load_project_modal.find('.extra').text(textValues.extra);}}
Backbone.Model.prototype.toJSON=function(){var json=_.clone(this.attributes);for(var attr in json){if((json[attr]instanceof Backbone.Model)||(json[attr]instanceof Backbone.Collection)){json[attr]=json[attr].toJSONAll();}}
return json;};function isFirefox(){return navigator.userAgent.toLowerCase().indexOf('firefox')>-1;}
Utils.getRandomArrayElements=function(arr,count){var shuffled=arr.slice(0),i=arr.length,min=i-count,temp,index;while(i-->min){index=Math.floor((i+1)*Math.random());temp=shuffled[index];shuffled[index]=shuffled[i];shuffled[i]=temp;}
return shuffled.slice(min);}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(elt){var len=this.length>>>0;var from=Number(arguments[1])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0)
from+=len;for(;from<len;from++)
{if(from in this&&this[from]===elt)
return from;}
return-1;};}
Utils.arrayAreEqual=function(array1,array2){return array1.length==array2.length&&array1.every(function(element,index){return element===array2[index];});}
Utils.isIE=function(){var rv=false;if(navigator.appName=='Microsoft Internet Explorer')
{var ua=navigator.userAgent;var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
else if(navigator.appName=='Netscape')
{var ua=navigator.userAgent;var re=new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)
rv=parseFloat(RegExp.$1);}
return rv;}
Utils.isMobile=function(){return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);}
Utils.isIOS=function(){var iOS=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return iOS;}
Utils.validateUrl=function(url){var valid=/^(ftp|http|https):\/\/[^ "]+$/.test(url);console.log(valid)
if(valid){return url;}else{return'http://'+url;}}
Utils.ObjectLength=function(obj){var length=0;for(var o in obj){length++;}
return length;}
function _lang(translationString){return _.isUndefined(lang[__lang][translationString])?'Brak tłumaczenia :(':lang[__lang][translationString];}
Utils.setCookie=function(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires;},Utils.getCookie=function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1);if(c.indexOf(name)==0)return c.substring(name.length,c.length);}
return"";};;var AudioManager=Backbone.View.extend({className:'audio-manager',template:_.template($('#audio-manager-template').html()),componentsAudios:[],pagesAudios:[],projectAudio:[],courseVolume:1,allAudiosLength:0,progressLength:0,initialize:function(){},render:function(){var template=this.template(this.serializeData());this.$el.html(template);return this;},serializeData:function(){return{};},unmuteAllAudios:function(){this.courseVolume=1;var allAudios=this.$el.find('audio');for(var i=0;i<allAudios.length;i++){var audio=$(allAudios[i]);if(audio[0]){try{audio[0].volume=1;}catch(msg){_log('ERROR unmut sound',msg);}}};},muteAllAudios:function(){this.courseVolume=0;var allAudios=this.$el.find('audio');for(var i=0;i<allAudios.length;i++){var audio=$(allAudios[i]);if(audio[0]){try{audio[0].volume=0;}catch(msg){_log('ERROR unmut sound',msg);}}};},createComponetsAudios:function(){var _that=this;var cc=ProjectModel.instance.getAllComponents();var componentsAudiosContainer=this.$el.find('.components-audios-container');cc.each(function(cModel){var audio=_that.createComponentAudio(cModel);if(audio){var actionkey=cModel.get('actionkey');audio.attr('actionkey',actionkey);_that.addAudioToContainer(audio,componentsAudiosContainer);}});},getComponentAudioSrcPath:function(cModel){var actionkey=cModel.get('actionkey');var type=cModel.get('type');var audioSrc=false;switch(type){case'infopoint-sound':fileName=cModel.get('sound');if(!fileName||fileName==''){return false;}
var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/audio/'+actionkey+'/'+fileName;break;default:fileName=cModel.get('point-sound');if(!fileName||fileName==''){return false;}
var audioSrc=__meta__.directLocation+'exported_view/'+actionkey.split('-').pop()+'/sounds/'+actionkey+'/'+fileName;break;}
return audioSrc;},getPageAudioSrcPath:function(pModel){var fileName=pModel.get('options').get('soundfilename');if(!fileName||fileName==''){return false;}
var audioSrc=__meta__.directLocation+'exported_view/'+pModel.get('options').get('pageid')+'/audio/page/'+fileName;return audioSrc;},createComponentAudio:function(cModel){var audioPath=this.getComponentAudioSrcPath(cModel);return this.createAudio(audioPath);},playComponentAudio:function(cModel){this.pauseAllComponentsAudios();var audio=this.getComponetAudio(cModel);if(!audio){return false;}
var volume=cModel.get('volume');try{audio[0].currentTime=0;audio[0].play();if(this.courseVolume){audio[0].volume=volume/100;}}catch(msg){_log('ERROR playing sound',msg);}},stopComponentAudio:function(cModel){this.stopAllComponentsAudios();var audio=this.getComponetAudio(cModel);if(!audio){return false;}
try{var volume=sender.model.get('volume');audio[0].pause();audio[0].currentTime=0;if(this.courseVolume){audio[0].volume=volume/100;}}catch(msg){_log('ERROR pause sound',msg);}},pauseComponentAudio:function(cModel){var audio=this.getComponetAudio(cModel);if(!audio){return false;}
try{audio[0].pause();}catch(msg){_log('ERROR pause sound',msg);}},stopAllComponentsAudios:function(cView){var infoPointsSoundComponents=ProjectModel.instance.getInfoPointsSoundComponents();infoPointsSoundComponents.each(function(cModel){if(cModel.view){cModel.view.setComponentAudioAsPause();}});var audios=this.getAllComponetsAudios();for(var i=0;i<audios.length;i++){var audio=$(audios[i]);try{if(audio[0].duration>0&&!audio[0].paused){audio[0].pause();audio[0].currentTime=0;}}catch(msg){_log('ERROR pause sound',msg);}};},pauseAllComponentsAudios:function(){var infoPointsSoundComponents=ProjectModel.instance.getInfoPointsSoundComponents();infoPointsSoundComponents.each(function(cModel){if(cModel.view){cModel.view.setComponentAudioAsPause();}});var audios=this.getAllComponetsAudios();for(var i=0;i<audios.length;i++){var audio=$(audios[i]);try{if(audio[0].duration>0&&!audio[0].paused){audio[0].pause();}}catch(msg){_log('ERROR pause sound',msg);}};},getComponetAudio:function(cModel){var actionkey=cModel.get('actionkey');var componentsAudiosContainer=this.$el.find('.components-audios-container');var audio=componentsAudiosContainer.find('audio[actionkey="'+actionkey+'"]');return audio.length?audio:false;},getAllComponetsAudios:function(){var componentsAudiosContainer=this.$el.find('.components-audios-container');var audios=componentsAudiosContainer.find('audio');return audios.length?audios:false;},createPagesAudios:function(){var _that=this;var pages=ProjectModel.instance.get('pages');var pagesAudiosContainer=this.$el.find('.pages-audios-container');pages.each(function(pModel){var audio=_that.createPageAudio(pModel);if(audio){var pageId=pModel.get('options').get('pageid');audio.attr('pageid',pageId);_that.addAudioToContainer(audio,pagesAudiosContainer);}});},createPageAudio:function(cModel){var audioPath=this.getPageAudioSrcPath(cModel);return this.createAudio(audioPath);},getPageAudio:function(pModel){var pageId=pModel.get('options').get('pageid');var pagesAudiosContainer=this.$el.find('.pages-audios-container');var audio=pagesAudiosContainer.find('audio[pageid="'+pageId+'"]');return audio.length?audio:false;},playPageAudio:function(pModel){var audio=this.getPageAudio(pModel);if(!audio){return false;}
var volume=pModel.get('options').get('volume');try{audio[0].currentTime=0;audio[0].play();if(this.courseVolume){audio[0].volume=volume/100;}}catch(msg){_log('ERROR playing sound',msg);}},stopAllPagesAudios:function(){var audios=this.getAllPagesAudios();for(var i=0;i<audios.length;i++){var audio=$(audios[i]);try{if(audio[0].duration>0&&!audio[0].paused){audio[0].pause();audio[0].currentTime=0;}}catch(msg){_log('ERROR pause sound',msg);}};},getAllPagesAudios:function(){var pagesAudiosContainer=this.$el.find('.pages-audios-container');var audios=pagesAudiosContainer.find('audio');return audios.length?audios:false;},createProjectAudios:function(){var _that=this;var projectModel=ProjectModel.instance;var projectAudioContainer=this.$el.find('.project-audio-container');var audio=_that.createProjectAudio(ProjectModel.instance);if(audio){if(projectModel.get('options').get('sound_loop')){audio.attr('loop','true');}
_that.addAudioToContainer(audio,projectAudioContainer);}},createProjectAudio:function(projectModel){var audioPath=this.getProjectAudioSrcPath(projectModel);return this.createAudio(audioPath);},getProjectAudioSrcPath:function(projectModel){return projectModel.getProjectSoundPath();},playProjectAudio:function(projectModel){var projectModel=ProjectModel.instance;var audio=this.getProjectAudio();if(!audio){return false;}
var volume=projectModel.get('options').get('sound_vol');try{audio[0].currentTime=0;audio[0].play();if(this.courseVolume){audio[0].volume=volume/100;}}catch(msg){_log('ERROR playing sound',msg);}},getProjectAudio:function(){var projectAudioContainer=this.$el.find('.project-audio-container');var audio=projectAudioContainer.find('audio');return audio.length?audio:false;},stopAllAudios:function(){this.stopAllComponentsAudios();this.stopAllPagesAudios();},playComponentSound:function(path,cView){this.playComponentAudio(cView.model);},stopComponentSound:function(path,cView){this.stopComponentAudio(cView.model);},pauseComponentSound:function(path,cView){this.pauseComponentAudio(cView.model);},playPageSound:function(view){this.playPageAudio(view.model);},playProjectSound:function(){this.playProjectAudio();},stopAllSounds:function(){this.stopAllAudios();},clearComponentsSounds:function(){},prepareComponentSound:function(path,view){return this.getComponetAudio(view.model);},preparePageSound:function(){},prepareProjectSound:function(){},muteAllSounds:function(){this.muteAllAudios();},unmuteAllSounds:function(){this.unmuteAllAudios();},createAudio:function(audioPath){var _that=this;if(!audioPath){return false;}
if(audioPath==''){return false;}
var audio=$('<audio></audio>',{controls:'false',class:'component-sound',soundpath:audioPath});var sourceMP3,sourceOgg;sourceMP3=$('<source/>',{type:'audio/mpeg',src:audioPath});sourceMP3.appendTo(audio);try{audio[0].addEventListener('canplaythrough',function(e){_that.progressLength++;_that.trigger('on-proggress',{e:e,progress:_that.progressLength,total:_that.allAudiosLength});if(_that.progressLength==_that.allAudiosLength){_that.trigger('on-complete',{e:e,progress:_that.progressLength,total:_that.allAudiosLength});}},false);}catch(msg){_log('ERROR playing sound',msg);}
return audio;},addAudioToContainer:function(audio,container){container.append(audio);this.allAudiosLength++;},playAndPauseAllAudiosForMobile:function(){var audios=this.getAllComponetsAudios();for(var i=0;i<audios.length;i++){var audio=$(audios[i]);audio[0].load();audio[0].play();audio[0].pause();audio[0].currentTime=0;}
var audios=this.getAllPagesAudios();for(var i=0;i<audios.length;i++){var audio=$(audios[i]);audio[0].load();audio[0].play();audio[0].pause();audio[0].currentTime=0;}
var audio=this.getProjectAudio();if(audio){audio[0].load();audio[0].play();audio[0].pause();audio[0].currentTime=0;}},});;;var SoundController=Backbone.View.extend({tagName:'div',className:'sounds-container',courseVolume:1,initialize:function(){this.componentSoundsContainer=$('<div></div>',{class:'components-sounds'});this.pageSound=$('<audio></audio>',{controls:'false',class:'page-sound'});this.projectSound=$('<audio></audio>',{controls:'false',class:'project-sound'});this.render();},render:function(){$(__meta__.darkanContainer).append(this.$el);this.$el.append(this.componentSoundsContainer);this.$el.append(this.pageSound);this.$el.append(this.projectSound);return this;},unmuteAllSounds:function(){this.courseVolume=1;this.componentSoundsContainer.find('audio').each(function(){try{this.volume=1;}catch(msg){_log('ERROR unmut sound',msg);}});try{this.pageSound[0].volume=1;this.projectSound[0].volume=1;}catch(msg){_log('ERROR unmut sound',msg);}},muteAllSounds:function(){this.courseVolume=0;this.componentSoundsContainer.find('audio').each(function(){try{this.volume=0;}catch(msg){_log('ERROR mute sound',msg);}});try{this.pageSound[0].volume=0;this.projectSound[0].volume=0;}catch(msg){_log('ERROR mute sound',msg);}},stopAllComponentsSounds:function(){var infoPointsSoundComponents=ProjectModel.instance.getInfoPointsSoundComponents();infoPointsSoundComponents.each(function(cModel){if(cModel.view){cModel.view.setComponentAudioAsPause();}});_log('stopAllComponentsSounds');var audios=this.componentSoundsContainer.find('audio');for(var i=0;i<audios.length;i++){var componentSound=$(audios[i]);if(componentSound){componentSound[0].currentTime=0;componentSound[0].pause();}};},pauseAllComponentsSounds:function(){var infoPointsSoundComponents=ProjectModel.instance.getInfoPointsSoundComponents();infoPointsSoundComponents.each(function(cModel){if(cModel.view){cModel.view.setComponentAudioAsPause();}});this.componentSoundsContainer.find('audio').each(function(){try{this.pause();}catch(msg){_log('ERROR pause sound',msg);}});},clearComponentsSounds:function(){this.componentSoundsContainer.html('');},prepareComponentSound:function(soundPath){var componentSound=$('<audio></audio>',{controls:'false',class:'component-sound',soundpath:soundPath});var sourceMP3,sourceOgg;sourceMP3=$('<source/>',{type:'audio/mpeg',src:soundPath});var soundPathOGG=soundPath.substring(0,soundPath.length-3)+"ogg";sourceOGG=$('<source/>',{type:'audio/ogg',src:soundPathOGG});sourceMP3.appendTo(componentSound);sourceOGG.appendTo(componentSound);this.componentSoundsContainer.append(componentSound);try{componentSound[0].load();componentSound[0].currentTime=0;componentSound[0].play();componentSound[0].pause();}catch(msg){_log('ERROR playing sound',msg);}
return componentSound;},playComponentSound:function(soundPath,sender){this.pauseAllComponentsSounds();var componentAudioObject=this.componentSoundsContainer.find('audio[soundpath="'+soundPath+'"]')[0];try{var volume=sender.model.get('volume');componentAudioObject.currentTime=0;componentAudioObject.play();if(this.courseVolume){componentAudioObject.volume=volume/100;}}catch(msg){_log('ERROR playing sound',msg);}},stopComponentSound:function(soundPath,sender){this.stopAllComponentsSounds();var componentAudioObject=this.componentSoundsContainer.find('audio[soundpath="'+soundPath+'"]')[0];try{var volume=sender.model.get('volume');componentAudioObject.pause();componentAudioObject.currentTime=0;if(this.courseVolume){componentAudioObject.volume=volume/100;}}catch(msg){_log('ERROR pause sound',msg);}},pauseComponentSound:function(soundPath,sender){var componentAudioObject=this.componentSoundsContainer.find('audio[soundpath="'+soundPath+'"]')[0];try{componentAudioObject.pause();}catch(msg){_log('ERROR pause sound',msg);}},preparePageSound:function(soundPath){this.pageSound.html('');var sourceMP3,sourceOgg;sourceMP3=$('<source/>',{type:'audio/mpeg',src:soundPath});var soundPathOGG=soundPath.substring(0,soundPath.length-3)+"ogg";sourceOGG=$('<source/>',{type:'audio/ogg',src:soundPathOGG});sourceMP3.appendTo(this.pageSound);sourceOGG.appendTo(this.pageSound);try{this.pageSound[0].load();this.pageSound[0].play();this.pageSound[0].pause();}catch(msg){_log('ERROR playing sound',msg);}},playPageSound:function(sender){try{var volume=sender.model.get('options').get('volume');_log('volume',volume)
this.pageSound[0].play();if(this.courseVolume){this.pageSound[0].volume=volume/100;}}catch(msg){_log('ERROR playing sound',msg);}},prepareProjectSound:function(soundPath){this.projectSound.html('');var sourceMP3,sourceOgg;sourceMP3=$('<source/>',{type:'audio/mpeg',src:soundPath});var soundPathOGG=soundPath.substring(0,soundPath.length-3)+"ogg";sourceOGG=$('<source/>',{type:'audio/ogg',src:soundPathOGG});sourceMP3.appendTo(this.projectSound);sourceOGG.appendTo(this.projectSound);if(ProjectModel.instance.get('options').get('sound_loop')){this.projectSound.attr('loop','true');}
try{this.projectSound[0].load();this.projectSound[0].play();this.projectSound[0].pause();}catch(msg){_log('ERROR playing sound',msg);}},playProjectSound:function(sender){try{var volume=sender.get('options').get('sound_vol');_log('volume',volume);this.projectSound[0].play();if(this.courseVolume){this.projectSound[0].volume=volume/100;}}catch(msg){_log('ERROR playing sound',msg);}},stopAllSounds:function(){try{this.stopAllComponentsSounds();this.pageSound[0].pause();}catch(e){_log('Error...',e,_log.error)}}});;;var TriggerController=Backbone.Controller.extend({initialize:function(){},setPageModel:function(model){this.model=model;},setProjectModel:function(model){this.projectModel=model;ProjectModel.instance=model;},execute:function(whattodo,sender,objs,opts,e,whenopts,whendoit){var type=sender.model.get('type');switch(type){case'video':switch(whendoit){case'onVideoLoaded':if(this[whattodo]){this[whattodo](sender,objs,opts,e);}
break;case'onVideoEnded':if(this[whattodo]){this[whattodo](sender,objs,opts,e);}
break;case'onVideoTimeUpdate':var video=whenopts.video==undefined?{}:whenopts.video;var time1=parseFloat(video.time1);var time2=parseFloat(video.time2);var currentTime=e.currentTarget.currentTime;if(currentTime>=time1&&currentTime<=time2){if(!opts.video.isExecuted){if(this[whattodo]){this[whattodo](sender,objs,opts,e);}}
opts.video.isExecuted=true;}
break;default:if(this[whattodo]){this[whattodo](sender,objs,opts,e);}
break;}
break;default:if(this[whattodo]){this[whattodo](sender,objs,opts,e);}
break;}},checkConditions:function(sender,conditions){var _that=this;_log('COND',conditions,_log.error);if(conditions.length===0){return true;}
var resultArray=[];for(var c=0;c<conditions.length;c++){var conditionPassed=true;var valueToCompare;if(conditions[c].actionType==="variable"){valueToCompare=_that.getVariableByHash(conditions[c].compareValue).pvarvalue;}else{valueToCompare=conditions[c].compareValue;}
if(typeof _that.getVariableByHash(conditions[c].variable)==="object"){var variableLeftSide=_that.getVariableByHash(conditions[c].variable).pvarvalue;}else{continue;}
var compareAction=conditions[c].action.split('-');switch(compareAction[1]){case'equals':if(!(variableLeftSide==valueToCompare)){conditionPassed=false;}
break;case'lessthan':_log('LESSTHAN',parseFloat(variableLeftSide));_log('LESSTHAN','<');_log('LESSTHAN',parseFloat(valueToCompare));if(!(parseFloat(variableLeftSide)<parseFloat(valueToCompare))){conditionPassed=false;}
break;case'greaterthan':if(!(parseFloat(variableLeftSide)>parseFloat(valueToCompare))){conditionPassed=false;}
case'greaterthanorequal':if(!(parseFloat(variableLeftSide)>=parseFloat(valueToCompare))){conditionPassed=false;}
break;case'lessthanorequal':if(!(parseFloat(variableLeftSide)<=parseFloat(valueToCompare))){conditionPassed=false;}
break;case'modulo':if(!(parseFloat(variableLeftSide)%2==parseFloat(valueToCompare))){conditionPassed=false;}
break;}
var andArray=[];if(c!==0){if(conditions[c-1].andor==="and"||conditions[c-1].andor===""){andArray=resultArray[resultArray.length-1];}}
andArray.push(conditionPassed);if(c===0){resultArray.push(andArray);}else{if(conditions[c-1].andor==="and"){resultArray[resultArray.length-1]=andArray;}else{resultArray.push(andArray);}}}
var allOrConditions=[];for(var r in resultArray){var orValue=true;for(var andR in resultArray[r]){if(resultArray[r][andR]===false){orValue=false;}}
allOrConditions.push(orValue);}
_log('CONDITIONS',allOrConditions);if(allOrConditions.indexOf(true)!==-1){return true;}else{return false;}},showLine:function(sender,objs,opts){var componentsModels=this.getLineComponentsModels(objs);componentsModels.each(function(cModel){cModel.view.showComponentWithTrigger(opts);});var rowsModel=[];var linesNames=[];var linesId=objs;var pageTimelineRows=this.model.get('lines');pageTimelineRows.each(function(rowModel){var rowId=rowModel.get('options').get('id').toString();if(_.indexOf(linesId,rowId)!==-1){rowsModel.push(rowModel);}});for(var i=0;i<rowsModel.length;i++){var rowModel=rowsModel[i];var rOptions=rowModel.get('options');linesNames.push(rOptions.get('rowName')||rowModel.collection.indexOf(rowModel)+1);};var lines=linesNames.join(',');ProjectModel.instance.changeProjectStaticVariable('_current_lines','['+lines+']');},hideLine:function(sender,objs,opts){var componentsModels=this.getLineComponentsModels(objs);componentsModels.each(function(cModel){cModel.view.hideComponentWithTrigger(opts);});},showObject:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.showComponentWithTrigger(opts);});},makeTransition:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.makeTransition(opts);});},changeStyle:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.changeStyle(opts);});},playVideo:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.playVideo(opts);});},stopVideo:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.stopVideo(opts);});},pauseVideo:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.pauseVideo(opts);});},goToPositionVideo:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.goToPositionVideo(opts);});},showObjectAndFocus:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.showComponentWithTrigger(opts);});},hideObject:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.hideComponentWithTrigger(opts);});},gotopage:function(sender,objs,opts){var pageModel=this.getPageByID(objs);if(pageModel){this.projectModel.trigger('go-to-page-model',pageModel);}},goToPage:function(data){var pageIndex=parseInt(data.pageIndex);var pageModel=this.projectModel.get('pages').at(pageIndex);if(pageModel){this.projectModel.trigger('go-to-page-model',pageModel);}},gotonextpage:function(sender,objs,opts){this.projectModel.trigger("go-to-next-page");},gotoprevpage:function(sender,objs,opts){this.projectModel.trigger("go-to-previous-page");},playobjectsound:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.playComponentAudio();});},pauseobjectsound:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.pauseComponentAudio();});},stopobjectsound:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.stopComponentAudio();});},unlockpagenavigation:function(sender,objs,opts){StageView.instance.unlockNavigationButtons();},resetquestions:function(sender,objs,opts){},changevarvalue:function(sender,objs,opts,e){if(e){e.blockPoints=_.isUndefined(e.blockPoints)?false:e.blockPoints;if(e.blockPoints){return;}}
var variableData=objs;if(_.isObject(variableData)){var decimalPlaces=0;var variableDataValue=variableData.varValue;var variable=this.getVariableByHash(variableData.varName);if(!isNaN(variable.pvarvalue)){variable.pvarvalue=parseFloat(variable.pvarvalue);}
if(!isNaN(variableData.varValue)){decimalPlaces=this.getDecimalPlaces(variableData.varValue);variableDataValue=parseFloat(variableDataValue);}
switch(variableData.varAction){case'add':this.setProjectVariableValue(variableData.varName,variable.pvarvalue+variableDataValue,decimalPlaces);break;case'subtract':this.setProjectVariableValue(variableData.varName,variable.pvarvalue-variableDataValue,decimalPlaces);break;case'changevalue':this.setProjectVariableValue(variableData.varName,variableDataValue,decimalPlaces);break;case'addonce':if(variableData.done!==true){this.setProjectVariableValue(variableData.varName,variable.pvarvalue+variableDataValue,decimalPlaces);variableData.done=true;}
break;case'subtractonce':if(variableData.done!==true){this.setProjectVariableValue(variableData.varName,variable.pvarvalue-variableDataValue,decimalPlaces);variableData.done=true;}
break;case'changevalueonce':if(variableData.done!==true){this.setProjectVariableValue(variableData.varName,variableDataValue,decimalPlaces);variableData.done=true;}
break;}}},getDecimalPlaces:function(n){var s=n;var match=/(?:\.(\d+))?(?:[eE]([+\-]?\d+))?$/.exec(s);if(!match){return 0;}
return Math.max(0,(match[1]=='0'?0:(match[1]||'').length)
-(match[2]||0));},setProjectVariableValue:function(varID,varValue,decimalPlaces){var _that=this;var variable;if(varID.length===32){decimalPlaces=decimalPlaces||0;variable=_that.getVariableByHash(varID);if(_.isObject(variable)){if(!isNaN(varValue)){varValue=varValue.toFixed(decimalPlaces);if(this.getDecimalPlaces(varValue)>2){varValue=varValue.toFixed(2);}}
variable.pvarvalue=varValue;}
if(varID==='00000000000000000000000000000000'){_that.calculatePrecentScore();}
if(varID==='00000000000000000000000000000003'){var darkanCourseAplicationAPI=DarkanCourseAplicationAPI.getInstance();darkanCourseAplicationAPI.diamondsChanged({variable:variable});}}
this.projectModel.get('options').trigger('change');this.trigger('check-course-status');},calculatePrecentScore:function(){var maxScore=parseInt(this.getVariableByHash('00000000000000000000000000000001').pvarvalue);var score=parseInt(this.getVariableByHash('00000000000000000000000000000000').pvarvalue);var percentScore=this.getVariableByHash('00000000000000000000000000000002');if(maxScore==0){percentScore.pvarvalue=0;}else{percentScore.pvarvalue=(score / maxScore*100).toFixed(0);}
if(maxScore==0&&score>maxScore){percentScore.pvarvalue=100;}
if(percentScore.pvarvalue<0){percentScore.pvarvalue=0;}
if(percentScore.pvarvalue>100){percentScore.pvarvalue=100;}},getVariableByHash:function(hash){var _that=this;var staticVariables=this.projectModel.get('options').get('staticVariables');for(var i=0;i<staticVariables.length;i++){if(staticVariables[i].varhash===hash){return staticVariables[i];}}
var projectVariables=this.projectModel.get('options').get('projectVariables');for(var i=0;i<projectVariables.length;i++){if(projectVariables[i].varhash===hash){return projectVariables[i];}}
return false;},getComponentModelByActionkey:function(actionkeys){var _that=this;var foundModels=new ComponentsCollection();var pageTimelineRows=this.model.get('lines');pageTimelineRows.each(function(rowModel){var rowComponents=rowModel.get('objects');rowComponents.each(function(cModel){if(_.indexOf(actionkeys,cModel.get('actionkey'))!==-1){foundModels.add(cModel);}});});return foundModels;},getLineComponentsModels:function(linesId){var _that=this;var foundModels=new ComponentsCollection();var pageTimelineRows=this.model.get('lines');pageTimelineRows.each(function(rowModel){var rowId=rowModel.get('options').get('id').toString();if(_.indexOf(linesId,rowId)!==-1){var rowComponents=rowModel.get('objects');rowComponents.each(function(cModel){foundModels.add(cModel);});}});return foundModels;},getLineComponentsModelsByLineIndex:function(index){var _that=this;var foundModels=new ComponentsCollection();var pageTimelineRows=this.model.get('lines');var rowModel=pageTimelineRows.at(index);if(rowModel){foundModels=rowModel.get('objects');}
return foundModels;},getPageByID:function(pagesIdArray){var _that=this;var foundModel=undefined;var pages=this.projectModel.get('pages');pages.each(function(pageModel){var _pageId=pageModel.get('options').get('pageid').toString();if(_.indexOf(pagesIdArray,_pageId)!==-1){foundModel=pageModel;return;}});return foundModel;},goToLink:function(sender,objs,opts){var link=opts.link;link
var _target='_blank';var address='';if(_.isObject(link)){_target=link._target||_target;address=link.link;}else{address=link;}
address=Utils.validateUrl(address);window.open(address,_target);},checkExercise:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.validateQuestion(sender);});},checkAllExercises:function(sender,objs,opts){var componentsModels=ProjectModel.instance.getExercisesComponents();componentsModels.each(function(cModel){cModel.view.validateQuestion(sender);});this.trigger('check-course-status');},resetAllExercises:function(sender,objs,opts){var componentsModels=ProjectModel.instance.getExercisesComponents();componentsModels.each(function(cModel){cModel.view.resetExerciseApproach(sender);});this.trigger('check-course-status');},startTimer:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.startTimer();});},stopTimer:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.stopTimer();});},resetTimer:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.resetTimer();});},resetAllTimers:function(sender,objs,opts){var componentsModels=ProjectModel.instance.getTimerComponents();componentsModels.each(function(cModel){cModel.view.resetTimer();});},showNextLine:function(sender,objs,opts){if(!sender.lineIndex){sender.lineIndex=0;}
var disableComponents=objs.disableComponents;this.showComponentsAtLine(sender.lineIndex);var lines=sender.model.get('lines');if(sender.lineIndex<lines.length){sender.lineIndex++;}},showComponentsAtLine:function(lineIndex){var componentsModels=this.getLineComponentsModelsByLineIndex(lineIndex);componentsModels.each(function(cModel){cModel.view.delayAndShowComponent();});},resetExerciseApproach:function(sender,objs,opts){var componentsModels=this.getComponentModelByActionkey(objs);componentsModels.each(function(cModel){cModel.view.resetExerciseApproach();});},})
TriggerController.instance=new TriggerController();;;var ComponentModel=Backbone.Model.extend({defaults:function(){return{actionkey:null,type:"",x:10,y:10,compl:0,action:99,width:0,height:0,draggable:true,aspectRatio:false,aspectRatioProportions:0,'require-credit':false,'credit-points':0,'selected-by':-1,triggers:[],'point-sound':'','volume':100,autoplaySound:true,title:'',wcag:false,wcagMessage:'',lifetime:0,showtime:0,hidden:false,locked:false,flipX:'xnormal',flipY:'ynormal',opacity:1,animations:{animIn:{animationName:'none',animationPrettyName:'none',animationTime:1.3},animOut:{animationName:'none',animationPrettyName:'none',animationTime:1.3},animOver:{animationName:'none',animationPrettyName:'none',animationTime:1.3},animEndless:{animationName:'none',animationPrettyName:'none',animationTime:1.3}}}},initFromJSON:function(json){},});var ComponentsCollection=Backbone.Collection.extend({model:ComponentModel});;;var TimelineRowOptionsModel=Backbone.Model.extend({defaults:{id:0,visible:true,active:false}});var TimelineRowModel=Backbone.Model.extend({defaults:{objects:new ComponentsCollection(),options:new TimelineRowOptionsModel(),type:'line',action:''}});var TimelineRowCollection=Backbone.Collection.extend({model:TimelineRowModel});;;var PageOptions=Backbone.Model.extend({defaults:function(){return{opacity:1,pagename:"",name:"",bgcolor:"",width:860,height:500,bg_pos_x:0,bg_pos_y:0,active:1,pageid:0,order:0,soundfilename:"",volume:100,locknavi:false,locknavitrigger:false,lockscroll:false,'page-end-action':"none",image:"",note:"",lastLineId:0,lastComponentId:0,slideTime:60,activeComponent:null,triggers:[],title:'',wcag:'',stageLifetime:60,selectedBy:[],timeOnPage:0,goToNextPage:false,highlightButtons:true}},});var PageModel=Backbone.Model.extend({isLoaded:false,defaults:{options:new PageOptions(),lines:new TimelineRowCollection(),draw:[]},exercisesComponents:null,initialize:function(){},getPageBackgroundPath:function(){var path=false;if(this.get('options').get('image')!==''){path=__meta__.directLocation+'exported_view/'+this.get('options').get('pageid')+'/imgpage/'+this.get('options').get('image');}
return path;},getPageSoundPath:function(){var pageSound=this.get('options').get('soundfilename');if(pageSound.length){var audioSrc=__meta__.directLocation+'exported_view/'+this.get('options').get('pageid')+'/audio/page/'+pageSound;return audioSrc;}
return false;},getAssetsToLoad:function(){var _that=this;var assets=[];var allPageComponents=this.getAllPageComponents();allPageComponents.each(function(componentModel){var componentView=componentModel.view;var componentAssets=componentView.getAssets();if(componentAssets){assets=assets.concat(componentAssets);}});var pageBackground=this.getPageBackgroundPath();if(pageBackground){assets.push(pageBackground);}
return assets;},getAllPageComponents:function(){var pageComponents=new ComponentsCollection();var pageTimelineRows=this.get('lines');pageTimelineRows.each(function(rowModel){var objects=rowModel.get('objects');objects.each(function(cModel){pageComponents.add(cModel);});});return pageComponents;},getComponentsByType:function(type){var componentsCollection=new ComponentsCollection();var linesCollection=this.get('lines');linesCollection.each(function(rowModel){var objects=rowModel.get('objects');objects.each(function(cModel){if(_.isString(type)){if(cModel.get('type')==type){componentsCollection.add(cModel);}}else{if(_.isArray(type)){for(var i=type.length-1;i>=0;i--){var t=type[i];if(cModel.get('type')==t){componentsCollection.add(cModel);break;}};}}});});return componentsCollection;},getExercisesComponents:function(){return this.exercisesComponents||(this.exercisesComponents=this.getComponentsByType(['quiz','quiz-dnd','quiz-selectone','quiz-connectlines','quiz-inputtext','quiz-select','form-inputtext','form-textarea','form-select','form-radio','form-checkbox','crossword','quiz-wordsearch']));},getPassedQiuzComponents:function(){var componentsCollection=new ComponentsCollection();var exercisesComponents=this.getExercisesComponents();exercisesComponents.each(function(cModel){if(cModel.get('compl')==1){componentsCollection.add(cModel);}});return componentsCollection;},getFailedQiuzComponents:function(){var componentsCollection=new ComponentsCollection();var exercisesComponents=this.getExercisesComponents();exercisesComponents.each(function(cModel){if(cModel.get('compl')==2){componentsCollection.add(cModel);}});return componentsCollection;},});var PageCollection=Backbone.Collection.extend({model:PageModel});;;var ProjectOptions=Backbone.Model.extend({defaults:{userScore:0,courseStatus:'incomplete',autoScale:false,showLessonLocationPopup:1,useLessonLocationDefaultPopupDescription:true,showLessonLocationCloseButtonPopup:true,lessonLocationPopupDescription:'',}});var ProjectModel=Backbone.Model.extend({defaults:{options:new ProjectOptions(),pages:new PageCollection()},exercisesComponents:null,initialize:function(data){this.loadProject();},isAutoScale:function(){return this.get('options').get('autoScale');},initFromJSON:function(data){},loadProject:function(data){var data=ProjectObject;var pagesCollection=new PageCollection();var projectOptions=new ProjectOptions(data.options);var pages=data.pages;this.set('options',projectOptions);var pagesDraws=projectOptions.get('pagesDraws');if(pages!=undefined){for(var i=0;i<pages.length;i++){var page=pages[i];var newPageModel=this.createPageModel(page);pagesCollection.add(newPageModel);};}
this.set('pages',pagesCollection);if(pagesDraws&&pagesDraws.length>0){if(pages!=undefined){for(var item in pagesDraws){var pagesDraw=pagesDraws[item];var opts=pagesDraw.opts;var amountToDraw=parseInt(opts.amountToDraw);var pagesToDraw=pagesDraw.pagesToDraw;if(amountToDraw>pagesToDraw.length){amountToDraw=pagesToDraw.length;}
var pickedPages=Utils.getRandomArrayElements(pagesToDraw,amountToDraw);_log('pages',pages);_log('pickedPages',pickedPages);var difference=_.difference(pagesToDraw,pickedPages);_log('difference',difference);for(var i=0;i<difference.length;i++){var pageId=difference[i];var newPageModel=this.getPageModelByPageId(pageId);if(newPageModel){pagesCollection.remove(newPageModel);}};}}}
this.changeProjectStaticVariable('_all_slide_numbers',pagesCollection.length);var quizComponents=ProjectModel.instance.getExercisesComponents();var passedQuizComponents=ProjectModel.instance.getPassedQiuzComponents();var failedQuizComponents=ProjectModel.instance.getFailedQiuzComponents();ProjectModel.instance.changeProjectStaticVariable('_qiuz_count',quizComponents.length);ProjectModel.instance.changeProjectStaticVariable('_passed_qiuz_count',passedQuizComponents.length);ProjectModel.instance.changeProjectStaticVariable('_failed_qiuz_count',failedQuizComponents.length);delete ProjectObject;},getPageModelByPageId:function(pageId){var pages=this.get('pages');var newPageModel=false;pages.each(function(pModel){if(pModel.get('options').get('pageid')==pageId){newPageModel=pModel;}});return newPageModel;},createPageModel:function(page){TriggerController.instance.setProjectModel(this);var timelineRowCollection=new TimelineRowCollection();var lines=page.lines;var options=page.options;if(lines!=undefined){for(var j=0;j<lines.length;j++){var line=lines[j];var singleRow=new TimelineRowModel({objects:new ComponentsCollection([]),options:new TimelineRowOptionsModel(line.options)});if(line.options.active){options.activeRow=singleRow;}
var objects=line.objects;for(var k=0;k<objects.length;k++){var object=objects[k];var componentModel=new ComponentModel(object);var componentView=ComponentFactory.createComponentByType(componentModel.get('type'),componentModel);componentModel.view=componentView;singleRow.get('objects').add(componentModel);};timelineRowCollection.add(singleRow);};}
var pageOptions=new PageOptions(options);var newPageModel=new PageModel({lines:timelineRowCollection,options:pageOptions});return newPageModel;},getAssetsToLoad:function(){var pagesCollection=this.get('pages');var assets=[];pagesCollection.each(function(pageModel){assets.push(pageModel.getAssetsToLoad());});return assets;},getAllComponents:function(){var componentsCollection=new ComponentsCollection();var pagesCollection=this.get('pages');pagesCollection.each(function(pageModel){var linesCollection=pageModel.get('lines');linesCollection.each(function(rowModel){var objects=rowModel.get('objects');objects.each(function(cModel){componentsCollection.add(cModel);});});});return componentsCollection;},getComponentsByType:function(type){var componentsCollection=new ComponentsCollection();var pagesCollection=this.get('pages');pagesCollection.each(function(pageModel){var linesCollection=pageModel.get('lines');linesCollection.each(function(rowModel){var objects=rowModel.get('objects');objects.each(function(cModel){if(_.isString(type)){if(cModel.get('type')==type){componentsCollection.add(cModel);}}else{if(_.isArray(type)){for(var i=type.length-1;i>=0;i--){var t=type[i];if(cModel.get('type')==t){componentsCollection.add(cModel);break;}};}}});});});return componentsCollection;},getTimerComponents:function(){return this.getComponentsByType('timer');},getInfoPointsSoundComponents:function(){return this.getComponentsByType('infopoint-sound');},getExercisesComponents:function(){return this.exercisesComponents||(this.exercisesComponents=this.getComponentsByType(['quiz','quiz-dnd','quiz-selectone','quiz-connectlines','quiz-inputtext','quiz-select','form-inputtext','form-textarea','form-select','form-radio','form-checkbox','crossword','quiz-wordsearch']));},getPassedQiuzComponents:function(){var componentsCollection=new ComponentsCollection();var exercisesComponents=this.getExercisesComponents();exercisesComponents.each(function(cModel){if(cModel.get('compl')==1){componentsCollection.add(cModel);}});return componentsCollection;},getFailedQiuzComponents:function(){var componentsCollection=new ComponentsCollection();var exercisesComponents=this.getExercisesComponents();exercisesComponents.each(function(cModel){if(cModel.get('compl')==2){componentsCollection.add(cModel);}});return componentsCollection;},getTimerComponentsById:function(timerId){var timerComponentsCollection=this.timerComponentsCollection=this.timerComponentsCollection==undefined?this.getTimerComponents():this.timerComponentsCollection;var componentsCollection=new ComponentsCollection();timerComponentsCollection.each(function(cModel){if(cModel.get('timerId')==timerId){componentsCollection.add(cModel);}});return componentsCollection;},getProjectVariableByHash:function(hash){var projectVariables=this.get('options').get('projectVariables');var variables=_.where(projectVariables,{varhash:hash});if(variables.length==0){var staticVariables=this.get('options').get('staticVariables');variables=_.where(staticVariables,{varhash:hash});}
_log('variables',variables);return _.first(variables);},getScoreVariable:function(){return this.getProjectVariableByHash('00000000000000000000000000000000');},changeProjectStaticVariable:function(pvarname,value){if(pvarname==undefined){return false;}
if(value==undefined){return false;}
var options=this.get('options');var staticVariables=options.get('staticVariables');variables=_.where(staticVariables,{pvarname:pvarname});var variable=_.first(variables);if(!variable){return false;}
variable.pvarvalue=value;options.trigger('change');return variable;},getProjectSoundPath:function(){var projectSound=this.get('options').get('soundfilename');if(projectSound&&projectSound!=''){var audioSrc=__meta__.directLocation+'exported_view/projectsound/'+projectSound;return audioSrc;}
return false;}});;;var TimelineController=Backbone.Controller.extend({initialize:function(){},setModel:function(data){this.model=data.model;this.stage=data.stage;},run:function(){var _that=this;var pageTimelineRows=this.model.get('lines');var rowDelay=0;this.pageComponents=new ComponentsCollection();pageTimelineRows.each(function(rowModel,i){rowDelay+=parseFloat(rowModel.get('options').get('delay'));var rowModel=pageTimelineRows.at(pageTimelineRows.length-i-1);var rowComponents=rowModel.get('objects');rowComponents.each(function(cModel,j){var cModel=rowComponents.at(rowComponents.length-j-1);var componentView=cModel.view;var screenComponent=componentView.render().$el;_that.stage.$el.append(screenComponent);screenComponent.hide();componentView.prepareComponent();componentView.afterRender();cModel.view=componentView;_that.pageComponents.add(cModel);});});this.pageComponents.each(function(cModel){cModel.view.delayAndShowComponent();});this.pageComponents.each(function(cModel){cModel.view.allObjectsAreInitialized();});return{components:this.pageComponents,lines:pageTimelineRows};},destroy:function(){if(!this.model){return;}
var pageTimelineRows=this.model.get('lines');pageTimelineRows.each(function(rowModel,i){try{var rowComponents=rowModel.get('objects');rowComponents.each(function(cModel){cModel.view.destroy();});}catch(err){_log('timeline destroy',err);}});}});;;var StageView=Backbone.View.extend({el:$('#stage-content'),stageWrapper:$('#stage'),progressBar:$('#page-load-progress'),allPageComponents:new ComponentsCollection(),soundController:null,projectSoundLaunched:false,timeOnPage:0,triggersArray:[],lineIndex:0,wcagTabIndex:98,wcagTabIndexDefault:98,lastActiveWcagIndex:0,events:{'play-component-audio':'playComponentAudio','stop-component-audio':'stopComponentAudio','pause-component-audio':'pauseComponentAudio','scroll-top':'scrollTop',},checkCourseStatus:function(){this.trigger('check-course-status');},initialize:function(){var _that=this;window.onresize=function(){_that.renderDimentions();};this.timeline=new TimelineController();$(window).focus(function(){_that.pageHandlerTimer('start',_that.model);});$(window).blur(function(){_that.pageHandlerTimer('stop',_that.model);});},scrollTop:function(e,data){this.stageWrapper.animate({scrollTop:parseInt(data.scrollTopValue)},{duration:data.scrollTime*1000,easing:'easeInOutQuart'});},playComponentAudio:function(e,soundPath,sender){this.soundController.playComponentSound(soundPath,sender);},stopComponentAudio:function(e,soundPath,sender){this.soundController.stopComponentSound(soundPath,sender);},pauseComponentAudio:function(e,soundPath,sender){this.soundController.pauseComponentSound(soundPath,sender);},pageHandlerTimer:function(cmd,pageModel){var _that=this;switch(cmd){case'start':this.timeIsCounting=true;var date=new Date();this.timeOnPage=date.getTime();break;case'stop':this.timeIsCounting=false;var date=new Date();var time=date.getTime();if(!pageModel){return;}
var pageTime=!isNaN(pageModel.get('options').get('timeOnPage'))?parseInt(pageModel.get('options').get('timeOnPage')):0;var newTime=parseInt(pageTime+((time-this.timeOnPage)/ 1000));pageModel.get('options').set('timeOnPage',newTime);break;}},resetSounds:function(pageModel){this.soundController.stopAllSounds();this.soundController.clearComponentsSounds();this.prepareSounds(pageModel);},prepareSounds:function(pageModel){var pageSound=this.getPageSoundPath(pageModel);if(pageSound){this.soundController.preparePageSound(pageSound);}
if(!this.projectSoundLaunched){var projectSound=this.getProjectSoundPath();if(projectSound){this.soundController.prepareProjectSound(projectSound);this.soundController.playProjectSound(ProjectModel.instance);}
this.projectSoundLaunched=true;}
this.allPageComponents=this.getAllPageComponents(pageModel);this.prepareComponentSound(this.allPageComponents);},beforeLoadPage:function(pageModel){this.resetSounds(pageModel);this.destroyStage();this.closeFeedbackWindows();this.renderDimentions(pageModel);this.$el.trigger('stage-model-changed',[pageModel]);this.trigger('on-before-page-load',pageModel);},loadPage:function(pageModel){var _that=this;this.resetSounds(pageModel);this.destroyStage();this.closeFeedbackWindows();this.renderDimentions(pageModel);this.$el.trigger('stage-model-changed',[pageModel]);this.trigger('on-before-page-load2',pageModel);},loadPage2:function(pageModel){var _that=this;this.onPageLoadCompleted(pageModel);},loadPage3:function(pageModel){var _that=this;this.resetSounds(pageModel);this.onPageLoadCompleted(pageModel);},onPageLoadCompleted:function(pageModel){var _that=this;this.wcagTabIndex=this.wcagTabIndexDefault;this.lastActiveWcagIndex=0;if(this.timeOnPage!==0){if(!this.previousPageModel){this.previousPageModel=this.model;}
this.pageHandlerTimer('stop',this.previousPageModel);}
this.model=pageModel;this.lineIndex=0;this.turnOffListeners();this.unhighlightNavigationButtons();var locknavi=pageModel.get('options').get('locknavi');if(locknavi){this.lockNavigationButtons();}else{this.unlockNavigationButtons();}
this.pageHandlerTimer('start',pageModel);this.setModel(pageModel);TriggerController.instance.setPageModel(pageModel);this.render();this.$el.attr('anim','showpage');clearTimeout(this.showAnimationTimeout);this.showAnimationTimeout=setTimeout(function(){_that.$el.attr('anim','hidepage');},200);var pageSound=this.getPageSoundPath(pageModel);if(pageSound){this.soundController.playPageSound(this);}
this.renderBackgroundColor();this.renderBackgroundImage();this.setPageAsCompleted(this.model);this.startPageLiveTimer();var pageIndex=this.model.collection.indexOf(this.model);var darkanCourseAplicationAPI=DarkanCourseAplicationAPI.getInstance();darkanCourseAplicationAPI.pageSelected({pageIndex:pageIndex});var timelineElements=this.timeline.run();this.applyTriggers();this.trigger('onPageLoaded');this.selectFirstWcagElement();this.previousPageModel=pageModel;var result=ProjectModel.instance.changeProjectStaticVariable('_slide_number',(pageIndex+1).toString());ProjectModel.instance.changeProjectStaticVariable('_components_in_page_count',timelineElements.components.length);ProjectModel.instance.changeProjectStaticVariable('_lines_in_page_count',timelineElements.lines.length-1);ProjectModel.instance.changeProjectStaticVariable('_passed_qiuz_on_stage_count',this.model.getPassedQiuzComponents().length);ProjectModel.instance.changeProjectStaticVariable('_failed_qiuz_on_stage_count',this.model.getFailedQiuzComponents().length);ProjectModel.instance.changeProjectStaticVariable('_qiuz_on_stage_count',this.model.getExercisesComponents().length);_log('result',result);},selectFirstWcagElement:function(){var firstElement=this.$el.find('[tabindex=1]');var tabindexes=$("[tabindex]").map(function(){return this.tabIndex;}).get();var lowest=Math.min.apply(Math,tabindexes);$("[tabindex="+lowest+"]").focus();},selectLastActiveWcagElement:function(){var firstElement=this.$el.find('[tabindex='+this.lastActiveWcagIndex+']');if(firstElement.push()>0){firstElement.focus();}},prepareComponentSound:function(allPageComponents){var _that=this;allPageComponents.each(function(componentModel){var componentView=componentModel.view;var componentSound=componentView.getComponentSoundFile();if(componentSound){var sound=_that.soundController.prepareComponentSound(componentSound,componentView);if(sound){componentView.addSoundListener(sound);}}});},unhighlightNavigationButtons:function(){$('#next').attr('highlight',false);$('#previous').attr('highlight',false);},lockNavigationButtons:function(){$('#next').attr('locked',true);$('#previous').attr('locked',true);},unlockNavigationButtons:function(){if(this.isOneScreen()){$('#previous').attr('locked',true);$('#next').attr('locked',true);}else{if(this.isFirstScreen()){$('#previous').attr('locked',true);$('#next').attr('locked',false);}else if(this.isLastScreen()){$('#previous').attr('locked',false);$('#next').attr('locked',true);}else{$('#previous').attr('locked',false);$('#next').attr('locked',false);}}},isOneScreen:function(){return this.model.collection.length>1?false:true;},isFirstScreen:function(){var index=this.model.collection.indexOf(this.model);return index==0?true:false;},isLastScreen:function(){var index=this.model.collection.indexOf(this.model);return(index==this.model.collection.length-1)?true:false;},checkElOnFunction:function(funName){var arr=['click','mouseenter','mouseleave'];var exist=arr.indexOf(funName);return exist==-1?false:true;},checkIfKeybordFunction:function(funName){var arr=['keydown'];var exist=arr.indexOf(funName);return exist==-1?false:true;},checkKeyboardCondition:function(e,opts){var opts=opts||{};var keyboard=opts.keyboard||{};var key=keyboard.key||'';return e.which==key?true:false;},checkCondition:function(conditions){return TriggerController.instance.checkConditions(this,conditions);},checkIfHideComponents:function(triggerAction){for(var j=0;j<triggerAction.length;j++){var action=triggerAction[j];var whattodo=action.whattodo;if(whattodo=='showNextLine'){this.hideAllLines();}}},hideAllLines:function(){var lines=this.model.get('lines');lines.each(function(rowModel){rowModel.get('objects').each(function(cModel){setTimeout(function(){cModel.view.hideComponent();},0);});});},hideAllLinesWithOutFirst:function(){var lines=this.model.get('lines');lines.each(function(rowModel,i){if(i>0){rowModel.get('objects').each(function(cModel){setTimeout(function(){cModel.view.hideComponent();},0);});}});},applyTriggers:function(){var _that=this;var triggers=this.model.get('options').get('triggers');var i=0;var applyTrigger=function(){if(i==triggers.length){return;}
var trigger=triggers[i];var whendoit=trigger.whendoit;var opts=trigger.opts;var conditions=trigger.conditions;var elseactions=trigger.elseactions;var subtriggers=trigger.subtriggers;_that.checkIfHideComponents(subtriggers);_that.checkIfHideComponents(elseactions);var isKeyboardFunction=_that.checkIfKeybordFunction(whendoit);if(isKeyboardFunction){var subtriggerAction=function(e){var condition=_that.checkCondition(conditions);var keybordCondition=_that.checkKeyboardCondition(e,opts);if(keybordCondition){if(condition){_that.runTriggerAction(subtriggers,e);}else{_that.runTriggerAction(elseactions,e);}}}
_that.triggersArray.push({el:true,whendoit:whendoit,action:subtriggerAction});$(document).on(whendoit,subtriggerAction);_that.$el.focus();}else{var exist=_that.checkElOnFunction(whendoit);if(exist){var subtriggerAction=function(e){var condition=_that.checkCondition(conditions);if(condition){_that.runTriggerAction(subtriggers,e,opts);}else{_that.runTriggerAction(elseactions,e,opts);}}
_that.triggersArray.push({el:true,whendoit:whendoit,action:subtriggerAction});_that.$el.on(_that.mapWhenDoIt(whendoit),subtriggerAction);}else{var elseAction=function(e){var condition=_that.checkCondition(conditions);if(condition){_that.runTriggerAction(subtriggers,e,opts);}else{_that.runTriggerAction(elseactions,e,opts);}}
_that.triggersArray.push({el:false,whendoit:whendoit,action:elseAction});_that.on(whendoit,elseAction);}}
i++;applyTrigger();};applyTrigger();},mapWhenDoIt:function(whendoit){switch(whendoit){case'mouseenter':return'mouseenter touchstart';break;case'mouseleave':return'mouseleave touchend';break;default:return whendoit;break;}},runTriggerAction:function(triggerAction,e,whenopts){for(var j=0;j<triggerAction.length;j++){var action=triggerAction[j];var whattodo=action.whattodo;var objs=action.objs;var opts=action.opts;var delay=parseFloat(action.opts.delay);if(_.isNumber(delay)&&delay>0){(function(whattodo,_this,objs,opts){setTimeout(function(){TriggerController.instance.execute(whattodo,_this,objs,opts,e,whenopts);},delay*1000);})(whattodo,this,objs,opts,whenopts);}else{TriggerController.instance.execute(whattodo,this,objs,opts,e,whenopts);}}},addTimer:function(){var timer=$('<div>0</div>');timer.css({position:'absolute',top:'0px',left:'0px',width:'100px',height:'30px'});this.$el.append(timer);var time=0;setInterval(function(e){time++;timer.text(time)},1000)},getAssetsToLoad:function(){return this.model.getAssetsToLoad();},render:function(){var _that=this;this.$el.html("");return this;},renderBackgroundColor:function(){var bgcolor=this.model.get('options').get('bgcolor');bgcolor!==''?bgcolor:'#fff';this.$el.css('background-color',bgcolor);},getFirstPageToLoad:function(){var par=Utils.getURLParam();for(var paramName in par){if(paramName=='p'){var pageOrder=parseInt(par[paramName])-1;var pageModel=ProjectModel.instance.get('pages').at(pageOrder);if(pageModel){return pageModel;}}
if(paramName=='darkan_p'){var pageOrder=parseInt(par[paramName]);var pageModel=ProjectModel.instance.get('pages').at(pageOrder);if(pageModel){return pageModel;}}}
var firstPage=ProjectModel.instance.get('pages').at(0);return firstPage;},renderDimentions:function(pageModel){var _that=this;var modelToRender=pageModel||this.model;if(modelToRender){var autoScale=ProjectModel.instance.isAutoScale();if(autoScale){var wrapperWidth=$(window).width();var wrapperHeight=$(window).height();var sceneHeight=parseInt(modelToRender.get('options').get('height'));var sceneWidth=parseInt(modelToRender.get('options').get('width'));var newSceneWidth=wrapperWidth;var newSceneHeight=((sceneHeight*newSceneWidth)/ sceneWidth);if(newSceneHeight<10){newSceneHeight=10;}
if(newSceneHeight>wrapperHeight){newSceneHeight=wrapperHeight;newSceneWidth=(sceneWidth*newSceneHeight)/ sceneHeight;}
this.$el.css({width:'100%',height:'100%'});$('#stage').css({width:newSceneWidth+"px",height:newSceneHeight+"px"});this.renderAllPageComponents();}else{var maxHeight=$(document).height()-30;var skinHeight=parseInt(modelToRender.get('options').get('height'));var maxWidth=$(document).width()-30;var skinWidth=parseInt(modelToRender.get('options').get('width'));var outputHeight=maxHeight<skinHeight?maxHeight:skinHeight;var outputWidth=maxWidth<skinWidth?maxWidth:skinWidth;this.$el.css({width:modelToRender.get('options').get('width')+"px",height:modelToRender.get('options').get('height')+"px"});$('#stage').css({width:outputWidth+2+"px",height:outputHeight+2+"px"});$('#stage').scrollTop(0);var skinWidth=parseInt(outputWidth)+$('.leftbar').width()+$('.rightbar').width()+2;var skinHeight=parseInt(outputHeight)+$('.botbar').height()+$('.topbar').height();$('#skin').css({width:skinWidth+2+"px",height:skinHeight+2+"px"});this.$el.trigger('skin-update-scrollbar');this.$el.trigger('skin-update-position');}}},renderAllPageComponents:function(){this.allPageComponents.each(function(componentModel){var componentView=componentModel.view;if(componentView){componentView.renderComponentDimentions();}});},renderBackgroundImage:function(){var pageBackground=this.getPageBackgroundPath();if(pageBackground){this.$el.css({'background-image':'url(\''+pageBackground+'\')','background-repeat':'no-repeat','background-position':'50% 50%','background-size':'100% 100%'});}else{this.$el.css('background-image','');}},getPageBackgroundPath:function(){return this.model.getPageBackgroundPath();},clearBackground:function(){this.$el.css({'background-image':'','background-color':'#fff'});},startPageLiveTimer:function(){var _that=this;var stageLifetime=parseInt(this.model.get('options').get('stageLifetime'));if(stageLifetime>=0){if(this.pageLiveTime!=undefined){clearTimeout(this.pageLiveTime);}
this.pageLiveTime=setTimeout(function(){_that.pageLiveTimeAreGone();},stageLifetime*1000);}},pageLiveTimeAreGone:function(){this.trigger('on-page-live-time-are-gone',this.model);},setPageAsCompleted:function(pageModel){var options=pageModel.get('options');options.set('compl',1);this.checkCourseStatus();this.trigger('save-lesson-location');},getProjectSoundPath:function(){return ProjectModel.instance.getProjectSoundPath();},getPageSoundPath:function(pageModel){return pageModel.getPageSoundPath();},getAllPageComponents:function(pageModel){return pageModel.getAllPageComponents();},hideProgressBar:function(callback){this.progressBar.hide();},setModel:function(model){this.model=model;this.timeline.setModel({model:model,stage:this});},unmuteAllSounds:function(){this.soundController.unmuteAllSounds();},muteAllSounds:function(){this.soundController.muteAllSounds();},turnOffListeners:function(){for(var i=0;i<this.triggersArray.length;i++){var oneTrigger=this.triggersArray[i];_log('off whendoit',oneTrigger.whendoit);_log('off action',oneTrigger.action);if(oneTrigger.el){if(oneTrigger.whendoit=='keydown'){$(document).off(oneTrigger.whendoit,oneTrigger.action);}else{this.$el.off(oneTrigger.whendoit,oneTrigger.action);}}else{this.off(oneTrigger.whendoit,oneTrigger.action);}};this.triggersArray=[];},destroyStage:function(){if(this.model){this.timeline.destroy();}},showFeedbackWindow:function(title,content,success){var _that=this;if(content.length>0){this.closeFeedbackWindows();var feedbackWindow=new FeedbackView();$(__meta__.darkanContainer).append(feedbackWindow.render({content:content,title:title,success:success}).$el);feedbackWindow.scaleWindow();feedbackWindow.centerWindow();feedbackWindow.on('close',function(){_that.selectLastActiveWcagElement();});feedbackWindow.$el.find('.window-close-button').attr({'aria-label':content+', click to close.'});feedbackWindow.$el.find('.window-close-button').focus();this.feedbackWindow=feedbackWindow;}},closeFeedbackWindows:function(){if(this.feedbackWindow){this.feedbackWindow.close();this.selectFirstWcagElement();this.feedbackWindow=undefined;}},getHeightRatio:function(){return(this.$el.height()/ this.model.get('options').get('height'));},getWidthRatio:function(){return(this.$el.width()/ this.model.get('options').get('width'));},getSmallerRatio:function(){if(this.getHeightRatio()<this.getWidthRatio()){return this.getHeightRatio();}
return this.getWidthRatio();},});;;var ScormController=Backbone.Controller.extend({ajaxUrl:window.location.origin+'/darkan2/lms/server/php/scorm.php',getCourseStatus:function(){var courseStatus=this.model.get('options').get('courseStatus');return courseStatus;},getUserScores:function(){var userScoreObject=TriggerController.instance.getVariableByHash("00000000000000000000000000000000");var userScoreValue=userScoreObject.pvarvalue;return userScoreValue;},getMaxScore:function(){var userScoreObject=TriggerController.instance.getVariableByHash("00000000000000000000000000000001");var maxScoreValue=userScoreObject.pvarvalue;return maxScoreValue;},getDiamonds:function(){var diamondsObject=TriggerController.instance.getVariableByHash("00000000000000000000000000000003");if(diamondsObject){var diamondsValue=diamondsObject.pvarvalue;return diamondsValue;}
return 0;},getSesionTime:function(){var enterTime=this.enterTime;var nowTime=new Date().getTime();var sesionTime=this.convertTotalTimeToMiliseconds(this.sesionTime);_log('enterTime',enterTime);_log('nowTime',nowTime);_log('sesionTime',sesionTime);var totalTime=nowTime-enterTime+sesionTime;var totalTimeConverted=this.convertMilisecondsToTotalTime(totalTime);_log('totalTime',totalTime);_log('totalTimeConverted',totalTimeConverted);return totalTimeConverted;},convertTotalTimeToMiliseconds:function(sesionTime)
{if(!sesionTime){return 0}
var arr=sesionTime.split(':');var h=parseInt(arr[0])*3600;var m=parseInt(arr[1])*60;var s=parseInt(arr[2]);var miliseconds=(h+m+s)*1000;return miliseconds;},convertMilisecondsToTotalTime:function(ts){ts=parseInt(ts / 1000);var sec=(ts%60);ts-=sec;var tmp=(ts%3600);ts-=tmp;sec=Math.round(sec*100)/100;var strSec=new String(sec);var strWholeSec=strSec;var strFractionSec="";if(strSec.indexOf(".")!=-1)
{strWholeSec=strSec.substring(0,strSec.indexOf("."));strFractionSec=strSec.substring(strSec.indexOf(".")+1,strSec.length);}
if(strWholeSec.length<2)
{strWholeSec="0"+strWholeSec;}
strSec=strWholeSec;if(strFractionSec.length)
{strSec=strSec+"."+strFractionSec;}
if((ts%3600)!=0)
var hour=0;else var hour=(ts / 3600);if((tmp%60)!=0)
var min=0;else var min=(tmp / 60);if((new String(hour)).length<2)
hour="0"+hour;if((new String(min)).length<2)
min="0"+min;var rtnVal=hour+":"+min+":"+strSec;return rtnVal;},saveLessonLocation:function(pageOrder){this.lessonLocation=pageOrder;},parseModelToSuspendData:function(){var suspend_data_string={};var user_codes=[];var objects_data=[];var pages_data=[];var quiz_data={};var attempts_data={};var specials_data={};var pagesCollection=this.model.get('pages');pagesCollection.each(function(pModel){if(pModel.get('options').get('compl')===1){if(pages_data.indexOf(pModel.get('options').get('pageid'))===-1){pages_data.push(pModel.get('options').get('pageid'));}}});pagesCollection.each(function(pModel){var lines=pModel.get('lines');lines.each(function(lModel){var components=lModel.get('objects');components.each(function(cModel){var splittedObjectID=cModel.get('actionkey').split("-");var ob_id=splittedObjectID[0];if(user_codes.indexOf(ob_id)===-1){user_codes.push(ob_id);}});});});pagesCollection.each(function(pModel){var lines=pModel.get('lines');lines.each(function(lModel){var components=lModel.get('objects');components.each(function(cModel){var splittedObjectID=cModel.get('actionkey').split("-");if(!_.isUndefined(cModel.get('compl'))&&cModel.get('compl')!=0){var splittedObjectID=cModel.get('actionkey').split("-");var object_code=user_codes.indexOf(splittedObjectID[0])+','+
splittedObjectID[1]+","+
splittedObjectID[2]+","+
cModel.get('compl');objects_data.push(object_code);}
var componentType=cModel.get('type');switch(componentType){case'quiz':case'quiz-dnd':case'quiz-selectone':case'quiz-connectlines':case'quiz-fillinblanks':case'quiz-inputtext':case'quiz-select':case'form-inputtext':case'form-textarea':case'form-select':case'form-radio':case'form-checkbox':var jsonModel=cModel.toJSON();var userSelection=jsonModel.userSelection;var attempts=jsonModel.attempts;var special=jsonModel.scormSpecialData;var objKey=user_codes.indexOf(splittedObjectID[0])+','+
splittedObjectID[1]+','+
splittedObjectID[2];quiz_data[objKey]=userSelection;if(attempts){attempts_data[objKey]=attempts;}
if(special){specials_data[objKey]=special;}
break;}});});});suspend_data_string['uc']=user_codes;suspend_data_string['o']=objects_data;suspend_data_string['p']=pages_data;suspend_data_string['q']=quiz_data;suspend_data_string['a']=attempts_data;suspend_data_string['t']=this.getTimersTime();suspend_data_string['v']=this.getProjectVariables();suspend_data_string['s']=specials_data;_log('save scorm data',suspend_data_string);return JSON.stringify(suspend_data_string);},setLessonLocationFromScorm:function(data){this.model.get('options').set('lessonLocation',data.lessonLocation,{silent:true});},setCourseStatusFromScorm:function(data){this.model.get('options').set('courseStatus',data.courseStatus,{silent:true});},setUserScoreFromScorm:function(data){var userScoreObject=TriggerController.instance.getVariableByHash("00000000000000000000000000000000");userScoreObject.pvarvalue=data.userScore;},parseSuspendDataToModel:function(data){_log('data',data);if(data.suspendData!=''){var scormData=JSON.parse(data.suspendData);var uc=scormData.uc;var p=scormData.p;var t=scormData.t;var a=scormData.a;var v=scormData.v;var s=scormData.s;_log('open scorm data',scormData);this.setLessonLocationFromScorm(data);this.setCourseStatusFromScorm(data);this.setUserScoreFromScorm(data);this.setTimersTime(t);this.setProjectVariables(v);var pagesCollection=this.model.get('pages');pagesCollection.each(function(pModel){var pageId=parseInt(pModel.get('options').get('pageid'));if(scormData.p.indexOf(pageId)!==-1){pModel.get('options').set('compl',1);}
var lines=pModel.get('lines');lines.each(function(lModel){var components=lModel.get('objects');components.each(function(cModel){var actionkey=cModel.get('actionkey');var type=cModel.get('type');_.each(scormData.o,function(obj){var _obj=obj.split(',');var aKey=uc[_obj[0]]+'-'+_obj[1]+'-'+_obj[2];if(actionkey===aKey){cModel.set('compl',_obj[3]);}});var componentType=cModel.get('type');switch(componentType){case'quiz':case'quiz-dnd':case'quiz-selectone':case'quiz-connectlines':case'quiz-fillinblanks':case'quiz-inputtext':case'quiz-select':case'form-inputtext':case'form-textarea':case'form-select':case'form-radio':case'form-checkbox':_.each(scormData.q,function(qData,qKey){var _qKey=qKey.split(',');var qActionkey=uc[_qKey[0]]+'-'+_qKey[1]+'-'+_qKey[2];if(actionkey===qActionkey){cModel.set('userSelection',qData);}});_.each(scormData.a,function(qData,qKey){var _qKey=qKey.split(',');var qActionkey=uc[_qKey[0]]+'-'+_qKey[1]+'-'+_qKey[2];if(actionkey===qActionkey){cModel.set('attempts',qData);}});_log('scormData.s',scormData.s);_.each(scormData.s,function(qData,qKey){var _qKey=qKey.split(',');var qActionkey=uc[_qKey[0]]+'-'+_qKey[1]+'-'+_qKey[2];if(actionkey===qActionkey){cModel.set('scormSpecialData',qData);}});break;}});});});}else{_log('No suspendData',data);}
this.sesionTime=data.sesionTime||'0000:00:00.0';this.enterTime=new Date().getTime();},saveScorm:function(){},loadScorm:function(){},quitScorm:function(){},pagesTime:function(){var pageModel=StageView.instance.model;StageView.instance.pageHandlerTimer('stop',pageModel);StageView.instance.pageHandlerTimer('start',pageModel);var pages_time={};var pagesCollection=this.model.get('pages');pagesCollection.each(function(pModel,i){var timeOnSinglePage=parseInt(pModel.get('options').get('timeOnPage'));var t=!isNaN(timeOnSinglePage)?timeOnSinglePage:0;pages_time[i]=t;});return pages_time;},getTimersTime:function(){var timers={};var timerComponentsCollection=ProjectModel.instance.getTimerComponents();timerComponentsCollection.each(function(tModel){var timerId=tModel.get('timerId');var hours=tModel.get('hours');var minutes=tModel.get('minutes');var seconds=tModel.get('seconds');timers[timerId]={h:hours,m:minutes,s:seconds}});_log('timers',timers);return timers;},getProjectVariables:function(){var variables={};var options=ProjectModel.instance.get('options');variables.s=options.get('staticVariables');variables.p=options.get('projectVariables');return variables;},setProjectVariables:function(variables){var options=ProjectModel.instance.get('options');if(Utils.ObjectLength(variables)){var projectVariables=variables.p;var staticVariables=variables.s;if(projectVariables&&projectVariables.length){options.set('projectVariables',projectVariables);}
if(staticVariables&&staticVariables.length){options.set('staticVariables',staticVariables);}}},setTimersTime:function(timers){_log('setTimersTime',timers);if(timers==undefined)return;for(var item in timers){var timerId=item;var time=timers[item];var hours=parseInt(time.h);var minutes=parseInt(time.m);var seconds=parseInt(time.s);_log('timerId',timerId);var timerComponentsCollection=ProjectModel.instance.getTimerComponentsById(timerId);timerComponentsCollection.each(function(tModel){_log('tModel',tModel);tModel.set('hours',hours);tModel.set('minutes',minutes);tModel.set('seconds',seconds);});}},getCourseData:function(){var scormData={suspendData:this.parseModelToSuspendData(),userScore:this.getUserScores(),courseStatus:this.getCourseStatus(),lessonLocation:this.lessonLocation,pagesTime:JSON.stringify(this.pagesTime()),maxScore:this.getMaxScore(),diamonds:this.getDiamonds(),sesionTime:this.getSesionTime()};return scormData;}});ScormController.create=function(data,onResult){ScormController.createDarkanScormController(data,function(scormController){onResult(scormController);},function(err){ScormController.createLmsScormController(data,function(scormController){onResult(scormController);},function(err){ScormController.createFakeScormController(data,function(scormController){onResult(scormController);},function(err){});});});}
ScormController.createLmsScormController=function(data,onResult,onFault){var scorm=pipwerks.SCORM;var lmsConnected=false;try{lmsConnected=scorm.init();}catch(ex){_log('ERROR',ex);}
if(lmsConnected){var lmsScormController=new LmsScormController({model:data.model,scorm:scorm});onResult(lmsScormController);}else{onFault();}}
ScormController.createDarkanScormController=function(data,onResult,onFault){var scormController;try{var request={request:'checkScorm',pid:___pid,async:false};ScormController.ajax(request,function(responce){scormController=new DarkanScormController({model:data.model,responce:responce});onResult(scormController);},function(responce){onFault();});}catch(err){onFault();}}
ScormController.createFakeScormController=function(data,onResult,onFault){scormController=new FakeScormController({model:data.model});onResult(scormController);}
ScormController.ajax=function(settings,onResult,onFault){_log('SCORM AJAX');var ajaxUrl=_scormServer;var async=true;if(!_.isUndefined(settings.async)){async=settings.async;}
$.ajax({type:'POST',url:ajaxUrl,cache:false,dataType:'text',data:{request:JSON.stringify(settings)},async:async,success:function(data)
{onResult(data);_log('SCORM AJAX SUCCESS');},error:function(e)
{onFault();_log('SCORM AJAX FAULT',e,_log.error);}});};;var LmsScormController=ScormController.extend({initialize:function(data){this.model=data.model;this.scorm=data.scorm;},quitScorm:function(){this.scorm.quit();},saveScorm:function(){var courseData=this.getCourseData();this.scorm.set('cmi.core.lesson_location',courseData.lessonLocation);this.scorm.set('cmi.core.lesson_status',courseData.courseStatus);this.scorm.set('cmi.suspend_data',courseData.suspendData);this.scorm.set('cmi.core.score.raw',courseData.userScore);this.scorm.set('cmi.core.score.max',courseData.maxScore);this.scorm.set('cmi.core.score.diamonds',courseData.diamonds);this.scorm.set('cmi.core.score.min',"0");this.scorm.set('cmi.core.session_time',courseData.sesionTime);this.scorm.save();},loadScorm:function(){var courseData={};courseData.lessonLocation=this.scorm.get('cmi.core.lesson_location');courseData.courseStatus=this.scorm.get('cmi.core.lesson_status');courseData.suspendData=this.scorm.get('cmi.suspend_data');courseData.userScore=this.scorm.get('cmi.core.score.raw');courseData.maxScore=this.scorm.get('cmi.core.score.max');courseData.minScore=0;courseData.sesionTime='0000:00:00.0';this.parseSuspendDataToModel(courseData);this.trigger('on-load-scorm-data');}});;;var DarkanScormController=ScormController.extend({initialize:function(data){this.model=data.model;this.responce=data.responce;},saveScorm:function(async){var params=this.getURLParameters();var mailingLogin=null;for(var paramName in params){if(paramName=='mh'){mailingLogin=params[paramName];}}
var courseData=this.getCourseData();var request=courseData;request.request='saveScorm';request.mailingLogin=mailingLogin;request.pid=___pid;request.uid=Utils.getCookie('d2uid');request.async=async;ScormController.ajax(request,function(data){},function(data){});},loadScorm:function(){var _that=this;var params=this.getURLParameters();var mailingLogin=null;for(var paramName in params){if(paramName=='mh'){mailingLogin=params[paramName];}}
var request={request:'getScorm',mailingLogin:mailingLogin,pid:___pid,uid:Utils.getCookie('d2uid')};ScormController.ajax(request,function(data){try{var objectData=JSON.parse(data);_that.parseSuspendDataToModel(objectData);_that.setPagesTime(objectData);_that.trigger('on-load-scorm-data');}catch(e){_that.trigger('on-load-scorm-data');}},function(data){});},setPagesTime:function(data){if(data.pagesTime!=''){var pagesTime=JSON.parse(data.pagesTime);_log('PAGES TIMES',pagesTime);var pagesCollection=this.model.get('pages');pagesCollection.each(function(pModel,i){if(!_.isUndefined(pagesTime[i])){_log('podmieniam czasy na stronie ',i);_log('ustawiam czas na ',pagesTime[i]);pModel.get('options').set('timeOnPage',pagesTime[i]);}else{_log('nie wykryłem strony',i);}});}},getURLParameters:function(){var url=window.location.search.substring(0);var result={};var searchIndex=url.indexOf("?");if(searchIndex==-1)return result;var sPageURL=url.substring(searchIndex+1);var sURLVariables=sPageURL.split('&');for(var i=0;i<sURLVariables.length;i++)
{var sParameterName=sURLVariables[i].split('=');result[sParameterName[0]]=sParameterName[1];}
return result;}});;;var FakeScormController=ScormController.extend({cyc:123,initialize:function(data){this.model=data.model;},saveScorm:function(){},loadScorm:function(){this.trigger('on-load-scorm-data');}});;;var SkinController=Backbone.View.extend({el:$('#skin'),muted:false,events:{'click #next':'goToNextPage','click #previous':'goToPreviousPage','skin-update-scrollbar':'updateScroller','skin-update-position':'centerCourseScreen','stage-model-changed':'stageModelChanged','click #helpbtn':'showHelpWindow','click #glossarybtn':'showGlossaryWindow','click #glossarybtn-demo':'showGlossaryWindowDemo','click #speakerbtn':'muteUnmute','click #speakerbtn':'muteUnmute','click #fullscreen':'handleFullscreen','click #closebtn':'closeWindow','click #toc':'showTableOfContents'},fullscreenMode:false,showCourse:function(){this.$el.css({visibility:'visible',overflow:'visible'});},closeWindow:function(){top.close();},muteUnmute:function(){if(this.muted){this.unmute();this.$el.find('#speakerbtn').attr('off',false);this.trigger('unmute-all-sounds');}else{this.mute();this.$el.find('#speakerbtn').attr('off',true);this.trigger('mute-all-sounds');}},mute:function(){this.muted=true;},unmute:function(){this.muted=false;},stageModelChanged:function(e,pageModel){var pageOrder=pageModel.collection.indexOf(pageModel)+1;this.updateCounter(pageOrder,pageModel.collection.length);this.updateProgressbar(pageOrder,pageModel.collection.length);},updateCounter:function(pageNumber,allPagesNumber){this.$el.find('#counter').text(pageNumber+"/"+allPagesNumber);},updateProgressbar:function(pageNumber,allPagesNumber){var progressbar=this.$el.find('#progressbar');progressbar.find('#progressbar-inside').css({width:((pageNumber / allPagesNumber)*100)+"%"});},updateScroller:function(){},showHelpWindow:function(){var content='';var windowData={title:"Help",content:content};var windowModel=new WindowModel({type:"modal",modal:true});var windowView=new WindowView({windowModel:windowModel});$(__meta__.darkanContainer).append(windowView.render(windowData).$el);windowView.$el.addClass('helpwindow');windowView.centerWindow();},showGlossaryWindow:function(isDemo){var url='https://darkan.eu/dictionary/';if(isDemo===true){url='https://darkan.eu/demodict/';}
var content='<iframe width="800" frameBorder="0" height="100%" src="'+url+'"></iframe>';var windowData={title:"Słownik",content:content};var windowModel=new WindowModel({type:"modal",modal:true});var windowView=new WindowView({windowModel:windowModel});$(__meta__.darkanContainer).append(windowView.render(windowData).$el);windowView.$el.find('.window-content').css({'padding':'0px','overflow':'hidden',});windowView.$el.css({'height':'500px'});windowView.centerWindow();},showGlossaryWindowDemo:function(){this.showGlossaryWindow(true);},centerCourseScreen:function(){var autoScale=ProjectModel.instance.isAutoScale();if(!autoScale){var skinHeight=this.$el.height();var windowHeight=$(window).height();var topCalculated=((windowHeight/2)-(skinHeight/2));if(topCalculated<0){topCalculated=0;}
this.$el.css({top:topCalculated+"px"});if(this.fullscreenMode){this.setScale(this.$el,this.fullscreenScale());}}},initialize:function(){var _that=this;this.applyScrollbar();this.centerCourseScreen();this.addFullscreenEvents();this.renderSidebarToc();},highlightActiveTocItem:function(pageModel){_log('page model highlightActiveTocItem',pageModel);var pageId=pageModel.get('options').get('pageid');this.$el.find('.sidebar-toc .sidebar-toc-item').removeClass('active');this.$el.find('.sidebar-toc .toc-item[pid="'+pageId+'"] .sidebar-toc-item').addClass('active');},renderSidebarToc:function(){var _that=this;var pages=this.model.get('pages');var tocList=this.$el.find('.sidebar-toc ul');pages.each(function(pModel,order){var pageName=pModel.get('options').get('pagename');var pageOrder=pModel.collection.indexOf(pModel)+1;var pageID=pModel.get('options').get('pageid');var listItem=$('<li></li>',{ord:order,pid:pageID,class:'toc-item'});listItem.html('<div class="sidebar-toc-item">'+pageName+'</div>');listItem.click(function(){_that.trigger('go-to-page-order',parseInt($(this).attr('ord')));})
tocList.append(listItem);});},showTableOfContents:function(){var _that=this;var windowModel=new TocWindowModel({type:"modal",modal:true});var windowView=new TocWindowView({windowModel:windowModel,model:this.model});windowView.on('go-to-page-order',function(pageOrder){_that.goToPageByOrder(pageOrder);});$(__meta__.darkanContainer).append(windowView.render().$el);windowView.centerWindow();},goToPageByOrder:function(order){this.trigger('go-to-page-order',order);},goToNextPage:function(e){var locked=$(e.target).attr('locked')=="true"?true:false;if(!locked){this.trigger('go-to-next-page');}},goToPreviousPage:function(e){var locked=$(e.target).attr('locked')=="true"?true:false;if(!locked){this.trigger('go-to-previous-page');}},applyScrollbar:function(){},handleFullscreen:function(e){var _that=this;if(typeof document.fullscreen!=="undefined"){(document.fullscreen)?_that.exitFullscreen():_that.launchFullscreen(document.documentElement);}
if(typeof document.mozFullScreen!=="undefined"){(document.mozFullScreen)?_that.exitFullscreen():_that.launchFullscreen(document.documentElement);}
if(typeof document.webkitIsFullScreen!=="undefined"){(document.webkitIsFullScreen)?_that.exitFullscreen():_that.launchFullscreen(document.documentElement);}
if(typeof document.msFullscreenElement!=="undefined"){(document.msFullscreenElement)?_that.exitFullscreen():_that.launchFullscreen(document.documentElement);}},addFullscreenEvents:function(){var _that=this;document.addEventListener("fullscreenchange",function(){setTimeout(function(){var frame=_that.$el;(document.fullscreen)?_that.setScale(frame,_that.fullscreenScale()):_that.setScale(frame,1);},500);},false);document.addEventListener("mozfullscreenchange",function(){setTimeout(function(){var frame=_that.$el;(document.mozFullScreen)?_that.setScale(frame,_that.fullscreenScale()):_that.setScale(frame,1);},500);},false);document.addEventListener("webkitfullscreenchange",function(){setTimeout(function(){var frame=_that.$el;(document.webkitIsFullScreen)?_that.setScale(frame,_that.fullscreenScale()):_that.setScale(frame,1);},500);},false);document.addEventListener("MSFullscreenChange",function(){setTimeout(function(){var frame=_that.$el;(document.msFullscreenElement)?_that.setScale(frame,_that.fullscreenScale()):_that.setScale(frame,1);},500);},false);},setScale:function(obj,val)
{var scaleValue='scale('+val+')';obj.css("-webkit-transform",scaleValue).css("-moz-transform",scaleValue).css("-ms-transform",scaleValue).css("-o-transform",scaleValue).css("transform",scaleValue);scaleFactor=val;_log('scaleFactor: '+scaleFactor);},launchFullscreen:function(element){this.fullscreenMode=true;$('#fullscreen').addClass('fullscreen-exit');if(element.requestFullscreen){element.requestFullscreen();}else if(element.mozRequestFullScreen){element.mozRequestFullScreen();}else if(element.webkitRequestFullscreen){element.webkitRequestFullscreen();}else if(element.msRequestFullscreen){element.msRequestFullscreen();}},exitFullscreen:function(){var _that=this;this.fullscreenMode=false;$('#fullscreen').removeClass('fullscreen-exit');if(document.exitFullscreen){document.exitFullscreen();}else if(document.mozCancelFullScreen){document.mozCancelFullScreen();}else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}else if(document.msExitFullscreen){document.msExitFullscreen();}},fullscreenScale:function(){var ifcontent=$('#skin');var ww=$(window).width()-20;var wh=$(window).height()-20;var iw=ifcontent.width();var ih=ifcontent.height();var w=ww / iw;var h=wh / ih;if(w>h){w=h;}
return w;}});;;var CourseController=Backbone.Controller.extend({timeline:new TimelineController(),model:new ProjectModel(),swipeOptions:{minDistance:100,maxDuration:200},initialize:function(){var _that=this;var darkanCourseAplicationAPI=DarkanCourseAplicationAPI.getInstance();darkanCourseAplicationAPI.connect();ScormController.create({model:this.model},function(scormController){_that.onConnectedToScorm(scormController);});var saved=false;window.onbeforeunload=function(e){if(!saved){_that.checkCompletionStatus();_that.saveScorm(false);_that.quitScorm();saved=true;}
return null;}
window.unload=function(e){if(!saved){_that.checkCompletionStatus();_that.saveScorm(false);_that.quitScorm();saved=true;}
return null;}},onConnectedToScorm:function(scormController){var _that=this;this.scormController=scormController;ScormController.instance=this.scormController;this.scormController.on('go-to-page-order',function(order){_that.goToPageByOrder(order);});this.scormController.on('on-load-scorm-data',function(){_that.onLoadScormData();});this.listenTo(this.model.get('options'),'change:courseStatus',this.saveScorm);TriggerController.instance.setProjectModel(this.model);this.scormController.loadScorm();this.addKeyboardListener();var darkanCourseAplicationAPI=DarkanCourseAplicationAPI.getInstance();var pagesLength=this.model.get('pages').length;darkanCourseAplicationAPI.projectLoaded({pagesLength:pagesLength});},addKeyboardListener:function(){var _that=this;},onPageLiveTimeAreGone:function(pageModel){var options=pageModel.get('options');var goToNextPage=options.get('goToNextPage');var highlightButtons=options.get('highlightButtons');var locknavi=options.get('locknavi');if(goToNextPage){this.goToNextPage();}
if(highlightButtons){this.highlightNavigationButtons();}
if(locknavi){this.unlockNavigationButtons();}},highlightNavigationButtons:function(){$('#next').attr('highlight',true);$('#previous').attr('highlight',true);},unlockNavigationButtons:function(){this.stage.unlockNavigationButtons();},onLoadScormData:function(){var _that=this;var soundController=null;if(this.model.get('options').get('load_every_sound_at_start')){soundController=new AudioManager();$(__meta__.darkanContainer).append(soundController.render().$el);}else{soundController=new SoundController();}
this.stage=new StageView();StageView.instance=this.stage;this.stage.soundController=soundController;this.stage.on('check-course-status',function(){_that.checkCompletionStatus();});this.stage.on('save-lesson-location',function(){_that.saveLessonLocation();});this.stage.on('on-page-live-time-are-gone',this.onPageLiveTimeAreGone,this);this.stage.on('on-before-page-load',this.onBeforePageLoad,this);this.stage.on('on-before-page-load2',this.onBeforePageLoad2,this);this.stage.hideProgressBar();this.skin=new SkinController({model:this.model});this.skin.on('go-to-next-page',function(){_that.goToNextPage();});this.skin.on('go-to-previous-page',function(){_that.goToPreviousPage();});this.skin.on('go-to-page-order',function(order){_that.goToPageByOrder(order);});this.skin.on('mute-all-sounds',function(){_that.stage.muteAllSounds();});this.skin.on('unmute-all-sounds',function(){_that.stage.unmuteAllSounds();});this.model.on('go-to-page-model',function(pageModel){_that.goToPageByModel(pageModel);});this.model.on('go-to-next-page',function(){_that.goToNextPage();});this.model.on('go-to-previous-page',function(){_that.goToPreviousPage();});var pageToLoad=this.getFirstPageToLoad();if(Utils.isMobile()&&this.pageHasAnySound(pageToLoad)){this.showStartButton();this.stage.on('mobile-start',function(){_that.startFirstLoad();});}else{_that.startFirstLoad();}
this.showContinueWindow();},pageHasAnySound:function(pageModel){var hasAnySound=false;var pageSound=this.stage.getPageSoundPath(pageModel);if(pageSound){hasAnySound=true;}
var projectSound=this.stage.getProjectSoundPath();if(projectSound){hasAnySound=true;}
var allPageComponents=this.stage.getAllPageComponents(pageModel);allPageComponents.each(function(componentModel){var componentView=componentModel.view;var componentSound=componentView.getComponentSoundFile();if(componentSound){hasAnySound=true;return;}});return hasAnySound;},startFirstLoad:function(){var _that=this;if(this.model.get('options').get('load_every_sound_at_start')){if(navigator.userAgent.toLowerCase().indexOf('firefox')>-1){this.stage.soundController.createComponetsAudios();this.stage.soundController.createPagesAudios();this.stage.soundController.createProjectAudios();this.stage.soundController.playAndPauseAllAudiosForMobile();this.activeFirstPage();}else{this.stage.soundController.on('on-proggress',function(data){_log('on-proggress data',data);},this);this.stage.soundController.on('on-complete',this.activeFirstPage,this);this.stage.soundController.createComponetsAudios();this.stage.soundController.createPagesAudios();this.stage.soundController.createProjectAudios();this.stage.soundController.playAndPauseAllAudiosForMobile();}}
if(!this.model.get('options').get('load_every_sound_at_start')){this.activeFirstPage();}},activeFirstPage:function(){var pageToLoad=this.getFirstPageToLoad();var loadEveryPageAtStart=ProjectModel.instance.get('options').get('load_every_page_at_start');this.stage.beforeLoadPage(pageToLoad);this.skin.showCourse();this.stage.renderDimentions(pageToLoad);},onBeforePageLoad:function(pageToLoad){this.stage.model=pageToLoad;var _that=this;if(!pageToLoad.isLoaded){var proggressBar=this.createProggressBar();proggressBar.on('on-complete',function(e){_that.onCompleteLoading(e)},this);proggressBar.loadPage(pageToLoad);}else{this.resetProgressBar();this.stage.loadPage3(pageToLoad);}
this.skin.highlightActiveTocItem(pageToLoad);},onBeforePageLoad2:function(pageToLoad){this.stage.model=pageToLoad;var _that=this;if(!pageToLoad.isLoaded){var proggressBar=this.createProggressBar();proggressBar.on('on-complete',function(e){_that.onCompleteLoading(e)},this);proggressBar.loadPage(pageToLoad);}else{this.resetProgressBar();this.stage.loadPage2(pageToLoad);}
this.skin.highlightActiveTocItem(pageToLoad);},onCompleteLoading:function(pageToLoad){_log('pageToLoad',pageToLoad);this.resetProgressBar();this.stage.loadPage2(pageToLoad);if(!this.skin.skinInitialied){this.stage.renderDimentions(pageToLoad);this.skin.skinInitialied=true;}
var pageIndex=pageToLoad.collection.indexOf(pageToLoad);var pageId=pageToLoad.get('options').get('pageid');var darkanCourseAplicationAPI=DarkanCourseAplicationAPI.getInstance();darkanCourseAplicationAPI.onCompleteLoadingPage({pageIndex:pageIndex,pageId:pageId});},resetProgressBar:function(e){if(this.proggressBar){this.proggressBar.cancel();}},closeProgressBar:function(e){if(this.proggressBar){this.proggressBar.close();}},createProggressBar:function(e){this.resetProgressBar();var proggressBar=this.proggressBar||WindowFactory.createProggressBarWindow();this.skin.$el.append(proggressBar.render().$el);this.proggressBar=proggressBar;return proggressBar;},createProggressBarNoModal:function(e){_log('createProggressBar');var proggressBar=this.proggressBar;_log('proggressBar',proggressBar,_log.error);if(proggressBar){proggressBar.cancel();}
proggressBar=WindowFactory.createProggressBarWindowNoModal();this.skin.$el.append(proggressBar.render().$el);this.proggressBar=proggressBar;return proggressBar;},saveScorm:function(async){this.scormController.saveScorm(async);},quitScorm:function(){this.scormController.quitScorm();},saveLessonLocation:function(){var pageOrderToSave=this.stage.model.collection.indexOf(this.stage.model);this.scormController.saveLessonLocation(pageOrderToSave);this.checkCompletionStatus();this.saveScorm(true);},checkCompletionStatus:function(){var pagesCompleted=true;var scoreCompleted=true;var pagesCompletionStatus=this.getPagesCompletionStatus();var scoreCompletionStatus=this.getScoreCompletionStatus();var projectOptions=this.model.get('options').toJSON();if(projectOptions.require_pages&&!pagesCompletionStatus){pagesCompleted=false;}
if(projectOptions.require_score&&!scoreCompletionStatus){scoreCompleted=false;}
if(pagesCompleted&&scoreCompleted){this.model.get('options').set('courseStatus','passed');return;}
if(this.allQuizComponentsAreAnswered()&&!scoreCompleted){this.model.get('options').set('courseStatus','failed');return;}},allQuizComponentsAreAnswered:function(collection,maxPoints,collectionType){var _that=this;var allQuestionsAreAnswered=true;var pagesCollection=this.model.get('pages');pagesCollection.each(function(pModel){var lines=pModel.get('lines');lines.each(function(lModel){var components=lModel.get('objects');components.each(function(cModel){if(cModel.get('type').substr(0,4)==="quiz"){if(_that.questionHasScoreApplied(cModel)&&cModel.get('compl')==0){allQuestionsAreAnswered=false;}}});});});return allQuestionsAreAnswered;},questionHasScoreApplied:function(qModel){var _that=this;var questionHasScoreApplied=false;var triggers=qModel.get('triggers');_.each(triggers,function(trigger){var subtriggers=trigger.subtriggers;_.each(subtriggers,function(subtrigger){var objs=subtrigger.objs;if(objs.varName==='00000000000000000000000000000000'&&objs.varAction==='add'){var varValue=parseInt(objs.varValue);if(varValue>0){questionHasScoreApplied=true;}}});});return questionHasScoreApplied;},getPagesCompletionStatus:function(){var allPagesAreCompleted=true;var pagesCollection=this.model.get('pages');pagesCollection.each(function(pModel){if(pModel.get('options').get('compl')!==1){allPagesAreCompleted=false;}});return allPagesAreCompleted;},getScoreCompletionStatus:function(){var userScoreObject=TriggerController.instance.getVariableByHash("00000000000000000000000000000000");var userScoreValue=parseFloat(userScoreObject.pvarvalue);var projectOptions=this.model.get('options').toJSON();var maxScore=parseFloat(projectOptions.max_points_number);var requiredScore=parseFloat(projectOptions.require_score_points);if(userScoreValue>=requiredScore){return true;}
return false;},showStartButton:function(){var _that=this;var startButton=$('.mobilestart-btn');$('.mobilestart-overlay').css({height:$(document).height()+'px'});startButton.click(function(){_that.startFirstLoad();$('.mobilestart-overlay').fadeOut(500);})
$('.mobilestart-overlay').show();},autoLoadFirstPage:function(){var pageToLoad=this.getFirstPageToLoad();this.stage.loadPage(pageToLoad);this.showContinueWindow();},showContinueWindow:function(){var _that=this;var options=this.model.get('options');var lessonLocationNavigation=options.get('lessonLocationNavigation');switch(lessonLocationNavigation){case'0':break;case'1':var pageOrder=parseInt(options.get('lessonLocation'));if(isNaN(pageOrder)){return;}
if(!_.isNumber(pageOrder)){return;}
if(pageOrder==0){return;}
setTimeout(function(){_that.goToPageByOrder(pageOrder);},1000);break;case'2':var pageOrder=parseInt(options.get('lessonLocation'));if(isNaN(pageOrder)){return;}
if(!_.isNumber(pageOrder)){return;}
if(pageOrder==0){return;}
var windowData={title:options.get('useLessonLocationDefaultPopupTitle')?_lang('PUB_LASTPAGE_CONTINUE'):options.get('lessonLocationPopupTitle'),content:options.get('useLessonLocationDefaultPopupDescription')?_lang('PUB_LASTPAGE')+(pageOrder+1)+" )":options.get('lessonLocationPopupDescription')};var windowModel=new ContinueWindowModel({type:"modal",modal:true});var windowView=new ContinueWindowView({windowModel:windowModel});windowView.on('open-last-visited-page',function(){_that.goToPageByOrder(pageOrder);});$(__meta__.darkanContainer).append(windowView.render(windowData).$el);windowView.centerWindow();break;}},goToPageByOrder:function(order){var pageToLoad=this.model.get('pages').at(order);if(pageToLoad){this.stage.loadPage(pageToLoad);}},goToPageByModel:function(pageToLoad,direction){_log('Go to page',pageToLoad);if(pageToLoad&&this.checkPageVisible(pageToLoad)){this.stage.loadPage(pageToLoad);}else{var activePageOrder=pageToLoad.collection.indexOf(pageToLoad);if(activePageOrder!=-1&&direction){if(direction=='next'){pageToLoad=this.model.get('pages').at(activePageOrder+1);}
if(direction=='prev'){pageToLoad=this.model.get('pages').at(activePageOrder-1);}
this.goToPageByModel(pageToLoad,direction);}}},getFirstPageToLoad:function(){var par=Utils.getURLParam();for(var paramName in par){if(paramName=='p'){var pageOrder=parseInt(par[paramName])-1;var pageModel=this.model.get('pages').at(pageOrder);if(pageModel){return pageModel;}}
if(paramName=='darkan_p'){var pageOrder=parseInt(par[paramName]);var pageModel=this.model.get('pages').at(pageOrder);if(pageModel){return pageModel;}}}
var firstPage=this.model.get('pages').at(0);return firstPage;},goToNextPage:function(){var activePageOrder=this.stage.model.collection.indexOf(this.stage.model);var pageToLoad=this.model.get('pages').at(activePageOrder+1);if(pageToLoad){this.goToPageByModel(pageToLoad,'next');}},goToPreviousPage:function(){var activePageOrder=this.stage.model.collection.indexOf(this.stage.model);var pageToLoad=this.model.get('pages').at(activePageOrder-1);if(pageToLoad){this.goToPageByModel(pageToLoad,'prev');}},checkPageVisible:function(pageModel){if(pageModel.get('options').get('active')){return true;}else{return false;}}});;;var courseController=new CourseController();;