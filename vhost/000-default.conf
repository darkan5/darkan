NameVirtualHost *:443

<VirtualHost *:443>
DocumentRoot /var/www/darkan
SSLEngine on
SSLCertificateFile /etc/letsencrypt/live/darkan.eu/cert.pem
SSLCertificateKeyFile /etc/letsencrypt/live/darkan.eu/privkey.pem
SSLCertificateChainFile /etc/letsencrypt/live/darkan.eu/chain.pem

</VirtualHost>
<VirtualHost *:80>
DocumentRoot /var/www/darkan
RewriteEngine on
# Redirect domain and www to HTTPS
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} =darkan.eu [or]
RewriteCond %{HTTP_HOST} =www.darkan.eu
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
# Redirect wildcard subdomains to HTTP
RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^(.+)\.darkan\.eu$ [NC]
RewriteCond %{HTTP_HOST} !=www.darkan.eu
RewriteRule (.*) http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</VirtualHost>
<VirtualHost *:80>
	ServerAdmin t.wisniewski@rapsody.com.pl
	ServerName www.darkan.eu
	ServerAlias darkan.eu *.darkan.eu

SSLEngine on
SSLCertificateFile /etc/letsencrypt/live/darkan.eu/cert.pem
SSLCertificateKeyFile /etc/letsencrypt/live/darkan.eu/privkey.pem
SSLCertificateChainFile /etc/letsencrypt/live/darkan.eu/chain.pem

	DocumentRoot /var/www/darkan
	<Directory />
		Options FollowSymLinks
		AllowOverride All
		DirectoryIndex index.php index.html
	</Directory>
#	<Directory /var/www/>
#		Options Indexes FollowSymLinks MultiViews
#		AllowOverride All
#		Order allow,deny
#		allow from all
#	</Directory>

	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
	<Directory "/usr/lib/cgi-bin">
		AllowOverride None
		Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
		Order allow,deny
		Allow from all
	</Directory>

	ErrorLog ${APACHE_LOG_DIR}/error.log

	# Possible values include: debug, info, notice, warn, error, crit,
	# alert, emerg.
	LogLevel warn

	CustomLog ${APACHE_LOG_DIR}/access.log combined

	#<Directory /var/www/darkan/bugzilla>
	 #   AddHandler cgi-script .cgi
	 #   Options +Indexes +ExecCgi
	 #   DirectoryIndex index.cgi
	 #   AllowOverride All FileInfo Indexes
#	</Directory>
#	<Directory /var/www/darkan/redmine>
 #       RailsBaseURI /redmine
 #       PassengerResolveSymlinksInDocumentRoot on
  #  </Directory>
</VirtualHost>

#NameVirtualHost smartlearnapp.eu

#<VirtualHost smartlearnapp.eu>
#	ServerAdmin p.wiecaszek@rapsody.com.pl
#	ServerName www.smartlearnapp.eu
#	ServerAlias smartlearnapp.me *.smartlearnapp.me
#	DocumentRoot /mnt/www/darkan/smartlearnapp/
#	<Directory />
#		Options FollowSymLinks
#		AllowOverride All
#		DirectoryIndex index.php index.html
#	</Directory>
#	<Directory /var/www/>
#		Options Indexes FollowSymLinks MultiViews
#		AllowOverride All
#		Order allow,deny
#		allow from all
#	</Directory>
#
#	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
#	<Directory "/usr/lib/cgi-bin">
#		AllowOverride None
#		Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
#		Order allow,deny
#		Allow from all
#	</Directory>
#
#	# Possible values include: debug, info, notice, warn, error, crit,
#	# alert, emerg.
#	LogLevel warn
#
#	CustomLog ${APACHE_LOG_DIR}/access_smartlearnapp.log combined
#
#	ErrorLog ${APACHE_LOG_DIR}/error_smartlearnapp.log
#
#
#</VirtualHost>
